{"version":3,"names":["hasBlockSupport","parseWithAttributeSchema","ARIA_LABEL_ATTR_SCHEMA","type","source","selector","attribute","getHTMLRootElementAriaLabel","innerHTML","parsed","fixAriaLabel","blockAttributes","blockType","modifiedBlockAttributes","ariaLabel"],"sources":["@wordpress/blocks/src/api/parser/fix-aria-label.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport { hasBlockSupport } from '../registration';\nimport { parseWithAttributeSchema } from './get-block-attributes';\n\nconst ARIA_LABEL_ATTR_SCHEMA = {\n\ttype: 'string',\n\tsource: 'attribute',\n\tselector: '[data-aria-label] > *',\n\tattribute: 'aria-label',\n};\n\n/**\n * Given an HTML string, returns the aria-label attribute assigned to\n * the root element in the markup.\n *\n * @param {string} innerHTML Markup string from which to extract the aria-label.\n *\n * @return {string} The aria-label assigned to the root element.\n */\nexport function getHTMLRootElementAriaLabel( innerHTML ) {\n\tconst parsed = parseWithAttributeSchema(\n\t\t`<div data-aria-label>${ innerHTML }</div>`,\n\t\tARIA_LABEL_ATTR_SCHEMA\n\t);\n\treturn parsed;\n}\n\n/**\n * Given a parsed set of block attributes, if the block supports ariaLabel\n * and an aria-label attribute is found, the aria-label attribute is assigned\n * to the block attributes.\n *\n * @param {Object} blockAttributes Original block attributes.\n * @param {Object} blockType       Block type settings.\n * @param {string} innerHTML       Original block markup.\n *\n * @return {Object} Filtered block attributes.\n */\nexport function fixAriaLabel( blockAttributes, blockType, innerHTML ) {\n\tif ( ! hasBlockSupport( blockType, 'ariaLabel', false ) ) {\n\t\treturn blockAttributes;\n\t}\n\tconst modifiedBlockAttributes = { ...blockAttributes };\n\tconst ariaLabel = getHTMLRootElementAriaLabel( innerHTML );\n\tif ( ariaLabel ) {\n\t\tmodifiedBlockAttributes.ariaLabel = ariaLabel;\n\t}\n\treturn modifiedBlockAttributes;\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,eAAe,QAAQ,iBAAiB;AACjD,SAASC,wBAAwB,QAAQ,wBAAwB;AAEjE,MAAMC,sBAAsB,GAAG;EAC9BC,IAAI,EAAE,QAAQ;EACdC,MAAM,EAAE,WAAW;EACnBC,QAAQ,EAAE,uBAAuB;EACjCC,SAAS,EAAE;AACZ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,2BAA2BA,CAAEC,SAAS,EAAG;EACxD,MAAMC,MAAM,GAAGR,wBAAwB,CACtC,wBAAyBO,SAAS,QAAS,EAC3CN,sBACD,CAAC;EACD,OAAOO,MAAM;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAAEC,eAAe,EAAEC,SAAS,EAAEJ,SAAS,EAAG;EACrE,IAAK,CAAER,eAAe,CAAEY,SAAS,EAAE,WAAW,EAAE,KAAM,CAAC,EAAG;IACzD,OAAOD,eAAe;EACvB;EACA,MAAME,uBAAuB,GAAG;IAAE,GAAGF;EAAgB,CAAC;EACtD,MAAMG,SAAS,GAAGP,2BAA2B,CAAEC,SAAU,CAAC;EAC1D,IAAKM,SAAS,EAAG;IAChBD,uBAAuB,CAACC,SAAS,GAAGA,SAAS;EAC9C;EACA,OAAOD,uBAAuB;AAC/B","ignoreList":[]}