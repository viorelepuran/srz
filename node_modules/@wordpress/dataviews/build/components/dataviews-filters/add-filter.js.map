{"version":3,"names":["_components","require","_i18n","_element","_lockUnlock","_jsxRuntime","Menu","unlock","componentsPrivateApis","AddFilterMenu","filters","view","onChangeView","setOpenedFilter","triggerProps","inactiveFilters","filter","isVisible","jsxs","children","jsx","TriggerButton","Popover","map","Item","onClick","field","page","value","undefined","operator","operators","ItemLabel","name","AddFilter","ref","length","every","isPrimary","render","Button","accessibleWhenDisabled","size","className","variant","disabled","__","_default","exports","default","forwardRef"],"sources":["@wordpress/dataviews/src/components/dataviews-filters/add-filter.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport type { Ref } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tprivateApis as componentsPrivateApis,\n\tButton,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport type { NormalizedFilter, View } from '../../types';\n\nconst { Menu } = unlock( componentsPrivateApis );\n\ninterface AddFilterProps {\n\tfilters: NormalizedFilter[];\n\tview: View;\n\tonChangeView: ( view: View ) => void;\n\tsetOpenedFilter: ( filter: string | null ) => void;\n}\n\nexport function AddFilterMenu( {\n\tfilters,\n\tview,\n\tonChangeView,\n\tsetOpenedFilter,\n\ttriggerProps,\n}: AddFilterProps & {\n\ttriggerProps: React.ComponentProps< typeof Menu.TriggerButton >;\n} ) {\n\tconst inactiveFilters = filters.filter( ( filter ) => ! filter.isVisible );\n\treturn (\n\t\t<Menu>\n\t\t\t<Menu.TriggerButton { ...triggerProps } />\n\t\t\t<Menu.Popover>\n\t\t\t\t{ inactiveFilters.map( ( filter ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\tkey={ filter.field }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tsetOpenedFilter( filter.field );\n\t\t\t\t\t\t\t\tonChangeView( {\n\t\t\t\t\t\t\t\t\t...view,\n\t\t\t\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\t\t\t\tfilters: [\n\t\t\t\t\t\t\t\t\t\t...( view.filters || [] ),\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tfield: filter.field,\n\t\t\t\t\t\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\t\t\t\t\t\toperator: filter.operators[ 0 ],\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Menu.ItemLabel>{ filter.name }</Menu.ItemLabel>\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</Menu.Popover>\n\t\t</Menu>\n\t);\n}\n\nfunction AddFilter(\n\t{ filters, view, onChangeView, setOpenedFilter }: AddFilterProps,\n\tref: Ref< HTMLButtonElement >\n) {\n\tif ( ! filters.length || filters.every( ( { isPrimary } ) => isPrimary ) ) {\n\t\treturn null;\n\t}\n\tconst inactiveFilters = filters.filter( ( filter ) => ! filter.isVisible );\n\treturn (\n\t\t<AddFilterMenu\n\t\t\ttriggerProps={ {\n\t\t\t\trender: (\n\t\t\t\t\t<Button\n\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\tclassName=\"dataviews-filters-button\"\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tdisabled={ ! inactiveFilters.length }\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tchildren: __( 'Add filter' ),\n\t\t\t} }\n\t\t\t{ ...{ filters, view, onChangeView, setOpenedFilter } }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( AddFilter );\n"],"mappings":";;;;;;;AAQA,IAAAA,WAAA,GAAAC,OAAA;AAIA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AAKA,IAAAG,WAAA,GAAAH,OAAA;AAA2C,IAAAI,WAAA,GAAAJ,OAAA;AAlB3C;AACA;AACA;;AAGA;AACA;AACA;;AAQA;AACA;AACA;;AAIA,MAAM;EAAEK;AAAK,CAAC,GAAG,IAAAC,kBAAM,EAAEC,uBAAsB,CAAC;AASzC,SAASC,aAAaA,CAAE;EAC9BC,OAAO;EACPC,IAAI;EACJC,YAAY;EACZC,eAAe;EACfC;AAGD,CAAC,EAAG;EACH,MAAMC,eAAe,GAAGL,OAAO,CAACM,MAAM,CAAIA,MAAM,IAAM,CAAEA,MAAM,CAACC,SAAU,CAAC;EAC1E,oBACC,IAAAZ,WAAA,CAAAa,IAAA,EAACZ,IAAI;IAAAa,QAAA,gBACJ,IAAAd,WAAA,CAAAe,GAAA,EAACd,IAAI,CAACe,aAAa;MAAA,GAAMP;IAAY,CAAI,CAAC,eAC1C,IAAAT,WAAA,CAAAe,GAAA,EAACd,IAAI,CAACgB,OAAO;MAAAH,QAAA,EACVJ,eAAe,CAACQ,GAAG,CAAIP,MAAM,IAAM;QACpC,oBACC,IAAAX,WAAA,CAAAe,GAAA,EAACd,IAAI,CAACkB,IAAI;UAETC,OAAO,EAAGA,CAAA,KAAM;YACfZ,eAAe,CAAEG,MAAM,CAACU,KAAM,CAAC;YAC/Bd,YAAY,CAAE;cACb,GAAGD,IAAI;cACPgB,IAAI,EAAE,CAAC;cACPjB,OAAO,EAAE,CACR,IAAKC,IAAI,CAACD,OAAO,IAAI,EAAE,CAAE,EACzB;gBACCgB,KAAK,EAAEV,MAAM,CAACU,KAAK;gBACnBE,KAAK,EAAEC,SAAS;gBAChBC,QAAQ,EAAEd,MAAM,CAACe,SAAS,CAAE,CAAC;cAC9B,CAAC;YAEH,CAAE,CAAC;UACJ,CAAG;UAAAZ,QAAA,eAEH,IAAAd,WAAA,CAAAe,GAAA,EAACd,IAAI,CAAC0B,SAAS;YAAAb,QAAA,EAAGH,MAAM,CAACiB;UAAI,CAAkB;QAAC,GAjB1CjB,MAAM,CAACU,KAkBH,CAAC;MAEd,CAAE;IAAC,CACU,CAAC;EAAA,CACV,CAAC;AAET;AAEA,SAASQ,SAASA,CACjB;EAAExB,OAAO;EAAEC,IAAI;EAAEC,YAAY;EAAEC;AAAgC,CAAC,EAChEsB,GAA6B,EAC5B;EACD,IAAK,CAAEzB,OAAO,CAAC0B,MAAM,IAAI1B,OAAO,CAAC2B,KAAK,CAAE,CAAE;IAAEC;EAAU,CAAC,KAAMA,SAAU,CAAC,EAAG;IAC1E,OAAO,IAAI;EACZ;EACA,MAAMvB,eAAe,GAAGL,OAAO,CAACM,MAAM,CAAIA,MAAM,IAAM,CAAEA,MAAM,CAACC,SAAU,CAAC;EAC1E,oBACC,IAAAZ,WAAA,CAAAe,GAAA,EAACX,aAAa;IACbK,YAAY,EAAG;MACdyB,MAAM,eACL,IAAAlC,WAAA,CAAAe,GAAA,EAACpB,WAAA,CAAAwC,MAAM;QACNC,sBAAsB;QACtBC,IAAI,EAAC,SAAS;QACdC,SAAS,EAAC,0BAA0B;QACpCC,OAAO,EAAC,UAAU;QAClBC,QAAQ,EAAG,CAAE9B,eAAe,CAACqB,MAAQ;QACrCD,GAAG,EAAGA;MAAK,CACX,CACD;MACDhB,QAAQ,EAAE,IAAA2B,QAAE,EAAE,YAAa;IAC5B,CAAG;IACIpC,OAAO;IAAEC,IAAI;IAAEC,YAAY;IAAEC;EAAe,CACnD,CAAC;AAEJ;AAAC,IAAAkC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEc,IAAAC,mBAAU,EAAEhB,SAAU,CAAC","ignoreList":[]}