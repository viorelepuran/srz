{"version":3,"names":["Ariakit","_interopRequireWildcard","require","_removeAccents","_interopRequireDefault","_compose","_i18n","_element","_components","_icons","_primitives","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","radioCheck","jsx","SVG","xmlns","viewBox","children","Circle","cx","cy","normalizeSearchInput","input","removeAccents","trim","toLowerCase","EMPTY_ARRAY","getCurrentValue","filterDefinition","currentFilter","singleSelection","value","Array","isArray","getNewValue","includes","filter","v","generateFilterElementCompositeItemId","prefix","filterElementValue","ListBox","view","onChangeView","baseId","useInstanceId","activeCompositeId","setActiveCompositeId","useState","operators","length","undefined","filters","find","f","field","currentValue","Composite","virtualFocus","focusLoop","activeId","setActiveId","role","className","sprintf","__","name","onFocusVisible","elements","render","Typeahead","map","element","jsxs","Hover","Item","id","label","onClick","_view$filters","_view$filters2","newFilters","_filter","operator","page","Icon","icon","check","ComboboxList","searchValue","setSearchValue","deferredSearchValue","useDeferredValue","matches","useMemo","normalizedSearch","item","ComboboxProvider","selectedValue","setSelectedValue","_view$filters3","_view$filters4","setValue","ComboboxLabel","VisuallyHidden","Combobox","autoSelect","placeholder","search","alwaysVisible","ComboboxItem","resetValueOnSelect","hideOnClick","setValueOnClick","focusOnHover","ComboboxItemValue","description","SearchWidget","props","Widget"],"sources":["@wordpress/dataviews/src/components/dataviews-filters/search-widget.tsx"],"sourcesContent":["/**\n * External dependencies\n */\n// eslint-disable-next-line no-restricted-imports\nimport * as Ariakit from '@ariakit/react';\nimport removeAccents from 'remove-accents';\n\n/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useState, useMemo, useDeferredValue } from '@wordpress/element';\nimport { VisuallyHidden, Icon, Composite } from '@wordpress/components';\nimport { search, check } from '@wordpress/icons';\nimport { SVG, Circle } from '@wordpress/primitives';\n\n/**\n * Internal dependencies\n */\nimport type { Filter, NormalizedFilter, View } from '../../types';\n\ninterface SearchWidgetProps {\n\tview: View;\n\tfilter: NormalizedFilter;\n\tonChangeView: ( view: View ) => void;\n}\n\nconst radioCheck = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Circle cx={ 12 } cy={ 12 } r={ 3 }></Circle>\n\t</SVG>\n);\n\nfunction normalizeSearchInput( input = '' ) {\n\treturn removeAccents( input.trim().toLowerCase() );\n}\n\nconst EMPTY_ARRAY: [] = [];\nconst getCurrentValue = (\n\tfilterDefinition: NormalizedFilter,\n\tcurrentFilter?: Filter\n) => {\n\tif ( filterDefinition.singleSelection ) {\n\t\treturn currentFilter?.value;\n\t}\n\n\tif ( Array.isArray( currentFilter?.value ) ) {\n\t\treturn currentFilter.value;\n\t}\n\n\tif ( ! Array.isArray( currentFilter?.value ) && !! currentFilter?.value ) {\n\t\treturn [ currentFilter.value ];\n\t}\n\n\treturn EMPTY_ARRAY;\n};\n\nconst getNewValue = (\n\tfilterDefinition: NormalizedFilter,\n\tcurrentFilter: Filter | undefined,\n\tvalue: any\n) => {\n\tif ( filterDefinition.singleSelection ) {\n\t\treturn value;\n\t}\n\n\tif ( Array.isArray( currentFilter?.value ) ) {\n\t\treturn currentFilter.value.includes( value )\n\t\t\t? currentFilter.value.filter( ( v ) => v !== value )\n\t\t\t: [ ...currentFilter.value, value ];\n\t}\n\n\treturn [ value ];\n};\n\nfunction generateFilterElementCompositeItemId(\n\tprefix: string,\n\tfilterElementValue: string\n) {\n\treturn `${ prefix }-${ filterElementValue }`;\n}\n\nfunction ListBox( { view, filter, onChangeView }: SearchWidgetProps ) {\n\tconst baseId = useInstanceId( ListBox, 'dataviews-filter-list-box' );\n\n\tconst [ activeCompositeId, setActiveCompositeId ] = useState<\n\t\tstring | null | undefined\n\t>(\n\t\t// When there are one or less operators, the first item is set as active\n\t\t// (by setting the initial `activeId` to `undefined`).\n\t\t// With 2 or more operators, the focus is moved on the operators control\n\t\t// (by setting the initial `activeId` to `null`), meaning that there won't\n\t\t// be an active item initially. Focus is then managed via the\n\t\t// `onFocusVisible` callback.\n\t\tfilter.operators?.length === 1 ? undefined : null\n\t);\n\tconst currentFilter = view.filters?.find(\n\t\t( f ) => f.field === filter.field\n\t);\n\tconst currentValue = getCurrentValue( filter, currentFilter );\n\treturn (\n\t\t<Composite\n\t\t\tvirtualFocus\n\t\t\tfocusLoop\n\t\t\tactiveId={ activeCompositeId }\n\t\t\tsetActiveId={ setActiveCompositeId }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"dataviews-filters__search-widget-listbox\"\n\t\t\taria-label={ sprintf(\n\t\t\t\t/* translators: List of items for a filter. 1: Filter name. e.g.: \"List of: Author\". */\n\t\t\t\t__( 'List of: %1$s' ),\n\t\t\t\tfilter.name\n\t\t\t) }\n\t\t\tonFocusVisible={ () => {\n\t\t\t\t// `onFocusVisible` needs the `Composite` component to be focusable,\n\t\t\t\t// which is implicitly achieved via the `virtualFocus` prop.\n\t\t\t\tif ( ! activeCompositeId && filter.elements.length ) {\n\t\t\t\t\tsetActiveCompositeId(\n\t\t\t\t\t\tgenerateFilterElementCompositeItemId(\n\t\t\t\t\t\t\tbaseId,\n\t\t\t\t\t\t\tfilter.elements[ 0 ].value\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} }\n\t\t\trender={ <Composite.Typeahead /> }\n\t\t>\n\t\t\t{ filter.elements.map( ( element ) => (\n\t\t\t\t<Composite.Hover\n\t\t\t\t\tkey={ element.value }\n\t\t\t\t\trender={\n\t\t\t\t\t\t<Composite.Item\n\t\t\t\t\t\t\tid={ generateFilterElementCompositeItemId(\n\t\t\t\t\t\t\t\tbaseId,\n\t\t\t\t\t\t\t\telement.value\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\trender={\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\taria-label={ element.label }\n\t\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\t\tclassName=\"dataviews-filters__search-widget-listitem\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tconst newFilters = currentFilter\n\t\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t\t...( view.filters ?? [] ).map(\n\t\t\t\t\t\t\t\t\t\t\t\t( _filter ) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_filter.field ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilter.field\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t..._filter,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toperator:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentFilter.operator ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.operators[ 0 ],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: getNewValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilter,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentFilter,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telement.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn _filter;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t\t...( view.filters ?? [] ),\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tfield: filter.field,\n\t\t\t\t\t\t\t\t\t\t\t\toperator: filter.operators[ 0 ],\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: getNewValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfilter,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentFilter,\n\t\t\t\t\t\t\t\t\t\t\t\t\telement.value\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t  ];\n\t\t\t\t\t\t\t\tonChangeView( {\n\t\t\t\t\t\t\t\t\t...view,\n\t\t\t\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\t\t\t\tfilters: newFilters,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"dataviews-filters__search-widget-listitem-check\">\n\t\t\t\t\t\t{ filter.singleSelection &&\n\t\t\t\t\t\t\tcurrentValue === element.value && (\n\t\t\t\t\t\t\t\t<Icon icon={ radioCheck } />\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ ! filter.singleSelection &&\n\t\t\t\t\t\t\tcurrentValue.includes( element.value ) && (\n\t\t\t\t\t\t\t\t<Icon icon={ check } />\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>{ element.label }</span>\n\t\t\t\t</Composite.Hover>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nfunction ComboboxList( { view, filter, onChangeView }: SearchWidgetProps ) {\n\tconst [ searchValue, setSearchValue ] = useState( '' );\n\tconst deferredSearchValue = useDeferredValue( searchValue );\n\tconst currentFilter = view.filters?.find(\n\t\t( _filter ) => _filter.field === filter.field\n\t);\n\tconst currentValue = getCurrentValue( filter, currentFilter );\n\tconst matches = useMemo( () => {\n\t\tconst normalizedSearch = normalizeSearchInput( deferredSearchValue );\n\t\treturn filter.elements.filter( ( item ) =>\n\t\t\tnormalizeSearchInput( item.label ).includes( normalizedSearch )\n\t\t);\n\t}, [ filter.elements, deferredSearchValue ] );\n\treturn (\n\t\t<Ariakit.ComboboxProvider\n\t\t\tselectedValue={ currentValue }\n\t\t\tsetSelectedValue={ ( value ) => {\n\t\t\t\tconst newFilters = currentFilter\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...( view.filters ?? [] ).map( ( _filter ) => {\n\t\t\t\t\t\t\t\tif ( _filter.field === filter.field ) {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t..._filter,\n\t\t\t\t\t\t\t\t\t\toperator:\n\t\t\t\t\t\t\t\t\t\t\tcurrentFilter.operator ||\n\t\t\t\t\t\t\t\t\t\t\tfilter.operators[ 0 ],\n\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn _filter;\n\t\t\t\t\t\t\t} ),\n\t\t\t\t\t  ]\n\t\t\t\t\t: [\n\t\t\t\t\t\t\t...( view.filters ?? [] ),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: filter.field,\n\t\t\t\t\t\t\t\toperator: filter.operators[ 0 ],\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t  ];\n\t\t\t\tonChangeView( {\n\t\t\t\t\t...view,\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tfilters: newFilters,\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tsetValue={ setSearchValue }\n\t\t>\n\t\t\t<div className=\"dataviews-filters__search-widget-filter-combobox__wrapper\">\n\t\t\t\t<Ariakit.ComboboxLabel\n\t\t\t\t\trender={\n\t\t\t\t\t\t<VisuallyHidden>\n\t\t\t\t\t\t\t{ __( 'Search items' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Search items' ) }\n\t\t\t\t</Ariakit.ComboboxLabel>\n\t\t\t\t<Ariakit.Combobox\n\t\t\t\t\tautoSelect=\"always\"\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t\tclassName=\"dataviews-filters__search-widget-filter-combobox__input\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"dataviews-filters__search-widget-filter-combobox__icon\">\n\t\t\t\t\t<Icon icon={ search } />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Ariakit.ComboboxList\n\t\t\t\tclassName=\"dataviews-filters__search-widget-filter-combobox-list\"\n\t\t\t\talwaysVisible\n\t\t\t>\n\t\t\t\t{ matches.map( ( element ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Ariakit.ComboboxItem\n\t\t\t\t\t\t\tresetValueOnSelect={ false }\n\t\t\t\t\t\t\tkey={ element.value }\n\t\t\t\t\t\t\tvalue={ element.value }\n\t\t\t\t\t\t\tclassName=\"dataviews-filters__search-widget-listitem\"\n\t\t\t\t\t\t\thideOnClick={ false }\n\t\t\t\t\t\t\tsetValueOnClick={ false }\n\t\t\t\t\t\t\tfocusOnHover\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"dataviews-filters__search-widget-listitem-check\">\n\t\t\t\t\t\t\t\t{ filter.singleSelection &&\n\t\t\t\t\t\t\t\t\tcurrentValue === element.value && (\n\t\t\t\t\t\t\t\t\t\t<Icon icon={ radioCheck } />\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ ! filter.singleSelection &&\n\t\t\t\t\t\t\t\t\tcurrentValue.includes( element.value ) && (\n\t\t\t\t\t\t\t\t\t\t<Icon icon={ check } />\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<Ariakit.ComboboxItemValue\n\t\t\t\t\t\t\t\t\tclassName=\"dataviews-filters__search-widget-filter-combobox-item-value\"\n\t\t\t\t\t\t\t\t\tvalue={ element.label }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{ !! element.description && (\n\t\t\t\t\t\t\t\t\t<span className=\"dataviews-filters__search-widget-listitem-description\">\n\t\t\t\t\t\t\t\t\t\t{ element.description }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Ariakit.ComboboxItem>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t\t{ ! matches.length && <p>{ __( 'No results found' ) }</p> }\n\t\t\t</Ariakit.ComboboxList>\n\t\t</Ariakit.ComboboxProvider>\n\t);\n}\n\nexport default function SearchWidget( props: SearchWidgetProps ) {\n\tconst Widget = props.filter.elements.length > 10 ? ComboboxList : ListBox;\n\treturn <Widget { ...props } />;\n}\n"],"mappings":"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","ignoreList":[]}