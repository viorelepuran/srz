{"version":3,"names":["RangeControl","__","useMemo","useContext","DataViewsContext","jsx","_jsx","viewportBreaks","xhuge","min","max","default","huge","xlarge","large","mobile","BREAKPOINTS","useViewPortBreakpoint","containerWidth","key","value","Object","entries","useUpdatedPreviewSizeOnViewportChange","view","viewport","previewSize","layout","newPreviewSize","breakValues","PreviewSizePicker","context","previewSizeToUse","marks","Array","from","length","_","i","__nextHasNoMarginBottom","__next40pxDefaultSize","showTooltip","label","withInputField","onChange","onChangeView","step"],"sources":["@wordpress/dataviews/src/dataviews-layouts/grid/preview-size-picker.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { RangeControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useMemo, useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport DataViewsContext from '../../components/dataviews-context';\nimport type { ViewGrid } from '../../types';\n\nconst viewportBreaks: {\n\t[ key: string ]: { min: number; max: number; default: number };\n} = {\n\txhuge: { min: 3, max: 6, default: 5 },\n\thuge: { min: 2, max: 4, default: 4 },\n\txlarge: { min: 2, max: 3, default: 3 },\n\tlarge: { min: 1, max: 2, default: 2 },\n\tmobile: { min: 1, max: 2, default: 2 },\n};\n\n/**\n * Breakpoints were adjusted from media queries breakpoints to account for\n * the sidebar width. This was done to match the existing styles we had.\n */\nconst BREAKPOINTS = {\n\txhuge: 1520,\n\thuge: 1140,\n\txlarge: 780,\n\tlarge: 480,\n\tmobile: 0,\n};\n\nfunction useViewPortBreakpoint() {\n\tconst containerWidth = useContext( DataViewsContext ).containerWidth;\n\tfor ( const [ key, value ] of Object.entries( BREAKPOINTS ) ) {\n\t\tif ( containerWidth >= value ) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn 'mobile';\n}\n\nexport function useUpdatedPreviewSizeOnViewportChange() {\n\tconst view = useContext( DataViewsContext ).view as ViewGrid;\n\tconst viewport = useViewPortBreakpoint();\n\treturn useMemo( () => {\n\t\tconst previewSize = view.layout?.previewSize;\n\t\tlet newPreviewSize;\n\t\tif ( ! previewSize ) {\n\t\t\treturn;\n\t\t}\n\t\tconst breakValues = viewportBreaks[ viewport ];\n\t\tif ( previewSize < breakValues.min ) {\n\t\t\tnewPreviewSize = breakValues.min;\n\t\t}\n\t\tif ( previewSize > breakValues.max ) {\n\t\t\tnewPreviewSize = breakValues.max;\n\t\t}\n\t\treturn newPreviewSize;\n\t}, [ viewport, view ] );\n}\n\nexport default function PreviewSizePicker() {\n\tconst viewport = useViewPortBreakpoint();\n\tconst context = useContext( DataViewsContext );\n\tconst view = context.view as ViewGrid;\n\tconst breakValues = viewportBreaks[ viewport ];\n\tconst previewSizeToUse = view.layout?.previewSize || breakValues.default;\n\tconst marks = useMemo(\n\t\t() =>\n\t\t\tArray.from(\n\t\t\t\t{ length: breakValues.max - breakValues.min + 1 },\n\t\t\t\t( _, i ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tvalue: breakValues.min + i,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t),\n\t\t[ breakValues ]\n\t);\n\tif ( viewport === 'mobile' ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<RangeControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\t__next40pxDefaultSize\n\t\t\tshowTooltip={ false }\n\t\t\tlabel={ __( 'Preview size' ) }\n\t\t\tvalue={ breakValues.max + breakValues.min - previewSizeToUse }\n\t\t\tmarks={ marks }\n\t\t\tmin={ breakValues.min }\n\t\t\tmax={ breakValues.max }\n\t\t\twithInputField={ false }\n\t\t\tonChange={ ( value = 0 ) => {\n\t\t\t\tcontext.onChangeView( {\n\t\t\t\t\t...view,\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\t...view.layout,\n\t\t\t\t\t\tpreviewSize: breakValues.max + breakValues.min - value,\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tstep={ 1 }\n\t\t/>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}