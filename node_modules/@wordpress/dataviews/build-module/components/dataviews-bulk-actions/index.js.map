{"version":3,"names":["Button","CheckboxControl","__experimentalHStack","HStack","__","sprintf","_n","useMemo","useState","useRef","useContext","useRegistry","closeSmall","DataViewsContext","ActionModal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ActionWithModal","action","items","ActionTriggerComponent","isModalOpen","setIsModalOpen","actionTriggerProps","onClick","children","closeModal","useHasAPossibleBulkAction","actions","item","some","supportsBulk","isEligible","useSomeItemHasAPossibleBulkAction","data","BulkSelectionCheckbox","selection","onChangeSelection","getItemId","selectableItems","filter","selectedItems","includes","areAllSelected","length","className","__nextHasNoMarginBottom","checked","indeterminate","onChange","map","ActionTrigger","isBusy","label","disabled","accessibleWhenDisabled","icon","isDestructive","size","tooltipPosition","EMPTY_ARRAY","ActionButton","actionInProgress","setActionInProgress","registry","selectedEligibleItems","id","callback","renderFooterContent","actionsToShow","message","expanded","spacing","showTooltip","FooterContent","footerContentRef","bulkActions","current","BulkActionsFooter"],"sources":["@wordpress/dataviews/src/components/dataviews-bulk-actions/index.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport type { ReactElement } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tCheckboxControl,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { __, sprintf, _n } from '@wordpress/i18n';\nimport { useMemo, useState, useRef, useContext } from '@wordpress/element';\nimport { useRegistry } from '@wordpress/data';\nimport { closeSmall } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport DataViewsContext from '../dataviews-context';\nimport { ActionModal } from '../dataviews-item-actions';\nimport type { Action, ActionModal as ActionModalType } from '../../types';\nimport type { SetSelection } from '../../private-types';\nimport type { ActionTriggerProps } from '../dataviews-item-actions';\n\ninterface ActionWithModalProps< Item > {\n\taction: ActionModalType< Item >;\n\titems: Item[];\n\tActionTriggerComponent: (\n\t\tprops: ActionTriggerProps< Item >\n\t) => ReactElement;\n}\n\nfunction ActionWithModal< Item >( {\n\taction,\n\titems,\n\tActionTriggerComponent,\n}: ActionWithModalProps< Item > ) {\n\tconst [ isModalOpen, setIsModalOpen ] = useState( false );\n\tconst actionTriggerProps = {\n\t\taction,\n\t\tonClick: () => {\n\t\t\tsetIsModalOpen( true );\n\t\t},\n\t\titems,\n\t};\n\treturn (\n\t\t<>\n\t\t\t<ActionTriggerComponent { ...actionTriggerProps } />\n\t\t\t{ isModalOpen && (\n\t\t\t\t<ActionModal\n\t\t\t\t\taction={ action }\n\t\t\t\t\titems={ items }\n\t\t\t\t\tcloseModal={ () => setIsModalOpen( false ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport function useHasAPossibleBulkAction< Item >(\n\tactions: Action< Item >[],\n\titem: Item\n) {\n\treturn useMemo( () => {\n\t\treturn actions.some( ( action ) => {\n\t\t\treturn (\n\t\t\t\taction.supportsBulk &&\n\t\t\t\t( ! action.isEligible || action.isEligible( item ) )\n\t\t\t);\n\t\t} );\n\t}, [ actions, item ] );\n}\n\nexport function useSomeItemHasAPossibleBulkAction< Item >(\n\tactions: Action< Item >[],\n\tdata: Item[]\n) {\n\treturn useMemo( () => {\n\t\treturn data.some( ( item ) => {\n\t\t\treturn actions.some( ( action ) => {\n\t\t\t\treturn (\n\t\t\t\t\taction.supportsBulk &&\n\t\t\t\t\t( ! action.isEligible || action.isEligible( item ) )\n\t\t\t\t);\n\t\t\t} );\n\t\t} );\n\t}, [ actions, data ] );\n}\n\ninterface BulkSelectionCheckboxProps< Item > {\n\tselection: string[];\n\tonChangeSelection: SetSelection;\n\tdata: Item[];\n\tactions: Action< Item >[];\n\tgetItemId: ( item: Item ) => string;\n}\n\nexport function BulkSelectionCheckbox< Item >( {\n\tselection,\n\tonChangeSelection,\n\tdata,\n\tactions,\n\tgetItemId,\n}: BulkSelectionCheckboxProps< Item > ) {\n\tconst selectableItems = useMemo( () => {\n\t\treturn data.filter( ( item ) => {\n\t\t\treturn actions.some(\n\t\t\t\t( action ) =>\n\t\t\t\t\taction.supportsBulk &&\n\t\t\t\t\t( ! action.isEligible || action.isEligible( item ) )\n\t\t\t);\n\t\t} );\n\t}, [ data, actions ] );\n\tconst selectedItems = data.filter(\n\t\t( item ) =>\n\t\t\tselection.includes( getItemId( item ) ) &&\n\t\t\tselectableItems.includes( item )\n\t);\n\tconst areAllSelected = selectedItems.length === selectableItems.length;\n\treturn (\n\t\t<CheckboxControl\n\t\t\tclassName=\"dataviews-view-table-selection-checkbox\"\n\t\t\t__nextHasNoMarginBottom\n\t\t\tchecked={ areAllSelected }\n\t\t\tindeterminate={ ! areAllSelected && !! selectedItems.length }\n\t\t\tonChange={ () => {\n\t\t\t\tif ( areAllSelected ) {\n\t\t\t\t\tonChangeSelection( [] );\n\t\t\t\t} else {\n\t\t\t\t\tonChangeSelection(\n\t\t\t\t\t\tselectableItems.map( ( item ) => getItemId( item ) )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} }\n\t\t\taria-label={\n\t\t\t\tareAllSelected ? __( 'Deselect all' ) : __( 'Select all' )\n\t\t\t}\n\t\t/>\n\t);\n}\n\ninterface ActionButtonProps< Item > {\n\taction: Action< Item >;\n\tselectedItems: Item[];\n\tactionInProgress: string | null;\n\tsetActionInProgress: ( actionId: string | null ) => void;\n}\n\ninterface ToolbarContentProps< Item > {\n\tselection: string[];\n\tonChangeSelection: SetSelection;\n\tdata: Item[];\n\tactions: Action< Item >[];\n\tgetItemId: ( item: Item ) => string;\n}\n\nfunction ActionTrigger< Item >( {\n\taction,\n\tonClick,\n\tisBusy,\n\titems,\n}: ActionTriggerProps< Item > ) {\n\tconst label =\n\t\ttypeof action.label === 'string' ? action.label : action.label( items );\n\treturn (\n\t\t<Button\n\t\t\tdisabled={ isBusy }\n\t\t\taccessibleWhenDisabled\n\t\t\tlabel={ label }\n\t\t\ticon={ action.icon }\n\t\t\tisDestructive={ action.isDestructive }\n\t\t\tsize=\"compact\"\n\t\t\tonClick={ onClick }\n\t\t\tisBusy={ isBusy }\n\t\t\ttooltipPosition=\"top\"\n\t\t/>\n\t);\n}\n\nconst EMPTY_ARRAY: [] = [];\n\nfunction ActionButton< Item >( {\n\taction,\n\tselectedItems,\n\tactionInProgress,\n\tsetActionInProgress,\n}: ActionButtonProps< Item > ) {\n\tconst registry = useRegistry();\n\tconst selectedEligibleItems = useMemo( () => {\n\t\treturn selectedItems.filter( ( item ) => {\n\t\t\treturn ! action.isEligible || action.isEligible( item );\n\t\t} );\n\t}, [ action, selectedItems ] );\n\tif ( 'RenderModal' in action ) {\n\t\treturn (\n\t\t\t<ActionWithModal\n\t\t\t\tkey={ action.id }\n\t\t\t\taction={ action }\n\t\t\t\titems={ selectedEligibleItems }\n\t\t\t\tActionTriggerComponent={ ActionTrigger }\n\t\t\t/>\n\t\t);\n\t}\n\treturn (\n\t\t<ActionTrigger\n\t\t\tkey={ action.id }\n\t\t\taction={ action }\n\t\t\tonClick={ async () => {\n\t\t\t\tsetActionInProgress( action.id );\n\t\t\t\tawait action.callback( selectedItems, {\n\t\t\t\t\tregistry,\n\t\t\t\t} );\n\t\t\t\tsetActionInProgress( null );\n\t\t\t} }\n\t\t\titems={ selectedEligibleItems }\n\t\t\tisBusy={ actionInProgress === action.id }\n\t\t/>\n\t);\n}\n\nfunction renderFooterContent< Item >(\n\tdata: Item[],\n\tactions: Action< Item >[],\n\tgetItemId: ( item: Item ) => string,\n\tselection: string[],\n\tactionsToShow: Action< Item >[],\n\tselectedItems: Item[],\n\tactionInProgress: string | null,\n\tsetActionInProgress: ( actionId: string | null ) => void,\n\tonChangeSelection: SetSelection\n) {\n\tconst message =\n\t\tselectedItems.length > 0\n\t\t\t? sprintf(\n\t\t\t\t\t/* translators: %d: number of items. */\n\t\t\t\t\t_n(\n\t\t\t\t\t\t'%d Item selected',\n\t\t\t\t\t\t'%d Items selected',\n\t\t\t\t\t\tselectedItems.length\n\t\t\t\t\t),\n\t\t\t\t\tselectedItems.length\n\t\t\t  )\n\t\t\t: sprintf(\n\t\t\t\t\t/* translators: %d: number of items. */\n\t\t\t\t\t_n( '%d Item', '%d Items', data.length ),\n\t\t\t\t\tdata.length\n\t\t\t  );\n\treturn (\n\t\t<HStack\n\t\t\texpanded={ false }\n\t\t\tclassName=\"dataviews-bulk-actions-footer__container\"\n\t\t\tspacing={ 3 }\n\t\t>\n\t\t\t<BulkSelectionCheckbox\n\t\t\t\tselection={ selection }\n\t\t\t\tonChangeSelection={ onChangeSelection }\n\t\t\t\tdata={ data }\n\t\t\t\tactions={ actions }\n\t\t\t\tgetItemId={ getItemId }\n\t\t\t/>\n\t\t\t<span className=\"dataviews-bulk-actions-footer__item-count\">\n\t\t\t\t{ message }\n\t\t\t</span>\n\t\t\t<HStack\n\t\t\t\tclassName=\"dataviews-bulk-actions-footer__action-buttons\"\n\t\t\t\texpanded={ false }\n\t\t\t\tspacing={ 1 }\n\t\t\t>\n\t\t\t\t{ actionsToShow.map( ( action ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ActionButton\n\t\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\t\tselectedItems={ selectedItems }\n\t\t\t\t\t\t\tactionInProgress={ actionInProgress }\n\t\t\t\t\t\t\tsetActionInProgress={ setActionInProgress }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t\t{ selectedItems.length > 0 && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ closeSmall }\n\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\ttooltipPosition=\"top\"\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\tlabel={ __( 'Cancel' ) }\n\t\t\t\t\t\tdisabled={ !! actionInProgress }\n\t\t\t\t\t\taccessibleWhenDisabled={ false }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonChangeSelection( EMPTY_ARRAY );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</HStack>\n\t\t</HStack>\n\t);\n}\n\nfunction FooterContent< Item >( {\n\tselection,\n\tactions,\n\tonChangeSelection,\n\tdata,\n\tgetItemId,\n}: ToolbarContentProps< Item > ) {\n\tconst [ actionInProgress, setActionInProgress ] = useState< string | null >(\n\t\tnull\n\t);\n\tconst footerContentRef = useRef< JSX.Element | null >( null );\n\n\tconst bulkActions = useMemo(\n\t\t() => actions.filter( ( action ) => action.supportsBulk ),\n\t\t[ actions ]\n\t);\n\tconst selectableItems = useMemo( () => {\n\t\treturn data.filter( ( item ) => {\n\t\t\treturn bulkActions.some(\n\t\t\t\t( action ) => ! action.isEligible || action.isEligible( item )\n\t\t\t);\n\t\t} );\n\t}, [ data, bulkActions ] );\n\n\tconst selectedItems = useMemo( () => {\n\t\treturn data.filter(\n\t\t\t( item ) =>\n\t\t\t\tselection.includes( getItemId( item ) ) &&\n\t\t\t\tselectableItems.includes( item )\n\t\t);\n\t}, [ selection, data, getItemId, selectableItems ] );\n\n\tconst actionsToShow = useMemo(\n\t\t() =>\n\t\t\tactions.filter( ( action ) => {\n\t\t\t\treturn (\n\t\t\t\t\taction.supportsBulk &&\n\t\t\t\t\taction.icon &&\n\t\t\t\t\tselectedItems.some(\n\t\t\t\t\t\t( item ) =>\n\t\t\t\t\t\t\t! action.isEligible || action.isEligible( item )\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} ),\n\t\t[ actions, selectedItems ]\n\t);\n\tif ( ! actionInProgress ) {\n\t\tif ( footerContentRef.current ) {\n\t\t\tfooterContentRef.current = null;\n\t\t}\n\t\treturn renderFooterContent(\n\t\t\tdata,\n\t\t\tactions,\n\t\t\tgetItemId,\n\t\t\tselection,\n\t\t\tactionsToShow,\n\t\t\tselectedItems,\n\t\t\tactionInProgress,\n\t\t\tsetActionInProgress,\n\t\t\tonChangeSelection\n\t\t);\n\t} else if ( ! footerContentRef.current ) {\n\t\tfooterContentRef.current = renderFooterContent(\n\t\t\tdata,\n\t\t\tactions,\n\t\t\tgetItemId,\n\t\t\tselection,\n\t\t\tactionsToShow,\n\t\t\tselectedItems,\n\t\t\tactionInProgress,\n\t\t\tsetActionInProgress,\n\t\t\tonChangeSelection\n\t\t);\n\t}\n\treturn footerContentRef.current;\n}\n\nexport function BulkActionsFooter() {\n\tconst {\n\t\tdata,\n\t\tselection,\n\t\tactions = EMPTY_ARRAY,\n\t\tonChangeSelection,\n\t\tgetItemId,\n\t} = useContext( DataViewsContext );\n\treturn (\n\t\t<FooterContent\n\t\t\tselection={ selection }\n\t\t\tonChangeSelection={ onChangeSelection }\n\t\t\tdata={ data }\n\t\t\tactions={ actions }\n\t\t\tgetItemId={ getItemId }\n\t\t/>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}