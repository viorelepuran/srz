{"version":3,"names":["_components","require","_i18n","_data","_coreData","_blockEditor","_jsxRuntime","WidgetTypeSelector","selectedId","onSelect","widgetTypes","useSelect","select","_select$getSettings$w","hiddenIds","blockEditorStore","getSettings","widgetTypesToHideFromLegacyWidgetBlock","coreStore","getWidgetTypes","per_page","filter","widgetType","includes","id","jsx","Spinner","length","__","SelectControl","__next40pxDefaultSize","__nextHasNoMarginBottom","label","value","options","map","name","onChange","selected","find","isMulti","is_multi"],"sources":["@wordpress/widgets/src/blocks/legacy-widget/edit/widget-type-selector.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Spinner, SelectControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\n\nexport default function WidgetTypeSelector( { selectedId, onSelect } ) {\n\tconst widgetTypes = useSelect( ( select ) => {\n\t\tconst hiddenIds =\n\t\t\tselect( blockEditorStore ).getSettings()\n\t\t\t\t?.widgetTypesToHideFromLegacyWidgetBlock ?? [];\n\t\treturn select( coreStore )\n\t\t\t.getWidgetTypes( { per_page: -1 } )\n\t\t\t?.filter( ( widgetType ) => ! hiddenIds.includes( widgetType.id ) );\n\t}, [] );\n\n\tif ( ! widgetTypes ) {\n\t\treturn <Spinner />;\n\t}\n\n\tif ( widgetTypes.length === 0 ) {\n\t\treturn __( 'There are no widgets available.' );\n\t}\n\n\treturn (\n\t\t<SelectControl\n\t\t\t__next40pxDefaultSize\n\t\t\t__nextHasNoMarginBottom\n\t\t\tlabel={ __( 'Legacy widget' ) }\n\t\t\tvalue={ selectedId ?? '' }\n\t\t\toptions={ [\n\t\t\t\t{ value: '', label: __( 'Select widget' ) },\n\t\t\t\t...widgetTypes.map( ( widgetType ) => ( {\n\t\t\t\t\tvalue: widgetType.id,\n\t\t\t\t\tlabel: widgetType.name,\n\t\t\t\t} ) ),\n\t\t\t] }\n\t\t\tonChange={ ( value ) => {\n\t\t\t\tif ( value ) {\n\t\t\t\t\tconst selected = widgetTypes.find(\n\t\t\t\t\t\t( widgetType ) => widgetType.id === value\n\t\t\t\t\t);\n\t\t\t\t\tonSelect( {\n\t\t\t\t\t\tselectedId: selected.id,\n\t\t\t\t\t\tisMulti: selected.is_multi,\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tonSelect( { selectedId: null } );\n\t\t\t\t}\n\t\t\t} }\n\t\t/>\n\t);\n}\n"],"mappings":";;;;;;AAGA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,SAAA,GAAAH,OAAA;AACA,IAAAI,YAAA,GAAAJ,OAAA;AAAoE,IAAAK,WAAA,GAAAL,OAAA;AAPpE;AACA;AACA;;AAOe,SAASM,kBAAkBA,CAAE;EAAEC,UAAU;EAAEC;AAAS,CAAC,EAAG;EACtE,MAAMC,WAAW,GAAG,IAAAC,eAAS,EAAIC,MAAM,IAAM;IAAA,IAAAC,qBAAA;IAC5C,MAAMC,SAAS,IAAAD,qBAAA,GACdD,MAAM,CAAEG,kBAAiB,CAAC,CAACC,WAAW,CAAC,CAAC,EACrCC,sCAAsC,cAAAJ,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IAChD,OAAOD,MAAM,CAAEM,eAAU,CAAC,CACxBC,cAAc,CAAE;MAAEC,QAAQ,EAAE,CAAC;IAAE,CAAE,CAAC,EACjCC,MAAM,CAAIC,UAAU,IAAM,CAAER,SAAS,CAACS,QAAQ,CAAED,UAAU,CAACE,EAAG,CAAE,CAAC;EACrE,CAAC,EAAE,EAAG,CAAC;EAEP,IAAK,CAAEd,WAAW,EAAG;IACpB,oBAAO,IAAAJ,WAAA,CAAAmB,GAAA,EAACzB,WAAA,CAAA0B,OAAO,IAAE,CAAC;EACnB;EAEA,IAAKhB,WAAW,CAACiB,MAAM,KAAK,CAAC,EAAG;IAC/B,OAAO,IAAAC,QAAE,EAAE,iCAAkC,CAAC;EAC/C;EAEA,oBACC,IAAAtB,WAAA,CAAAmB,GAAA,EAACzB,WAAA,CAAA6B,aAAa;IACbC,qBAAqB;IACrBC,uBAAuB;IACvBC,KAAK,EAAG,IAAAJ,QAAE,EAAE,eAAgB,CAAG;IAC/BK,KAAK,EAAGzB,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAI,EAAI;IAC1B0B,OAAO,EAAG,CACT;MAAED,KAAK,EAAE,EAAE;MAAED,KAAK,EAAE,IAAAJ,QAAE,EAAE,eAAgB;IAAE,CAAC,EAC3C,GAAGlB,WAAW,CAACyB,GAAG,CAAIb,UAAU,KAAQ;MACvCW,KAAK,EAAEX,UAAU,CAACE,EAAE;MACpBQ,KAAK,EAAEV,UAAU,CAACc;IACnB,CAAC,CAAG,CAAC,CACH;IACHC,QAAQ,EAAKJ,KAAK,IAAM;MACvB,IAAKA,KAAK,EAAG;QACZ,MAAMK,QAAQ,GAAG5B,WAAW,CAAC6B,IAAI,CAC9BjB,UAAU,IAAMA,UAAU,CAACE,EAAE,KAAKS,KACrC,CAAC;QACDxB,QAAQ,CAAE;UACTD,UAAU,EAAE8B,QAAQ,CAACd,EAAE;UACvBgB,OAAO,EAAEF,QAAQ,CAACG;QACnB,CAAE,CAAC;MACJ,CAAC,MAAM;QACNhC,QAAQ,CAAE;UAAED,UAAU,EAAE;QAAK,CAAE,CAAC;MACjC;IACD;EAAG,CACH,CAAC;AAEJ","ignoreList":[]}