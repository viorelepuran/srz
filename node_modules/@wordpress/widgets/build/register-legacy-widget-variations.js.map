{"version":3,"names":["_data","require","_coreData","_blocks","registerLegacyWidgetVariations","settings","unsubscribe","subscribe","_settings$widgetTypes","hiddenIds","widgetTypesToHideFromLegacyWidgetBlock","widgetTypes","select","coreStore","getWidgetTypes","per_page","filter","widgetType","includes","id","dispatch","blocksStore","addBlockVariations","map","name","title","description","attributes","is_multi","idBase","instance"],"sources":["@wordpress/widgets/src/register-legacy-widget-variations.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { subscribe, select, dispatch } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { store as blocksStore } from '@wordpress/blocks';\n\nexport default function registerLegacyWidgetVariations( settings ) {\n\tconst unsubscribe = subscribe( () => {\n\t\tconst hiddenIds =\n\t\t\tsettings?.widgetTypesToHideFromLegacyWidgetBlock ?? [];\n\t\tconst widgetTypes = select( coreStore )\n\t\t\t.getWidgetTypes( { per_page: -1 } )\n\t\t\t?.filter( ( widgetType ) => ! hiddenIds.includes( widgetType.id ) );\n\t\tif ( widgetTypes ) {\n\t\t\tunsubscribe();\n\t\t\tdispatch( blocksStore ).addBlockVariations(\n\t\t\t\t'core/legacy-widget',\n\t\t\t\twidgetTypes.map( ( widgetType ) => ( {\n\t\t\t\t\tname: widgetType.id,\n\t\t\t\t\ttitle: widgetType.name,\n\t\t\t\t\tdescription: widgetType.description,\n\t\t\t\t\tattributes: widgetType.is_multi\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tidBase: widgetType.id,\n\t\t\t\t\t\t\t\tinstance: {},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tid: widgetType.id,\n\t\t\t\t\t\t  },\n\t\t\t\t} ) )\n\t\t\t);\n\t\t}\n\t} );\n}\n"],"mappings":";;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AALA;AACA;AACA;;AAKe,SAASG,8BAA8BA,CAAEC,QAAQ,EAAG;EAClE,MAAMC,WAAW,GAAG,IAAAC,eAAS,EAAE,MAAM;IAAA,IAAAC,qBAAA;IACpC,MAAMC,SAAS,IAAAD,qBAAA,GACdH,QAAQ,EAAEK,sCAAsC,cAAAF,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IACvD,MAAMG,WAAW,GAAG,IAAAC,YAAM,EAAEC,eAAU,CAAC,CACrCC,cAAc,CAAE;MAAEC,QAAQ,EAAE,CAAC;IAAE,CAAE,CAAC,EACjCC,MAAM,CAAIC,UAAU,IAAM,CAAER,SAAS,CAACS,QAAQ,CAAED,UAAU,CAACE,EAAG,CAAE,CAAC;IACpE,IAAKR,WAAW,EAAG;MAClBL,WAAW,CAAC,CAAC;MACb,IAAAc,cAAQ,EAAEC,aAAY,CAAC,CAACC,kBAAkB,CACzC,oBAAoB,EACpBX,WAAW,CAACY,GAAG,CAAIN,UAAU,KAAQ;QACpCO,IAAI,EAAEP,UAAU,CAACE,EAAE;QACnBM,KAAK,EAAER,UAAU,CAACO,IAAI;QACtBE,WAAW,EAAET,UAAU,CAACS,WAAW;QACnCC,UAAU,EAAEV,UAAU,CAACW,QAAQ,GAC5B;UACAC,MAAM,EAAEZ,UAAU,CAACE,EAAE;UACrBW,QAAQ,EAAE,CAAC;QACX,CAAC,GACD;UACAX,EAAE,EAAEF,UAAU,CAACE;QACf;MACJ,CAAC,CAAG,CACL,CAAC;IACF;EACD,CAAE,CAAC;AACJ","ignoreList":[]}