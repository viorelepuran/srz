{"version":3,"names":["subscribe","select","dispatch","store","coreStore","blocksStore","registerLegacyWidgetVariations","settings","unsubscribe","_settings$widgetTypes","hiddenIds","widgetTypesToHideFromLegacyWidgetBlock","widgetTypes","getWidgetTypes","per_page","filter","widgetType","includes","id","addBlockVariations","map","name","title","description","attributes","is_multi","idBase","instance"],"sources":["@wordpress/widgets/src/register-legacy-widget-variations.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { subscribe, select, dispatch } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { store as blocksStore } from '@wordpress/blocks';\n\nexport default function registerLegacyWidgetVariations( settings ) {\n\tconst unsubscribe = subscribe( () => {\n\t\tconst hiddenIds =\n\t\t\tsettings?.widgetTypesToHideFromLegacyWidgetBlock ?? [];\n\t\tconst widgetTypes = select( coreStore )\n\t\t\t.getWidgetTypes( { per_page: -1 } )\n\t\t\t?.filter( ( widgetType ) => ! hiddenIds.includes( widgetType.id ) );\n\t\tif ( widgetTypes ) {\n\t\t\tunsubscribe();\n\t\t\tdispatch( blocksStore ).addBlockVariations(\n\t\t\t\t'core/legacy-widget',\n\t\t\t\twidgetTypes.map( ( widgetType ) => ( {\n\t\t\t\t\tname: widgetType.id,\n\t\t\t\t\ttitle: widgetType.name,\n\t\t\t\t\tdescription: widgetType.description,\n\t\t\t\t\tattributes: widgetType.is_multi\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tidBase: widgetType.id,\n\t\t\t\t\t\t\t\tinstance: {},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tid: widgetType.id,\n\t\t\t\t\t\t  },\n\t\t\t\t} ) )\n\t\t\t);\n\t\t}\n\t} );\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,iBAAiB;AAC7D,SAASC,KAAK,IAAIC,SAAS,QAAQ,sBAAsB;AACzD,SAASD,KAAK,IAAIE,WAAW,QAAQ,mBAAmB;AAExD,eAAe,SAASC,8BAA8BA,CAAEC,QAAQ,EAAG;EAClE,MAAMC,WAAW,GAAGR,SAAS,CAAE,MAAM;IAAA,IAAAS,qBAAA;IACpC,MAAMC,SAAS,IAAAD,qBAAA,GACdF,QAAQ,EAAEI,sCAAsC,cAAAF,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IACvD,MAAMG,WAAW,GAAGX,MAAM,CAAEG,SAAU,CAAC,CACrCS,cAAc,CAAE;MAAEC,QAAQ,EAAE,CAAC;IAAE,CAAE,CAAC,EACjCC,MAAM,CAAIC,UAAU,IAAM,CAAEN,SAAS,CAACO,QAAQ,CAAED,UAAU,CAACE,EAAG,CAAE,CAAC;IACpE,IAAKN,WAAW,EAAG;MAClBJ,WAAW,CAAC,CAAC;MACbN,QAAQ,CAAEG,WAAY,CAAC,CAACc,kBAAkB,CACzC,oBAAoB,EACpBP,WAAW,CAACQ,GAAG,CAAIJ,UAAU,KAAQ;QACpCK,IAAI,EAAEL,UAAU,CAACE,EAAE;QACnBI,KAAK,EAAEN,UAAU,CAACK,IAAI;QACtBE,WAAW,EAAEP,UAAU,CAACO,WAAW;QACnCC,UAAU,EAAER,UAAU,CAACS,QAAQ,GAC5B;UACAC,MAAM,EAAEV,UAAU,CAACE,EAAE;UACrBS,QAAQ,EAAE,CAAC;QACX,CAAC,GACD;UACAT,EAAE,EAAEF,UAAU,CAACE;QACf;MACJ,CAAC,CAAG,CACL,CAAC;IACF;EACD,CAAE,CAAC;AACJ","ignoreList":[]}