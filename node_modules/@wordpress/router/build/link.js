"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Link = Link;
exports.useLink = useLink;
var _element = require("@wordpress/element");
var _url = require("@wordpress/url");
var _router = require("./router");
var _jsxRuntime = require("react/jsx-runtime");
/**
 * WordPress dependencies
 */

/**
 * Internal dependencies
 */

function useLink(to, options = {}) {
  var _getPath;
  const history = (0, _router.useHistory)();
  const {
    pathArg,
    beforeNavigate
  } = (0, _element.useContext)(_router.ConfigContext);
  function onClick(event) {
    event?.preventDefault();
    history.navigate(to, options);
  }
  const query = (0, _url.getQueryArgs)(to);
  const path = (_getPath = (0, _url.getPath)('http://domain.com/' + to)) !== null && _getPath !== void 0 ? _getPath : '';
  const link = (0, _element.useMemo)(() => {
    return beforeNavigate ? beforeNavigate({
      path,
      query
    }) : {
      path,
      query
    };
  }, [path, query, beforeNavigate]);
  const [before] = window.location.href.split('?');
  return {
    href: `${before}?${(0, _url.buildQueryString)({
      [pathArg]: link.path,
      ...link.query
    })}`,
    onClick
  };
}
function Link({
  to,
  options,
  children,
  ...props
}) {
  const {
    href,
    onClick
  } = useLink(to, options);
  return /*#__PURE__*/(0, _jsxRuntime.jsx)("a", {
    href: href,
    onClick: onClick,
    ...props,
    children: children
  });
}
//# sourceMappingURL=link.js.map