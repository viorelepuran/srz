{"version":3,"names":["Ariakit","useContext","useMemo","forwardRef","useCallback","Styled","Context","jsx","_jsx","Popover","gutter","children","shift","modal","otherProps","ref","menuContext","appliedPlacementSide","useStoreState","store","split","hideOnEscape","event","preventDefault","computedDirection","wrapperProps","dir","style","direction","Error","Menu","parent","hideOnHoverOutside","unmountOnHide","render","renderProps","PopoverOuterWrapper","variant","PopoverInnerWrapper"],"sources":["@wordpress/components/src/menu/popover.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport * as Ariakit from '@ariakit/react';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseContext,\n\tuseMemo,\n\tforwardRef,\n\tuseCallback,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { WordPressComponentProps } from '../context';\nimport type { PopoverProps } from './types';\nimport * as Styled from './styles';\nimport { Context } from './context';\n\nexport const Popover = forwardRef<\n\tHTMLDivElement,\n\tWordPressComponentProps< PopoverProps, 'div', false >\n>( function Popover(\n\t{ gutter, children, shift, modal = true, ...otherProps },\n\tref\n) {\n\tconst menuContext = useContext( Context );\n\n\t// Extract the side from the applied placement â€” useful for animations.\n\t// Using `currentPlacement` instead of `placement` to make sure that we\n\t// use the final computed placement (including \"flips\" etc).\n\tconst appliedPlacementSide = Ariakit.useStoreState(\n\t\tmenuContext?.store,\n\t\t'currentPlacement'\n\t)?.split( '-' )[ 0 ];\n\n\tconst hideOnEscape = useCallback(\n\t\t( event: React.KeyboardEvent< Element > ) => {\n\t\t\t// Pressing Escape can cause unexpected consequences (ie. exiting\n\t\t\t// full screen mode on MacOs, close parent modals...).\n\t\t\tevent.preventDefault();\n\t\t\t// Returning `true` causes the menu to hide.\n\t\t\treturn true;\n\t\t},\n\t\t[]\n\t);\n\n\tconst computedDirection = Ariakit.useStoreState( menuContext?.store, 'rtl' )\n\t\t? 'rtl'\n\t\t: 'ltr';\n\n\tconst wrapperProps = useMemo(\n\t\t() => ( {\n\t\t\tdir: computedDirection,\n\t\t\tstyle: {\n\t\t\t\tdirection:\n\t\t\t\t\tcomputedDirection as React.CSSProperties[ 'direction' ],\n\t\t\t},\n\t\t} ),\n\t\t[ computedDirection ]\n\t);\n\n\tif ( ! menuContext?.store ) {\n\t\tthrow new Error(\n\t\t\t'Menu.Popover can only be rendered inside a Menu component'\n\t\t);\n\t}\n\n\treturn (\n\t\t<Ariakit.Menu\n\t\t\t{ ...otherProps }\n\t\t\tref={ ref }\n\t\t\tmodal={ modal }\n\t\t\tstore={ menuContext.store }\n\t\t\t// Root menu has an 8px distance from its trigger,\n\t\t\t// otherwise 0 (which causes the submenu to slightly overlap)\n\t\t\tgutter={ gutter ?? ( menuContext.store.parent ? 0 : 8 ) }\n\t\t\t// Align nested menu by the same (but opposite) amount\n\t\t\t// as the menu container's padding.\n\t\t\tshift={ shift ?? ( menuContext.store.parent ? -4 : 0 ) }\n\t\t\thideOnHoverOutside={ false }\n\t\t\tdata-side={ appliedPlacementSide }\n\t\t\twrapperProps={ wrapperProps }\n\t\t\thideOnEscape={ hideOnEscape }\n\t\t\tunmountOnHide\n\t\t\trender={ ( renderProps ) => (\n\t\t\t\t// Two wrappers are needed for the entry animation, where the menu\n\t\t\t\t// container scales with a different factor than its contents.\n\t\t\t\t// The {...renderProps} are passed to the inner wrapper, so that the\n\t\t\t\t// menu element is the direct parent of the menu item elements.\n\t\t\t\t<Styled.PopoverOuterWrapper variant={ menuContext.variant }>\n\t\t\t\t\t<Styled.PopoverInnerWrapper { ...renderProps } />\n\t\t\t\t</Styled.PopoverOuterWrapper>\n\t\t\t) }\n\t\t>\n\t\t\t{ children }\n\t\t</Ariakit.Menu>\n\t);\n} );\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAO,KAAKA,OAAO,MAAM,gBAAgB;;AAEzC;AACA;AACA;AACA,SACCC,UAAU,EACVC,OAAO,EACPC,UAAU,EACVC,WAAW,QACL,oBAAoB;;AAE3B;AACA;AACA;;AAGA,OAAO,KAAKC,MAAM,MAAM,UAAU;AAClC,SAASC,OAAO,QAAQ,WAAW;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEpC,OAAO,MAAMC,OAAO,GAAGN,UAAU,CAG9B,SAASM,OAAOA,CAClB;EAAEC,MAAM;EAAEC,QAAQ;EAAEC,KAAK;EAAEC,KAAK,GAAG,IAAI;EAAE,GAAGC;AAAW,CAAC,EACxDC,GAAG,EACF;EACD,MAAMC,WAAW,GAAGf,UAAU,CAAEK,OAAQ,CAAC;;EAEzC;EACA;EACA;EACA,MAAMW,oBAAoB,GAAGjB,OAAO,CAACkB,aAAa,CACjDF,WAAW,EAAEG,KAAK,EAClB,kBACD,CAAC,EAAEC,KAAK,CAAE,GAAI,CAAC,CAAE,CAAC,CAAE;EAEpB,MAAMC,YAAY,GAAGjB,WAAW,CAC7BkB,KAAqC,IAAM;IAC5C;IACA;IACAA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB;IACA,OAAO,IAAI;EACZ,CAAC,EACD,EACD,CAAC;EAED,MAAMC,iBAAiB,GAAGxB,OAAO,CAACkB,aAAa,CAAEF,WAAW,EAAEG,KAAK,EAAE,KAAM,CAAC,GACzE,KAAK,GACL,KAAK;EAER,MAAMM,YAAY,GAAGvB,OAAO,CAC3B,OAAQ;IACPwB,GAAG,EAAEF,iBAAiB;IACtBG,KAAK,EAAE;MACNC,SAAS,EACRJ;IACF;EACD,CAAC,CAAE,EACH,CAAEA,iBAAiB,CACpB,CAAC;EAED,IAAK,CAAER,WAAW,EAAEG,KAAK,EAAG;IAC3B,MAAM,IAAIU,KAAK,CACd,2DACD,CAAC;EACF;EAEA,oBACCrB,IAAA,CAACR,OAAO,CAAC8B,IAAI;IAAA,GACPhB,UAAU;IACfC,GAAG,EAAGA,GAAK;IACXF,KAAK,EAAGA,KAAO;IACfM,KAAK,EAAGH,WAAW,CAACG;IACpB;IACA;IAAA;IACAT,MAAM,EAAGA,MAAM,aAANA,MAAM,cAANA,MAAM,GAAMM,WAAW,CAACG,KAAK,CAACY,MAAM,GAAG,CAAC,GAAG;IACpD;IACA;IAAA;IACAnB,KAAK,EAAGA,KAAK,aAALA,KAAK,cAALA,KAAK,GAAMI,WAAW,CAACG,KAAK,CAACY,MAAM,GAAG,CAAC,CAAC,GAAG,CAAK;IACxDC,kBAAkB,EAAG,KAAO;IAC5B,aAAYf,oBAAsB;IAClCQ,YAAY,EAAGA,YAAc;IAC7BJ,YAAY,EAAGA,YAAc;IAC7BY,aAAa;IACbC,MAAM,EAAKC,WAAW;IAAA;IACrB;IACA;IACA;IACA;IACA3B,IAAA,CAACH,MAAM,CAAC+B,mBAAmB;MAACC,OAAO,EAAGrB,WAAW,CAACqB,OAAS;MAAA1B,QAAA,eAC1DH,IAAA,CAACH,MAAM,CAACiC,mBAAmB;QAAA,GAAMH;MAAW,CAAI;IAAC,CACtB,CAC1B;IAAAxB,QAAA,EAEDA;EAAQ,CACG,CAAC;AAEjB,CAAE,CAAC","ignoreList":[]}