{"version":3,"names":["useState","useEffect","useEvent","useTrackOverflow","parent","children","first","setFirst","last","setLast","observer","setObserver","callback","entries","entry","target","isIntersecting","window","IntersectionObserver","newObserver","root","threshold","disconnect","observe","unobserve"],"sources":["@wordpress/components/src/tabs/use-track-overflow.ts"],"sourcesContent":["/* eslint-disable jsdoc/require-param */\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport { useEvent } from '@wordpress/compose';\n\n/**\n * Tracks if an element contains overflow and on which end by tracking the\n * first and last child elements with an `IntersectionObserver` in relation\n * to the parent element.\n *\n * Note that the returned value will only indicate whether the first or last\n * element is currently \"going out of bounds\" but not whether it happens on\n * the X or Y axis.\n */\nexport function useTrackOverflow(\n\tparent: HTMLElement | undefined | null,\n\tchildren: {\n\t\tfirst: HTMLElement | undefined | null;\n\t\tlast: HTMLElement | undefined | null;\n\t}\n) {\n\tconst [ first, setFirst ] = useState( false );\n\tconst [ last, setLast ] = useState( false );\n\tconst [ observer, setObserver ] = useState< IntersectionObserver >();\n\n\tconst callback: IntersectionObserverCallback = useEvent( ( entries ) => {\n\t\tfor ( const entry of entries ) {\n\t\t\tif ( entry.target === children.first ) {\n\t\t\t\tsetFirst( ! entry.isIntersecting );\n\t\t\t}\n\t\t\tif ( entry.target === children.last ) {\n\t\t\t\tsetLast( ! entry.isIntersecting );\n\t\t\t}\n\t\t}\n\t} );\n\n\tuseEffect( () => {\n\t\tif ( ! parent || ! window.IntersectionObserver ) {\n\t\t\treturn;\n\t\t}\n\t\tconst newObserver = new IntersectionObserver( callback, {\n\t\t\troot: parent,\n\t\t\tthreshold: 0.9,\n\t\t} );\n\t\tsetObserver( newObserver );\n\n\t\treturn () => newObserver.disconnect();\n\t}, [ callback, parent ] );\n\n\tuseEffect( () => {\n\t\tif ( ! observer ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( children.first ) {\n\t\t\tobserver.observe( children.first );\n\t\t}\n\t\tif ( children.last ) {\n\t\t\tobserver.observe( children.last );\n\t\t}\n\n\t\treturn () => {\n\t\t\tif ( children.first ) {\n\t\t\t\tobserver.unobserve( children.first );\n\t\t\t}\n\t\t\tif ( children.last ) {\n\t\t\t\tobserver.unobserve( children.last );\n\t\t\t}\n\t\t};\n\t}, [ children.first, children.last, observer ] );\n\n\treturn { first, last };\n}\n/* eslint-enable jsdoc/require-param */\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,oBAAoB;AACxD,SAASC,QAAQ,QAAQ,oBAAoB;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,gBAAgBA,CAC/BC,MAAsC,EACtCC,QAGC,EACA;EACD,MAAM,CAAEC,KAAK,EAAEC,QAAQ,CAAE,GAAGP,QAAQ,CAAE,KAAM,CAAC;EAC7C,MAAM,CAAEQ,IAAI,EAAEC,OAAO,CAAE,GAAGT,QAAQ,CAAE,KAAM,CAAC;EAC3C,MAAM,CAAEU,QAAQ,EAAEC,WAAW,CAAE,GAAGX,QAAQ,CAAyB,CAAC;EAEpE,MAAMY,QAAsC,GAAGV,QAAQ,CAAIW,OAAO,IAAM;IACvE,KAAM,MAAMC,KAAK,IAAID,OAAO,EAAG;MAC9B,IAAKC,KAAK,CAACC,MAAM,KAAKV,QAAQ,CAACC,KAAK,EAAG;QACtCC,QAAQ,CAAE,CAAEO,KAAK,CAACE,cAAe,CAAC;MACnC;MACA,IAAKF,KAAK,CAACC,MAAM,KAAKV,QAAQ,CAACG,IAAI,EAAG;QACrCC,OAAO,CAAE,CAAEK,KAAK,CAACE,cAAe,CAAC;MAClC;IACD;EACD,CAAE,CAAC;EAEHf,SAAS,CAAE,MAAM;IAChB,IAAK,CAAEG,MAAM,IAAI,CAAEa,MAAM,CAACC,oBAAoB,EAAG;MAChD;IACD;IACA,MAAMC,WAAW,GAAG,IAAID,oBAAoB,CAAEN,QAAQ,EAAE;MACvDQ,IAAI,EAAEhB,MAAM;MACZiB,SAAS,EAAE;IACZ,CAAE,CAAC;IACHV,WAAW,CAAEQ,WAAY,CAAC;IAE1B,OAAO,MAAMA,WAAW,CAACG,UAAU,CAAC,CAAC;EACtC,CAAC,EAAE,CAAEV,QAAQ,EAAER,MAAM,CAAG,CAAC;EAEzBH,SAAS,CAAE,MAAM;IAChB,IAAK,CAAES,QAAQ,EAAG;MACjB;IACD;IAEA,IAAKL,QAAQ,CAACC,KAAK,EAAG;MACrBI,QAAQ,CAACa,OAAO,CAAElB,QAAQ,CAACC,KAAM,CAAC;IACnC;IACA,IAAKD,QAAQ,CAACG,IAAI,EAAG;MACpBE,QAAQ,CAACa,OAAO,CAAElB,QAAQ,CAACG,IAAK,CAAC;IAClC;IAEA,OAAO,MAAM;MACZ,IAAKH,QAAQ,CAACC,KAAK,EAAG;QACrBI,QAAQ,CAACc,SAAS,CAAEnB,QAAQ,CAACC,KAAM,CAAC;MACrC;MACA,IAAKD,QAAQ,CAACG,IAAI,EAAG;QACpBE,QAAQ,CAACc,SAAS,CAAEnB,QAAQ,CAACG,IAAK,CAAC;MACpC;IACD,CAAC;EACF,CAAC,EAAE,CAAEH,QAAQ,CAACC,KAAK,EAAED,QAAQ,CAACG,IAAI,EAAEE,QAAQ,CAAG,CAAC;EAEhD,OAAO;IAAEJ,KAAK;IAAEE;EAAK,CAAC;AACvB;AACA","ignoreList":[]}