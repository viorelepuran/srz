{"version":3,"names":["useRef","forwardRef","useRovingTabIndexContext","jsx","_jsx","RovingTabIndexItem","UnforwardedRovingTabIndexItem","children","as","Component","props","forwardedRef","localRef","ref","lastFocusedElement","setLastFocusedElement","tabIndex","current","undefined","onFocus","event","target","allProps"],"sources":["@wordpress/components/src/tree-grid/roving-tab-index-item.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRef, forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useRovingTabIndexContext } from './roving-tab-index-context';\nimport type { RovingTabIndexItemProps } from './types';\n\nexport const RovingTabIndexItem = forwardRef(\n\tfunction UnforwardedRovingTabIndexItem(\n\t\t{ children, as: Component, ...props }: RovingTabIndexItemProps,\n\t\tforwardedRef: React.ForwardedRef< any >\n\t) {\n\t\tconst localRef = useRef< any >();\n\t\tconst ref = forwardedRef || localRef;\n\t\t// @ts-expect-error - We actually want to throw an error if this is undefined.\n\t\tconst { lastFocusedElement, setLastFocusedElement } =\n\t\t\tuseRovingTabIndexContext();\n\t\tlet tabIndex;\n\n\t\tif ( lastFocusedElement ) {\n\t\t\ttabIndex =\n\t\t\t\tlastFocusedElement ===\n\t\t\t\t// TODO: The original implementation simply used `ref.current` here, assuming\n\t\t\t\t// that a forwarded ref would always be an object, which is not necessarily true.\n\t\t\t\t// This workaround maintains the original runtime behavior in a type-safe way,\n\t\t\t\t// but should be revisited.\n\t\t\t\t( 'current' in ref ? ref.current : undefined )\n\t\t\t\t\t? 0\n\t\t\t\t\t: -1;\n\t\t}\n\n\t\tconst onFocus: React.FocusEventHandler< HTMLElement > = ( event ) =>\n\t\t\tsetLastFocusedElement?.( event.target );\n\t\tconst allProps = { ref, tabIndex, onFocus, ...props };\n\n\t\tif ( typeof children === 'function' ) {\n\t\t\treturn children( allProps );\n\t\t}\n\n\t\tif ( ! Component ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn <Component { ...allProps }>{ children }</Component>;\n\t}\n);\n\nexport default RovingTabIndexItem;\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,MAAM,EAAEC,UAAU,QAAQ,oBAAoB;;AAEvD;AACA;AACA;AACA,SAASC,wBAAwB,QAAQ,4BAA4B;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAGtE,OAAO,MAAMC,kBAAkB,GAAGJ,UAAU,CAC3C,SAASK,6BAA6BA,CACrC;EAAEC,QAAQ;EAAEC,EAAE,EAAEC,SAAS;EAAE,GAAGC;AAA+B,CAAC,EAC9DC,YAAuC,EACtC;EACD,MAAMC,QAAQ,GAAGZ,MAAM,CAAQ,CAAC;EAChC,MAAMa,GAAG,GAAGF,YAAY,IAAIC,QAAQ;EACpC;EACA,MAAM;IAAEE,kBAAkB;IAAEC;EAAsB,CAAC,GAClDb,wBAAwB,CAAC,CAAC;EAC3B,IAAIc,QAAQ;EAEZ,IAAKF,kBAAkB,EAAG;IACzBE,QAAQ,GACPF,kBAAkB;IAClB;IACA;IACA;IACA;IACE,SAAS,IAAID,GAAG,GAAGA,GAAG,CAACI,OAAO,GAAGC,SAAS,CAAE,GAC3C,CAAC,GACD,CAAC,CAAC;EACP;EAEA,MAAMC,OAA+C,GAAKC,KAAK,IAC9DL,qBAAqB,GAAIK,KAAK,CAACC,MAAO,CAAC;EACxC,MAAMC,QAAQ,GAAG;IAAET,GAAG;IAAEG,QAAQ;IAAEG,OAAO;IAAE,GAAGT;EAAM,CAAC;EAErD,IAAK,OAAOH,QAAQ,KAAK,UAAU,EAAG;IACrC,OAAOA,QAAQ,CAAEe,QAAS,CAAC;EAC5B;EAEA,IAAK,CAAEb,SAAS,EAAG;IAClB,OAAO,IAAI;EACZ;EAEA,oBAAOL,IAAA,CAACK,SAAS;IAAA,GAAMa,QAAQ;IAAAf,QAAA,EAAKA;EAAQ,CAAa,CAAC;AAC3D,CACD,CAAC;AAED,eAAeF,kBAAkB","ignoreList":[]}