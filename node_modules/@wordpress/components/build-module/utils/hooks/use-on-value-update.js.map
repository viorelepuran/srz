{"version":3,"names":["useEvent","useRef","useLayoutEffect","useOnValueUpdate","value","onUpdate","previousValueRef","updateCallbackEvent","current","previousValue"],"sources":["@wordpress/components/src/utils/hooks/use-on-value-update.ts"],"sourcesContent":["/* eslint-disable jsdoc/require-param */\n/**\n * WordPress dependencies\n */\nimport { useEvent } from '@wordpress/compose';\nimport { useRef, useLayoutEffect } from '@wordpress/element';\n\n/**\n * Context object for the `onUpdate` callback of `useOnValueUpdate`.\n */\nexport type ValueUpdateContext< T > = {\n\tpreviousValue: T;\n};\n\n/**\n * Calls the `onUpdate` callback when the `value` changes.\n */\nexport function useOnValueUpdate< T >(\n\t/**\n\t * The value to watch for changes.\n\t */\n\tvalue: T,\n\t/**\n\t * Callback to fire when the value changes.\n\t */\n\tonUpdate: ( context: ValueUpdateContext< T > ) => void\n) {\n\tconst previousValueRef = useRef( value );\n\tconst updateCallbackEvent = useEvent( onUpdate );\n\tuseLayoutEffect( () => {\n\t\tif ( previousValueRef.current !== value ) {\n\t\t\tupdateCallbackEvent( {\n\t\t\t\tpreviousValue: previousValueRef.current,\n\t\t\t} );\n\t\t\tpreviousValueRef.current = value;\n\t\t}\n\t}, [ updateCallbackEvent, value ] );\n}\n/* eslint-enable jsdoc/require-param */\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,MAAM,EAAEC,eAAe,QAAQ,oBAAoB;;AAE5D;AACA;AACA;;AAKA;AACA;AACA;AACA,OAAO,SAASC,gBAAgBA;AAC/B;AACD;AACA;AACCC,KAAQ;AACR;AACD;AACA;AACCC,QAAsD,EACrD;EACD,MAAMC,gBAAgB,GAAGL,MAAM,CAAEG,KAAM,CAAC;EACxC,MAAMG,mBAAmB,GAAGP,QAAQ,CAAEK,QAAS,CAAC;EAChDH,eAAe,CAAE,MAAM;IACtB,IAAKI,gBAAgB,CAACE,OAAO,KAAKJ,KAAK,EAAG;MACzCG,mBAAmB,CAAE;QACpBE,aAAa,EAAEH,gBAAgB,CAACE;MACjC,CAAE,CAAC;MACHF,gBAAgB,CAACE,OAAO,GAAGJ,KAAK;IACjC;EACD,CAAC,EAAE,CAAEG,mBAAmB,EAAEH,KAAK,CAAG,CAAC;AACpC;AACA","ignoreList":[]}