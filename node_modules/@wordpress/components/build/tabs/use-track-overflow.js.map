{"version":3,"names":["_element","require","_compose","useTrackOverflow","parent","children","first","setFirst","useState","last","setLast","observer","setObserver","callback","useEvent","entries","entry","target","isIntersecting","useEffect","window","IntersectionObserver","newObserver","root","threshold","disconnect","observe","unobserve"],"sources":["@wordpress/components/src/tabs/use-track-overflow.ts"],"sourcesContent":["/* eslint-disable jsdoc/require-param */\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport { useEvent } from '@wordpress/compose';\n\n/**\n * Tracks if an element contains overflow and on which end by tracking the\n * first and last child elements with an `IntersectionObserver` in relation\n * to the parent element.\n *\n * Note that the returned value will only indicate whether the first or last\n * element is currently \"going out of bounds\" but not whether it happens on\n * the X or Y axis.\n */\nexport function useTrackOverflow(\n\tparent: HTMLElement | undefined | null,\n\tchildren: {\n\t\tfirst: HTMLElement | undefined | null;\n\t\tlast: HTMLElement | undefined | null;\n\t}\n) {\n\tconst [ first, setFirst ] = useState( false );\n\tconst [ last, setLast ] = useState( false );\n\tconst [ observer, setObserver ] = useState< IntersectionObserver >();\n\n\tconst callback: IntersectionObserverCallback = useEvent( ( entries ) => {\n\t\tfor ( const entry of entries ) {\n\t\t\tif ( entry.target === children.first ) {\n\t\t\t\tsetFirst( ! entry.isIntersecting );\n\t\t\t}\n\t\t\tif ( entry.target === children.last ) {\n\t\t\t\tsetLast( ! entry.isIntersecting );\n\t\t\t}\n\t\t}\n\t} );\n\n\tuseEffect( () => {\n\t\tif ( ! parent || ! window.IntersectionObserver ) {\n\t\t\treturn;\n\t\t}\n\t\tconst newObserver = new IntersectionObserver( callback, {\n\t\t\troot: parent,\n\t\t\tthreshold: 0.9,\n\t\t} );\n\t\tsetObserver( newObserver );\n\n\t\treturn () => newObserver.disconnect();\n\t}, [ callback, parent ] );\n\n\tuseEffect( () => {\n\t\tif ( ! observer ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( children.first ) {\n\t\t\tobserver.observe( children.first );\n\t\t}\n\t\tif ( children.last ) {\n\t\t\tobserver.observe( children.last );\n\t\t}\n\n\t\treturn () => {\n\t\t\tif ( children.first ) {\n\t\t\t\tobserver.unobserve( children.first );\n\t\t\t}\n\t\t\tif ( children.last ) {\n\t\t\t\tobserver.unobserve( children.last );\n\t\t\t}\n\t\t};\n\t}, [ children.first, children.last, observer ] );\n\n\treturn { first, last };\n}\n/* eslint-enable jsdoc/require-param */\n"],"mappings":";;;;;;AAIA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AALA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASE,gBAAgBA,CAC/BC,MAAsC,EACtCC,QAGC,EACA;EACD,MAAM,CAAEC,KAAK,EAAEC,QAAQ,CAAE,GAAG,IAAAC,iBAAQ,EAAE,KAAM,CAAC;EAC7C,MAAM,CAAEC,IAAI,EAAEC,OAAO,CAAE,GAAG,IAAAF,iBAAQ,EAAE,KAAM,CAAC;EAC3C,MAAM,CAAEG,QAAQ,EAAEC,WAAW,CAAE,GAAG,IAAAJ,iBAAQ,EAAyB,CAAC;EAEpE,MAAMK,QAAsC,GAAG,IAAAC,iBAAQ,EAAIC,OAAO,IAAM;IACvE,KAAM,MAAMC,KAAK,IAAID,OAAO,EAAG;MAC9B,IAAKC,KAAK,CAACC,MAAM,KAAKZ,QAAQ,CAACC,KAAK,EAAG;QACtCC,QAAQ,CAAE,CAAES,KAAK,CAACE,cAAe,CAAC;MACnC;MACA,IAAKF,KAAK,CAACC,MAAM,KAAKZ,QAAQ,CAACI,IAAI,EAAG;QACrCC,OAAO,CAAE,CAAEM,KAAK,CAACE,cAAe,CAAC;MAClC;IACD;EACD,CAAE,CAAC;EAEH,IAAAC,kBAAS,EAAE,MAAM;IAChB,IAAK,CAAEf,MAAM,IAAI,CAAEgB,MAAM,CAACC,oBAAoB,EAAG;MAChD;IACD;IACA,MAAMC,WAAW,GAAG,IAAID,oBAAoB,CAAER,QAAQ,EAAE;MACvDU,IAAI,EAAEnB,MAAM;MACZoB,SAAS,EAAE;IACZ,CAAE,CAAC;IACHZ,WAAW,CAAEU,WAAY,CAAC;IAE1B,OAAO,MAAMA,WAAW,CAACG,UAAU,CAAC,CAAC;EACtC,CAAC,EAAE,CAAEZ,QAAQ,EAAET,MAAM,CAAG,CAAC;EAEzB,IAAAe,kBAAS,EAAE,MAAM;IAChB,IAAK,CAAER,QAAQ,EAAG;MACjB;IACD;IAEA,IAAKN,QAAQ,CAACC,KAAK,EAAG;MACrBK,QAAQ,CAACe,OAAO,CAAErB,QAAQ,CAACC,KAAM,CAAC;IACnC;IACA,IAAKD,QAAQ,CAACI,IAAI,EAAG;MACpBE,QAAQ,CAACe,OAAO,CAAErB,QAAQ,CAACI,IAAK,CAAC;IAClC;IAEA,OAAO,MAAM;MACZ,IAAKJ,QAAQ,CAACC,KAAK,EAAG;QACrBK,QAAQ,CAACgB,SAAS,CAAEtB,QAAQ,CAACC,KAAM,CAAC;MACrC;MACA,IAAKD,QAAQ,CAACI,IAAI,EAAG;QACpBE,QAAQ,CAACgB,SAAS,CAAEtB,QAAQ,CAACI,IAAK,CAAC;MACpC;IACD,CAAC;EACF,CAAC,EAAE,CAAEJ,QAAQ,CAACC,KAAK,EAAED,QAAQ,CAACI,IAAI,EAAEE,QAAQ,CAAG,CAAC;EAEhD,OAAO;IAAEL,KAAK;IAAEG;EAAK,CAAC;AACvB;AACA","ignoreList":[]}