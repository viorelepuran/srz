{"version":3,"names":["clsx","createBlock","useSelect","useDispatch","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","TextControl","TextareaControl","ToolbarButton","ToolbarGroup","displayShortcut","isKeyboardEvent","__","BlockControls","InspectorControls","RichText","useBlockProps","store","blockEditorStore","getColorClassName","useInnerBlocksProps","useBlockEditingMode","isURL","prependHTTP","safeDecodeURI","useState","useEffect","useRef","__unstableStripHTML","stripHTML","decodeEntities","link","linkIcon","addSubmenu","coreStore","useMergeRefs","usePrevious","LinkUI","updateAttributes","getColors","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DEFAULT_BLOCK","name","NESTING_BLOCK_NAMES","useIsDraggingWithin","elementRef","isDraggingWithin","setIsDraggingWithin","ownerDocument","current","handleDragStart","event","handleDragEnter","handleDragEnd","contains","target","addEventListener","removeEventListener","useIsInvalidLink","kind","type","id","enabled","isPostType","hasId","Number","isInteger","blockEditingMode","postStatus","select","getEntityRecord","status","isInvalid","isDraft","getMissingText","missingText","Controls","attributes","setAttributes","setIsLabelFieldFocused","label","url","description","rel","children","hasValue","onDeselect","isShownByDefault","__nextHasNoMarginBottom","__next40pxDefaultSize","value","onChange","labelValue","autoComplete","onFocus","onBlur","urlValue","descriptionValue","help","relValue","NavigationLinkEdit","isSelected","insertBlocksAfter","mergeBlocks","onReplace","context","clientId","maxNestingLevel","replaceBlock","__unstableMarkNextChangeAsNotPersistent","selectBlock","selectPreviousBlock","isLinkOpen","setIsLinkOpen","openedBy","setOpenedBy","popoverAnchor","setPopoverAnchor","listItemRef","itemLabelPlaceholder","ref","linkUIref","prevUrl","isLabelFieldFocused","isAtMaxNesting","isTopLevelLink","isParentOfSelectedBlock","hasChildren","validateLinkStatus","getBlockCount","getBlockName","getBlockRootClientId","hasSelectedInnerBlock","getBlockParentsByBlockName","getSelectedBlockClientId","rootClientId","isTopLevel","selectedBlockClientId","rootNavigationClientId","enableLinkStatusValidation","length","getBlocks","transformToSubmenu","innerBlocks","newSubmenu","test","selectLabelText","focus","defaultView","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","removeLink","undefined","opensInNewTab","textColor","customTextColor","backgroundColor","customBackgroundColor","onKeyDown","primary","preventDefault","stopPropagation","blockProps","className","style","color","innerBlocksProps","defaultBlock","directInsert","renderAppender","onClick","classes","placeholderText","icon","title","shortcut","currentTarget","identifier","onMerge","__unstableOnSplitAtEnd","placeholder","withoutInteractiveFormatting","trim","onClose","window","document","activeElement","anchor","onRemove","updatedValue"],"sources":["@wordpress/block-library/src/navigation-link/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\tTextControl,\n\tTextareaControl,\n\tToolbarButton,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { displayShortcut, isKeyboardEvent } from '@wordpress/keycodes';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tBlockControls,\n\tInspectorControls,\n\tRichText,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n\tgetColorClassName,\n\tuseInnerBlocksProps,\n\tuseBlockEditingMode,\n} from '@wordpress/block-editor';\nimport { isURL, prependHTTP, safeDecodeURI } from '@wordpress/url';\nimport { useState, useEffect, useRef } from '@wordpress/element';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { link as linkIcon, addSubmenu } from '@wordpress/icons';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { useMergeRefs, usePrevious } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { LinkUI } from './link-ui';\nimport { updateAttributes } from './update-attributes';\nimport { getColors } from '../navigation/edit/utils';\n\nconst DEFAULT_BLOCK = { name: 'core/navigation-link' };\nconst NESTING_BLOCK_NAMES = [\n\t'core/navigation-link',\n\t'core/navigation-submenu',\n];\n\n/**\n * A React hook to determine if it's dragging within the target element.\n *\n * @typedef {import('@wordpress/element').RefObject} RefObject\n *\n * @param {RefObject<HTMLElement>} elementRef The target elementRef object.\n *\n * @return {boolean} Is dragging within the target element.\n */\nconst useIsDraggingWithin = ( elementRef ) => {\n\tconst [ isDraggingWithin, setIsDraggingWithin ] = useState( false );\n\n\tuseEffect( () => {\n\t\tconst { ownerDocument } = elementRef.current;\n\n\t\tfunction handleDragStart( event ) {\n\t\t\t// Check the first time when the dragging starts.\n\t\t\thandleDragEnter( event );\n\t\t}\n\n\t\t// Set to false whenever the user cancel the drag event by either releasing the mouse or press Escape.\n\t\tfunction handleDragEnd() {\n\t\t\tsetIsDraggingWithin( false );\n\t\t}\n\n\t\tfunction handleDragEnter( event ) {\n\t\t\t// Check if the current target is inside the item element.\n\t\t\tif ( elementRef.current.contains( event.target ) ) {\n\t\t\t\tsetIsDraggingWithin( true );\n\t\t\t} else {\n\t\t\t\tsetIsDraggingWithin( false );\n\t\t\t}\n\t\t}\n\n\t\t// Bind these events to the document to catch all drag events.\n\t\t// Ideally, we can also use `event.relatedTarget`, but sadly that\n\t\t// doesn't work in Safari.\n\t\townerDocument.addEventListener( 'dragstart', handleDragStart );\n\t\townerDocument.addEventListener( 'dragend', handleDragEnd );\n\t\townerDocument.addEventListener( 'dragenter', handleDragEnter );\n\n\t\treturn () => {\n\t\t\townerDocument.removeEventListener( 'dragstart', handleDragStart );\n\t\t\townerDocument.removeEventListener( 'dragend', handleDragEnd );\n\t\t\townerDocument.removeEventListener( 'dragenter', handleDragEnter );\n\t\t};\n\t}, [ elementRef ] );\n\n\treturn isDraggingWithin;\n};\n\nconst useIsInvalidLink = ( kind, type, id, enabled ) => {\n\tconst isPostType =\n\t\tkind === 'post-type' || type === 'post' || type === 'page';\n\tconst hasId = Number.isInteger( id );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tconst postStatus = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! isPostType ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Fetching the posts status is an \"expensive\" operation. Especially for sites with large navigations.\n\t\t\t// When the block is rendered in a template or other disabled contexts we can skip this check in order\n\t\t\t// to avoid all these additional requests that don't really add any value in that mode.\n\t\t\tif ( blockEditingMode === 'disabled' || ! enabled ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst { getEntityRecord } = select( coreStore );\n\t\t\treturn getEntityRecord( 'postType', type, id )?.status;\n\t\t},\n\t\t[ isPostType, blockEditingMode, enabled, type, id ]\n\t);\n\n\t// Check Navigation Link validity if:\n\t// 1. Link is 'post-type'.\n\t// 2. It has an id.\n\t// 3. It's neither null, nor undefined, as valid items might be either of those while loading.\n\t// If those conditions are met, check if\n\t// 1. The post status is published.\n\t// 2. The Navigation Link item has no label.\n\t// If either of those is true, invalidate.\n\tconst isInvalid =\n\t\tisPostType && hasId && postStatus && 'trash' === postStatus;\n\tconst isDraft = 'draft' === postStatus;\n\n\treturn [ isInvalid, isDraft ];\n};\n\nfunction getMissingText( type ) {\n\tlet missingText = '';\n\n\tswitch ( type ) {\n\t\tcase 'post':\n\t\t\t/* translators: label for missing post in navigation link block */\n\t\t\tmissingText = __( 'Select post' );\n\t\t\tbreak;\n\t\tcase 'page':\n\t\t\t/* translators: label for missing page in navigation link block */\n\t\t\tmissingText = __( 'Select page' );\n\t\t\tbreak;\n\t\tcase 'category':\n\t\t\t/* translators: label for missing category in navigation link block */\n\t\t\tmissingText = __( 'Select category' );\n\t\t\tbreak;\n\t\tcase 'tag':\n\t\t\t/* translators: label for missing tag in navigation link block */\n\t\t\tmissingText = __( 'Select tag' );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t/* translators: label for missing values in navigation link block */\n\t\t\tmissingText = __( 'Add link' );\n\t}\n\n\treturn missingText;\n}\n\n/*\n * Warning, this duplicated in\n * packages/block-library/src/navigation-submenu/edit.js\n * Consider reusing this components for both blocks.\n */\nfunction Controls( { attributes, setAttributes, setIsLabelFieldFocused } ) {\n\tconst { label, url, description, rel } = attributes;\n\treturn (\n\t\t<ToolsPanel label={ __( 'Settings' ) }>\n\t\t\t<ToolsPanelItem\n\t\t\t\thasValue={ () => !! label }\n\t\t\t\tlabel={ __( 'Text' ) }\n\t\t\t\tonDeselect={ () => setAttributes( { label: '' } ) }\n\t\t\t\tisShownByDefault\n\t\t\t>\n\t\t\t\t<TextControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tlabel={ __( 'Text' ) }\n\t\t\t\t\tvalue={ label ? stripHTML( label ) : '' }\n\t\t\t\t\tonChange={ ( labelValue ) => {\n\t\t\t\t\t\tsetAttributes( { label: labelValue } );\n\t\t\t\t\t} }\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\tonFocus={ () => setIsLabelFieldFocused( true ) }\n\t\t\t\t\tonBlur={ () => setIsLabelFieldFocused( false ) }\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\n\t\t\t<ToolsPanelItem\n\t\t\t\thasValue={ () => !! url }\n\t\t\t\tlabel={ __( 'Link' ) }\n\t\t\t\tonDeselect={ () => setAttributes( { url: '' } ) }\n\t\t\t\tisShownByDefault\n\t\t\t>\n\t\t\t\t<TextControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tlabel={ __( 'Link' ) }\n\t\t\t\t\tvalue={ url ? safeDecodeURI( url ) : '' }\n\t\t\t\t\tonChange={ ( urlValue ) => {\n\t\t\t\t\t\tupdateAttributes(\n\t\t\t\t\t\t\t{ url: urlValue },\n\t\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\t\tattributes\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\ttype=\"url\"\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\n\t\t\t<ToolsPanelItem\n\t\t\t\thasValue={ () => !! description }\n\t\t\t\tlabel={ __( 'Description' ) }\n\t\t\t\tonDeselect={ () => setAttributes( { description: '' } ) }\n\t\t\t\tisShownByDefault\n\t\t\t>\n\t\t\t\t<TextareaControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Description' ) }\n\t\t\t\t\tvalue={ description || '' }\n\t\t\t\t\tonChange={ ( descriptionValue ) => {\n\t\t\t\t\t\tsetAttributes( { description: descriptionValue } );\n\t\t\t\t\t} }\n\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t'The description will be displayed in the menu if the current theme supports it.'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\n\t\t\t<ToolsPanelItem\n\t\t\t\thasValue={ () => !! rel }\n\t\t\t\tlabel={ __( 'Rel attribute' ) }\n\t\t\t\tonDeselect={ () => setAttributes( { rel: '' } ) }\n\t\t\t\tisShownByDefault\n\t\t\t>\n\t\t\t\t<TextControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tlabel={ __( 'Rel attribute' ) }\n\t\t\t\t\tvalue={ rel || '' }\n\t\t\t\t\tonChange={ ( relValue ) => {\n\t\t\t\t\t\tsetAttributes( { rel: relValue } );\n\t\t\t\t\t} }\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t'The relationship of the linked URL as space-separated link types.'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</ToolsPanelItem>\n\t\t</ToolsPanel>\n\t);\n}\n\nexport default function NavigationLinkEdit( {\n\tattributes,\n\tisSelected,\n\tsetAttributes,\n\tinsertBlocksAfter,\n\tmergeBlocks,\n\tonReplace,\n\tcontext,\n\tclientId,\n} ) {\n\tconst { id, label, type, url, description, kind } = attributes;\n\tconst { maxNestingLevel } = context;\n\n\tconst {\n\t\treplaceBlock,\n\t\t__unstableMarkNextChangeAsNotPersistent,\n\t\tselectBlock,\n\t\tselectPreviousBlock,\n\t} = useDispatch( blockEditorStore );\n\t// Have the link editing ui open on mount when lacking a url and selected.\n\tconst [ isLinkOpen, setIsLinkOpen ] = useState( isSelected && ! url );\n\t// Store what element opened the popover, so we know where to return focus to (toolbar button vs navigation link text)\n\tconst [ openedBy, setOpenedBy ] = useState( null );\n\t// Use internal state instead of a ref to make sure that the component\n\t// re-renders when the popover's anchor updates.\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\n\tconst listItemRef = useRef( null );\n\tconst isDraggingWithin = useIsDraggingWithin( listItemRef );\n\tconst itemLabelPlaceholder = __( 'Add label…' );\n\tconst ref = useRef();\n\tconst linkUIref = useRef();\n\tconst prevUrl = usePrevious( url );\n\n\t// Change the label using inspector causes rich text to change focus on firefox.\n\t// This is a workaround to keep the focus on the label field when label filed is focused we don't render the rich text.\n\tconst [ isLabelFieldFocused, setIsLabelFieldFocused ] = useState( false );\n\n\tconst {\n\t\tisAtMaxNesting,\n\t\tisTopLevelLink,\n\t\tisParentOfSelectedBlock,\n\t\thasChildren,\n\t\tvalidateLinkStatus,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\thasSelectedInnerBlock,\n\t\t\t\tgetBlockParentsByBlockName,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\t\t\tconst isTopLevel =\n\t\t\t\tgetBlockName( rootClientId ) === 'core/navigation';\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst rootNavigationClientId = isTopLevel\n\t\t\t\t? rootClientId\n\t\t\t\t: getBlockParentsByBlockName(\n\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t'core/navigation'\n\t\t\t\t  )[ 0 ];\n\n\t\t\t// Enable when the root Navigation block is selected or any of its inner blocks.\n\t\t\tconst enableLinkStatusValidation =\n\t\t\t\tselectedBlockClientId === rootNavigationClientId ||\n\t\t\t\thasSelectedInnerBlock( rootNavigationClientId, true );\n\n\t\t\treturn {\n\t\t\t\tisAtMaxNesting:\n\t\t\t\t\tgetBlockParentsByBlockName( clientId, NESTING_BLOCK_NAMES )\n\t\t\t\t\t\t.length >= maxNestingLevel,\n\t\t\t\tisTopLevelLink: isTopLevel,\n\t\t\t\tisParentOfSelectedBlock: hasSelectedInnerBlock(\n\t\t\t\t\tclientId,\n\t\t\t\t\ttrue\n\t\t\t\t),\n\t\t\t\thasChildren: !! getBlockCount( clientId ),\n\t\t\t\tvalidateLinkStatus: enableLinkStatusValidation,\n\t\t\t};\n\t\t},\n\t\t[ clientId, maxNestingLevel ]\n\t);\n\tconst { getBlocks } = useSelect( blockEditorStore );\n\n\tconst [ isInvalid, isDraft ] = useIsInvalidLink(\n\t\tkind,\n\t\ttype,\n\t\tid,\n\t\tvalidateLinkStatus\n\t);\n\n\t/**\n\t * Transform to submenu block.\n\t */\n\tconst transformToSubmenu = () => {\n\t\tlet innerBlocks = getBlocks( clientId );\n\t\tif ( innerBlocks.length === 0 ) {\n\t\t\tinnerBlocks = [ createBlock( 'core/navigation-link' ) ];\n\t\t\tselectBlock( innerBlocks[ 0 ].clientId );\n\t\t}\n\t\tconst newSubmenu = createBlock(\n\t\t\t'core/navigation-submenu',\n\t\t\tattributes,\n\t\t\tinnerBlocks\n\t\t);\n\t\treplaceBlock( clientId, newSubmenu );\n\t};\n\n\tuseEffect( () => {\n\t\t// If block has inner blocks, transform to Submenu.\n\t\tif ( hasChildren ) {\n\t\t\t// This side-effect should not create an undo level as those should\n\t\t\t// only be created via user interactions.\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\ttransformToSubmenu();\n\t\t}\n\t}, [ hasChildren ] );\n\n\t// If the LinkControl popover is open and the URL has changed, close the LinkControl and focus the label text.\n\tuseEffect( () => {\n\t\t// We only want to do this when the URL has gone from nothing to a new URL AND the label looks like a URL\n\t\tif (\n\t\t\t! prevUrl &&\n\t\t\turl &&\n\t\t\tisLinkOpen &&\n\t\t\tisURL( prependHTTP( label ) ) &&\n\t\t\t/^.+\\.[a-z]+/.test( label )\n\t\t) {\n\t\t\t// Focus and select the label text.\n\t\t\tselectLabelText();\n\t\t}\n\t}, [ prevUrl, url, isLinkOpen, label ] );\n\n\t/**\n\t * Focus the Link label text and select it.\n\t */\n\tfunction selectLabelText() {\n\t\tref.current.focus();\n\t\tconst { ownerDocument } = ref.current;\n\t\tconst { defaultView } = ownerDocument;\n\t\tconst selection = defaultView.getSelection();\n\t\tconst range = ownerDocument.createRange();\n\t\t// Get the range of the current ref contents so we can add this range to the selection.\n\t\trange.selectNodeContents( ref.current );\n\t\tselection.removeAllRanges();\n\t\tselection.addRange( range );\n\t}\n\n\t/**\n\t * Removes the current link if set.\n\t */\n\tfunction removeLink() {\n\t\t// Reset all attributes that comprise the link.\n\t\t// It is critical that all attributes are reset\n\t\t// to their default values otherwise this may\n\t\t// in advertently trigger side effects because\n\t\t// the values will have \"changed\".\n\t\tsetAttributes( {\n\t\t\turl: undefined,\n\t\t\tlabel: undefined,\n\t\t\tid: undefined,\n\t\t\tkind: undefined,\n\t\t\ttype: undefined,\n\t\t\topensInNewTab: false,\n\t\t} );\n\n\t\t// Close the link editing UI.\n\t\tsetIsLinkOpen( false );\n\t}\n\n\tconst {\n\t\ttextColor,\n\t\tcustomTextColor,\n\t\tbackgroundColor,\n\t\tcustomBackgroundColor,\n\t} = getColors( context, ! isTopLevelLink );\n\n\tfunction onKeyDown( event ) {\n\t\tif ( isKeyboardEvent.primary( event, 'k' ) ) {\n\t\t\t// Required to prevent the command center from opening,\n\t\t\t// as it shares the CMD+K shortcut.\n\t\t\t// See https://github.com/WordPress/gutenberg/pull/59845.\n\t\t\tevent.preventDefault();\n\t\t\t// If this link is a child of a parent submenu item, the parent submenu item event will also open, closing this popover\n\t\t\tevent.stopPropagation();\n\t\t\tsetIsLinkOpen( true );\n\t\t\tsetOpenedBy( ref.current );\n\t\t}\n\t}\n\n\tconst blockProps = useBlockProps( {\n\t\tref: useMergeRefs( [ setPopoverAnchor, listItemRef ] ),\n\t\tclassName: clsx( 'wp-block-navigation-item', {\n\t\t\t'is-editing': isSelected || isParentOfSelectedBlock,\n\t\t\t'is-dragging-within': isDraggingWithin,\n\t\t\t'has-link': !! url,\n\t\t\t'has-child': hasChildren,\n\t\t\t'has-text-color': !! textColor || !! customTextColor,\n\t\t\t[ getColorClassName( 'color', textColor ) ]: !! textColor,\n\t\t\t'has-background': !! backgroundColor || customBackgroundColor,\n\t\t\t[ getColorClassName( 'background-color', backgroundColor ) ]:\n\t\t\t\t!! backgroundColor,\n\t\t} ),\n\t\tstyle: {\n\t\t\tcolor: ! textColor && customTextColor,\n\t\t\tbackgroundColor: ! backgroundColor && customBackgroundColor,\n\t\t},\n\t\tonKeyDown,\n\t} );\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\t...blockProps,\n\t\t\tclassName: 'remove-outline', // Remove the outline from the inner blocks container.\n\t\t},\n\t\t{\n\t\t\tdefaultBlock: DEFAULT_BLOCK,\n\t\t\tdirectInsert: true,\n\t\t\trenderAppender: false,\n\t\t}\n\t);\n\n\tif ( ! url || isInvalid || isDraft ) {\n\t\tblockProps.onClick = () => {\n\t\t\tsetIsLinkOpen( true );\n\t\t\tsetOpenedBy( ref.current );\n\t\t};\n\t}\n\n\tconst classes = clsx( 'wp-block-navigation-item__content', {\n\t\t'wp-block-navigation-link__placeholder': ! url || isInvalid || isDraft,\n\t} );\n\n\tconst missingText = getMissingText( type );\n\t/* translators: Whether the navigation link is Invalid or a Draft. */\n\tconst placeholderText = `(${\n\t\tisInvalid ? __( 'Invalid' ) : __( 'Draft' )\n\t})`;\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tname=\"link\"\n\t\t\t\t\t\ticon={ linkIcon }\n\t\t\t\t\t\ttitle={ __( 'Link' ) }\n\t\t\t\t\t\tshortcut={ displayShortcut.primary( 'k' ) }\n\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\tsetIsLinkOpen( true );\n\t\t\t\t\t\t\tsetOpenedBy( event.currentTarget );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! isAtMaxNesting && (\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\tname=\"submenu\"\n\t\t\t\t\t\t\ticon={ addSubmenu }\n\t\t\t\t\t\t\ttitle={ __( 'Add submenu' ) }\n\t\t\t\t\t\t\tonClick={ transformToSubmenu }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t{ /* Warning, this duplicated in packages/block-library/src/navigation-submenu/edit.js */ }\n\t\t\t<InspectorControls>\n\t\t\t\t<Controls\n\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\tsetIsLabelFieldFocused={ setIsLabelFieldFocused }\n\t\t\t\t/>\n\t\t\t</InspectorControls>\n\t\t\t<div { ...blockProps }>\n\t\t\t\t{ /* eslint-disable jsx-a11y/anchor-is-valid */ }\n\t\t\t\t<a className={ classes }>\n\t\t\t\t\t{ /* eslint-enable */ }\n\t\t\t\t\t{ ! url ? (\n\t\t\t\t\t\t<div className=\"wp-block-navigation-link__placeholder-text\">\n\t\t\t\t\t\t\t<span>{ missingText }</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{ ! isInvalid &&\n\t\t\t\t\t\t\t\t! isDraft &&\n\t\t\t\t\t\t\t\t! isLabelFieldFocused && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\t\t\t\t\tidentifier=\"label\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"wp-block-navigation-item__label\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={ label }\n\t\t\t\t\t\t\t\t\t\t\tonChange={ ( labelValue ) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: labelValue,\n\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonMerge={ mergeBlocks }\n\t\t\t\t\t\t\t\t\t\t\tonReplace={ onReplace }\n\t\t\t\t\t\t\t\t\t\t\t__unstableOnSplitAtEnd={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\tinsertBlocksAfter(\n\t\t\t\t\t\t\t\t\t\t\t\t\tcreateBlock(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'core/navigation-link'\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\taria-label={ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Navigation link text'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={ itemLabelPlaceholder }\n\t\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{ description && (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"wp-block-navigation-item__description\">\n\t\t\t\t\t\t\t\t\t\t\t\t{ description }\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ( isInvalid ||\n\t\t\t\t\t\t\t\tisDraft ||\n\t\t\t\t\t\t\t\tisLabelFieldFocused ) && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t\t\t\t'wp-block-navigation-link__placeholder-text',\n\t\t\t\t\t\t\t\t\t\t'wp-block-navigation-link__label',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'is-invalid': isInvalid,\n\t\t\t\t\t\t\t\t\t\t\t'is-draft': isDraft,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t// Some attributes are stored in an escaped form. It's a legacy issue.\n\t\t\t\t\t\t\t\t\t\t\t// Ideally they would be stored in a raw, unescaped form.\n\t\t\t\t\t\t\t\t\t\t\t// Unescape is used here to \"recover\" the escaped characters\n\t\t\t\t\t\t\t\t\t\t\t// so they display without encoding.\n\t\t\t\t\t\t\t\t\t\t\t// See `updateAttributes` for more details.\n\t\t\t\t\t\t\t\t\t\t\t`${ decodeEntities( label ) } ${\n\t\t\t\t\t\t\t\t\t\t\t\tisInvalid || isDraft\n\t\t\t\t\t\t\t\t\t\t\t\t\t? placeholderText\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t}`.trim()\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t\t{ isLinkOpen && (\n\t\t\t\t\t\t<LinkUI\n\t\t\t\t\t\t\tref={ linkUIref }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\tlink={ attributes }\n\t\t\t\t\t\t\tonClose={ () => {\n\t\t\t\t\t\t\t\t// If there is no link then remove the auto-inserted block.\n\t\t\t\t\t\t\t\t// This avoids empty blocks which can provided a poor UX.\n\t\t\t\t\t\t\t\tif ( ! url ) {\n\t\t\t\t\t\t\t\t\t// Fixes https://github.com/WordPress/gutenberg/issues/61361\n\t\t\t\t\t\t\t\t\t// There's a chance we're closing due to the user selecting the browse all button.\n\t\t\t\t\t\t\t\t\t// Only move focus if the focus is still within the popover ui. If it's not within\n\t\t\t\t\t\t\t\t\t// the popover, it's because something has taken the focus from the popover, and\n\t\t\t\t\t\t\t\t\t// we don't want to steal it back.\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tlinkUIref.current.contains(\n\t\t\t\t\t\t\t\t\t\t\twindow.document.activeElement\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t// Select the previous block to keep focus nearby\n\t\t\t\t\t\t\t\t\t\tselectPreviousBlock( clientId, true );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Remove the link.\n\t\t\t\t\t\t\t\t\tonReplace( [] );\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tsetIsLinkOpen( false );\n\t\t\t\t\t\t\t\tif ( openedBy ) {\n\t\t\t\t\t\t\t\t\topenedBy.focus();\n\t\t\t\t\t\t\t\t\tsetOpenedBy( null );\n\t\t\t\t\t\t\t\t} else if ( ref.current ) {\n\t\t\t\t\t\t\t\t\t// select the ref when adding a new link\n\t\t\t\t\t\t\t\t\tref.current.focus();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// Fallback\n\t\t\t\t\t\t\t\t\tselectPreviousBlock( clientId, true );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tanchor={ popoverAnchor }\n\t\t\t\t\t\t\tonRemove={ removeLink }\n\t\t\t\t\t\t\tonChange={ ( updatedValue ) => {\n\t\t\t\t\t\t\t\tupdateAttributes(\n\t\t\t\t\t\t\t\t\tupdatedValue,\n\t\t\t\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\t\t\t\tattributes\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</a>\n\t\t\t\t<div { ...innerBlocksProps } />\n\t\t\t</div>\n\t\t</>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}