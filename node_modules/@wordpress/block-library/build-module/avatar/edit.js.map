{"version":3,"names":["clsx","InspectorControls","useBlockProps","__experimentalUseBorderProps","useBorderProps","PanelBody","RangeControl","ResizableBox","ToggleControl","__","isRTL","addQueryArgs","removeQueryArgs","useUserAvatar","useCommentAvatar","UserControl","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AvatarInspectorControls","setAttributes","avatar","attributes","selectUser","children","title","__nextHasNoMarginBottom","__next40pxDefaultSize","label","onChange","newSize","size","min","minSize","max","maxSize","initialPosition","value","isLink","checked","linkTarget","userId","ResizableAvatar","blockProps","isSelected","borderProps","doubledSizedSrc","src","s","width","height","showHandle","onResizeStop","event","direction","elt","delta","parseInt","lockAspectRatio","enable","top","right","bottom","left","minWidth","maxWidth","alt","className","style","CommentEdit","context","commentId","href","onClick","preventDefault","UserEdit","postId","postType","Edit","props"],"sources":["@wordpress/block-library/src/avatar/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tInspectorControls,\n\tuseBlockProps,\n\t__experimentalUseBorderProps as useBorderProps,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tRangeControl,\n\tResizableBox,\n\tToggleControl,\n} from '@wordpress/components';\nimport { __, isRTL } from '@wordpress/i18n';\nimport { addQueryArgs, removeQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { useUserAvatar, useCommentAvatar } from './hooks';\nimport UserControl from './user-control';\n\nconst AvatarInspectorControls = ( {\n\tsetAttributes,\n\tavatar,\n\tattributes,\n\tselectUser,\n} ) => (\n\t<InspectorControls>\n\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t<RangeControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tlabel={ __( 'Image size' ) }\n\t\t\t\tonChange={ ( newSize ) =>\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tsize: newSize,\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t\tmin={ avatar.minSize }\n\t\t\t\tmax={ avatar.maxSize }\n\t\t\t\tinitialPosition={ attributes?.size }\n\t\t\t\tvalue={ attributes?.size }\n\t\t\t/>\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Link to user profile' ) }\n\t\t\t\tonChange={ () =>\n\t\t\t\t\tsetAttributes( { isLink: ! attributes.isLink } )\n\t\t\t\t}\n\t\t\t\tchecked={ attributes.isLink }\n\t\t\t/>\n\t\t\t{ attributes.isLink && (\n\t\t\t\t<ToggleControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tlinkTarget: value ? '_blank' : '_self',\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t\tchecked={ attributes.linkTarget === '_blank' }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ selectUser && (\n\t\t\t\t<UserControl\n\t\t\t\t\tvalue={ attributes?.userId }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tuserId: value,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</PanelBody>\n\t</InspectorControls>\n);\n\nconst ResizableAvatar = ( {\n\tsetAttributes,\n\tattributes,\n\tavatar,\n\tblockProps,\n\tisSelected,\n} ) => {\n\tconst borderProps = useBorderProps( attributes );\n\tconst doubledSizedSrc = addQueryArgs(\n\t\tremoveQueryArgs( avatar?.src, [ 's' ] ),\n\t\t{\n\t\t\ts: attributes?.size * 2,\n\t\t}\n\t);\n\treturn (\n\t\t<div { ...blockProps }>\n\t\t\t<ResizableBox\n\t\t\t\tsize={ {\n\t\t\t\t\twidth: attributes.size,\n\t\t\t\t\theight: attributes.size,\n\t\t\t\t} }\n\t\t\t\tshowHandle={ isSelected }\n\t\t\t\tonResizeStop={ ( event, direction, elt, delta ) => {\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tsize: parseInt(\n\t\t\t\t\t\t\tattributes.size + ( delta.height || delta.width ),\n\t\t\t\t\t\t\t10\n\t\t\t\t\t\t),\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tlockAspectRatio\n\t\t\t\tenable={ {\n\t\t\t\t\ttop: false,\n\t\t\t\t\tright: ! isRTL(),\n\t\t\t\t\tbottom: true,\n\t\t\t\t\tleft: isRTL(),\n\t\t\t\t} }\n\t\t\t\tminWidth={ avatar.minSize }\n\t\t\t\tmaxWidth={ avatar.maxSize }\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tsrc={ doubledSizedSrc }\n\t\t\t\t\talt={ avatar.alt }\n\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t'avatar',\n\t\t\t\t\t\t'avatar-' + attributes.size,\n\t\t\t\t\t\t'photo',\n\t\t\t\t\t\t'wp-block-avatar__image',\n\t\t\t\t\t\tborderProps.className\n\t\t\t\t\t) }\n\t\t\t\t\tstyle={ borderProps.style }\n\t\t\t\t/>\n\t\t\t</ResizableBox>\n\t\t</div>\n\t);\n};\nconst CommentEdit = ( { attributes, context, setAttributes, isSelected } ) => {\n\tconst { commentId } = context;\n\tconst blockProps = useBlockProps();\n\tconst avatar = useCommentAvatar( { commentId } );\n\treturn (\n\t\t<>\n\t\t\t<AvatarInspectorControls\n\t\t\t\tavatar={ avatar }\n\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\tattributes={ attributes }\n\t\t\t\tselectUser={ false }\n\t\t\t/>\n\t\t\t{ attributes.isLink ? (\n\t\t\t\t<a\n\t\t\t\t\thref=\"#avatar-pseudo-link\"\n\t\t\t\t\tclassName=\"wp-block-avatar__link\"\n\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\n\t\t\t\t>\n\t\t\t\t\t<ResizableAvatar\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tavatar={ avatar }\n\t\t\t\t\t\tblockProps={ blockProps }\n\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t) : (\n\t\t\t\t<ResizableAvatar\n\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\tavatar={ avatar }\n\t\t\t\t\tblockProps={ blockProps }\n\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nconst UserEdit = ( { attributes, context, setAttributes, isSelected } ) => {\n\tconst { postId, postType } = context;\n\tconst avatar = useUserAvatar( {\n\t\tuserId: attributes?.userId,\n\t\tpostId,\n\t\tpostType,\n\t} );\n\tconst blockProps = useBlockProps();\n\treturn (\n\t\t<>\n\t\t\t<AvatarInspectorControls\n\t\t\t\tselectUser\n\t\t\t\tattributes={ attributes }\n\t\t\t\tavatar={ avatar }\n\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t/>\n\t\t\t{ attributes.isLink ? (\n\t\t\t\t<a\n\t\t\t\t\thref=\"#avatar-pseudo-link\"\n\t\t\t\t\tclassName=\"wp-block-avatar__link\"\n\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\n\t\t\t\t>\n\t\t\t\t\t<ResizableAvatar\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tavatar={ avatar }\n\t\t\t\t\t\tblockProps={ blockProps }\n\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t) : (\n\t\t\t\t<ResizableAvatar\n\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\tavatar={ avatar }\n\t\t\t\t\tblockProps={ blockProps }\n\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport default function Edit( props ) {\n\t// Don't show the Comment Edit controls if we have a comment ID set, or if we're in the Site Editor (where it is `null`).\n\tif ( props?.context?.commentId || props?.context?.commentId === null ) {\n\t\treturn <CommentEdit { ...props } />;\n\t}\n\treturn <UserEdit { ...props } />;\n}\n"],"mappings":"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","ignoreList":[]}