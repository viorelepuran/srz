{"version":3,"names":["getPhotoHtml","clsx","__","sprintf","Placeholder","SandBox","BlockIcon","useState","getAuthority","WpEmbedPreview","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EmbedPreview","preview","previewable","url","type","isSelected","className","icon","label","interactive","setInteractive","hideOverlay","scripts","html","embedSourceUrl","iframeTitle","sandboxClassnames","embedWrapper","children","title","onFocus","onMouseUp","showColors","href"],"sources":["@wordpress/block-library/src/embed/embed-preview.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport { getPhotoHtml } from './util';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Placeholder, SandBox } from '@wordpress/components';\nimport { BlockIcon } from '@wordpress/block-editor';\nimport { useState } from '@wordpress/element';\nimport { getAuthority } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport WpEmbedPreview from './wp-embed-preview';\n\nexport default function EmbedPreview( {\n\tpreview,\n\tpreviewable,\n\turl,\n\ttype,\n\tisSelected,\n\tclassName,\n\ticon,\n\tlabel,\n} ) {\n\tconst [ interactive, setInteractive ] = useState( false );\n\n\tif ( ! isSelected && interactive ) {\n\t\t// We only want to change this when the block is not selected, because changing it when\n\t\t// the block becomes selected makes the overlap disappear too early. Hiding the overlay\n\t\t// happens on mouseup when the overlay is clicked.\n\t\tsetInteractive( false );\n\t}\n\n\tconst hideOverlay = () => {\n\t\t// This is called onMouseUp on the overlay. We can't respond to the `isSelected` prop\n\t\t// changing, because that happens on mouse down, and the overlay immediately disappears,\n\t\t// and the mouse event can end up in the preview content. We can't use onClick on\n\t\t// the overlay to hide it either, because then the editor misses the mouseup event, and\n\t\t// thinks we're multi-selecting blocks.\n\t\tsetInteractive( true );\n\t};\n\n\tconst { scripts } = preview;\n\n\tconst html = 'photo' === type ? getPhotoHtml( preview ) : preview.html;\n\tconst embedSourceUrl = getAuthority( url );\n\tconst iframeTitle = sprintf(\n\t\t// translators: %s: host providing embed content e.g: www.youtube.com\n\t\t__( 'Embedded content from %s' ),\n\t\tembedSourceUrl\n\t);\n\tconst sandboxClassnames = clsx(\n\t\ttype,\n\t\tclassName,\n\t\t'wp-block-embed__wrapper'\n\t);\n\n\t// Disabled because the overlay div doesn't actually have a role or functionality\n\t// as far as the user is concerned. We're just catching the first click so that\n\t// the block can be selected without interacting with the embed preview that the overlay covers.\n\t/* eslint-disable jsx-a11y/no-static-element-interactions */\n\tconst embedWrapper =\n\t\t'wp-embed' === type ? (\n\t\t\t<WpEmbedPreview html={ html } />\n\t\t) : (\n\t\t\t<div className=\"wp-block-embed__wrapper\">\n\t\t\t\t<SandBox\n\t\t\t\t\thtml={ html }\n\t\t\t\t\tscripts={ scripts }\n\t\t\t\t\ttitle={ iframeTitle }\n\t\t\t\t\ttype={ sandboxClassnames }\n\t\t\t\t\tonFocus={ hideOverlay }\n\t\t\t\t/>\n\t\t\t\t{ ! interactive && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"block-library-embed__interactive-overlay\"\n\t\t\t\t\t\tonMouseUp={ hideOverlay }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t/* eslint-enable jsx-a11y/no-static-element-interactions */\n\n\treturn (\n\t\t<>\n\t\t\t{ previewable ? (\n\t\t\t\tembedWrapper\n\t\t\t) : (\n\t\t\t\t<Placeholder\n\t\t\t\t\ticon={ <BlockIcon icon={ icon } showColors /> }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t>\n\t\t\t\t\t<p className=\"components-placeholder__error\">\n\t\t\t\t\t\t<a href={ url }>{ url }</a>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"components-placeholder__error\">\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: host providing embed content e.g: www.youtube.com */\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\"Embedded content from %s can't be previewed in the editor.\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tembedSourceUrl\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t</Placeholder>\n\t\t\t) }\n\t\t</>\n\t);\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,YAAY,QAAQ,QAAQ;;AAErC;AACA;AACA;AACA,OAAOC,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;AACA,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SAASC,WAAW,EAAEC,OAAO,QAAQ,uBAAuB;AAC5D,SAASC,SAAS,QAAQ,yBAAyB;AACnD,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,YAAY,QAAQ,gBAAgB;;AAE7C;AACA;AACA;AACA,OAAOC,cAAc,MAAM,oBAAoB;AAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA,EAAAC,QAAA,IAAAC,SAAA;AAEhD,eAAe,SAASC,YAAYA,CAAE;EACrCC,OAAO;EACPC,WAAW;EACXC,GAAG;EACHC,IAAI;EACJC,UAAU;EACVC,SAAS;EACTC,IAAI;EACJC;AACD,CAAC,EAAG;EACH,MAAM,CAAEC,WAAW,EAAEC,cAAc,CAAE,GAAGnB,QAAQ,CAAE,KAAM,CAAC;EAEzD,IAAK,CAAEc,UAAU,IAAII,WAAW,EAAG;IAClC;IACA;IACA;IACAC,cAAc,CAAE,KAAM,CAAC;EACxB;EAEA,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACzB;IACA;IACA;IACA;IACA;IACAD,cAAc,CAAE,IAAK,CAAC;EACvB,CAAC;EAED,MAAM;IAAEE;EAAQ,CAAC,GAAGX,OAAO;EAE3B,MAAMY,IAAI,GAAG,OAAO,KAAKT,IAAI,GAAGpB,YAAY,CAAEiB,OAAQ,CAAC,GAAGA,OAAO,CAACY,IAAI;EACtE,MAAMC,cAAc,GAAGtB,YAAY,CAAEW,GAAI,CAAC;EAC1C,MAAMY,WAAW,GAAG5B,OAAO;EAC1B;EACAD,EAAE,CAAE,0BAA2B,CAAC,EAChC4B,cACD,CAAC;EACD,MAAME,iBAAiB,GAAG/B,IAAI,CAC7BmB,IAAI,EACJE,SAAS,EACT,yBACD,CAAC;;EAED;EACA;EACA;EACA;EACA,MAAMW,YAAY,GACjB,UAAU,KAAKb,IAAI,gBAClBT,IAAA,CAACF,cAAc;IAACoB,IAAI,EAAGA;EAAM,CAAE,CAAC,gBAEhChB,KAAA;IAAKS,SAAS,EAAC,yBAAyB;IAAAY,QAAA,gBACvCvB,IAAA,CAACN,OAAO;MACPwB,IAAI,EAAGA,IAAM;MACbD,OAAO,EAAGA,OAAS;MACnBO,KAAK,EAAGJ,WAAa;MACrBX,IAAI,EAAGY,iBAAmB;MAC1BI,OAAO,EAAGT;IAAa,CACvB,CAAC,EACA,CAAEF,WAAW,iBACdd,IAAA;MACCW,SAAS,EAAC,0CAA0C;MACpDe,SAAS,EAAGV;IAAa,CACzB,CACD;EAAA,CACG,CACL;EACF;;EAEA,oBACChB,IAAA,CAAAI,SAAA;IAAAmB,QAAA,EACGhB,WAAW,GACZe,YAAY,gBAEZpB,KAAA,CAACT,WAAW;MACXmB,IAAI,eAAGZ,IAAA,CAACL,SAAS;QAACiB,IAAI,EAAGA,IAAM;QAACe,UAAU;MAAA,CAAE,CAAG;MAC/Cd,KAAK,EAAGA,KAAO;MAAAU,QAAA,gBAEfvB,IAAA;QAAGW,SAAS,EAAC,+BAA+B;QAAAY,QAAA,eAC3CvB,IAAA;UAAG4B,IAAI,EAAGpB,GAAK;UAAAe,QAAA,EAAGf;QAAG,CAAK;MAAC,CACzB,CAAC,eACJR,IAAA;QAAGW,SAAS,EAAC,+BAA+B;QAAAY,QAAA,EACzC/B,OAAO,CACR;QACAD,EAAE,CACD,4DACD,CAAC,EACD4B,cACD;MAAC,CACC,CAAC;IAAA,CACQ;EACb,CACA,CAAC;AAEL","ignoreList":[]}