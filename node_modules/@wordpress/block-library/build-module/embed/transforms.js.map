{"version":3,"names":["createBlock","metadata","$schema","apiVersion","name","title","category","description","textdomain","attributes","url","type","role","caption","source","selector","providerNameSlug","allowResponsive","responsive","previewable","supports","align","spacing","margin","interactivity","clientNavigation","editorStyle","style","removeAspectRatioClasses","EMBED_BLOCK","transforms","from","isMatch","node","nodeName","test","textContent","match","length","transform","trim","to","blocks","className","value","content"],"sources":["@wordpress/block-library/src/embed/transforms.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport metadata from './block.json';\nimport { removeAspectRatioClasses } from './util';\n\nconst { name: EMBED_BLOCK } = metadata;\n\n/**\n * Default transforms for generic embeds.\n */\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'raw',\n\t\t\tisMatch: ( node ) =>\n\t\t\t\tnode.nodeName === 'P' &&\n\t\t\t\t/^\\s*(https?:\\/\\/\\S+)\\s*$/i.test( node.textContent ) &&\n\t\t\t\tnode.textContent?.match( /https/gi )?.length === 1,\n\t\t\ttransform: ( node ) => {\n\t\t\t\treturn createBlock( EMBED_BLOCK, {\n\t\t\t\t\turl: node.textContent.trim(),\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n\tto: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\tisMatch: ( { url } ) => !! url,\n\t\t\ttransform: ( { url, caption, className } ) => {\n\t\t\t\tlet value = `<a href=\"${ url }\">${ url }</a>`;\n\t\t\t\tif ( caption?.trim() ) {\n\t\t\t\t\tvalue += `<br />${ caption }`;\n\t\t\t\t}\n\t\t\t\treturn createBlock( 'core/paragraph', {\n\t\t\t\t\tcontent: value,\n\t\t\t\t\tclassName: removeAspectRatioClasses( className ),\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,QAAQ,mBAAmB;;AAE/C;AACA;AACA;AAFA,MAAAC,QAAA;EAAAC,OAAA;EAAAC,UAAA;EAAAC,IAAA;EAAAC,KAAA;EAAAC,QAAA;EAAAC,WAAA;EAAAC,UAAA;EAAAC,UAAA;IAAAC,GAAA;MAAAC,IAAA;MAAAC,IAAA;IAAA;IAAAC,OAAA;MAAAF,IAAA;MAAAG,MAAA;MAAAC,QAAA;MAAAH,IAAA;IAAA;IAAAD,IAAA;MAAAA,IAAA;MAAAC,IAAA;IAAA;IAAAI,gBAAA;MAAAL,IAAA;MAAAC,IAAA;IAAA;IAAAK,eAAA;MAAAN,IAAA;MAAA;IAAA;IAAAO,UAAA;MAAAP,IAAA;MAAA;MAAAC,IAAA;IAAA;IAAAO,WAAA;MAAAR,IAAA;MAAA;MAAAC,IAAA;IAAA;EAAA;EAAAQ,QAAA;IAAAC,KAAA;IAAAC,OAAA;MAAAC,MAAA;IAAA;IAAAC,aAAA;MAAAC,gBAAA;IAAA;EAAA;EAAAC,WAAA;EAAAC,KAAA;AAAA;AAIA,SAASC,wBAAwB,QAAQ,QAAQ;AAEjD,MAAM;EAAExB,IAAI,EAAEyB;AAAY,CAAC,GAAG5B,QAAQ;;AAEtC;AACA;AACA;AACA,MAAM6B,UAAU,GAAG;EAClBC,IAAI,EAAE,CACL;IACCpB,IAAI,EAAE,KAAK;IACXqB,OAAO,EAAIC,IAAI,IACdA,IAAI,CAACC,QAAQ,KAAK,GAAG,IACrB,2BAA2B,CAACC,IAAI,CAAEF,IAAI,CAACG,WAAY,CAAC,IACpDH,IAAI,CAACG,WAAW,EAAEC,KAAK,CAAE,SAAU,CAAC,EAAEC,MAAM,KAAK,CAAC;IACnDC,SAAS,EAAIN,IAAI,IAAM;MACtB,OAAOjC,WAAW,CAAE6B,WAAW,EAAE;QAChCnB,GAAG,EAAEuB,IAAI,CAACG,WAAW,CAACI,IAAI,CAAC;MAC5B,CAAE,CAAC;IACJ;EACD,CAAC,CACD;EACDC,EAAE,EAAE,CACH;IACC9B,IAAI,EAAE,OAAO;IACb+B,MAAM,EAAE,CAAE,gBAAgB,CAAE;IAC5BV,OAAO,EAAEA,CAAE;MAAEtB;IAAI,CAAC,KAAM,CAAC,CAAEA,GAAG;IAC9B6B,SAAS,EAAEA,CAAE;MAAE7B,GAAG;MAAEG,OAAO;MAAE8B;IAAU,CAAC,KAAM;MAC7C,IAAIC,KAAK,GAAG,YAAalC,GAAG,KAAOA,GAAG,MAAO;MAC7C,IAAKG,OAAO,EAAE2B,IAAI,CAAC,CAAC,EAAG;QACtBI,KAAK,IAAI,SAAU/B,OAAO,EAAG;MAC9B;MACA,OAAOb,WAAW,CAAE,gBAAgB,EAAE;QACrC6C,OAAO,EAAED,KAAK;QACdD,SAAS,EAAEf,wBAAwB,CAAEe,SAAU;MAChD,CAAE,CAAC;IACJ;EACD,CAAC;AAEH,CAAC;AAED,eAAeb,UAAU","ignoreList":[]}