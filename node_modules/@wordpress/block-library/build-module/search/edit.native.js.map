{"version":3,"names":["View","AccessibilityInfo","clsx","RichText","PlainText","useBlockProps","InspectorControls","PanelBody","SelectControl","ToggleControl","Icon","__","search","useRef","useEffect","useState","usePreferredColorSchemeStyle","styles","jsx","_jsx","jsxs","_jsxs","MIN_BUTTON_WIDTH","MARGINS","widthMargin","marginLeft","paddingLeft","BUTTON_OPTIONS","value","label","useIsScreenReaderEnabled","isScreenReaderEnabled","setIsScreenReaderEnabled","mounted","changeListener","addEventListener","enabled","then","screenReaderEnabled","remove","SearchEdit","onFocus","isSelected","attributes","setAttributes","className","blockWidth","style","isButtonSelected","setIsButtonSelected","isLabelSelected","setIsLabelSelected","isPlaceholderSelected","setIsPlaceholderSelected","isLongButton","setIsLongButton","buttonWidth","setButtonWidth","textInputRef","showLabel","buttonPosition","buttonUseIcon","placeholder","buttonText","hasTextInput","current","blur","maxButtonWidth","Math","floor","tempIsLongButton","onLayoutButton","nativeEvent","width","layout","getBlockClassNames","undefined","getSelectedButtonPositionLabel","option","blockProps","controls","children","title","checked","onChange","position","options","hideCancelButton","isButtonInside","borderStyle","border","borderDark","inputStyle","plainTextInput","plainTextInputDark","baseColors","color","text","placeholderStyle","plainTextPlaceholder","plainTextPlaceholderDark","searchBarStyle","searchBarContainer","flexDirection","getAccessibilityLabelForButton","getAccessibilityLabelForPlaceholder","description","getAccessibilityLabelForLabel","renderTextField","searchInputContainer","accessible","accessibilityRole","accessibilityHint","accessibilityLabel","ref","numberOfLines","ellipsizeMode","newVal","onBlur","placeholderTextColor","buttonPlaceholderText","baseButtonStyles","blocks","richTextButtonContainerStyle","buttonContainer","buttonContainerWide","background","backgroundColor","borderWidth","richTextButtonStyle","richTextButton","placeholderColor","iconStyles","icon","fill","renderButton","onLayout","identifier","tagName","withoutInteractiveFormatting","html","minWidth","maxWidth","textAlign","__unstableMobileNoFocusOnMount","unstableOnFocus","selectionColor","richTextButtonCursor","searchBlockContainer","importantForAccessibility","accessibilityElementsHidden","richTextLabel"],"sources":["@wordpress/block-library/src/search/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, AccessibilityInfo } from 'react-native';\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRichText,\n\tPlainText,\n\tuseBlockProps,\n\tInspectorControls,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tSelectControl,\n\tToggleControl,\n\tIcon,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { search } from '@wordpress/icons';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\n/**\n * Constants\n */\nconst MIN_BUTTON_WIDTH = 75;\nconst MARGINS =\n\tstyles.widthMargin?.marginLeft + styles.widthMargin?.paddingLeft;\n\nconst BUTTON_OPTIONS = [\n\t{ value: 'button-inside', label: __( 'Button inside' ) },\n\t{ value: 'button-outside', label: __( 'Button outside' ) },\n\t{ value: 'no-button', label: __( 'No button' ) },\n];\n\nfunction useIsScreenReaderEnabled() {\n\tconst [ isScreenReaderEnabled, setIsScreenReaderEnabled ] =\n\t\tuseState( false );\n\n\tuseEffect( () => {\n\t\tlet mounted = true;\n\n\t\tconst changeListener = AccessibilityInfo.addEventListener(\n\t\t\t'screenReaderChanged',\n\t\t\t( enabled ) => setIsScreenReaderEnabled( enabled )\n\t\t);\n\n\t\tAccessibilityInfo.isScreenReaderEnabled().then(\n\t\t\t( screenReaderEnabled ) => {\n\t\t\t\tif ( mounted && screenReaderEnabled ) {\n\t\t\t\t\tsetIsScreenReaderEnabled( screenReaderEnabled );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tmounted = false;\n\n\t\t\tchangeListener.remove();\n\t\t};\n\t}, [] );\n\n\treturn isScreenReaderEnabled;\n}\n\nexport default function SearchEdit( {\n\tonFocus,\n\tisSelected,\n\tattributes,\n\tsetAttributes,\n\tclassName,\n\tblockWidth,\n\tstyle,\n} ) {\n\tconst [ isButtonSelected, setIsButtonSelected ] = useState( false );\n\tconst [ isLabelSelected, setIsLabelSelected ] = useState( false );\n\tconst [ isPlaceholderSelected, setIsPlaceholderSelected ] =\n\t\tuseState( false );\n\tconst [ isLongButton, setIsLongButton ] = useState( false );\n\tconst [ buttonWidth, setButtonWidth ] = useState( MIN_BUTTON_WIDTH );\n\tconst isScreenReaderEnabled = useIsScreenReaderEnabled();\n\n\tconst textInputRef = useRef( null );\n\n\tconst {\n\t\tlabel,\n\t\tshowLabel,\n\t\tbuttonPosition,\n\t\tbuttonUseIcon,\n\t\tplaceholder,\n\t\tbuttonText,\n\t} = attributes;\n\n\t/*\n\t * Called when the value of isSelected changes. Blurs the PlainText component\n\t * used by the placeholder when this block loses focus.\n\t */\n\tuseEffect( () => {\n\t\tif ( hasTextInput() && isPlaceholderSelected && ! isSelected ) {\n\t\t\ttextInputRef.current.blur();\n\t\t}\n\t}, [ isSelected ] );\n\n\tuseEffect( () => {\n\t\tconst maxButtonWidth = Math.floor( blockWidth / 2 - MARGINS );\n\t\tconst tempIsLongButton = buttonWidth > maxButtonWidth;\n\n\t\t// Update this value only if it has changed to avoid flickering.\n\t\tif ( isLongButton !== tempIsLongButton ) {\n\t\t\tsetIsLongButton( tempIsLongButton );\n\t\t}\n\t}, [ blockWidth, buttonWidth ] );\n\n\tconst hasTextInput = () => {\n\t\treturn textInputRef && textInputRef.current;\n\t};\n\n\tconst onLayoutButton = ( { nativeEvent } ) => {\n\t\tconst { width } = nativeEvent?.layout;\n\n\t\tif ( width ) {\n\t\t\tsetButtonWidth( width );\n\t\t}\n\t};\n\n\tconst getBlockClassNames = () => {\n\t\treturn clsx(\n\t\t\tclassName,\n\t\t\t'button-inside' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-inside'\n\t\t\t\t: undefined,\n\t\t\t'button-outside' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-outside'\n\t\t\t\t: undefined,\n\t\t\t'no-button' === buttonPosition\n\t\t\t\t? 'wp-block-search__no-button'\n\t\t\t\t: undefined,\n\t\t\t'button-only' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-only'\n\t\t\t\t: undefined,\n\t\t\t! buttonUseIcon && 'no-button' !== buttonPosition\n\t\t\t\t? 'wp-block-search__text-button'\n\t\t\t\t: undefined,\n\t\t\tbuttonUseIcon && 'no-button' !== buttonPosition\n\t\t\t\t? 'wp-block-search__icon-button'\n\t\t\t\t: undefined\n\t\t);\n\t};\n\n\tconst getSelectedButtonPositionLabel = ( option ) => {\n\t\tswitch ( option ) {\n\t\t\tcase 'button-inside':\n\t\t\t\treturn __( 'Inside' );\n\t\t\tcase 'button-outside':\n\t\t\t\treturn __( 'Outside' );\n\t\t\tcase 'no-button':\n\t\t\t\treturn __( 'No button' );\n\t\t}\n\t};\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: getBlockClassNames(),\n\t} );\n\n\tconst controls = (\n\t\t<InspectorControls>\n\t\t\t<PanelBody title={ __( 'Search settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Hide search heading' ) }\n\t\t\t\t\tchecked={ ! showLabel }\n\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tshowLabel: ! showLabel,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel={ __( 'Button position' ) }\n\t\t\t\t\tvalue={ getSelectedButtonPositionLabel( buttonPosition ) }\n\t\t\t\t\tonChange={ ( position ) => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tbuttonPosition: position,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\toptions={ BUTTON_OPTIONS }\n\t\t\t\t\thideCancelButton\n\t\t\t\t/>\n\t\t\t\t{ buttonPosition !== 'no-button' && (\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Use icon button' ) }\n\t\t\t\t\t\tchecked={ buttonUseIcon }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tbuttonUseIcon: ! buttonUseIcon,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n\n\tconst isButtonInside = buttonPosition === 'button-inside';\n\n\tconst borderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.border,\n\t\tstyles.borderDark\n\t);\n\n\tconst inputStyle = [\n\t\t! isButtonInside && borderStyle,\n\t\tusePreferredColorSchemeStyle(\n\t\t\tstyles.plainTextInput,\n\t\t\tstyles.plainTextInputDark\n\t\t),\n\t\tstyle?.baseColors?.color && { color: style?.baseColors?.color?.text },\n\t];\n\n\tconst placeholderStyle = {\n\t\t...usePreferredColorSchemeStyle(\n\t\t\tstyles.plainTextPlaceholder,\n\t\t\tstyles.plainTextPlaceholderDark\n\t\t),\n\t\t...( style?.baseColors?.color && {\n\t\t\tcolor: style?.baseColors?.color?.text,\n\t\t} ),\n\t};\n\n\tconst searchBarStyle = [\n\t\tstyles.searchBarContainer,\n\t\tisButtonInside && borderStyle,\n\t\tisLongButton && { flexDirection: 'column' },\n\t];\n\n\t/**\n\t * If a screenreader is enabled, create a descriptive label for this field. If\n\t * not, return a label that is used during automated UI tests.\n\t *\n\t * @return {string} The accessibilityLabel for the Search Button\n\t */\n\tconst getAccessibilityLabelForButton = () => {\n\t\tif ( ! isScreenReaderEnabled ) {\n\t\t\treturn 'search-block-button';\n\t\t}\n\n\t\treturn `${ __(\n\t\t\t'Search button. Current button text is'\n\t\t) } ${ buttonText }`;\n\t};\n\n\t/**\n\t * If a screenreader is enabled, create a descriptive label for this field. If\n\t * not, return a label that is used during automated UI tests.\n\t *\n\t * @return {string} The accessibilityLabel for the Search Input\n\t * \t\t\t\t\t placeholder field.\n\t */\n\tconst getAccessibilityLabelForPlaceholder = () => {\n\t\tif ( ! isScreenReaderEnabled ) {\n\t\t\treturn 'search-block-input';\n\t\t}\n\n\t\tconst title = __( 'Search input field.' );\n\t\tconst description = placeholder\n\t\t\t? `${ __( 'Current placeholder text is' ) } ${ placeholder }`\n\t\t\t: __( 'No custom placeholder set' );\n\t\treturn `${ title } ${ description }`;\n\t};\n\n\t/**\n\t * If a screenreader is enabled, create a descriptive label for this field. If\n\t * not, return a label that is used during automated UI tests.\n\t *\n\t * @return {string} The accessibilityLabel for the Search Label field\n\t */\n\tconst getAccessibilityLabelForLabel = () => {\n\t\tif ( ! isScreenReaderEnabled ) {\n\t\t\treturn 'search-block-label';\n\t\t}\n\n\t\treturn `${ __( 'Search block label. Current text is' ) } ${ label }`;\n\t};\n\n\tconst renderTextField = () => {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ styles.searchInputContainer }\n\t\t\t\taccessible\n\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\taccessibilityHint={\n\t\t\t\t\tisScreenReaderEnabled\n\t\t\t\t\t\t? __( 'Double tap to edit placeholder text' )\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\taccessibilityLabel={ getAccessibilityLabelForPlaceholder() }\n\t\t\t>\n\t\t\t\t<PlainText\n\t\t\t\t\tref={ textInputRef }\n\t\t\t\t\tisSelected={ isPlaceholderSelected }\n\t\t\t\t\tclassName=\"wp-block-search__input\"\n\t\t\t\t\tstyle={ inputStyle }\n\t\t\t\t\tnumberOfLines={ 1 }\n\t\t\t\t\tellipsizeMode=\"tail\" // Currently only works on ios.\n\t\t\t\t\tlabel={ null }\n\t\t\t\t\tvalue={ placeholder }\n\t\t\t\t\tplaceholder={\n\t\t\t\t\t\tplaceholder ? undefined : __( 'Optional placeholder…' )\n\t\t\t\t\t}\n\t\t\t\t\tonChange={ ( newVal ) =>\n\t\t\t\t\t\tsetAttributes( { placeholder: newVal } )\n\t\t\t\t\t}\n\t\t\t\t\tonFocus={ () => {\n\t\t\t\t\t\tsetIsPlaceholderSelected( true );\n\t\t\t\t\t\tonFocus();\n\t\t\t\t\t} }\n\t\t\t\t\tonBlur={ () => setIsPlaceholderSelected( false ) }\n\t\t\t\t\tplaceholderTextColor={ placeholderStyle?.color }\n\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t};\n\n\t// To achieve proper expanding and shrinking `RichText` on Android, there is a need to set\n\t// a `placeholder` as an empty string when `RichText` is focused,\n\t// because `AztecView` is calculating a `minWidth` based on placeholder text.\n\tconst buttonPlaceholderText =\n\t\tisButtonSelected ||\n\t\t( ! isButtonSelected && buttonText && buttonText !== '' )\n\t\t\t? ''\n\t\t\t: __( 'Add button text' );\n\n\tconst baseButtonStyles = {\n\t\t...style?.baseColors?.blocks?.[ 'core/button' ]?.color,\n\t\t...attributes?.style?.color,\n\t\t...( style?.color && { text: style.color } ),\n\t};\n\n\tconst richTextButtonContainerStyle = [\n\t\tstyles.buttonContainer,\n\t\tisLongButton && styles.buttonContainerWide,\n\t\tbaseButtonStyles?.background && {\n\t\t\tbackgroundColor: baseButtonStyles.background,\n\t\t\tborderWidth: 0,\n\t\t},\n\t\tstyle?.backgroundColor && {\n\t\t\tbackgroundColor: style.backgroundColor,\n\t\t\tborderWidth: 0,\n\t\t},\n\t];\n\n\tconst richTextButtonStyle = {\n\t\t...styles.richTextButton,\n\t\t...( baseButtonStyles?.text && {\n\t\t\tcolor: baseButtonStyles.text,\n\t\t\tplaceholderColor: baseButtonStyles.text,\n\t\t} ),\n\t};\n\n\tconst iconStyles = {\n\t\t...styles.icon,\n\t\t...( baseButtonStyles?.text && { fill: baseButtonStyles.text } ),\n\t};\n\n\tconst renderButton = () => {\n\t\treturn (\n\t\t\t<View style={ richTextButtonContainerStyle }>\n\t\t\t\t{ buttonUseIcon && (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={ search }\n\t\t\t\t\t\t{ ...iconStyles }\n\t\t\t\t\t\tonLayout={ onLayoutButton }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ ! buttonUseIcon && (\n\t\t\t\t\t<View\n\t\t\t\t\t\taccessible\n\t\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\t\taccessibilityHint={\n\t\t\t\t\t\t\tisScreenReaderEnabled\n\t\t\t\t\t\t\t\t? __( 'Double tap to edit button text' )\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\taccessibilityLabel={ getAccessibilityLabelForButton() }\n\t\t\t\t\t\tonLayout={ onLayoutButton }\n\t\t\t\t\t>\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"wp-block-search__button\"\n\t\t\t\t\t\t\tidentifier=\"buttonText\"\n\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\tstyle={ richTextButtonStyle }\n\t\t\t\t\t\t\tplaceholder={ buttonPlaceholderText }\n\t\t\t\t\t\t\tvalue={ buttonText }\n\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\tonChange={ ( html ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { buttonText: html } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tminWidth={ MIN_BUTTON_WIDTH }\n\t\t\t\t\t\t\tmaxWidth={ blockWidth - MARGINS }\n\t\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\t\tisSelected={ isButtonSelected }\n\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\t\tunstableOnFocus={ () => {\n\t\t\t\t\t\t\t\tsetIsButtonSelected( true );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\t\tsetIsButtonSelected( false );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tselectionColor={\n\t\t\t\t\t\t\t\tstyles.richTextButtonCursor?.color\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t);\n\t};\n\n\treturn (\n\t\t<View\n\t\t\t{ ...blockProps }\n\t\t\tstyle={ styles.searchBlockContainer }\n\t\t\timportantForAccessibility={\n\t\t\t\tisSelected ? 'yes' : 'no-hide-descendants'\n\t\t\t}\n\t\t\taccessibilityElementsHidden={ isSelected ? false : true }\n\t\t>\n\t\t\t{ isSelected && controls }\n\n\t\t\t{ showLabel && (\n\t\t\t\t<View\n\t\t\t\t\taccessible\n\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\taccessibilityHint={\n\t\t\t\t\t\tisScreenReaderEnabled\n\t\t\t\t\t\t\t? __( 'Double tap to edit label text' )\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t\taccessibilityLabel={ getAccessibilityLabelForLabel() }\n\t\t\t\t>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tclassName=\"wp-block-search__label\"\n\t\t\t\t\t\tidentifier=\"label\"\n\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\tstyle={ styles.richTextLabel }\n\t\t\t\t\t\tplaceholder={ __( 'Add label…' ) }\n\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\tvalue={ label }\n\t\t\t\t\t\tonChange={ ( html ) =>\n\t\t\t\t\t\t\tsetAttributes( { label: html } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisSelected={ isLabelSelected }\n\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\tunstableOnFocus={ () => {\n\t\t\t\t\t\t\tsetIsLabelSelected( true );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\tsetIsLabelSelected( false );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tselectionColor={ styles.richTextButtonCursor?.color }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\n\t\t\t{ ( 'button-inside' === buttonPosition ||\n\t\t\t\t'button-outside' === buttonPosition ) && (\n\t\t\t\t<View style={ searchBarStyle }>\n\t\t\t\t\t{ renderTextField() }\n\t\t\t\t\t{ renderButton() }\n\t\t\t\t</View>\n\t\t\t) }\n\n\t\t\t{ 'button-only' === buttonPosition && renderButton() }\n\t\t\t{ 'no-button' === buttonPosition && renderTextField() }\n\t\t</View>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}