{"version":3,"names":["View","__","BlockControls","BlockVerticalAlignmentToolbar","InnerBlocks","InspectorControls","withColors","MEDIA_TYPE_IMAGE","MEDIA_TYPE_VIDEO","store","blockEditorStore","Component","Button","ToolbarGroup","PanelBody","ToggleControl","withSelect","compose","pullLeft","pullRight","replace","WIDTH_CONSTRAINT_PERCENTAGE","MediaContainer","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TEMPLATE","BREAKPOINTS","mobile","applyWidthConstraints","width","Math","max","min","MediaTextEdit","constructor","arguments","onSelectMedia","bind","onMediaUpdate","onMediaThumbnailUpdate","onWidthChange","commitWidthChange","onLayoutChange","onMediaSelected","onReplaceMedia","onSetOpenPickerRef","onSetImageFill","state","mediaWidth","containerWidth","isMediaSelected","getDerivedStateFromProps","props","isSelected","isAncestorSelected","media","setAttributes","mediaType","src","media_type","type","sizes","large","url","media_details","source_url","mediaAlt","alt","mediaId","id","mediaUrl","imageFill","undefined","focalPoint","setState","nativeEvent","layout","openPickerRef","openPicker","attributes","getControls","children","title","label","checked","onChange","renderMediaArea","shouldStack","mediaPosition","verticalAlignment","mediaAreaWidth","mediaAreaPadding","alignmentStyles","onFocus","render","backgroundColor","isRTL","style","blockWidth","isStackedOnMobile","isMobile","temporaryMediaWidth","widthString","innerBlockWidth","innerBlockWidthString","hasMedia","innerBlockContainerStyle","innerBlock","innerBlockStackMediaLeft","innerBlockStackMediaRight","color","innerBlockPaddings","containerStyles","paddingBottom","mediaContainerStyle","flex","mediaStackLeft","mediaStackRight","mediaLeft","mediaRight","toolbarControls","icon","isActive","onClick","onVerticalAlignmentChange","alignment","controls","value","onLayout","template","select","clientId","getSelectedBlockClientId","getBlockParents","getSettings","parents","selectedBlockClientId","includes"],"sources":["@wordpress/block-library/src/media-text/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tBlockControls,\n\tBlockVerticalAlignmentToolbar,\n\tInnerBlocks,\n\tInspectorControls,\n\twithColors,\n\tMEDIA_TYPE_IMAGE,\n\tMEDIA_TYPE_VIDEO,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { Component } from '@wordpress/element';\nimport {\n\tButton,\n\tToolbarGroup,\n\tPanelBody,\n\tToggleControl,\n} from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { pullLeft, pullRight, replace } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { WIDTH_CONSTRAINT_PERCENTAGE } from './constants';\nimport MediaContainer from './media-container';\nimport styles from './style.scss';\n\nconst TEMPLATE = [ [ 'core/paragraph' ] ];\n// this limits the resize to a safe zone to avoid making broken layouts\nconst BREAKPOINTS = {\n\tmobile: 480,\n};\nconst applyWidthConstraints = ( width ) =>\n\tMath.max(\n\t\tWIDTH_CONSTRAINT_PERCENTAGE,\n\t\tMath.min( width, 100 - WIDTH_CONSTRAINT_PERCENTAGE )\n\t);\n\nclass MediaTextEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onSelectMedia = this.onSelectMedia.bind( this );\n\t\tthis.onMediaUpdate = this.onMediaUpdate.bind( this );\n\t\tthis.onMediaThumbnailUpdate = this.onMediaThumbnailUpdate.bind( this );\n\t\tthis.onWidthChange = this.onWidthChange.bind( this );\n\t\tthis.commitWidthChange = this.commitWidthChange.bind( this );\n\t\tthis.onLayoutChange = this.onLayoutChange.bind( this );\n\t\tthis.onMediaSelected = this.onMediaSelected.bind( this );\n\t\tthis.onReplaceMedia = this.onReplaceMedia.bind( this );\n\t\tthis.onSetOpenPickerRef = this.onSetOpenPickerRef.bind( this );\n\t\tthis.onSetImageFill = this.onSetImageFill.bind( this );\n\n\t\tthis.state = {\n\t\t\tmediaWidth: null,\n\t\t\tcontainerWidth: 0,\n\t\t\tisMediaSelected: false,\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( props, state ) {\n\t\treturn {\n\t\t\tisMediaSelected:\n\t\t\t\tstate.isMediaSelected &&\n\t\t\t\tprops.isSelected &&\n\t\t\t\t! props.isAncestorSelected,\n\t\t};\n\t}\n\n\tonSelectMedia( media ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tlet mediaType;\n\t\tlet src;\n\t\t// For media selections originated from a file upload.\n\t\tif ( media.media_type ) {\n\t\t\tif ( media.media_type === 'image' ) {\n\t\t\t\tmediaType = 'image';\n\t\t\t} else {\n\t\t\t\t// only images and videos are accepted so if the media_type is not an image we can assume it is a video.\n\t\t\t\t// video contain the media type of 'file' in the object returned from the rest api.\n\t\t\t\tmediaType = 'video';\n\t\t\t}\n\t\t} else {\n\t\t\t// For media selections originated from existing files in the media library.\n\t\t\tmediaType = media.type;\n\t\t}\n\n\t\tif ( mediaType === 'image' && media.sizes ) {\n\t\t\t// Try the \"large\" size URL, falling back to the \"full\" size URL below.\n\t\t\tsrc =\n\t\t\t\tmedia.sizes.large?.url ||\n\t\t\t\tmedia?.media_details?.sizes?.large?.source_url;\n\t\t}\n\n\t\tsetAttributes( {\n\t\t\tmediaAlt: media.alt,\n\t\t\tmediaId: media.id,\n\t\t\tmediaType,\n\t\t\tmediaUrl: src || media.url,\n\t\t\timageFill: undefined,\n\t\t\tfocalPoint: undefined,\n\t\t} );\n\t}\n\n\tonMediaUpdate( media ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\tmediaId: media.id,\n\t\t\tmediaUrl: media.url,\n\t\t} );\n\t}\n\n\tonMediaThumbnailUpdate( mediaUrl ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\tmediaUrl,\n\t\t} );\n\t}\n\n\tonWidthChange( width ) {\n\t\tthis.setState( {\n\t\t\tmediaWidth: applyWidthConstraints( width ),\n\t\t} );\n\t}\n\n\tcommitWidthChange( width ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\tmediaWidth: applyWidthConstraints( width ),\n\t\t} );\n\t\tthis.setState( {\n\t\t\tmediaWidth: null,\n\t\t} );\n\t}\n\n\tonLayoutChange( { nativeEvent } ) {\n\t\tconst { width } = nativeEvent.layout;\n\t\tconst { containerWidth } = this.state;\n\n\t\tif ( containerWidth === width ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tcontainerWidth: width,\n\t\t} );\n\t}\n\n\tonMediaSelected() {\n\t\tthis.setState( { isMediaSelected: true } );\n\t}\n\n\tonReplaceMedia() {\n\t\tif ( this.openPickerRef ) {\n\t\t\tthis.openPickerRef();\n\t\t}\n\t}\n\n\tonSetOpenPickerRef( openPicker ) {\n\t\tthis.openPickerRef = openPicker;\n\t}\n\n\tonSetImageFill() {\n\t\tconst { attributes, setAttributes } = this.props;\n\t\tconst { imageFill } = attributes;\n\n\t\tsetAttributes( {\n\t\t\timageFill: ! imageFill,\n\t\t} );\n\t}\n\n\tgetControls() {\n\t\tconst { attributes } = this.props;\n\t\tconst { imageFill } = attributes;\n\n\t\treturn (\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Crop image to fill' ) }\n\t\t\t\t\t\tchecked={ imageFill }\n\t\t\t\t\t\tonChange={ this.onSetImageFill }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\t}\n\trenderMediaArea( shouldStack ) {\n\t\tconst { isMediaSelected, containerWidth } = this.state;\n\t\tconst { attributes, isSelected } = this.props;\n\t\tconst {\n\t\t\tmediaAlt,\n\t\t\tmediaId,\n\t\t\tmediaPosition,\n\t\t\tmediaType,\n\t\t\tmediaUrl,\n\t\t\tmediaWidth,\n\t\t\timageFill,\n\t\t\tfocalPoint,\n\t\t\tverticalAlignment,\n\t\t} = attributes;\n\t\tconst mediaAreaWidth =\n\t\t\tmediaWidth && ! shouldStack\n\t\t\t\t? ( containerWidth * mediaWidth ) / 100 -\n\t\t\t\t  styles.mediaAreaPadding.width\n\t\t\t\t: containerWidth;\n\t\tconst alignmentStyles =\n\t\t\tstyles[\n\t\t\t\t`is-vertically-aligned-${ verticalAlignment || 'center' }`\n\t\t\t];\n\n\t\treturn (\n\t\t\t<MediaContainer\n\t\t\t\tcommitWidthChange={ this.commitWidthChange }\n\t\t\t\tisMediaSelected={ isMediaSelected }\n\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\tonMediaSelected={ this.onMediaSelected }\n\t\t\t\tonMediaUpdate={ this.onMediaUpdate }\n\t\t\t\tonMediaThumbnailUpdate={ this.onMediaThumbnailUpdate }\n\t\t\t\tonSelectMedia={ this.onSelectMedia }\n\t\t\t\tonSetOpenPickerRef={ this.onSetOpenPickerRef }\n\t\t\t\tonWidthChange={ this.onWidthChange }\n\t\t\t\tmediaWidth={ mediaAreaWidth }\n\t\t\t\t{ ...{\n\t\t\t\t\tmediaAlt,\n\t\t\t\t\tmediaId,\n\t\t\t\t\tmediaType,\n\t\t\t\t\tmediaUrl,\n\t\t\t\t\tmediaPosition,\n\t\t\t\t\timageFill,\n\t\t\t\t\tfocalPoint,\n\t\t\t\t\tisSelected,\n\t\t\t\t\talignmentStyles,\n\t\t\t\t\tshouldStack,\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tbackgroundColor,\n\t\t\tsetAttributes,\n\t\t\tisSelected,\n\t\t\tisRTL,\n\t\t\tstyle,\n\t\t\tblockWidth,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tisStackedOnMobile,\n\t\t\timageFill,\n\t\t\tmediaPosition,\n\t\t\tmediaWidth,\n\t\t\tmediaType,\n\t\t\tverticalAlignment,\n\t\t} = attributes;\n\t\tconst { containerWidth, isMediaSelected } = this.state;\n\n\t\tconst isMobile = containerWidth < BREAKPOINTS.mobile;\n\t\tconst shouldStack = isStackedOnMobile && isMobile;\n\t\tconst temporaryMediaWidth = shouldStack\n\t\t\t? 100\n\t\t\t: this.state.mediaWidth || mediaWidth;\n\t\tconst widthString = `${ temporaryMediaWidth }%`;\n\t\tconst innerBlockWidth = shouldStack ? 100 : 100 - temporaryMediaWidth;\n\t\tconst innerBlockWidthString = `${ innerBlockWidth }%`;\n\t\tconst hasMedia =\n\t\t\tmediaType === MEDIA_TYPE_IMAGE || mediaType === MEDIA_TYPE_VIDEO;\n\n\t\tconst innerBlockContainerStyle = [\n\t\t\t{ width: innerBlockWidthString },\n\t\t\t! shouldStack\n\t\t\t\t? styles.innerBlock\n\t\t\t\t: {\n\t\t\t\t\t\t...( mediaPosition === 'left'\n\t\t\t\t\t\t\t? styles.innerBlockStackMediaLeft\n\t\t\t\t\t\t\t: styles.innerBlockStackMediaRight ),\n\t\t\t\t  },\n\t\t\t( style?.backgroundColor || backgroundColor.color ) &&\n\t\t\t\tstyles.innerBlockPaddings,\n\t\t];\n\n\t\tconst containerStyles = {\n\t\t\t...styles[ 'wp-block-media-text' ],\n\t\t\t...styles[\n\t\t\t\t`is-vertically-aligned-${ verticalAlignment || 'center' }`\n\t\t\t],\n\t\t\t...( mediaPosition === 'right'\n\t\t\t\t? styles[ 'has-media-on-the-right' ]\n\t\t\t\t: {} ),\n\t\t\t...( shouldStack && styles[ 'is-stacked-on-mobile' ] ),\n\t\t\t...( shouldStack && mediaPosition === 'right'\n\t\t\t\t? styles[ 'is-stacked-on-mobile.has-media-on-the-right' ]\n\t\t\t\t: {} ),\n\t\t\t...( isSelected && styles[ 'is-selected' ] ),\n\t\t\tbackgroundColor: style?.backgroundColor || backgroundColor.color,\n\t\t\tpaddingBottom: 0,\n\t\t};\n\n\t\tconst mediaContainerStyle = [\n\t\t\t{ flex: 1 },\n\t\t\tshouldStack\n\t\t\t\t? {\n\t\t\t\t\t\t...( mediaPosition === 'left' &&\n\t\t\t\t\t\t\tstyles.mediaStackLeft ),\n\t\t\t\t\t\t...( mediaPosition === 'right' &&\n\t\t\t\t\t\t\tstyles.mediaStackRight ),\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\t...( mediaPosition === 'left' && styles.mediaLeft ),\n\t\t\t\t\t\t...( mediaPosition === 'right' && styles.mediaRight ),\n\t\t\t\t  },\n\t\t];\n\n\t\tconst toolbarControls = [\n\t\t\t{\n\t\t\t\ticon: isRTL ? pullRight : pullLeft,\n\t\t\t\ttitle: __( 'Show media on left' ),\n\t\t\t\tisActive: mediaPosition === 'left',\n\t\t\t\tonClick: () => setAttributes( { mediaPosition: 'left' } ),\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: isRTL ? pullLeft : pullRight,\n\t\t\t\ttitle: __( 'Show media on right' ),\n\t\t\t\tisActive: mediaPosition === 'right',\n\t\t\t\tonClick: () => setAttributes( { mediaPosition: 'right' } ),\n\t\t\t},\n\t\t];\n\n\t\tconst onVerticalAlignmentChange = ( alignment ) => {\n\t\t\tsetAttributes( { verticalAlignment: alignment } );\n\t\t};\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ mediaType === MEDIA_TYPE_IMAGE && this.getControls() }\n\t\t\t\t<BlockControls>\n\t\t\t\t\t{ hasMedia && (\n\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tlabel={ __( 'Edit media' ) }\n\t\t\t\t\t\t\t\ticon={ replace }\n\t\t\t\t\t\t\t\tonClick={ this.onReplaceMedia }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ( ! isMediaSelected ||\n\t\t\t\t\t\tmediaType === MEDIA_TYPE_VIDEO ) && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ToolbarGroup controls={ toolbarControls } />\n\t\t\t\t\t\t\t<BlockVerticalAlignmentToolbar\n\t\t\t\t\t\t\t\tonChange={ onVerticalAlignmentChange }\n\t\t\t\t\t\t\t\tvalue={ verticalAlignment }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t</BlockControls>\n\t\t\t\t<View\n\t\t\t\t\tstyle={ containerStyles }\n\t\t\t\t\tonLayout={ this.onLayoutChange }\n\t\t\t\t>\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t( shouldStack || ! imageFill ) && {\n\t\t\t\t\t\t\t\twidth: widthString,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmediaContainerStyle,\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ this.renderMediaArea( shouldStack ) }\n\t\t\t\t\t</View>\n\t\t\t\t\t<View style={ innerBlockContainerStyle }>\n\t\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\t\ttemplate={ TEMPLATE }\n\t\t\t\t\t\t\tblockWidth={ blockWidth }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t</View>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithColors( 'backgroundColor' ),\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getSelectedBlockClientId, getBlockParents, getSettings } =\n\t\t\tselect( blockEditorStore );\n\n\t\tconst parents = getBlockParents( clientId, true );\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst isAncestorSelected =\n\t\t\tselectedBlockClientId && parents.includes( selectedBlockClientId );\n\n\t\treturn {\n\t\t\tisSelected: selectedBlockClientId === clientId,\n\t\t\tisAncestorSelected,\n\t\t\tisRTL: getSettings().isRTL,\n\t\t};\n\t} )\n)( MediaTextEdit );\n"],"mappings":"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","ignoreList":[]}