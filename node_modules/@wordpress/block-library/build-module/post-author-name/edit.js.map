{"version":3,"names":["clsx","AlignmentControl","BlockControls","InspectorControls","useBlockProps","useSelect","__","sprintf","store","coreStore","ToggleControl","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","useToolsPanelDropdownMenuProps","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PostAuthorNameEdit","context","postType","postId","attributes","textAlign","isLink","linkTarget","setAttributes","authorName","supportsAuthor","select","_getPostType$supports","getEditedEntityRecord","getUser","getPostType","_authorId","author","supports","blockProps","className","displayName","name","displayAuthor","href","onClick","event","preventDefault","children","dropdownMenuProps","group","value","onChange","nextAlign","label","resetAll","isShownByDefault","hasValue","onDeselect","__nextHasNoMarginBottom","checked","undefined"],"sources":["@wordpress/block-library/src/post-author-name/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAlignmentControl,\n\tBlockControls,\n\tInspectorControls,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as coreStore } from '@wordpress/core-data';\nimport {\n\tToggleControl,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useToolsPanelDropdownMenuProps } from '../utils/hooks';\n\nfunction PostAuthorNameEdit( {\n\tcontext: { postType, postId },\n\tattributes: { textAlign, isLink, linkTarget },\n\tsetAttributes,\n} ) {\n\tconst { authorName, supportsAuthor } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedEntityRecord, getUser, getPostType } =\n\t\t\t\tselect( coreStore );\n\t\t\tconst _authorId = getEditedEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\tpostType,\n\t\t\t\tpostId\n\t\t\t)?.author;\n\n\t\t\treturn {\n\t\t\t\tauthorName: _authorId ? getUser( _authorId ) : null,\n\t\t\t\tsupportsAuthor:\n\t\t\t\t\tgetPostType( postType )?.supports?.author ?? false,\n\t\t\t};\n\t\t},\n\t\t[ postType, postId ]\n\t);\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: clsx( {\n\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\n\t\t} ),\n\t} );\n\n\tconst displayName = authorName?.name || __( 'Author Name' );\n\n\tconst displayAuthor = isLink ? (\n\t\t<a\n\t\t\thref=\"#author-pseudo-link\"\n\t\t\tonClick={ ( event ) => event.preventDefault() }\n\t\t\tclassName=\"wp-block-post-author-name__link\"\n\t\t>\n\t\t\t{ displayName }\n\t\t</a>\n\t) : (\n\t\tdisplayName\n\t);\n\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls group=\"block\">\n\t\t\t\t<AlignmentControl\n\t\t\t\t\tvalue={ textAlign }\n\t\t\t\t\tonChange={ ( nextAlign ) => {\n\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t\t<InspectorControls>\n\t\t\t\t<ToolsPanel\n\t\t\t\t\tlabel={ __( 'Settings' ) }\n\t\t\t\t\tresetAll={ () => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tisLink: false,\n\t\t\t\t\t\t\tlinkTarget: '_self',\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t\t\t>\n\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\tlabel={ __( 'Link to author archive' ) }\n\t\t\t\t\t\tisShownByDefault\n\t\t\t\t\t\thasValue={ () => isLink }\n\t\t\t\t\t\tonDeselect={ () => setAttributes( { isLink: false } ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tlabel={ __( 'Link to author archive' ) }\n\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\tsetAttributes( { isLink: ! isLink } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchecked={ isLink }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t\t{ isLink && (\n\t\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\t\tisShownByDefault\n\t\t\t\t\t\t\thasValue={ () => linkTarget !== '_self' }\n\t\t\t\t\t\t\tonDeselect={ () =>\n\t\t\t\t\t\t\t\tsetAttributes( { linkTarget: '_self' } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tlinkTarget: value ? '_blank' : '_self',\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanel>\n\t\t\t</InspectorControls>\n\t\t\t<div { ...blockProps }>\n\t\t\t\t{ ! supportsAuthor && postType !== undefined\n\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t// translators: %s: Name of the post type e.g: \"post\".\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t'This post type (%s) does not support the author.'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tpostType\n\t\t\t\t\t  )\n\t\t\t\t\t: displayAuthor }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default PostAuthorNameEdit;\n"],"mappings":"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","ignoreList":[]}