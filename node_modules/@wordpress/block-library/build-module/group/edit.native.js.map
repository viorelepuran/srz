{"version":3,"names":["View","withSelect","compose","withPreferredColorScheme","useResizeObserver","InnerBlocks","store","blockEditorStore","useCallback","alignmentHelpers","styles","jsx","_jsx","jsxs","_jsxs","isFullWidth","GroupEdit","attributes","hasInnerBlocks","isSelected","isLastInnerBlockSelected","getStylesFromColorScheme","style","blockWidth","align","resizeObserver","sizes","width","renderAppender","groupAppender","fullwidthGroupAppender","fullwidthHasInnerGroupAppender","children","ButtonBlockAppender","groupPlaceholder","groupPlaceholderDark","marginVerticalDense","marginHorizontalNone","innerBlocks","backgroundColor","hasBackgroundAppender","parentWidth","select","clientId","getBlock","getBlockIndex","hasSelectedInnerBlock","getBlockRootClientId","getSelectedBlockClientId","getBlockAttributes","block","length","isInnerBlockSelected","selectedBlockClientId","totalInnerBlocks","blockIndex","parentId","parentBlockAlignment"],"sources":["@wordpress/block-library/src/group/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport {\n\tcompose,\n\twithPreferredColorScheme,\n\tuseResizeObserver,\n} from '@wordpress/compose';\nimport {\n\tInnerBlocks,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useCallback } from '@wordpress/element';\nimport { alignmentHelpers } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\n\nconst { isFullWidth } = alignmentHelpers;\n\nfunction GroupEdit( {\n\tattributes,\n\thasInnerBlocks,\n\tisSelected,\n\tisLastInnerBlockSelected,\n\tgetStylesFromColorScheme,\n\tstyle,\n\tblockWidth,\n} ) {\n\tconst { align } = attributes;\n\tconst [ resizeObserver, sizes ] = useResizeObserver();\n\tconst { width } = sizes || { width: 0 };\n\n\tconst renderAppender = useCallback(\n\t\t() => (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\t! hasInnerBlocks && styles.groupAppender,\n\t\t\t\t\tisFullWidth( align ) &&\n\t\t\t\t\t\t! hasInnerBlocks &&\n\t\t\t\t\t\tstyles.fullwidthGroupAppender,\n\t\t\t\t\tisFullWidth( align ) &&\n\t\t\t\t\t\thasInnerBlocks &&\n\t\t\t\t\t\tstyles.fullwidthHasInnerGroupAppender,\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t<InnerBlocks.ButtonBlockAppender />\n\t\t\t</View>\n\t\t),\n\t\t[ align, hasInnerBlocks ]\n\t);\n\n\tif ( ! isSelected && ! hasInnerBlocks ) {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\tgetStylesFromColorScheme(\n\t\t\t\t\t\tstyles.groupPlaceholder,\n\t\t\t\t\t\tstyles.groupPlaceholderDark\n\t\t\t\t\t),\n\t\t\t\t\t! hasInnerBlocks && {\n\t\t\t\t\t\t...styles.marginVerticalDense,\n\t\t\t\t\t\t...styles.marginHorizontalNone,\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ [\n\t\t\t\tisSelected && hasInnerBlocks && styles.innerBlocks,\n\t\t\t\tstyle,\n\t\t\t\tisSelected &&\n\t\t\t\t\thasInnerBlocks &&\n\t\t\t\t\tstyle?.backgroundColor &&\n\t\t\t\t\tstyles.hasBackgroundAppender,\n\t\t\t\tisLastInnerBlockSelected &&\n\t\t\t\t\tstyle?.backgroundColor &&\n\t\t\t\t\tstyles.isLastInnerBlockSelected,\n\t\t\t] }\n\t\t>\n\t\t\t{ resizeObserver }\n\t\t\t<InnerBlocks\n\t\t\t\trenderAppender={ isSelected && renderAppender }\n\t\t\t\tparentWidth={ width }\n\t\t\t\tblockWidth={ blockWidth }\n\t\t\t/>\n\t\t</View>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlock,\n\t\t\tgetBlockIndex,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockAttributes,\n\t\t} = select( blockEditorStore );\n\n\t\tconst block = getBlock( clientId );\n\t\tconst hasInnerBlocks = !! ( block && block.innerBlocks.length );\n\t\tconst isInnerBlockSelected =\n\t\t\thasInnerBlocks && hasSelectedInnerBlock( clientId, true );\n\t\tlet isLastInnerBlockSelected = false;\n\n\t\tif ( isInnerBlockSelected ) {\n\t\t\tconst { innerBlocks } = block;\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst totalInnerBlocks = innerBlocks.length - 1;\n\t\t\tconst blockIndex = getBlockIndex( selectedBlockClientId );\n\t\t\tisLastInnerBlockSelected = totalInnerBlocks === blockIndex;\n\t\t}\n\n\t\tconst parentId = getBlockRootClientId( clientId );\n\t\tconst parentBlockAlignment = getBlockAttributes( parentId )?.align;\n\n\t\treturn {\n\t\t\thasInnerBlocks,\n\t\t\tisLastInnerBlockSelected,\n\t\t\tparentBlockAlignment,\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( GroupEdit );\n"],"mappings":"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","ignoreList":[]}