{"version":3,"names":["clsx","AlignmentControl","BlockControls","InspectorControls","useBlockProps","PlainText","HeadingLevelDropdown","useBlockEditingMode","ToggleControl","TextControl","PanelBody","__","createBlock","getDefaultBlockName","useEntityProp","store","coreStore","useSelect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PostTitleEdit","attributes","level","levelOptions","textAlign","isLink","rel","linkTarget","setAttributes","context","postType","postId","queryId","insertBlocksAfter","TagName","isDescendentOfQueryLoop","Number","isFinite","userCanEdit","select","canUser","kind","name","id","rawTitle","setTitle","fullTitle","link","onSplitAtEnd","blockProps","className","blockEditingMode","titleElement","children","tagName","placeholder","value","onChange","__experimentalVersion","__unstableOnSplitAtEnd","dangerouslySetInnerHTML","__html","rendered","href","target","length","onClick","event","preventDefault","group","options","newLevel","nextAlign","title","__nextHasNoMarginBottom","label","checked","__next40pxDefaultSize","newRel"],"sources":["@wordpress/block-library/src/post-title/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAlignmentControl,\n\tBlockControls,\n\tInspectorControls,\n\tuseBlockProps,\n\tPlainText,\n\tHeadingLevelDropdown,\n\tuseBlockEditingMode,\n} from '@wordpress/block-editor';\nimport { ToggleControl, TextControl, PanelBody } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { createBlock, getDefaultBlockName } from '@wordpress/blocks';\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\nimport { useSelect } from '@wordpress/data';\n\nexport default function PostTitleEdit( {\n\tattributes: { level, levelOptions, textAlign, isLink, rel, linkTarget },\n\tsetAttributes,\n\tcontext: { postType, postId, queryId },\n\tinsertBlocksAfter,\n} ) {\n\tconst TagName = level === 0 ? 'p' : `h${ level }`;\n\tconst isDescendentOfQueryLoop = Number.isFinite( queryId );\n\tconst userCanEdit = useSelect(\n\t\t( select ) => {\n\t\t\t/**\n\t\t\t * useCanEditEntity may trigger an OPTIONS request to the REST API\n\t\t\t * via the canUser resolver. However, when the Post Title is a\n\t\t\t * descendant of a Query Loop block, the title cannot be edited. In\n\t\t\t * order to avoid these unnecessary requests, we call the hook\n\t\t\t * without the proper data, resulting in returning early without\n\t\t\t * making them.\n\t\t\t */\n\t\t\tif ( isDescendentOfQueryLoop ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn select( coreStore ).canUser( 'update', {\n\t\t\t\tkind: 'postType',\n\t\t\t\tname: postType,\n\t\t\t\tid: postId,\n\t\t\t} );\n\t\t},\n\t\t[ isDescendentOfQueryLoop, postType, postId ]\n\t);\n\tconst [ rawTitle = '', setTitle, fullTitle ] = useEntityProp(\n\t\t'postType',\n\t\tpostType,\n\t\t'title',\n\t\tpostId\n\t);\n\tconst [ link ] = useEntityProp( 'postType', postType, 'link', postId );\n\tconst onSplitAtEnd = () => {\n\t\tinsertBlocksAfter( createBlock( getDefaultBlockName() ) );\n\t};\n\tconst blockProps = useBlockProps( {\n\t\tclassName: clsx( {\n\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\n\t\t} ),\n\t} );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tlet titleElement = <TagName { ...blockProps }>{ __( 'Title' ) }</TagName>;\n\n\tif ( postType && postId ) {\n\t\ttitleElement = userCanEdit ? (\n\t\t\t<PlainText\n\t\t\t\ttagName={ TagName }\n\t\t\t\tplaceholder={ __( 'No title' ) }\n\t\t\t\tvalue={ rawTitle }\n\t\t\t\tonChange={ setTitle }\n\t\t\t\t__experimentalVersion={ 2 }\n\t\t\t\t__unstableOnSplitAtEnd={ onSplitAtEnd }\n\t\t\t\t{ ...blockProps }\n\t\t\t/>\n\t\t) : (\n\t\t\t<TagName\n\t\t\t\t{ ...blockProps }\n\t\t\t\tdangerouslySetInnerHTML={ { __html: fullTitle?.rendered } }\n\t\t\t/>\n\t\t);\n\t}\n\n\tif ( isLink && postType && postId ) {\n\t\ttitleElement = userCanEdit ? (\n\t\t\t<TagName { ...blockProps }>\n\t\t\t\t<PlainText\n\t\t\t\t\ttagName=\"a\"\n\t\t\t\t\thref={ link }\n\t\t\t\t\ttarget={ linkTarget }\n\t\t\t\t\trel={ rel }\n\t\t\t\t\tplaceholder={ ! rawTitle.length ? __( 'No title' ) : null }\n\t\t\t\t\tvalue={ rawTitle }\n\t\t\t\t\tonChange={ setTitle }\n\t\t\t\t\t__experimentalVersion={ 2 }\n\t\t\t\t\t__unstableOnSplitAtEnd={ onSplitAtEnd }\n\t\t\t\t/>\n\t\t\t</TagName>\n\t\t) : (\n\t\t\t<TagName { ...blockProps }>\n\t\t\t\t<a\n\t\t\t\t\thref={ link }\n\t\t\t\t\ttarget={ linkTarget }\n\t\t\t\t\trel={ rel }\n\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\n\t\t\t\t\tdangerouslySetInnerHTML={ {\n\t\t\t\t\t\t__html: fullTitle?.rendered,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</TagName>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockControls group=\"block\">\n\t\t\t\t\t\t<HeadingLevelDropdown\n\t\t\t\t\t\t\tvalue={ level }\n\t\t\t\t\t\t\toptions={ levelOptions }\n\t\t\t\t\t\t\tonChange={ ( newLevel ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { level: newLevel } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<AlignmentControl\n\t\t\t\t\t\t\tvalue={ textAlign }\n\t\t\t\t\t\t\tonChange={ ( nextAlign ) => {\n\t\t\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Make title a link' ) }\n\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\tsetAttributes( { isLink: ! isLink } )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={ isLink }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ isLink && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\t\t\tlinkTarget: value\n\t\t\t\t\t\t\t\t\t\t\t\t\t? '_blank'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: '_self',\n\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Link rel' ) }\n\t\t\t\t\t\t\t\t\t\tvalue={ rel }\n\t\t\t\t\t\t\t\t\t\tonChange={ ( newRel ) =>\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes( { rel: newRel } )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t</InspectorControls>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t{ titleElement }\n\t\t</>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}