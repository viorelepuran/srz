{"version":3,"names":["createBlock","__unstableCreateElement","createElement","getTransformedMetadata","transforms","from","type","isMultiBlock","blocks","transform","buttons","map","attributes","content","metadata","element","document","text","innerText","link","querySelector","url","getAttribute","contentBinding","isMatch","paragraphs","every","links","querySelectorAll","length"],"sources":["@wordpress/block-library/src/buttons/transforms.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport { __unstableCreateElement as createElement } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport { getTransformedMetadata } from '../utils/get-transformed-metadata';\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ 'core/button' ],\n\t\t\ttransform: ( buttons ) =>\n\t\t\t\t// Creates the buttons block.\n\t\t\t\tcreateBlock(\n\t\t\t\t\t'core/buttons',\n\t\t\t\t\t{},\n\t\t\t\t\t// Loop the selected buttons.\n\t\t\t\t\tbuttons.map( ( attributes ) =>\n\t\t\t\t\t\t// Create singular button in the buttons block.\n\t\t\t\t\t\tcreateBlock( 'core/button', attributes )\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\ttransform: ( buttons ) =>\n\t\t\t\t// Creates the buttons block.\n\t\t\t\tcreateBlock(\n\t\t\t\t\t'core/buttons',\n\t\t\t\t\t{},\n\t\t\t\t\t// Loop the selected buttons.\n\t\t\t\t\tbuttons.map( ( attributes ) => {\n\t\t\t\t\t\tconst { content, metadata } = attributes;\n\t\t\t\t\t\tconst element = createElement( document, content );\n\t\t\t\t\t\t// Remove any HTML tags.\n\t\t\t\t\t\tconst text = element.innerText || '';\n\t\t\t\t\t\t// Get first url.\n\t\t\t\t\t\tconst link = element.querySelector( 'a' );\n\t\t\t\t\t\tconst url = link?.getAttribute( 'href' );\n\t\t\t\t\t\t// Create singular button in the buttons block.\n\t\t\t\t\t\treturn createBlock( 'core/button', {\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\tmetadata: getTransformedMetadata(\n\t\t\t\t\t\t\t\tmetadata,\n\t\t\t\t\t\t\t\t'core/button',\n\t\t\t\t\t\t\t\t( { content: contentBinding } ) => ( {\n\t\t\t\t\t\t\t\t\ttext: contentBinding,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\tisMatch: ( paragraphs ) => {\n\t\t\t\treturn paragraphs.every( ( attributes ) => {\n\t\t\t\t\tconst element = createElement(\n\t\t\t\t\t\tdocument,\n\t\t\t\t\t\tattributes.content\n\t\t\t\t\t);\n\t\t\t\t\tconst text = element.innerText || '';\n\t\t\t\t\tconst links = element.querySelectorAll( 'a' );\n\t\t\t\t\treturn text.length <= 30 && links.length <= 1;\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,uBAAuB,IAAIC,aAAa,QAAQ,sBAAsB;;AAE/E;AACA;AACA;AACA,SAASC,sBAAsB,QAAQ,mCAAmC;AAE1E,MAAMC,UAAU,GAAG;EAClBC,IAAI,EAAE,CACL;IACCC,IAAI,EAAE,OAAO;IACbC,YAAY,EAAE,IAAI;IAClBC,MAAM,EAAE,CAAE,aAAa,CAAE;IACzBC,SAAS,EAAIC,OAAO;IACnB;IACAV,WAAW,CACV,cAAc,EACd,CAAC,CAAC;IACF;IACAU,OAAO,CAACC,GAAG,CAAIC,UAAU;IACxB;IACAZ,WAAW,CAAE,aAAa,EAAEY,UAAW,CACxC,CACD;EACF,CAAC,EACD;IACCN,IAAI,EAAE,OAAO;IACbC,YAAY,EAAE,IAAI;IAClBC,MAAM,EAAE,CAAE,gBAAgB,CAAE;IAC5BC,SAAS,EAAIC,OAAO;IACnB;IACAV,WAAW,CACV,cAAc,EACd,CAAC,CAAC;IACF;IACAU,OAAO,CAACC,GAAG,CAAIC,UAAU,IAAM;MAC9B,MAAM;QAAEC,OAAO;QAAEC;MAAS,CAAC,GAAGF,UAAU;MACxC,MAAMG,OAAO,GAAGb,aAAa,CAAEc,QAAQ,EAAEH,OAAQ,CAAC;MAClD;MACA,MAAMI,IAAI,GAAGF,OAAO,CAACG,SAAS,IAAI,EAAE;MACpC;MACA,MAAMC,IAAI,GAAGJ,OAAO,CAACK,aAAa,CAAE,GAAI,CAAC;MACzC,MAAMC,GAAG,GAAGF,IAAI,EAAEG,YAAY,CAAE,MAAO,CAAC;MACxC;MACA,OAAOtB,WAAW,CAAE,aAAa,EAAE;QAClCiB,IAAI;QACJI,GAAG;QACHP,QAAQ,EAAEX,sBAAsB,CAC/BW,QAAQ,EACR,aAAa,EACb,CAAE;UAAED,OAAO,EAAEU;QAAe,CAAC,MAAQ;UACpCN,IAAI,EAAEM;QACP,CAAC,CACF;MACD,CAAE,CAAC;IACJ,CAAE,CACH,CAAC;IACFC,OAAO,EAAIC,UAAU,IAAM;MAC1B,OAAOA,UAAU,CAACC,KAAK,CAAId,UAAU,IAAM;QAC1C,MAAMG,OAAO,GAAGb,aAAa,CAC5Bc,QAAQ,EACRJ,UAAU,CAACC,OACZ,CAAC;QACD,MAAMI,IAAI,GAAGF,OAAO,CAACG,SAAS,IAAI,EAAE;QACpC,MAAMS,KAAK,GAAGZ,OAAO,CAACa,gBAAgB,CAAE,GAAI,CAAC;QAC7C,OAAOX,IAAI,CAACY,MAAM,IAAI,EAAE,IAAIF,KAAK,CAACE,MAAM,IAAI,CAAC;MAC9C,CAAE,CAAC;IACJ;EACD,CAAC;AAEH,CAAC;AAED,eAAezB,UAAU","ignoreList":[]}