{"version":3,"names":["View","InnerBlocks","store","blockEditorStore","withDispatch","withSelect","useRef","useEffect","useState","compose","usePreferredColorSchemeStyle","styles","jsx","_jsx","TEMPLATE","service","url","SocialLinksEdit","shouldDelete","onDelete","isSelected","isInnerIconSelected","innerBlocks","attributes","activeInnerBlocks","getBlock","blockWidth","initialCreation","setInitialCreation","shouldRenderFooterAppender","align","marginLeft","spacing","renderFooterAppender","style","footerAppenderContainer","children","ButtonBlockAppender","isFloating","placeholderStyle","placeholder","placeholderDark","renderPlaceholder","Array","length","map","_","index","testID","filterInnerBlocks","blockIds","filter","blockId","placeholderWrapper","templateLock","template","current","orientation","onDeleteBlock","undefined","marginVertical","marginHorizontal","horizontalAlignment","select","clientId","getBlockCount","getBlockParents","getSelectedBlockClientId","getBlocks","selectedBlockClientId","selectedBlockParents","block","dispatch","removeBlock"],"sources":["@wordpress/block-library/src/social-links/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport {\n\tInnerBlocks,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { compose, usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\n\n// Template contains the links that show when start.\nconst TEMPLATE = [\n\t[\n\t\t'core/social-link-wordpress',\n\t\t{ service: 'wordpress', url: 'https://wordpress.org' },\n\t],\n\t[ 'core/social-link-facebook', { service: 'facebook' } ],\n\t[ 'core/social-link-twitter', { service: 'twitter' } ],\n\t[ 'core/social-link-instagram', { service: 'instagram' } ],\n];\n\nfunction SocialLinksEdit( {\n\tshouldDelete,\n\tonDelete,\n\tisSelected,\n\tisInnerIconSelected,\n\tinnerBlocks,\n\tattributes,\n\tactiveInnerBlocks,\n\tgetBlock,\n\tblockWidth,\n} ) {\n\tconst [ initialCreation, setInitialCreation ] = useState( true );\n\tconst shouldRenderFooterAppender = isSelected || isInnerIconSelected;\n\tconst { align } = attributes;\n\tconst { marginLeft: spacing } = styles.spacing;\n\n\tuseEffect( () => {\n\t\tif ( ! shouldRenderFooterAppender ) {\n\t\t\tsetInitialCreation( false );\n\t\t}\n\t}, [ shouldRenderFooterAppender ] );\n\n\tconst renderFooterAppender = useRef( () => (\n\t\t<View style={ styles.footerAppenderContainer }>\n\t\t\t<InnerBlocks.ButtonBlockAppender isFloating />\n\t\t</View>\n\t) );\n\n\tconst placeholderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.placeholder,\n\t\tstyles.placeholderDark\n\t);\n\n\tfunction renderPlaceholder() {\n\t\treturn [ ...new Array( innerBlocks.length || 1 ) ].map(\n\t\t\t( _, index ) => (\n\t\t\t\t<View\n\t\t\t\t\ttestID=\"social-links-placeholder\"\n\t\t\t\t\tstyle={ placeholderStyle }\n\t\t\t\t\tkey={ index }\n\t\t\t\t/>\n\t\t\t)\n\t\t);\n\t}\n\n\tfunction filterInnerBlocks( blockIds ) {\n\t\treturn blockIds.filter(\n\t\t\t( blockId ) => getBlock( blockId ).attributes.url\n\t\t);\n\t}\n\n\tif ( ! shouldRenderFooterAppender && activeInnerBlocks.length === 0 ) {\n\t\treturn (\n\t\t\t<View style={ styles.placeholderWrapper }>\n\t\t\t\t{ renderPlaceholder() }\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<InnerBlocks\n\t\t\ttemplateLock={ false }\n\t\t\ttemplate={ initialCreation && TEMPLATE }\n\t\t\trenderFooterAppender={\n\t\t\t\tshouldRenderFooterAppender && renderFooterAppender.current\n\t\t\t}\n\t\t\torientation=\"horizontal\"\n\t\t\tonDeleteBlock={ shouldDelete ? onDelete : undefined }\n\t\t\tmarginVertical={ spacing }\n\t\t\tmarginHorizontal={ spacing }\n\t\t\thorizontalAlignment={ align }\n\t\t\tfilterInnerBlocks={\n\t\t\t\t! shouldRenderFooterAppender && filterInnerBlocks\n\t\t\t}\n\t\t\tblockWidth={ blockWidth }\n\t\t/>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlockCount,\n\t\t\tgetBlockParents,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlocks,\n\t\t\tgetBlock,\n\t\t} = select( blockEditorStore );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst selectedBlockParents = getBlockParents(\n\t\t\tselectedBlockClientId,\n\t\t\ttrue\n\t\t);\n\t\tconst innerBlocks = getBlocks( clientId );\n\t\tconst activeInnerBlocks = innerBlocks.filter(\n\t\t\t( block ) => block.attributes?.url\n\t\t);\n\n\t\treturn {\n\t\t\tshouldDelete: getBlockCount( clientId ) === 1,\n\t\t\tisInnerIconSelected: selectedBlockParents[ 0 ] === clientId,\n\t\t\tinnerBlocks,\n\t\t\tactiveInnerBlocks,\n\t\t\tgetBlock,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\tconst { removeBlock } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonDelete: () => {\n\t\t\t\tremoveBlock( clientId, false );\n\t\t\t},\n\t\t};\n\t} )\n)( SocialLinksEdit );\n"],"mappings":"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","ignoreList":[]}