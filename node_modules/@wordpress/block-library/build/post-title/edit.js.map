{"version":3,"names":["_clsx","_interopRequireDefault","require","_blockEditor","_components","_i18n","_blocks","_coreData","_data","_jsxRuntime","PostTitleEdit","attributes","level","levelOptions","textAlign","isLink","rel","linkTarget","setAttributes","context","postType","postId","queryId","insertBlocksAfter","TagName","isDescendentOfQueryLoop","Number","isFinite","userCanEdit","useSelect","select","coreStore","canUser","kind","name","id","rawTitle","setTitle","fullTitle","useEntityProp","link","onSplitAtEnd","createBlock","getDefaultBlockName","blockProps","useBlockProps","className","clsx","blockEditingMode","useBlockEditingMode","titleElement","jsx","children","__","PlainText","tagName","placeholder","value","onChange","__experimentalVersion","__unstableOnSplitAtEnd","dangerouslySetInnerHTML","__html","rendered","href","target","length","onClick","event","preventDefault","jsxs","Fragment","BlockControls","group","HeadingLevelDropdown","options","newLevel","AlignmentControl","nextAlign","InspectorControls","PanelBody","title","ToggleControl","__nextHasNoMarginBottom","label","checked","TextControl","__next40pxDefaultSize","newRel"],"sources":["@wordpress/block-library/src/post-title/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAlignmentControl,\n\tBlockControls,\n\tInspectorControls,\n\tuseBlockProps,\n\tPlainText,\n\tHeadingLevelDropdown,\n\tuseBlockEditingMode,\n} from '@wordpress/block-editor';\nimport { ToggleControl, TextControl, PanelBody } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { createBlock, getDefaultBlockName } from '@wordpress/blocks';\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\nimport { useSelect } from '@wordpress/data';\n\nexport default function PostTitleEdit( {\n\tattributes: { level, levelOptions, textAlign, isLink, rel, linkTarget },\n\tsetAttributes,\n\tcontext: { postType, postId, queryId },\n\tinsertBlocksAfter,\n} ) {\n\tconst TagName = level === 0 ? 'p' : `h${ level }`;\n\tconst isDescendentOfQueryLoop = Number.isFinite( queryId );\n\tconst userCanEdit = useSelect(\n\t\t( select ) => {\n\t\t\t/**\n\t\t\t * useCanEditEntity may trigger an OPTIONS request to the REST API\n\t\t\t * via the canUser resolver. However, when the Post Title is a\n\t\t\t * descendant of a Query Loop block, the title cannot be edited. In\n\t\t\t * order to avoid these unnecessary requests, we call the hook\n\t\t\t * without the proper data, resulting in returning early without\n\t\t\t * making them.\n\t\t\t */\n\t\t\tif ( isDescendentOfQueryLoop ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn select( coreStore ).canUser( 'update', {\n\t\t\t\tkind: 'postType',\n\t\t\t\tname: postType,\n\t\t\t\tid: postId,\n\t\t\t} );\n\t\t},\n\t\t[ isDescendentOfQueryLoop, postType, postId ]\n\t);\n\tconst [ rawTitle = '', setTitle, fullTitle ] = useEntityProp(\n\t\t'postType',\n\t\tpostType,\n\t\t'title',\n\t\tpostId\n\t);\n\tconst [ link ] = useEntityProp( 'postType', postType, 'link', postId );\n\tconst onSplitAtEnd = () => {\n\t\tinsertBlocksAfter( createBlock( getDefaultBlockName() ) );\n\t};\n\tconst blockProps = useBlockProps( {\n\t\tclassName: clsx( {\n\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\n\t\t} ),\n\t} );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tlet titleElement = <TagName { ...blockProps }>{ __( 'Title' ) }</TagName>;\n\n\tif ( postType && postId ) {\n\t\ttitleElement = userCanEdit ? (\n\t\t\t<PlainText\n\t\t\t\ttagName={ TagName }\n\t\t\t\tplaceholder={ __( 'No title' ) }\n\t\t\t\tvalue={ rawTitle }\n\t\t\t\tonChange={ setTitle }\n\t\t\t\t__experimentalVersion={ 2 }\n\t\t\t\t__unstableOnSplitAtEnd={ onSplitAtEnd }\n\t\t\t\t{ ...blockProps }\n\t\t\t/>\n\t\t) : (\n\t\t\t<TagName\n\t\t\t\t{ ...blockProps }\n\t\t\t\tdangerouslySetInnerHTML={ { __html: fullTitle?.rendered } }\n\t\t\t/>\n\t\t);\n\t}\n\n\tif ( isLink && postType && postId ) {\n\t\ttitleElement = userCanEdit ? (\n\t\t\t<TagName { ...blockProps }>\n\t\t\t\t<PlainText\n\t\t\t\t\ttagName=\"a\"\n\t\t\t\t\thref={ link }\n\t\t\t\t\ttarget={ linkTarget }\n\t\t\t\t\trel={ rel }\n\t\t\t\t\tplaceholder={ ! rawTitle.length ? __( 'No title' ) : null }\n\t\t\t\t\tvalue={ rawTitle }\n\t\t\t\t\tonChange={ setTitle }\n\t\t\t\t\t__experimentalVersion={ 2 }\n\t\t\t\t\t__unstableOnSplitAtEnd={ onSplitAtEnd }\n\t\t\t\t/>\n\t\t\t</TagName>\n\t\t) : (\n\t\t\t<TagName { ...blockProps }>\n\t\t\t\t<a\n\t\t\t\t\thref={ link }\n\t\t\t\t\ttarget={ linkTarget }\n\t\t\t\t\trel={ rel }\n\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\n\t\t\t\t\tdangerouslySetInnerHTML={ {\n\t\t\t\t\t\t__html: fullTitle?.rendered,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</TagName>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockControls group=\"block\">\n\t\t\t\t\t\t<HeadingLevelDropdown\n\t\t\t\t\t\t\tvalue={ level }\n\t\t\t\t\t\t\toptions={ levelOptions }\n\t\t\t\t\t\t\tonChange={ ( newLevel ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { level: newLevel } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<AlignmentControl\n\t\t\t\t\t\t\tvalue={ textAlign }\n\t\t\t\t\t\t\tonChange={ ( nextAlign ) => {\n\t\t\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Make title a link' ) }\n\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\tsetAttributes( { isLink: ! isLink } )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={ isLink }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ isLink && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\t\t\tlinkTarget: value\n\t\t\t\t\t\t\t\t\t\t\t\t\t? '_blank'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: '_self',\n\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Link rel' ) }\n\t\t\t\t\t\t\t\t\t\tvalue={ rel }\n\t\t\t\t\t\t\t\t\t\tonChange={ ( newRel ) =>\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes( { rel: newRel } )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t</InspectorControls>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t{ titleElement }\n\t\t</>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}