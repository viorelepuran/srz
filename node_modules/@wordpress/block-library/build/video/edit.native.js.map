{"version":3,"names":["_reactNative","require","_element","_reactNativeBridge","_components","_compose","_blockEditor","_i18n","_url","_hooks","_icons","_data","_notices","_util","_style","_interopRequireDefault","_iconRetry","_editCommonSettings","_jsxRuntime","ICON_TYPE","PLACEHOLDER","RETRY","UPLOAD","VideoEdit","Component","constructor","props","state","isCaptionSelected","videoContainerHeight","mediaUploadStateReset","bind","onSelectMediaUploadOption","onSelectURL","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","updateMediaProgress","onVideoPressed","onVideoContainerLayout","onFocusCaption","componentDidMount","attributes","id","getProtocol","src","mediaUploadSync","componentWillUnmount","hasAction","isUploadInProgress","doAction","getDerivedStateFromProps","isSelected","requestImageUploadCancelDialog","requestImageFailedRetryDialog","setState","payload","setAttributes","mediaUrl","url","mediaServerId","mediaId","createErrorNotice","onReplace","isURL","test","embedBlock","createUpgradedEmbedBlock","undefined","poster","__","event","width","nativeEvent","layout","height","VIDEO_ASPECT_RATIO","getIcon","iconType","iconStyle","jsx","Icon","icon","SvgIconRetry","style","getStylesFromColorScheme","iconDark","iconUploading","iconUploadingDark","SvgIcon","render","wasBlockJustInserted","toolbarEditButton","MediaUpload","allowedTypes","MEDIA_TYPE_VIDEO","isReplacingMedia","onSelect","open","getMediaOptions","jsxs","ToolbarGroup","children","ToolbarButton","label","replace","onClick","View","flex","MediaPlaceholder","onFocus","autoOpenMediaUpload","TouchableWithoutFeedback","accessible","onPress","disabled","BlockControls","InspectorControls","PanelBody","title","default","MediaUploadProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onUpdateMediaProgress","onMediaUploadStateReset","renderContent","isUploadFailed","retryMessage","showVideo","styleIconContainer","modalIconRetry","modalIcon","iconContainer","videoStyle","video","containerStyle","containerFocused","container","onLayout","videoContainer","VideoPlayer","source","uri","paused","placeholderContainer","placeholderContainerDark","Text","uploadFailedText","BlockCaption","accessibilityLabelCreator","caption","RichText","isEmpty","sprintf","clientId","onBlur","insertBlocksAfter","_default","exports","compose","withSelect","select","blockEditorStore","withDispatch","dispatch","noticesStore","withPreferredColorScheme"],"sources":["@wordpress/block-library/src/video/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, TouchableWithoutFeedback, Text } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport {\n\tmediaUploadSync,\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n} from '@wordpress/react-native-bridge';\nimport {\n\tIcon,\n\tToolbarButton,\n\tToolbarGroup,\n\tPanelBody,\n} from '@wordpress/components';\nimport { withPreferredColorScheme, compose } from '@wordpress/compose';\nimport {\n\tBlockCaption,\n\tMediaPlaceholder,\n\tMediaUpload,\n\tMediaUploadProgress,\n\tMEDIA_TYPE_VIDEO,\n\tBlockControls,\n\tVIDEO_ASPECT_RATIO,\n\tVideoPlayer,\n\tInspectorControls,\n\tRichText,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { isURL, getProtocol } from '@wordpress/url';\nimport { doAction, hasAction } from '@wordpress/hooks';\nimport { video as SvgIcon, replace } from '@wordpress/icons';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { createUpgradedEmbedBlock } from '../embed/util';\nimport style from './style.scss';\nimport SvgIconRetry from './icon-retry';\nimport VideoCommonSettings from './edit-common-settings';\n\nconst ICON_TYPE = {\n\tPLACEHOLDER: 'placeholder',\n\tRETRY: 'retry',\n\tUPLOAD: 'upload',\n};\n\nclass VideoEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisCaptionSelected: false,\n\t\t\tvideoContainerHeight: 0,\n\t\t};\n\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t\tthis.onSelectMediaUploadOption =\n\t\t\tthis.onSelectMediaUploadOption.bind( this );\n\t\tthis.onSelectURL = this.onSelectURL.bind( this );\n\t\tthis.finishMediaUploadWithSuccess =\n\t\t\tthis.finishMediaUploadWithSuccess.bind( this );\n\t\tthis.finishMediaUploadWithFailure =\n\t\t\tthis.finishMediaUploadWithFailure.bind( this );\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.onVideoPressed = this.onVideoPressed.bind( this );\n\t\tthis.onVideoContainerLayout = this.onVideoContainerLayout.bind( this );\n\t\tthis.onFocusCaption = this.onFocusCaption.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { attributes } = this.props;\n\t\tif ( attributes.id && getProtocol( attributes.src ) === 'file:' ) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// This action will only exist if the user pressed the trash button on the block holder.\n\t\tif (\n\t\t\thasAction( 'blocks.onRemoveBlockCheckUpload' ) &&\n\t\t\tthis.state.isUploadInProgress\n\t\t) {\n\t\t\tdoAction(\n\t\t\t\t'blocks.onRemoveBlockCheckUpload',\n\t\t\t\tthis.props.attributes.id\n\t\t\t);\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps( props, state ) {\n\t\t// Avoid a UI flicker in the toolbar by insuring that isCaptionSelected\n\t\t// is updated immediately any time the isSelected prop becomes false.\n\t\treturn {\n\t\t\tisCaptionSelected: props.isSelected && state.isCaptionSelected,\n\t\t};\n\t}\n\n\tonVideoPressed() {\n\t\tconst { attributes } = this.props;\n\n\t\tif ( this.state.isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( attributes.id );\n\t\t} else if (\n\t\t\tattributes.id &&\n\t\t\tgetProtocol( attributes.src ) === 'file:'\n\t\t) {\n\t\t\trequestImageFailedRetryDialog( attributes.id );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tisCaptionSelected: false,\n\t\t} );\n\t}\n\n\tonFocusCaption() {\n\t\tif ( ! this.state.isCaptionSelected ) {\n\t\t\tthis.setState( { isCaptionSelected: true } );\n\t\t}\n\t}\n\n\tupdateMediaProgress( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tif ( payload.mediaUrl ) {\n\t\t\tsetAttributes( { url: payload.mediaUrl } );\n\t\t}\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { src: payload.mediaUrl, id: payload.mediaServerId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { id: payload.mediaId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { id: null, src: null } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tonSelectMediaUploadOption( { id, url } ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { id, src: url } );\n\t}\n\n\tonSelectURL( url ) {\n\t\tconst { createErrorNotice, onReplace, setAttributes } = this.props;\n\n\t\tif ( isURL( url ) && /^https?:/.test( getProtocol( url ) ) ) {\n\t\t\t// Check if there's an embed block that handles this URL.\n\t\t\tconst embedBlock = createUpgradedEmbedBlock( {\n\t\t\t\tattributes: { url },\n\t\t\t} );\n\t\t\tif ( undefined !== embedBlock ) {\n\t\t\t\tonReplace( embedBlock );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetAttributes( { src: url, id: undefined, poster: undefined } );\n\t\t} else {\n\t\t\tcreateErrorNotice( __( 'Invalid URL.' ) );\n\t\t}\n\t}\n\n\tonVideoContainerLayout( event ) {\n\t\tconst { width } = event.nativeEvent.layout;\n\t\tconst height = width / VIDEO_ASPECT_RATIO;\n\t\tif ( height !== this.state.videoContainerHeight ) {\n\t\t\tthis.setState( { videoContainerHeight: height } );\n\t\t}\n\t}\n\n\tgetIcon( iconType ) {\n\t\tlet iconStyle;\n\t\tswitch ( iconType ) {\n\t\t\tcase ICON_TYPE.RETRY:\n\t\t\t\treturn <Icon icon={ SvgIconRetry } { ...style.icon } />;\n\t\t\tcase ICON_TYPE.PLACEHOLDER:\n\t\t\t\ticonStyle = this.props.getStylesFromColorScheme(\n\t\t\t\t\tstyle.icon,\n\t\t\t\t\tstyle.iconDark\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase ICON_TYPE.UPLOAD:\n\t\t\t\ticonStyle = this.props.getStylesFromColorScheme(\n\t\t\t\t\tstyle.iconUploading,\n\t\t\t\t\tstyle.iconUploadingDark\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn <Icon icon={ SvgIcon } { ...iconStyle } />;\n\t}\n\n\trender() {\n\t\tconst { setAttributes, attributes, isSelected, wasBlockJustInserted } =\n\t\t\tthis.props;\n\t\tconst { id, src } = attributes;\n\t\tconst { videoContainerHeight } = this.state;\n\n\t\tconst toolbarEditButton = (\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ [ MEDIA_TYPE_VIDEO ] }\n\t\t\t\tisReplacingMedia\n\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\n\t\t\t\tonSelectURL={ this.onSelectURL }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t{ getMediaOptions() }\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\tlabel={ __( 'Edit video' ) }\n\t\t\t\t\t\t\t\ticon={ replace }\n\t\t\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t></MediaUpload>\n\t\t);\n\n\t\tif ( ! src ) {\n\t\t\treturn (\n\t\t\t\t<View style={ { flex: 1 } }>\n\t\t\t\t\t<MediaPlaceholder\n\t\t\t\t\t\tallowedTypes={ [ MEDIA_TYPE_VIDEO ] }\n\t\t\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\n\t\t\t\t\t\tonSelectURL={ this.onSelectURL }\n\t\t\t\t\t\ticon={ this.getIcon( ICON_TYPE.PLACEHOLDER ) }\n\t\t\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\t\t\tautoOpenMediaUpload={\n\t\t\t\t\t\t\tisSelected && wasBlockJustInserted\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\taccessible={ ! isSelected }\n\t\t\t\tonPress={ this.onVideoPressed }\n\t\t\t\tdisabled={ ! isSelected }\n\t\t\t>\n\t\t\t\t<View style={ { flex: 1 } }>\n\t\t\t\t\t{ ! this.state.isCaptionSelected && (\n\t\t\t\t\t\t<BlockControls>{ toolbarEditButton }</BlockControls>\n\t\t\t\t\t) }\n\t\t\t\t\t{ isSelected && (\n\t\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t\t\t\t\t<VideoCommonSettings\n\t\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t</InspectorControls>\n\t\t\t\t\t) }\n\t\t\t\t\t<MediaUploadProgress\n\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\t\t\tonMediaUploadStateReset={ this.mediaUploadStateReset }\n\t\t\t\t\t\trenderContent={ ( {\n\t\t\t\t\t\t\tisUploadInProgress,\n\t\t\t\t\t\t\tisUploadFailed,\n\t\t\t\t\t\t\tretryMessage,\n\t\t\t\t\t\t} ) => {\n\t\t\t\t\t\t\tconst showVideo =\n\t\t\t\t\t\t\t\tisURL( src ) &&\n\t\t\t\t\t\t\t\tgetProtocol( attributes.src ) !== 'file:' &&\n\t\t\t\t\t\t\t\t! isUploadInProgress &&\n\t\t\t\t\t\t\t\t! isUploadFailed;\n\n\t\t\t\t\t\t\tconst icon = this.getIcon(\n\t\t\t\t\t\t\t\tisUploadFailed\n\t\t\t\t\t\t\t\t\t? ICON_TYPE.RETRY\n\t\t\t\t\t\t\t\t\t: ICON_TYPE.UPLOAD\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst styleIconContainer = isUploadFailed\n\t\t\t\t\t\t\t\t? style.modalIconRetry\n\t\t\t\t\t\t\t\t: style.modalIcon;\n\n\t\t\t\t\t\t\tconst iconContainer = (\n\t\t\t\t\t\t\t\t<View style={ styleIconContainer }>\n\t\t\t\t\t\t\t\t\t{ icon }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst videoStyle = {\n\t\t\t\t\t\t\t\theight: videoContainerHeight,\n\t\t\t\t\t\t\t\t...style.video,\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tconst containerStyle =\n\t\t\t\t\t\t\t\tshowVideo && isSelected\n\t\t\t\t\t\t\t\t\t? style.containerFocused\n\t\t\t\t\t\t\t\t\t: style.container;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\tonLayout={ this.onVideoContainerLayout }\n\t\t\t\t\t\t\t\t\tstyle={ containerStyle }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ showVideo && (\n\t\t\t\t\t\t\t\t\t\t<View style={ style.videoContainer }>\n\t\t\t\t\t\t\t\t\t\t\t<VideoPlayer\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected={\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSelected &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t! this.state\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isCaptionSelected\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ videoStyle }\n\t\t\t\t\t\t\t\t\t\t\t\tsource={ { uri: src } }\n\t\t\t\t\t\t\t\t\t\t\t\tpaused\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ ! showVideo && (\n\t\t\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\t\t\t\theight: videoContainerHeight,\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\t\t\t...this.props.getStylesFromColorScheme(\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle.placeholderContainer,\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle.placeholderContainerDark\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ videoContainerHeight > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\ticonContainer }\n\t\t\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle.uploadFailedText\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ retryMessage }\n\t\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockCaption\n\t\t\t\t\t\taccessible\n\t\t\t\t\t\taccessibilityLabelCreator={ ( caption ) =>\n\t\t\t\t\t\t\tRichText.isEmpty( caption )\n\t\t\t\t\t\t\t\t? /* translators: accessibility text. Empty video caption. */\n\t\t\t\t\t\t\t\t  __( 'Video caption. Empty' )\n\t\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t\t/* translators: accessibility text. %s: video caption. */\n\t\t\t\t\t\t\t\t\t\t__( 'Video caption. %s' ),\n\t\t\t\t\t\t\t\t\t\tcaption\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclientId={ this.props.clientId }\n\t\t\t\t\t\tisSelected={ this.state.isCaptionSelected }\n\t\t\t\t\t\tonFocus={ this.onFocusCaption }\n\t\t\t\t\t\tonBlur={ this.props.onBlur } // Always assign onBlur as props.\n\t\t\t\t\t\tinsertBlocksAfter={ this.props.insertBlocksAfter }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => ( {\n\t\twasBlockJustInserted: select( blockEditorStore ).wasBlockJustInserted(\n\t\t\tclientId,\n\t\t\t'inserter_menu'\n\t\t),\n\t} ) ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createErrorNotice } = dispatch( noticesStore );\n\n\t\treturn { createErrorNotice };\n\t} ),\n\twithPreferredColorScheme,\n] )( VideoEdit );\n"],"mappings":"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","ignoreList":[]}