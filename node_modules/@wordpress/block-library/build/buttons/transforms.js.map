{"version":3,"names":["_blocks","require","_richText","_getTransformedMetadata","transforms","from","type","isMultiBlock","blocks","transform","buttons","createBlock","map","attributes","content","metadata","element","createElement","document","text","innerText","link","querySelector","url","getAttribute","getTransformedMetadata","contentBinding","isMatch","paragraphs","every","links","querySelectorAll","length","_default","exports","default"],"sources":["@wordpress/block-library/src/buttons/transforms.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport { __unstableCreateElement as createElement } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport { getTransformedMetadata } from '../utils/get-transformed-metadata';\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ 'core/button' ],\n\t\t\ttransform: ( buttons ) =>\n\t\t\t\t// Creates the buttons block.\n\t\t\t\tcreateBlock(\n\t\t\t\t\t'core/buttons',\n\t\t\t\t\t{},\n\t\t\t\t\t// Loop the selected buttons.\n\t\t\t\t\tbuttons.map( ( attributes ) =>\n\t\t\t\t\t\t// Create singular button in the buttons block.\n\t\t\t\t\t\tcreateBlock( 'core/button', attributes )\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\ttransform: ( buttons ) =>\n\t\t\t\t// Creates the buttons block.\n\t\t\t\tcreateBlock(\n\t\t\t\t\t'core/buttons',\n\t\t\t\t\t{},\n\t\t\t\t\t// Loop the selected buttons.\n\t\t\t\t\tbuttons.map( ( attributes ) => {\n\t\t\t\t\t\tconst { content, metadata } = attributes;\n\t\t\t\t\t\tconst element = createElement( document, content );\n\t\t\t\t\t\t// Remove any HTML tags.\n\t\t\t\t\t\tconst text = element.innerText || '';\n\t\t\t\t\t\t// Get first url.\n\t\t\t\t\t\tconst link = element.querySelector( 'a' );\n\t\t\t\t\t\tconst url = link?.getAttribute( 'href' );\n\t\t\t\t\t\t// Create singular button in the buttons block.\n\t\t\t\t\t\treturn createBlock( 'core/button', {\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\tmetadata: getTransformedMetadata(\n\t\t\t\t\t\t\t\tmetadata,\n\t\t\t\t\t\t\t\t'core/button',\n\t\t\t\t\t\t\t\t( { content: contentBinding } ) => ( {\n\t\t\t\t\t\t\t\t\ttext: contentBinding,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\tisMatch: ( paragraphs ) => {\n\t\t\t\treturn paragraphs.every( ( attributes ) => {\n\t\t\t\t\tconst element = createElement(\n\t\t\t\t\t\tdocument,\n\t\t\t\t\t\tattributes.content\n\t\t\t\t\t);\n\t\t\t\t\tconst text = element.innerText || '';\n\t\t\t\t\tconst links = element.querySelectorAll( 'a' );\n\t\t\t\t\treturn text.length <= 30 && links.length <= 1;\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"],"mappings":";;;;;;AAGA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AAKA,IAAAE,uBAAA,GAAAF,OAAA;AATA;AACA;AACA;;AAIA;AACA;AACA;;AAGA,MAAMG,UAAU,GAAG;EAClBC,IAAI,EAAE,CACL;IACCC,IAAI,EAAE,OAAO;IACbC,YAAY,EAAE,IAAI;IAClBC,MAAM,EAAE,CAAE,aAAa,CAAE;IACzBC,SAAS,EAAIC,OAAO;IACnB;IACA,IAAAC,mBAAW,EACV,cAAc,EACd,CAAC,CAAC;IACF;IACAD,OAAO,CAACE,GAAG,CAAIC,UAAU;IACxB;IACA,IAAAF,mBAAW,EAAE,aAAa,EAAEE,UAAW,CACxC,CACD;EACF,CAAC,EACD;IACCP,IAAI,EAAE,OAAO;IACbC,YAAY,EAAE,IAAI;IAClBC,MAAM,EAAE,CAAE,gBAAgB,CAAE;IAC5BC,SAAS,EAAIC,OAAO;IACnB;IACA,IAAAC,mBAAW,EACV,cAAc,EACd,CAAC,CAAC;IACF;IACAD,OAAO,CAACE,GAAG,CAAIC,UAAU,IAAM;MAC9B,MAAM;QAAEC,OAAO;QAAEC;MAAS,CAAC,GAAGF,UAAU;MACxC,MAAMG,OAAO,GAAG,IAAAC,iCAAa,EAAEC,QAAQ,EAAEJ,OAAQ,CAAC;MAClD;MACA,MAAMK,IAAI,GAAGH,OAAO,CAACI,SAAS,IAAI,EAAE;MACpC;MACA,MAAMC,IAAI,GAAGL,OAAO,CAACM,aAAa,CAAE,GAAI,CAAC;MACzC,MAAMC,GAAG,GAAGF,IAAI,EAAEG,YAAY,CAAE,MAAO,CAAC;MACxC;MACA,OAAO,IAAAb,mBAAW,EAAE,aAAa,EAAE;QAClCQ,IAAI;QACJI,GAAG;QACHR,QAAQ,EAAE,IAAAU,8CAAsB,EAC/BV,QAAQ,EACR,aAAa,EACb,CAAE;UAAED,OAAO,EAAEY;QAAe,CAAC,MAAQ;UACpCP,IAAI,EAAEO;QACP,CAAC,CACF;MACD,CAAE,CAAC;IACJ,CAAE,CACH,CAAC;IACFC,OAAO,EAAIC,UAAU,IAAM;MAC1B,OAAOA,UAAU,CAACC,KAAK,CAAIhB,UAAU,IAAM;QAC1C,MAAMG,OAAO,GAAG,IAAAC,iCAAa,EAC5BC,QAAQ,EACRL,UAAU,CAACC,OACZ,CAAC;QACD,MAAMK,IAAI,GAAGH,OAAO,CAACI,SAAS,IAAI,EAAE;QACpC,MAAMU,KAAK,GAAGd,OAAO,CAACe,gBAAgB,CAAE,GAAI,CAAC;QAC7C,OAAOZ,IAAI,CAACa,MAAM,IAAI,EAAE,IAAIF,KAAK,CAACE,MAAM,IAAI,CAAC;MAC9C,CAAE,CAAC;IACJ;EACD,CAAC;AAEH,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEa/B,UAAU","ignoreList":[]}