{"version":3,"names":["_components","require","_coreData","_data","_element","_i18n","_useTemplatePartAreaLabel","_interopRequireDefault","DRAFT_MENU_PARAMS","status","per_page","PUBLISHED_MENU_PARAMS","useGenerateDefaultNavigationTitle","clientId","isDisabled","useContext","Disabled","Context","area","useTemplatePartAreaLabel","undefined","registry","useRegistry","useCallback","getEntityRecords","resolveSelect","coreStore","draftNavigationMenus","navigationMenus","Promise","all","title","sprintf","__","matchingMenuTitleCount","reduce","count","menu","raw","startsWith","titleWithCount"],"sources":["@wordpress/block-library/src/navigation/edit/use-generate-default-navigation-title.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Disabled } from '@wordpress/components';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { useRegistry } from '@wordpress/data';\nimport { useContext, useCallback } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useTemplatePartAreaLabel from '../use-template-part-area-label';\n\nconst DRAFT_MENU_PARAMS = [\n\t'postType',\n\t'wp_navigation',\n\t{ status: 'draft', per_page: -1 },\n];\n\nconst PUBLISHED_MENU_PARAMS = [\n\t'postType',\n\t'wp_navigation',\n\t{ per_page: -1, status: 'publish' },\n];\n\nexport default function useGenerateDefaultNavigationTitle( clientId ) {\n\t// The block will be disabled in a block preview, use this as a way of\n\t// avoiding the side-effects of this component for block previews.\n\tconst isDisabled = useContext( Disabled.Context );\n\n\t// Because we can't conditionally call hooks, pass an undefined client id\n\t// arg to bypass the expensive `useTemplateArea` code. The hook will return\n\t// early.\n\tconst area = useTemplatePartAreaLabel( isDisabled ? undefined : clientId );\n\n\tconst registry = useRegistry();\n\treturn useCallback( async () => {\n\t\t// Ensure other navigation menus have loaded so an\n\t\t// accurate name can be created.\n\t\tif ( isDisabled ) {\n\t\t\treturn '';\n\t\t}\n\t\tconst { getEntityRecords } = registry.resolveSelect( coreStore );\n\n\t\tconst [ draftNavigationMenus, navigationMenus ] = await Promise.all( [\n\t\t\tgetEntityRecords( ...DRAFT_MENU_PARAMS ),\n\t\t\tgetEntityRecords( ...PUBLISHED_MENU_PARAMS ),\n\t\t] );\n\n\t\tconst title = area\n\t\t\t? sprintf(\n\t\t\t\t\t// translators: %s: the name of a menu (e.g. Header menu).\n\t\t\t\t\t__( '%s menu' ),\n\t\t\t\t\tarea\n\t\t\t  )\n\t\t\t: // translators: 'menu' as in website navigation menu.\n\t\t\t  __( 'Menu' );\n\n\t\t// Determine how many menus start with the automatic title.\n\t\tconst matchingMenuTitleCount = [\n\t\t\t...draftNavigationMenus,\n\t\t\t...navigationMenus,\n\t\t].reduce(\n\t\t\t( count, menu ) =>\n\t\t\t\tmenu?.title?.raw?.startsWith( title ) ? count + 1 : count,\n\t\t\t0\n\t\t);\n\n\t\t// Append a number to the end of the title if a menu with\n\t\t// the same name exists.\n\t\tconst titleWithCount =\n\t\t\tmatchingMenuTitleCount > 0\n\t\t\t\t? `${ title } ${ matchingMenuTitleCount + 1 }`\n\t\t\t\t: title;\n\n\t\treturn titleWithCount || '';\n\t}, [ isDisabled, area, registry ] );\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AAKA,IAAAK,yBAAA,GAAAC,sBAAA,CAAAN,OAAA;AAZA;AACA;AACA;;AAOA;AACA;AACA;;AAGA,MAAMO,iBAAiB,GAAG,CACzB,UAAU,EACV,eAAe,EACf;EAAEC,MAAM,EAAE,OAAO;EAAEC,QAAQ,EAAE,CAAC;AAAE,CAAC,CACjC;AAED,MAAMC,qBAAqB,GAAG,CAC7B,UAAU,EACV,eAAe,EACf;EAAED,QAAQ,EAAE,CAAC,CAAC;EAAED,MAAM,EAAE;AAAU,CAAC,CACnC;AAEc,SAASG,iCAAiCA,CAAEC,QAAQ,EAAG;EACrE;EACA;EACA,MAAMC,UAAU,GAAG,IAAAC,mBAAU,EAAEC,oBAAQ,CAACC,OAAQ,CAAC;;EAEjD;EACA;EACA;EACA,MAAMC,IAAI,GAAG,IAAAC,iCAAwB,EAAEL,UAAU,GAAGM,SAAS,GAAGP,QAAS,CAAC;EAE1E,MAAMQ,QAAQ,GAAG,IAAAC,iBAAW,EAAC,CAAC;EAC9B,OAAO,IAAAC,oBAAW,EAAE,YAAY;IAC/B;IACA;IACA,IAAKT,UAAU,EAAG;MACjB,OAAO,EAAE;IACV;IACA,MAAM;MAAEU;IAAiB,CAAC,GAAGH,QAAQ,CAACI,aAAa,CAAEC,eAAU,CAAC;IAEhE,MAAM,CAAEC,oBAAoB,EAAEC,eAAe,CAAE,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAE,CACpEN,gBAAgB,CAAE,GAAGhB,iBAAkB,CAAC,EACxCgB,gBAAgB,CAAE,GAAGb,qBAAsB,CAAC,CAC3C,CAAC;IAEH,MAAMoB,KAAK,GAAGb,IAAI,GACf,IAAAc,aAAO;IACP;IACA,IAAAC,QAAE,EAAE,SAAU,CAAC,EACff,IACA,CAAC;IACD;IACA,IAAAe,QAAE,EAAE,MAAO,CAAC;;IAEf;IACA,MAAMC,sBAAsB,GAAG,CAC9B,GAAGP,oBAAoB,EACvB,GAAGC,eAAe,CAClB,CAACO,MAAM,CACP,CAAEC,KAAK,EAAEC,IAAI,KACZA,IAAI,EAAEN,KAAK,EAAEO,GAAG,EAAEC,UAAU,CAAER,KAAM,CAAC,GAAGK,KAAK,GAAG,CAAC,GAAGA,KAAK,EAC1D,CACD,CAAC;;IAED;IACA;IACA,MAAMI,cAAc,GACnBN,sBAAsB,GAAG,CAAC,GACvB,GAAIH,KAAK,IAAMG,sBAAsB,GAAG,CAAC,EAAG,GAC5CH,KAAK;IAET,OAAOS,cAAc,IAAI,EAAE;EAC5B,CAAC,EAAE,CAAE1B,UAAU,EAAEI,IAAI,EAAEG,QAAQ,CAAG,CAAC;AACpC","ignoreList":[]}