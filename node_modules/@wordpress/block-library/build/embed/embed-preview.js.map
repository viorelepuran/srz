{"version":3,"names":["_util","require","_clsx","_interopRequireDefault","_i18n","_components","_blockEditor","_element","_url","_wpEmbedPreview","_jsxRuntime","EmbedPreview","preview","previewable","url","type","isSelected","className","icon","label","interactive","setInteractive","useState","hideOverlay","scripts","html","getPhotoHtml","embedSourceUrl","getAuthority","iframeTitle","sprintf","__","sandboxClassnames","clsx","embedWrapper","jsx","default","jsxs","children","SandBox","title","onFocus","onMouseUp","Fragment","Placeholder","BlockIcon","showColors","href"],"sources":["@wordpress/block-library/src/embed/embed-preview.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport { getPhotoHtml } from './util';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Placeholder, SandBox } from '@wordpress/components';\nimport { BlockIcon } from '@wordpress/block-editor';\nimport { useState } from '@wordpress/element';\nimport { getAuthority } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport WpEmbedPreview from './wp-embed-preview';\n\nexport default function EmbedPreview( {\n\tpreview,\n\tpreviewable,\n\turl,\n\ttype,\n\tisSelected,\n\tclassName,\n\ticon,\n\tlabel,\n} ) {\n\tconst [ interactive, setInteractive ] = useState( false );\n\n\tif ( ! isSelected && interactive ) {\n\t\t// We only want to change this when the block is not selected, because changing it when\n\t\t// the block becomes selected makes the overlap disappear too early. Hiding the overlay\n\t\t// happens on mouseup when the overlay is clicked.\n\t\tsetInteractive( false );\n\t}\n\n\tconst hideOverlay = () => {\n\t\t// This is called onMouseUp on the overlay. We can't respond to the `isSelected` prop\n\t\t// changing, because that happens on mouse down, and the overlay immediately disappears,\n\t\t// and the mouse event can end up in the preview content. We can't use onClick on\n\t\t// the overlay to hide it either, because then the editor misses the mouseup event, and\n\t\t// thinks we're multi-selecting blocks.\n\t\tsetInteractive( true );\n\t};\n\n\tconst { scripts } = preview;\n\n\tconst html = 'photo' === type ? getPhotoHtml( preview ) : preview.html;\n\tconst embedSourceUrl = getAuthority( url );\n\tconst iframeTitle = sprintf(\n\t\t// translators: %s: host providing embed content e.g: www.youtube.com\n\t\t__( 'Embedded content from %s' ),\n\t\tembedSourceUrl\n\t);\n\tconst sandboxClassnames = clsx(\n\t\ttype,\n\t\tclassName,\n\t\t'wp-block-embed__wrapper'\n\t);\n\n\t// Disabled because the overlay div doesn't actually have a role or functionality\n\t// as far as the user is concerned. We're just catching the first click so that\n\t// the block can be selected without interacting with the embed preview that the overlay covers.\n\t/* eslint-disable jsx-a11y/no-static-element-interactions */\n\tconst embedWrapper =\n\t\t'wp-embed' === type ? (\n\t\t\t<WpEmbedPreview html={ html } />\n\t\t) : (\n\t\t\t<div className=\"wp-block-embed__wrapper\">\n\t\t\t\t<SandBox\n\t\t\t\t\thtml={ html }\n\t\t\t\t\tscripts={ scripts }\n\t\t\t\t\ttitle={ iframeTitle }\n\t\t\t\t\ttype={ sandboxClassnames }\n\t\t\t\t\tonFocus={ hideOverlay }\n\t\t\t\t/>\n\t\t\t\t{ ! interactive && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"block-library-embed__interactive-overlay\"\n\t\t\t\t\t\tonMouseUp={ hideOverlay }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t/* eslint-enable jsx-a11y/no-static-element-interactions */\n\n\treturn (\n\t\t<>\n\t\t\t{ previewable ? (\n\t\t\t\tembedWrapper\n\t\t\t) : (\n\t\t\t\t<Placeholder\n\t\t\t\t\ticon={ <BlockIcon icon={ icon } showColors /> }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t>\n\t\t\t\t\t<p className=\"components-placeholder__error\">\n\t\t\t\t\t\t<a href={ url }>{ url }</a>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"components-placeholder__error\">\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: host providing embed content e.g: www.youtube.com */\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\"Embedded content from %s can't be previewed in the editor.\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tembedSourceUrl\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t</Placeholder>\n\t\t\t) }\n\t\t</>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}