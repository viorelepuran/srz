{"version":3,"names":["_reactNative","require","_clsx","_interopRequireDefault","_primitives","_blockEditor","_i18n","_element","_components","_data","_util","_embedNoPreview","_wpEmbedPreview","_styles","_jsxRuntime","EmbedPreview","align","className","clientId","icon","insertBlocksAfter","isSelected","label","onFocus","preview","previewable","isProviderPreviewable","type","url","isDefaultEmbedInfo","isCaptionSelected","setIsCaptionSelected","useState","locale","useSelect","blockEditorStore","getSettings","wrapperStyle","styles","wrapperAlignStyle","sandboxAlignStyle","accessibilityLabelCreator","caption","RichText","isEmpty","__","sprintf","onEmbedPreviewPress","onFocusCaption","provider_url","providerUrl","html","getPhotoHtml","parsedHost","URL","host","split","parsedHostBaseUrl","splice","length","join","iframeTitle","sandboxClassnames","clsx","PreviewContent","WpEmbedPreview","SandBox","embedWrapper","jsx","Fragment","children","TouchableWithoutFeedback","onPress","View","pointerEvents","style","lang","title","containerStyle","accessible","disabled","jsxs","default","BlockCaption","_default","exports","memo"],"sources":["@wordpress/block-library/src/embed/embed-preview.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { TouchableWithoutFeedback } from 'react-native';\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { View } from '@wordpress/primitives';\nimport {\n\tBlockCaption,\n\tRichText,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { memo, useState } from '@wordpress/element';\nimport { SandBox } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { getPhotoHtml } from './util';\nimport EmbedNoPreview from './embed-no-preview';\nimport WpEmbedPreview from './wp-embed-preview';\nimport styles from './styles.scss';\n\nconst EmbedPreview = ( {\n\talign,\n\tclassName,\n\tclientId,\n\ticon,\n\tinsertBlocksAfter,\n\tisSelected,\n\tlabel,\n\tonFocus,\n\tpreview,\n\tpreviewable,\n\tisProviderPreviewable,\n\ttype,\n\turl,\n\tisDefaultEmbedInfo,\n} ) => {\n\tconst [ isCaptionSelected, setIsCaptionSelected ] = useState( false );\n\tconst { locale } = useSelect( blockEditorStore ).getSettings();\n\n\tconst wrapperStyle = styles[ 'embed-preview__wrapper' ];\n\tconst wrapperAlignStyle =\n\t\tstyles[ `embed-preview__wrapper--align-${ align }` ];\n\tconst sandboxAlignStyle =\n\t\tstyles[ `embed-preview__sandbox--align-${ align }` ];\n\n\tfunction accessibilityLabelCreator( caption ) {\n\t\treturn RichText.isEmpty( caption )\n\t\t\t? /* translators: accessibility text. Empty Embed caption. */\n\t\t\t  __( 'Embed caption. Empty' )\n\t\t\t: sprintf(\n\t\t\t\t\t/* translators: accessibility text. %s: Embed caption. */\n\t\t\t\t\t__( 'Embed caption. %s' ),\n\t\t\t\t\tcaption\n\t\t\t  );\n\t}\n\n\tfunction onEmbedPreviewPress() {\n\t\tsetIsCaptionSelected( false );\n\t}\n\n\tfunction onFocusCaption() {\n\t\tif ( onFocus ) {\n\t\t\tonFocus();\n\t\t}\n\t\tif ( ! isCaptionSelected ) {\n\t\t\tsetIsCaptionSelected( true );\n\t\t}\n\t}\n\n\tconst { provider_url: providerUrl } = preview;\n\tconst html = 'photo' === type ? getPhotoHtml( preview ) : preview.html;\n\tconst parsedHost = new URL( url ).host.split( '.' );\n\tconst parsedHostBaseUrl = parsedHost\n\t\t.splice( parsedHost.length - 2, parsedHost.length - 1 )\n\t\t.join( '.' );\n\tconst iframeTitle = sprintf(\n\t\t// translators: %s: host providing embed content e.g: www.youtube.com\n\t\t__( 'Embedded content from %s' ),\n\t\tparsedHostBaseUrl\n\t);\n\tconst sandboxClassnames = clsx(\n\t\ttype,\n\t\tclassName,\n\t\t'wp-block-embed__wrapper'\n\t);\n\n\tconst PreviewContent = 'wp-embed' === type ? WpEmbedPreview : SandBox;\n\tconst embedWrapper = (\n\t\t<>\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\tonPress={ () => {\n\t\t\t\t\tif ( onFocus ) {\n\t\t\t\t\t\tonFocus();\n\t\t\t\t\t}\n\t\t\t\t\tif ( isCaptionSelected ) {\n\t\t\t\t\t\tsetIsCaptionSelected( false );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<View\n\t\t\t\t\tpointerEvents=\"box-only\"\n\t\t\t\t\tstyle={ [ wrapperStyle, wrapperAlignStyle ] }\n\t\t\t\t>\n\t\t\t\t\t<PreviewContent\n\t\t\t\t\t\thtml={ html }\n\t\t\t\t\t\tlang={ locale }\n\t\t\t\t\t\ttitle={ iframeTitle }\n\t\t\t\t\t\ttype={ sandboxClassnames }\n\t\t\t\t\t\tproviderUrl={ providerUrl }\n\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\tcontainerStyle={ sandboxAlignStyle }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t</>\n\t);\n\treturn (\n\t\t<TouchableWithoutFeedback\n\t\t\taccessible={ ! isSelected }\n\t\t\tonPress={ onEmbedPreviewPress }\n\t\t\tdisabled={ ! isSelected }\n\t\t>\n\t\t\t<View>\n\t\t\t\t{ isProviderPreviewable && previewable ? (\n\t\t\t\t\tembedWrapper\n\t\t\t\t) : (\n\t\t\t\t\t<EmbedNoPreview\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\tonPress={ () => setIsCaptionSelected( false ) }\n\t\t\t\t\t\tpreviewable={ previewable }\n\t\t\t\t\t\tisDefaultEmbedInfo={ isDefaultEmbedInfo }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<BlockCaption\n\t\t\t\t\taccessibilityLabelCreator={ accessibilityLabelCreator }\n\t\t\t\t\taccessible\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tinsertBlocksAfter={ insertBlocksAfter }\n\t\t\t\t\tisSelected={ isCaptionSelected }\n\t\t\t\t\tonFocus={ onFocusCaption }\n\t\t\t\t/>\n\t\t\t</View>\n\t\t</TouchableWithoutFeedback>\n\t);\n};\n\nexport default memo( EmbedPreview );\n"],"mappings":"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","ignoreList":[]}