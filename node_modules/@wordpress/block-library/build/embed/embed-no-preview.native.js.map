{"version":3,"names":["_reactNative","require","_primitives","_i18n","_element","_compose","_reactNativeBridge","_data","_editor","_components","_icons","_blockEditor","_styles","_interopRequireDefault","_jsxRuntime","EmbedNoPreview","label","icon","isSelected","onPress","previewable","isDefaultEmbedInfo","shouldRequestReview","useRef","isSheetVisible","setIsSheetVisible","useState","postType","useSelect","select","editorStore","getEditedPostAttribute","containerStyle","usePreferredColorSchemeStyle","styles","embed__container","labelStyle","embed__label","descriptionStyle","embed__description","helpIconStyle","sheetIconStyle","sheetTitleStyle","sheetDescriptionStyle","sheetButtonStyle","previewButtonA11yHint","__","previewButtonText","comingSoonDescription","sprintf","onOpenSheet","onCloseSheet","onDismissSheet","current","requestPreview","onPressContainer","onPressHelp","embedNoProviderPreview","jsxs","Fragment","children","jsx","TouchableWithoutFeedback","accessibilityRole","accessibilityHint","disabled","View","style","BlockIcon","Text","embed__action","toUpperCase","TouchableOpacity","accessibilityLabel","Icon","help","fill","size","width","BottomSheet","isVisible","hideHeader","onDismiss","onClose","testID","TextControl","separatorType","_default","exports","default"],"sources":["@wordpress/block-library/src/embed/embed-no-preview.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { TouchableOpacity, TouchableWithoutFeedback, Text } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { View } from '@wordpress/primitives';\n\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useRef, useState } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { requestPreview } from '@wordpress/react-native-bridge';\nimport { useSelect } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\nimport { BottomSheet, Icon, TextControl } from '@wordpress/components';\nimport { help } from '@wordpress/icons';\nimport { BlockIcon } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\n\nconst EmbedNoPreview = ( {\n\tlabel,\n\ticon,\n\tisSelected,\n\tonPress,\n\tpreviewable,\n\tisDefaultEmbedInfo,\n} ) => {\n\tconst shouldRequestReview = useRef( false );\n\tconst [ isSheetVisible, setIsSheetVisible ] = useState( false );\n\n\tconst { postType } = useSelect( ( select ) => ( {\n\t\tpostType: select( editorStore ).getEditedPostAttribute( 'type' ),\n\t} ) );\n\n\tconst containerStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__container,\n\t\tstyles[ 'embed__container--dark' ]\n\t);\n\tconst labelStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__label,\n\t\tstyles[ 'embed__label--dark' ]\n\t);\n\tconst descriptionStyle = usePreferredColorSchemeStyle(\n\t\tstyles.embed__description,\n\t\tstyles[ 'embed__description--dark' ]\n\t);\n\tconst helpIconStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__help-icon' ],\n\t\tstyles[ 'embed-no-preview__help-icon--dark' ]\n\t);\n\n\tconst sheetIconStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-icon' ],\n\t\tstyles[ 'embed-no-preview__sheet-icon--dark' ]\n\t);\n\tconst sheetTitleStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-title' ],\n\t\tstyles[ 'embed-no-preview__sheet-title--dark' ]\n\t);\n\tconst sheetDescriptionStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-description' ],\n\t\tstyles[ 'embed-no-preview__sheet-description--dark' ]\n\t);\n\tconst sheetButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'embed-no-preview__sheet-button' ],\n\t\tstyles[ 'embed-no-preview__sheet-button--dark' ]\n\t);\n\n\tconst previewButtonA11yHint =\n\t\tpostType === 'page'\n\t\t\t? __( 'Double tap to preview page.' )\n\t\t\t: __( 'Double tap to preview post.' );\n\tconst previewButtonText =\n\t\tpostType === 'page' ? __( 'Preview page' ) : __( 'Preview post' );\n\tconst comingSoonDescription =\n\t\tpostType === 'page'\n\t\t\t? sprintf(\n\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t__(\n\t\t\t\t\t\t'We’re working hard on adding support for %s previews. In the meantime, you can preview the embedded content on the page.'\n\t\t\t\t\t),\n\t\t\t\t\tlabel\n\t\t\t  )\n\t\t\t: sprintf(\n\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t__(\n\t\t\t\t\t\t'We’re working hard on adding support for %s previews. In the meantime, you can preview the embedded content on the post.'\n\t\t\t\t\t),\n\t\t\t\t\tlabel\n\t\t\t  );\n\n\tfunction onOpenSheet() {\n\t\tsetIsSheetVisible( true );\n\t}\n\n\tfunction onCloseSheet() {\n\t\tsetIsSheetVisible( false );\n\t}\n\n\tfunction onDismissSheet() {\n\t\t// The preview request has to be done after the bottom sheet modal is dismissed,\n\t\t// otherwise the preview native modal is not displayed.\n\t\tif ( shouldRequestReview.current ) {\n\t\t\trequestPreview();\n\t\t}\n\t\tshouldRequestReview.current = false;\n\t}\n\n\tfunction onPressContainer() {\n\t\tonPress();\n\t\tonOpenSheet();\n\t}\n\n\tfunction onPressHelp() {\n\t\tonPressContainer();\n\t}\n\n\tconst embedNoProviderPreview = (\n\t\t<>\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\taccessibilityRole=\"button\"\n\t\t\t\taccessibilityHint={ previewButtonA11yHint }\n\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\tonPress={ onPressContainer }\n\t\t\t>\n\t\t\t\t<View style={ containerStyle }>\n\t\t\t\t\t<BlockIcon icon={ icon } />\n\t\t\t\t\t<Text style={ labelStyle }>{ label }</Text>\n\t\t\t\t\t<Text style={ descriptionStyle }>\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t\t\t__( '%s previews not yet available' ),\n\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text style={ styles.embed__action }>\n\t\t\t\t\t\t{ previewButtonText.toUpperCase() }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\taccessibilityHint={ __( 'Tap here to show help' ) }\n\t\t\t\t\t\taccessibilityLabel={ __( 'Help button' ) }\n\t\t\t\t\t\taccessibilityRole=\"button\"\n\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\tonPress={ onPressHelp }\n\t\t\t\t\t\tstyle={ helpIconStyle }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ help }\n\t\t\t\t\t\t\tfill={ helpIconStyle.fill }\n\t\t\t\t\t\t\tsize={ helpIconStyle.width }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t\t<BottomSheet\n\t\t\t\tisVisible={ isSheetVisible }\n\t\t\t\thideHeader\n\t\t\t\tonDismiss={ onDismissSheet }\n\t\t\t\tonClose={ onCloseSheet }\n\t\t\t\ttestID=\"embed-no-preview-modal\"\n\t\t\t>\n\t\t\t\t<View style={ styles[ 'embed-no-preview__container' ] }>\n\t\t\t\t\t<View style={ sheetIconStyle }>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ help }\n\t\t\t\t\t\t\tfill={ sheetIconStyle.fill }\n\t\t\t\t\t\t\tsize={ sheetIconStyle.width }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t\t<Text style={ sheetTitleStyle }>\n\t\t\t\t\t\t{ isDefaultEmbedInfo\n\t\t\t\t\t\t\t? __( 'Embed block previews are coming soon' )\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t\t'%s embed block previews are coming soon'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text style={ sheetDescriptionStyle }>\n\t\t\t\t\t\t{ comingSoonDescription }\n\t\t\t\t\t</Text>\n\t\t\t\t</View>\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ previewButtonText }\n\t\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\t\tonPress={ () => {\n\t\t\t\t\t\tshouldRequestReview.current = true;\n\t\t\t\t\t\tonCloseSheet();\n\t\t\t\t\t} }\n\t\t\t\t\tlabelStyle={ sheetButtonStyle }\n\t\t\t\t/>\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ __( 'Dismiss' ) }\n\t\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\t\tonPress={ onCloseSheet }\n\t\t\t\t\tlabelStyle={ sheetButtonStyle }\n\t\t\t\t/>\n\t\t\t</BottomSheet>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ previewable ? (\n\t\t\t\tembedNoProviderPreview\n\t\t\t) : (\n\t\t\t\t<View style={ containerStyle }>\n\t\t\t\t\t<BlockIcon icon={ icon } />\n\t\t\t\t\t<Text style={ labelStyle }>\n\t\t\t\t\t\t{ __( 'No preview available' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport default EmbedNoPreview;\n"],"mappings":"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","ignoreList":[]}