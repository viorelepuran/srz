{"version":3,"names":["_reactNative","require","_clsx","_interopRequireDefault","_blockEditor","_components","_i18n","_icons","_element","_compose","_style","_jsxRuntime","MIN_BUTTON_WIDTH","MARGINS","styles","widthMargin","marginLeft","paddingLeft","BUTTON_OPTIONS","value","label","__","useIsScreenReaderEnabled","isScreenReaderEnabled","setIsScreenReaderEnabled","useState","useEffect","mounted","changeListener","AccessibilityInfo","addEventListener","enabled","then","screenReaderEnabled","remove","SearchEdit","onFocus","isSelected","attributes","setAttributes","className","blockWidth","style","isButtonSelected","setIsButtonSelected","isLabelSelected","setIsLabelSelected","isPlaceholderSelected","setIsPlaceholderSelected","isLongButton","setIsLongButton","buttonWidth","setButtonWidth","textInputRef","useRef","showLabel","buttonPosition","buttonUseIcon","placeholder","buttonText","hasTextInput","current","blur","maxButtonWidth","Math","floor","tempIsLongButton","onLayoutButton","nativeEvent","width","layout","getBlockClassNames","clsx","undefined","getSelectedButtonPositionLabel","option","blockProps","useBlockProps","controls","jsx","InspectorControls","children","jsxs","PanelBody","title","ToggleControl","checked","onChange","SelectControl","position","options","hideCancelButton","isButtonInside","borderStyle","usePreferredColorSchemeStyle","border","borderDark","inputStyle","plainTextInput","plainTextInputDark","baseColors","color","text","placeholderStyle","plainTextPlaceholder","plainTextPlaceholderDark","searchBarStyle","searchBarContainer","flexDirection","getAccessibilityLabelForButton","getAccessibilityLabelForPlaceholder","description","getAccessibilityLabelForLabel","renderTextField","View","searchInputContainer","accessible","accessibilityRole","accessibilityHint","accessibilityLabel","PlainText","ref","numberOfLines","ellipsizeMode","newVal","onBlur","placeholderTextColor","buttonPlaceholderText","baseButtonStyles","blocks","richTextButtonContainerStyle","buttonContainer","buttonContainerWide","background","backgroundColor","borderWidth","richTextButtonStyle","richTextButton","placeholderColor","iconStyles","icon","fill","renderButton","Icon","search","onLayout","RichText","identifier","tagName","withoutInteractiveFormatting","html","minWidth","maxWidth","textAlign","__unstableMobileNoFocusOnMount","unstableOnFocus","selectionColor","richTextButtonCursor","searchBlockContainer","importantForAccessibility","accessibilityElementsHidden","richTextLabel"],"sources":["@wordpress/block-library/src/search/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, AccessibilityInfo } from 'react-native';\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRichText,\n\tPlainText,\n\tuseBlockProps,\n\tInspectorControls,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tSelectControl,\n\tToggleControl,\n\tIcon,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { search } from '@wordpress/icons';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\n/**\n * Constants\n */\nconst MIN_BUTTON_WIDTH = 75;\nconst MARGINS =\n\tstyles.widthMargin?.marginLeft + styles.widthMargin?.paddingLeft;\n\nconst BUTTON_OPTIONS = [\n\t{ value: 'button-inside', label: __( 'Button inside' ) },\n\t{ value: 'button-outside', label: __( 'Button outside' ) },\n\t{ value: 'no-button', label: __( 'No button' ) },\n];\n\nfunction useIsScreenReaderEnabled() {\n\tconst [ isScreenReaderEnabled, setIsScreenReaderEnabled ] =\n\t\tuseState( false );\n\n\tuseEffect( () => {\n\t\tlet mounted = true;\n\n\t\tconst changeListener = AccessibilityInfo.addEventListener(\n\t\t\t'screenReaderChanged',\n\t\t\t( enabled ) => setIsScreenReaderEnabled( enabled )\n\t\t);\n\n\t\tAccessibilityInfo.isScreenReaderEnabled().then(\n\t\t\t( screenReaderEnabled ) => {\n\t\t\t\tif ( mounted && screenReaderEnabled ) {\n\t\t\t\t\tsetIsScreenReaderEnabled( screenReaderEnabled );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tmounted = false;\n\n\t\t\tchangeListener.remove();\n\t\t};\n\t}, [] );\n\n\treturn isScreenReaderEnabled;\n}\n\nexport default function SearchEdit( {\n\tonFocus,\n\tisSelected,\n\tattributes,\n\tsetAttributes,\n\tclassName,\n\tblockWidth,\n\tstyle,\n} ) {\n\tconst [ isButtonSelected, setIsButtonSelected ] = useState( false );\n\tconst [ isLabelSelected, setIsLabelSelected ] = useState( false );\n\tconst [ isPlaceholderSelected, setIsPlaceholderSelected ] =\n\t\tuseState( false );\n\tconst [ isLongButton, setIsLongButton ] = useState( false );\n\tconst [ buttonWidth, setButtonWidth ] = useState( MIN_BUTTON_WIDTH );\n\tconst isScreenReaderEnabled = useIsScreenReaderEnabled();\n\n\tconst textInputRef = useRef( null );\n\n\tconst {\n\t\tlabel,\n\t\tshowLabel,\n\t\tbuttonPosition,\n\t\tbuttonUseIcon,\n\t\tplaceholder,\n\t\tbuttonText,\n\t} = attributes;\n\n\t/*\n\t * Called when the value of isSelected changes. Blurs the PlainText component\n\t * used by the placeholder when this block loses focus.\n\t */\n\tuseEffect( () => {\n\t\tif ( hasTextInput() && isPlaceholderSelected && ! isSelected ) {\n\t\t\ttextInputRef.current.blur();\n\t\t}\n\t}, [ isSelected ] );\n\n\tuseEffect( () => {\n\t\tconst maxButtonWidth = Math.floor( blockWidth / 2 - MARGINS );\n\t\tconst tempIsLongButton = buttonWidth > maxButtonWidth;\n\n\t\t// Update this value only if it has changed to avoid flickering.\n\t\tif ( isLongButton !== tempIsLongButton ) {\n\t\t\tsetIsLongButton( tempIsLongButton );\n\t\t}\n\t}, [ blockWidth, buttonWidth ] );\n\n\tconst hasTextInput = () => {\n\t\treturn textInputRef && textInputRef.current;\n\t};\n\n\tconst onLayoutButton = ( { nativeEvent } ) => {\n\t\tconst { width } = nativeEvent?.layout;\n\n\t\tif ( width ) {\n\t\t\tsetButtonWidth( width );\n\t\t}\n\t};\n\n\tconst getBlockClassNames = () => {\n\t\treturn clsx(\n\t\t\tclassName,\n\t\t\t'button-inside' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-inside'\n\t\t\t\t: undefined,\n\t\t\t'button-outside' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-outside'\n\t\t\t\t: undefined,\n\t\t\t'no-button' === buttonPosition\n\t\t\t\t? 'wp-block-search__no-button'\n\t\t\t\t: undefined,\n\t\t\t'button-only' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-only'\n\t\t\t\t: undefined,\n\t\t\t! buttonUseIcon && 'no-button' !== buttonPosition\n\t\t\t\t? 'wp-block-search__text-button'\n\t\t\t\t: undefined,\n\t\t\tbuttonUseIcon && 'no-button' !== buttonPosition\n\t\t\t\t? 'wp-block-search__icon-button'\n\t\t\t\t: undefined\n\t\t);\n\t};\n\n\tconst getSelectedButtonPositionLabel = ( option ) => {\n\t\tswitch ( option ) {\n\t\t\tcase 'button-inside':\n\t\t\t\treturn __( 'Inside' );\n\t\t\tcase 'button-outside':\n\t\t\t\treturn __( 'Outside' );\n\t\t\tcase 'no-button':\n\t\t\t\treturn __( 'No button' );\n\t\t}\n\t};\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: getBlockClassNames(),\n\t} );\n\n\tconst controls = (\n\t\t<InspectorControls>\n\t\t\t<PanelBody title={ __( 'Search settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Hide search heading' ) }\n\t\t\t\t\tchecked={ ! showLabel }\n\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tshowLabel: ! showLabel,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel={ __( 'Button position' ) }\n\t\t\t\t\tvalue={ getSelectedButtonPositionLabel( buttonPosition ) }\n\t\t\t\t\tonChange={ ( position ) => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tbuttonPosition: position,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\toptions={ BUTTON_OPTIONS }\n\t\t\t\t\thideCancelButton\n\t\t\t\t/>\n\t\t\t\t{ buttonPosition !== 'no-button' && (\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Use icon button' ) }\n\t\t\t\t\t\tchecked={ buttonUseIcon }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tbuttonUseIcon: ! buttonUseIcon,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n\n\tconst isButtonInside = buttonPosition === 'button-inside';\n\n\tconst borderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.border,\n\t\tstyles.borderDark\n\t);\n\n\tconst inputStyle = [\n\t\t! isButtonInside && borderStyle,\n\t\tusePreferredColorSchemeStyle(\n\t\t\tstyles.plainTextInput,\n\t\t\tstyles.plainTextInputDark\n\t\t),\n\t\tstyle?.baseColors?.color && { color: style?.baseColors?.color?.text },\n\t];\n\n\tconst placeholderStyle = {\n\t\t...usePreferredColorSchemeStyle(\n\t\t\tstyles.plainTextPlaceholder,\n\t\t\tstyles.plainTextPlaceholderDark\n\t\t),\n\t\t...( style?.baseColors?.color && {\n\t\t\tcolor: style?.baseColors?.color?.text,\n\t\t} ),\n\t};\n\n\tconst searchBarStyle = [\n\t\tstyles.searchBarContainer,\n\t\tisButtonInside && borderStyle,\n\t\tisLongButton && { flexDirection: 'column' },\n\t];\n\n\t/**\n\t * If a screenreader is enabled, create a descriptive label for this field. If\n\t * not, return a label that is used during automated UI tests.\n\t *\n\t * @return {string} The accessibilityLabel for the Search Button\n\t */\n\tconst getAccessibilityLabelForButton = () => {\n\t\tif ( ! isScreenReaderEnabled ) {\n\t\t\treturn 'search-block-button';\n\t\t}\n\n\t\treturn `${ __(\n\t\t\t'Search button. Current button text is'\n\t\t) } ${ buttonText }`;\n\t};\n\n\t/**\n\t * If a screenreader is enabled, create a descriptive label for this field. If\n\t * not, return a label that is used during automated UI tests.\n\t *\n\t * @return {string} The accessibilityLabel for the Search Input\n\t * \t\t\t\t\t placeholder field.\n\t */\n\tconst getAccessibilityLabelForPlaceholder = () => {\n\t\tif ( ! isScreenReaderEnabled ) {\n\t\t\treturn 'search-block-input';\n\t\t}\n\n\t\tconst title = __( 'Search input field.' );\n\t\tconst description = placeholder\n\t\t\t? `${ __( 'Current placeholder text is' ) } ${ placeholder }`\n\t\t\t: __( 'No custom placeholder set' );\n\t\treturn `${ title } ${ description }`;\n\t};\n\n\t/**\n\t * If a screenreader is enabled, create a descriptive label for this field. If\n\t * not, return a label that is used during automated UI tests.\n\t *\n\t * @return {string} The accessibilityLabel for the Search Label field\n\t */\n\tconst getAccessibilityLabelForLabel = () => {\n\t\tif ( ! isScreenReaderEnabled ) {\n\t\t\treturn 'search-block-label';\n\t\t}\n\n\t\treturn `${ __( 'Search block label. Current text is' ) } ${ label }`;\n\t};\n\n\tconst renderTextField = () => {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ styles.searchInputContainer }\n\t\t\t\taccessible\n\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\taccessibilityHint={\n\t\t\t\t\tisScreenReaderEnabled\n\t\t\t\t\t\t? __( 'Double tap to edit placeholder text' )\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\taccessibilityLabel={ getAccessibilityLabelForPlaceholder() }\n\t\t\t>\n\t\t\t\t<PlainText\n\t\t\t\t\tref={ textInputRef }\n\t\t\t\t\tisSelected={ isPlaceholderSelected }\n\t\t\t\t\tclassName=\"wp-block-search__input\"\n\t\t\t\t\tstyle={ inputStyle }\n\t\t\t\t\tnumberOfLines={ 1 }\n\t\t\t\t\tellipsizeMode=\"tail\" // Currently only works on ios.\n\t\t\t\t\tlabel={ null }\n\t\t\t\t\tvalue={ placeholder }\n\t\t\t\t\tplaceholder={\n\t\t\t\t\t\tplaceholder ? undefined : __( 'Optional placeholder…' )\n\t\t\t\t\t}\n\t\t\t\t\tonChange={ ( newVal ) =>\n\t\t\t\t\t\tsetAttributes( { placeholder: newVal } )\n\t\t\t\t\t}\n\t\t\t\t\tonFocus={ () => {\n\t\t\t\t\t\tsetIsPlaceholderSelected( true );\n\t\t\t\t\t\tonFocus();\n\t\t\t\t\t} }\n\t\t\t\t\tonBlur={ () => setIsPlaceholderSelected( false ) }\n\t\t\t\t\tplaceholderTextColor={ placeholderStyle?.color }\n\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t};\n\n\t// To achieve proper expanding and shrinking `RichText` on Android, there is a need to set\n\t// a `placeholder` as an empty string when `RichText` is focused,\n\t// because `AztecView` is calculating a `minWidth` based on placeholder text.\n\tconst buttonPlaceholderText =\n\t\tisButtonSelected ||\n\t\t( ! isButtonSelected && buttonText && buttonText !== '' )\n\t\t\t? ''\n\t\t\t: __( 'Add button text' );\n\n\tconst baseButtonStyles = {\n\t\t...style?.baseColors?.blocks?.[ 'core/button' ]?.color,\n\t\t...attributes?.style?.color,\n\t\t...( style?.color && { text: style.color } ),\n\t};\n\n\tconst richTextButtonContainerStyle = [\n\t\tstyles.buttonContainer,\n\t\tisLongButton && styles.buttonContainerWide,\n\t\tbaseButtonStyles?.background && {\n\t\t\tbackgroundColor: baseButtonStyles.background,\n\t\t\tborderWidth: 0,\n\t\t},\n\t\tstyle?.backgroundColor && {\n\t\t\tbackgroundColor: style.backgroundColor,\n\t\t\tborderWidth: 0,\n\t\t},\n\t];\n\n\tconst richTextButtonStyle = {\n\t\t...styles.richTextButton,\n\t\t...( baseButtonStyles?.text && {\n\t\t\tcolor: baseButtonStyles.text,\n\t\t\tplaceholderColor: baseButtonStyles.text,\n\t\t} ),\n\t};\n\n\tconst iconStyles = {\n\t\t...styles.icon,\n\t\t...( baseButtonStyles?.text && { fill: baseButtonStyles.text } ),\n\t};\n\n\tconst renderButton = () => {\n\t\treturn (\n\t\t\t<View style={ richTextButtonContainerStyle }>\n\t\t\t\t{ buttonUseIcon && (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={ search }\n\t\t\t\t\t\t{ ...iconStyles }\n\t\t\t\t\t\tonLayout={ onLayoutButton }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ ! buttonUseIcon && (\n\t\t\t\t\t<View\n\t\t\t\t\t\taccessible\n\t\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\t\taccessibilityHint={\n\t\t\t\t\t\t\tisScreenReaderEnabled\n\t\t\t\t\t\t\t\t? __( 'Double tap to edit button text' )\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\taccessibilityLabel={ getAccessibilityLabelForButton() }\n\t\t\t\t\t\tonLayout={ onLayoutButton }\n\t\t\t\t\t>\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"wp-block-search__button\"\n\t\t\t\t\t\t\tidentifier=\"buttonText\"\n\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\tstyle={ richTextButtonStyle }\n\t\t\t\t\t\t\tplaceholder={ buttonPlaceholderText }\n\t\t\t\t\t\t\tvalue={ buttonText }\n\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\tonChange={ ( html ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { buttonText: html } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tminWidth={ MIN_BUTTON_WIDTH }\n\t\t\t\t\t\t\tmaxWidth={ blockWidth - MARGINS }\n\t\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\t\tisSelected={ isButtonSelected }\n\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\t\tunstableOnFocus={ () => {\n\t\t\t\t\t\t\t\tsetIsButtonSelected( true );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\t\tsetIsButtonSelected( false );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tselectionColor={\n\t\t\t\t\t\t\t\tstyles.richTextButtonCursor?.color\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t);\n\t};\n\n\treturn (\n\t\t<View\n\t\t\t{ ...blockProps }\n\t\t\tstyle={ styles.searchBlockContainer }\n\t\t\timportantForAccessibility={\n\t\t\t\tisSelected ? 'yes' : 'no-hide-descendants'\n\t\t\t}\n\t\t\taccessibilityElementsHidden={ isSelected ? false : true }\n\t\t>\n\t\t\t{ isSelected && controls }\n\n\t\t\t{ showLabel && (\n\t\t\t\t<View\n\t\t\t\t\taccessible\n\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\taccessibilityHint={\n\t\t\t\t\t\tisScreenReaderEnabled\n\t\t\t\t\t\t\t? __( 'Double tap to edit label text' )\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t\taccessibilityLabel={ getAccessibilityLabelForLabel() }\n\t\t\t\t>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tclassName=\"wp-block-search__label\"\n\t\t\t\t\t\tidentifier=\"label\"\n\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\tstyle={ styles.richTextLabel }\n\t\t\t\t\t\tplaceholder={ __( 'Add label…' ) }\n\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\tvalue={ label }\n\t\t\t\t\t\tonChange={ ( html ) =>\n\t\t\t\t\t\t\tsetAttributes( { label: html } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisSelected={ isLabelSelected }\n\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\tunstableOnFocus={ () => {\n\t\t\t\t\t\t\tsetIsLabelSelected( true );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\tsetIsLabelSelected( false );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tselectionColor={ styles.richTextButtonCursor?.color }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\n\t\t\t{ ( 'button-inside' === buttonPosition ||\n\t\t\t\t'button-outside' === buttonPosition ) && (\n\t\t\t\t<View style={ searchBarStyle }>\n\t\t\t\t\t{ renderTextField() }\n\t\t\t\t\t{ renderButton() }\n\t\t\t\t</View>\n\t\t\t) }\n\n\t\t\t{ 'button-only' === buttonPosition && renderButton() }\n\t\t\t{ 'no-button' === buttonPosition && renderTextField() }\n\t\t</View>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}