{"version":3,"names":["_clsx","_interopRequireDefault","require","_blockEditor","_data","_i18n","_coreData","_components","_hooks","_jsxRuntime","PostAuthorNameEdit","context","postType","postId","attributes","textAlign","isLink","linkTarget","setAttributes","authorName","supportsAuthor","useSelect","select","_getPostType$supports","getEditedEntityRecord","getUser","getPostType","coreStore","_authorId","author","supports","blockProps","useBlockProps","className","clsx","displayName","name","__","displayAuthor","jsx","href","onClick","event","preventDefault","children","dropdownMenuProps","useToolsPanelDropdownMenuProps","jsxs","Fragment","BlockControls","group","AlignmentControl","value","onChange","nextAlign","InspectorControls","__experimentalToolsPanel","label","resetAll","__experimentalToolsPanelItem","isShownByDefault","hasValue","onDeselect","ToggleControl","__nextHasNoMarginBottom","checked","undefined","sprintf","_default","exports","default"],"sources":["@wordpress/block-library/src/post-author-name/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAlignmentControl,\n\tBlockControls,\n\tInspectorControls,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as coreStore } from '@wordpress/core-data';\nimport {\n\tToggleControl,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useToolsPanelDropdownMenuProps } from '../utils/hooks';\n\nfunction PostAuthorNameEdit( {\n\tcontext: { postType, postId },\n\tattributes: { textAlign, isLink, linkTarget },\n\tsetAttributes,\n} ) {\n\tconst { authorName, supportsAuthor } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedEntityRecord, getUser, getPostType } =\n\t\t\t\tselect( coreStore );\n\t\t\tconst _authorId = getEditedEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\tpostType,\n\t\t\t\tpostId\n\t\t\t)?.author;\n\n\t\t\treturn {\n\t\t\t\tauthorName: _authorId ? getUser( _authorId ) : null,\n\t\t\t\tsupportsAuthor:\n\t\t\t\t\tgetPostType( postType )?.supports?.author ?? false,\n\t\t\t};\n\t\t},\n\t\t[ postType, postId ]\n\t);\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: clsx( {\n\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\n\t\t} ),\n\t} );\n\n\tconst displayName = authorName?.name || __( 'Author Name' );\n\n\tconst displayAuthor = isLink ? (\n\t\t<a\n\t\t\thref=\"#author-pseudo-link\"\n\t\t\tonClick={ ( event ) => event.preventDefault() }\n\t\t\tclassName=\"wp-block-post-author-name__link\"\n\t\t>\n\t\t\t{ displayName }\n\t\t</a>\n\t) : (\n\t\tdisplayName\n\t);\n\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls group=\"block\">\n\t\t\t\t<AlignmentControl\n\t\t\t\t\tvalue={ textAlign }\n\t\t\t\t\tonChange={ ( nextAlign ) => {\n\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t\t<InspectorControls>\n\t\t\t\t<ToolsPanel\n\t\t\t\t\tlabel={ __( 'Settings' ) }\n\t\t\t\t\tresetAll={ () => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tisLink: false,\n\t\t\t\t\t\t\tlinkTarget: '_self',\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t\t\t>\n\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\tlabel={ __( 'Link to author archive' ) }\n\t\t\t\t\t\tisShownByDefault\n\t\t\t\t\t\thasValue={ () => isLink }\n\t\t\t\t\t\tonDeselect={ () => setAttributes( { isLink: false } ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tlabel={ __( 'Link to author archive' ) }\n\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\tsetAttributes( { isLink: ! isLink } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchecked={ isLink }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t\t{ isLink && (\n\t\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\t\tisShownByDefault\n\t\t\t\t\t\t\thasValue={ () => linkTarget !== '_self' }\n\t\t\t\t\t\t\tonDeselect={ () =>\n\t\t\t\t\t\t\t\tsetAttributes( { linkTarget: '_self' } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tlinkTarget: value ? '_blank' : '_self',\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanel>\n\t\t\t</InspectorControls>\n\t\t\t<div { ...blockProps }>\n\t\t\t\t{ ! supportsAuthor && postType !== undefined\n\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t// translators: %s: Name of the post type e.g: \"post\".\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t'This post type (%s) does not support the author.'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tpostType\n\t\t\t\t\t  )\n\t\t\t\t\t: displayAuthor }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default PostAuthorNameEdit;\n"],"mappings":"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","ignoreList":[]}