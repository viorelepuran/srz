{"version":3,"names":["_i18n","require","_blockEditor","_data","_components","_element","_queryPaginationArrowControls","_queryPaginationLabelControl","_hooks","_jsxRuntime","TEMPLATE","QueryPaginationEdit","attributes","paginationArrow","showLabel","setAttributes","clientId","hasNextPreviousBlocks","useSelect","select","getBlocks","blockEditorStore","innerBlocks","find","innerBlock","includes","name","__unstableMarkNextChangeAsNotPersistent","useDispatch","dropdownMenuProps","useToolsPanelDropdownMenuProps","blockProps","useBlockProps","innerBlocksProps","useInnerBlocksProps","template","useEffect","jsxs","Fragment","children","jsx","InspectorControls","__experimentalToolsPanel","label","__","resetAll","__experimentalToolsPanelItem","hasValue","onDeselect","isShownByDefault","QueryPaginationArrowControls","value","onChange","QueryPaginationLabelControl"],"sources":["@wordpress/block-library/src/query-pagination/edit.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tInspectorControls,\n\tuseBlockProps,\n\tuseInnerBlocksProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { QueryPaginationArrowControls } from './query-pagination-arrow-controls';\nimport { QueryPaginationLabelControl } from './query-pagination-label-control';\nimport { useToolsPanelDropdownMenuProps } from '../utils/hooks';\n\nconst TEMPLATE = [\n\t[ 'core/query-pagination-previous' ],\n\t[ 'core/query-pagination-numbers' ],\n\t[ 'core/query-pagination-next' ],\n];\n\nexport default function QueryPaginationEdit( {\n\tattributes: { paginationArrow, showLabel },\n\tsetAttributes,\n\tclientId,\n} ) {\n\tconst hasNextPreviousBlocks = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlocks } = select( blockEditorStore );\n\t\t\tconst innerBlocks = getBlocks( clientId );\n\t\t\t/**\n\t\t\t * Show the `paginationArrow` and `showLabel` controls only if a\n\t\t\t * `QueryPaginationNext/Previous` block exists.\n\t\t\t */\n\t\t\treturn innerBlocks?.find( ( innerBlock ) => {\n\t\t\t\treturn [\n\t\t\t\t\t'core/query-pagination-next',\n\t\t\t\t\t'core/query-pagination-previous',\n\t\t\t\t].includes( innerBlock.name );\n\t\t\t} );\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\tconst blockProps = useBlockProps();\n\tconst innerBlocksProps = useInnerBlocksProps( blockProps, {\n\t\ttemplate: TEMPLATE,\n\t} );\n\n\t// Always show label text if paginationArrow is set to 'none'.\n\tuseEffect( () => {\n\t\tif ( paginationArrow === 'none' && ! showLabel ) {\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tsetAttributes( { showLabel: true } );\n\t\t}\n\t}, [\n\t\tpaginationArrow,\n\t\tsetAttributes,\n\t\tshowLabel,\n\t\t__unstableMarkNextChangeAsNotPersistent,\n\t] );\n\n\treturn (\n\t\t<>\n\t\t\t{ hasNextPreviousBlocks && (\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<ToolsPanel\n\t\t\t\t\t\tlabel={ __( 'Settings' ) }\n\t\t\t\t\t\tresetAll={ () => {\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tpaginationArrow: 'none',\n\t\t\t\t\t\t\t\tshowLabel: true,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\t\thasValue={ () => paginationArrow !== 'none' }\n\t\t\t\t\t\t\tlabel={ __( 'Pagination arrow' ) }\n\t\t\t\t\t\t\tonDeselect={ () =>\n\t\t\t\t\t\t\t\tsetAttributes( { paginationArrow: 'none' } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisShownByDefault\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<QueryPaginationArrowControls\n\t\t\t\t\t\t\t\tvalue={ paginationArrow }\n\t\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\t\tsetAttributes( { paginationArrow: value } );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t\t\t{ paginationArrow !== 'none' && (\n\t\t\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\t\t\thasValue={ () => ! showLabel }\n\t\t\t\t\t\t\t\tlabel={ __( 'Show text' ) }\n\t\t\t\t\t\t\t\tonDeselect={ () =>\n\t\t\t\t\t\t\t\t\tsetAttributes( { showLabel: true } )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tisShownByDefault\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<QueryPaginationLabelControl\n\t\t\t\t\t\t\t\t\tvalue={ showLabel }\n\t\t\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\t\t\tsetAttributes( { showLabel: value } );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToolsPanel>\n\t\t\t\t</InspectorControls>\n\t\t\t) }\n\t\t\t<nav { ...innerBlocksProps } />\n\t\t</>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}