{"version":3,"names":["_clsx","_interopRequireDefault","require","_i18n","_element","_data","_blockEditor","_autogenerateAnchors","_jsxRuntime","HeadingEdit","attributes","setAttributes","mergeBlocks","onReplace","style","clientId","textAlign","content","level","levelOptions","placeholder","anchor","tagName","blockProps","useBlockProps","className","clsx","blockEditingMode","useBlockEditingMode","canGenerateAnchors","useSelect","select","getGlobalBlockCount","getSettings","blockEditorStore","settings","generateAnchors","__unstableMarkNextChangeAsNotPersistent","useDispatch","useEffect","generateAnchor","setAnchor","onContentChange","value","newAttrs","jsxs","Fragment","children","BlockControls","group","jsx","HeadingLevelDropdown","options","onChange","newLevel","AlignmentControl","nextAlign","RichText","identifier","onMerge","onRemove","__","Platform","isNative","deleteEnter","_default","exports","default"],"sources":["@wordpress/block-library/src/heading/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, Platform } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tAlignmentControl,\n\tBlockControls,\n\tRichText,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n\tHeadingLevelDropdown,\n\tuseBlockEditingMode,\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { generateAnchor, setAnchor } from './autogenerate-anchors';\n\nfunction HeadingEdit( {\n\tattributes,\n\tsetAttributes,\n\tmergeBlocks,\n\tonReplace,\n\tstyle,\n\tclientId,\n} ) {\n\tconst { textAlign, content, level, levelOptions, placeholder, anchor } =\n\t\tattributes;\n\tconst tagName = 'h' + level;\n\tconst blockProps = useBlockProps( {\n\t\tclassName: clsx( {\n\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\n\t\t} ),\n\t\tstyle,\n\t} );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tconst { canGenerateAnchors } = useSelect( ( select ) => {\n\t\tconst { getGlobalBlockCount, getSettings } = select( blockEditorStore );\n\t\tconst settings = getSettings();\n\n\t\treturn {\n\t\t\tcanGenerateAnchors:\n\t\t\t\t!! settings.generateAnchors ||\n\t\t\t\tgetGlobalBlockCount( 'core/table-of-contents' ) > 0,\n\t\t};\n\t}, [] );\n\n\tconst { __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\n\t// Initially set anchor for headings that have content but no anchor set.\n\t// This is used when transforming a block to heading, or for legacy anchors.\n\tuseEffect( () => {\n\t\tif ( ! canGenerateAnchors ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! anchor && content ) {\n\t\t\t// This side-effect should not create an undo level.\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tsetAttributes( {\n\t\t\t\tanchor: generateAnchor( clientId, content ),\n\t\t\t} );\n\t\t}\n\t\tsetAnchor( clientId, anchor );\n\n\t\t// Remove anchor map when block unmounts.\n\t\treturn () => setAnchor( clientId, null );\n\t}, [ anchor, content, clientId, canGenerateAnchors ] );\n\n\tconst onContentChange = ( value ) => {\n\t\tconst newAttrs = { content: value };\n\t\tif (\n\t\t\tcanGenerateAnchors &&\n\t\t\t( ! anchor ||\n\t\t\t\t! value ||\n\t\t\t\tgenerateAnchor( clientId, content ) === anchor )\n\t\t) {\n\t\t\tnewAttrs.anchor = generateAnchor( clientId, value );\n\t\t}\n\t\tsetAttributes( newAttrs );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t<BlockControls group=\"block\">\n\t\t\t\t\t<HeadingLevelDropdown\n\t\t\t\t\t\tvalue={ level }\n\t\t\t\t\t\toptions={ levelOptions }\n\t\t\t\t\t\tonChange={ ( newLevel ) =>\n\t\t\t\t\t\t\tsetAttributes( { level: newLevel } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<AlignmentControl\n\t\t\t\t\t\tvalue={ textAlign }\n\t\t\t\t\t\tonChange={ ( nextAlign ) => {\n\t\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t) }\n\t\t\t<RichText\n\t\t\t\tidentifier=\"content\"\n\t\t\t\ttagName={ tagName }\n\t\t\t\tvalue={ content }\n\t\t\t\tonChange={ onContentChange }\n\t\t\t\tonMerge={ mergeBlocks }\n\t\t\t\tonReplace={ onReplace }\n\t\t\t\tonRemove={ () => onReplace( [] ) }\n\t\t\t\tplaceholder={ placeholder || __( 'Heading' ) }\n\t\t\t\ttextAlign={ textAlign }\n\t\t\t\t{ ...( Platform.isNative && { deleteEnter: true } ) } // setup RichText on native mobile to delete the \"Enter\" key as it's handled by the JS/RN side\n\t\t\t\t{ ...blockProps }\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nexport default HeadingEdit;\n"],"mappings":";;;;;;;AAGA,IAAAA,KAAA,GAAAC,sBAAA,CAAAC,OAAA;AAKA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AACA,IAAAG,KAAA,GAAAH,OAAA;AACA,IAAAI,YAAA,GAAAJ,OAAA;AAaA,IAAAK,oBAAA,GAAAL,OAAA;AAAmE,IAAAM,WAAA,GAAAN,OAAA;AAxBnE;AACA;AACA;;AAGA;AACA;AACA;;AAcA;AACA;AACA;;AAGA,SAASO,WAAWA,CAAE;EACrBC,UAAU;EACVC,aAAa;EACbC,WAAW;EACXC,SAAS;EACTC,KAAK;EACLC;AACD,CAAC,EAAG;EACH,MAAM;IAAEC,SAAS;IAAEC,OAAO;IAAEC,KAAK;IAAEC,YAAY;IAAEC,WAAW;IAAEC;EAAO,CAAC,GACrEX,UAAU;EACX,MAAMY,OAAO,GAAG,GAAG,GAAGJ,KAAK;EAC3B,MAAMK,UAAU,GAAG,IAAAC,0BAAa,EAAE;IACjCC,SAAS,EAAE,IAAAC,aAAI,EAAE;MAChB,CAAE,kBAAmBV,SAAS,EAAG,GAAIA;IACtC,CAAE,CAAC;IACHF;EACD,CAAE,CAAC;EACH,MAAMa,gBAAgB,GAAG,IAAAC,gCAAmB,EAAC,CAAC;EAE9C,MAAM;IAAEC;EAAmB,CAAC,GAAG,IAAAC,eAAS,EAAIC,MAAM,IAAM;IACvD,MAAM;MAAEC,mBAAmB;MAAEC;IAAY,CAAC,GAAGF,MAAM,CAAEG,kBAAiB,CAAC;IACvE,MAAMC,QAAQ,GAAGF,WAAW,CAAC,CAAC;IAE9B,OAAO;MACNJ,kBAAkB,EACjB,CAAC,CAAEM,QAAQ,CAACC,eAAe,IAC3BJ,mBAAmB,CAAE,wBAAyB,CAAC,GAAG;IACpD,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,MAAM;IAAEK;EAAwC,CAAC,GAChD,IAAAC,iBAAW,EAAEJ,kBAAiB,CAAC;;EAEhC;EACA;EACA,IAAAK,kBAAS,EAAE,MAAM;IAChB,IAAK,CAAEV,kBAAkB,EAAG;MAC3B;IACD;IAEA,IAAK,CAAER,MAAM,IAAIJ,OAAO,EAAG;MAC1B;MACAoB,uCAAuC,CAAC,CAAC;MACzC1B,aAAa,CAAE;QACdU,MAAM,EAAE,IAAAmB,mCAAc,EAAEzB,QAAQ,EAAEE,OAAQ;MAC3C,CAAE,CAAC;IACJ;IACA,IAAAwB,8BAAS,EAAE1B,QAAQ,EAAEM,MAAO,CAAC;;IAE7B;IACA,OAAO,MAAM,IAAAoB,8BAAS,EAAE1B,QAAQ,EAAE,IAAK,CAAC;EACzC,CAAC,EAAE,CAAEM,MAAM,EAAEJ,OAAO,EAAEF,QAAQ,EAAEc,kBAAkB,CAAG,CAAC;EAEtD,MAAMa,eAAe,GAAKC,KAAK,IAAM;IACpC,MAAMC,QAAQ,GAAG;MAAE3B,OAAO,EAAE0B;IAAM,CAAC;IACnC,IACCd,kBAAkB,KAChB,CAAER,MAAM,IACT,CAAEsB,KAAK,IACP,IAAAH,mCAAc,EAAEzB,QAAQ,EAAEE,OAAQ,CAAC,KAAKI,MAAM,CAAE,EAChD;MACDuB,QAAQ,CAACvB,MAAM,GAAG,IAAAmB,mCAAc,EAAEzB,QAAQ,EAAE4B,KAAM,CAAC;IACpD;IACAhC,aAAa,CAAEiC,QAAS,CAAC;EAC1B,CAAC;EAED,oBACC,IAAApC,WAAA,CAAAqC,IAAA,EAAArC,WAAA,CAAAsC,QAAA;IAAAC,QAAA,GACGpB,gBAAgB,KAAK,SAAS,iBAC/B,IAAAnB,WAAA,CAAAqC,IAAA,EAACvC,YAAA,CAAA0C,aAAa;MAACC,KAAK,EAAC,OAAO;MAAAF,QAAA,gBAC3B,IAAAvC,WAAA,CAAA0C,GAAA,EAAC5C,YAAA,CAAA6C,oBAAoB;QACpBR,KAAK,EAAGzB,KAAO;QACfkC,OAAO,EAAGjC,YAAc;QACxBkC,QAAQ,EAAKC,QAAQ,IACpB3C,aAAa,CAAE;UAAEO,KAAK,EAAEoC;QAAS,CAAE;MACnC,CACD,CAAC,eACF,IAAA9C,WAAA,CAAA0C,GAAA,EAAC5C,YAAA,CAAAiD,gBAAgB;QAChBZ,KAAK,EAAG3B,SAAW;QACnBqC,QAAQ,EAAKG,SAAS,IAAM;UAC3B7C,aAAa,CAAE;YAAEK,SAAS,EAAEwC;UAAU,CAAE,CAAC;QAC1C;MAAG,CACH,CAAC;IAAA,CACY,CACf,eACD,IAAAhD,WAAA,CAAA0C,GAAA,EAAC5C,YAAA,CAAAmD,QAAQ;MACRC,UAAU,EAAC,SAAS;MACpBpC,OAAO,EAAGA,OAAS;MACnBqB,KAAK,EAAG1B,OAAS;MACjBoC,QAAQ,EAAGX,eAAiB;MAC5BiB,OAAO,EAAG/C,WAAa;MACvBC,SAAS,EAAGA,SAAW;MACvB+C,QAAQ,EAAGA,CAAA,KAAM/C,SAAS,CAAE,EAAG,CAAG;MAClCO,WAAW,EAAGA,WAAW,IAAI,IAAAyC,QAAE,EAAE,SAAU,CAAG;MAC9C7C,SAAS,EAAGA,SAAW;MAAA,IAChB8C,iBAAQ,CAACC,QAAQ,IAAI;QAAEC,WAAW,EAAE;MAAK,CAAC;MAAA,GAC5CzC;IAAU,CACf,CAAC;EAAA,CACD,CAAC;AAEL;AAAC,IAAA0C,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEc1D,WAAW","ignoreList":[]}