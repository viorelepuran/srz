{"version":3,"names":["_reactNative","require","_reactNativeVideo","_interopRequireDefault","_clsx","_reactNativeBridge","_i18n","_components","_blockEditor","_compose","_data","_element","_icons","_url","_editPost","_style","_shared","_controls","_useCoverIsDark","_jsxRuntime","INNER_BLOCKS_TEMPLATE","align","placeholder","__","useIsScreenReaderEnabled","isScreenReaderEnabled","setIsScreenReaderEnabled","useState","useEffect","mounted","changeListener","AccessibilityInfo","addEventListener","enabled","then","screenReaderEnabled","remove","Cover","attributes","getStylesFromColorScheme","isParentSelected","onFocus","setAttributes","openGeneralSidebar","closeSettingsBottomSheet","isSelected","selectBlock","blockWidth","hasInnerBlocks","backgroundType","dimRatio","focalPoint","minHeight","url","id","style","customOverlayColor","minHeightUnit","allowedBlocks","templateLock","customGradient","gradient","overlayColor","isDark","mediaUploadSync","globalStyles","useGlobalStyles","convertedMinHeight","useConvertUnitToMobile","COVER_DEFAULT_HEIGHT","isImage","MEDIA_TYPE_IMAGE","THEME_COLORS_COUNT","colorsDefault","useMobileGlobalStylesColors","coverDefaultPalette","useMemo","colors","slice","gradients","gradientValue","getGradientValueBySlug","overlayColorValue","getColorObjectByAttributeValues","hasBackground","color","background","hasOnlyColorBackground","isCustomColorPickerShowing","setCustomColorPickerShowing","openMediaOptionsRef","useRef","isUploadInProgress","setIsUploadInProgress","didUploadFail","setDidUploadFail","getProtocol","shouldShowFailure","onSelectMedia","media","mediaAttributes","attributesFromMedia","undefined","useFeaturedImage","onUpdateMediaProgress","useCallback","payload","mediaUrl","state","onMediaPressed","requestImageUploadCancelDialog","requestImageFailedRetryDialog","requestImageFullscreenPreview","isVideoLoading","setIsVideoLoading","onVideoLoadStart","onVideoLoad","onClearMedia","hasParallax","onAddMediaButtonPress","current","setColor","_colorValue$slug","_ref","colorValue","getColorObjectByColorValue","slug","openColorPicker","__unstableMarkNextChangeAsNotPersistent","useDispatch","blockEditorStore","isCoverDark","useCoverIsDark","childrenStyles","styles","defaultColor","defaultColorLightMode","className","includes","clsx","backgroundColor","backgroundSolid","backgroundSolidDark","overlayStyles","overlay","opacity","overlaySelected","placeholderIconStyle","icon","iconDark","placeholderIcon","jsx","Icon","toolbarControls","open","BlockControls","group","children","ToolbarButton","title","replace","onClick","accessibilityHint","Platform","OS","addMediaButton","TouchableWithoutFeedback","accessibilityLabel","accessibilityRole","onPress","View","selectImageContainer","selectImage","size","image","selectImageIcon","onBottomSheetClosed","InteractionManager","runAfterInteractions","selectedColorText","selectedColorTextDark","bottomLabelText","Text","toUpperCase","colorPickerControls","InspectorControls","BottomSheetConsumer","shouldEnableBottomSheetScroll","shouldEnableBottomSheetMaxHeight","onHandleClosingBottomSheet","onHandleHardwareButtonPress","isBottomSheetContentScrolling","ColorPicker","onNavigationBack","renderContent","getMediaOptions","jsxs","Fragment","renderBackground","accessible","disabled","VIDEO_BACKGROUND_TYPE","MediaUploadProgress","mediaId","onFinishMediaUploadWithSuccess","mediaServerId","onFinishMediaUploadWithFailure","onMediaUploadStateReset","IMAGE_BACKGROUND_TYPE","imageContainer","Image","editButton","IMAGE_DEFAULT_FOCAL_POINT","isUploadFailed","onSelectMediaUploadOption","openMediaOptions","width","default","muted","disableFocus","repeat","resizeMode","source","uri","onLoad","onLoadStart","MediaPlaceholder","height","mediaPlaceholderEmptyStateContainer","hideContent","labels","onSelect","allowedTypes","ALLOWED_MEDIA_TYPES","colorPaletteWrapper","pointerEvents","ColorPalette","enableCustomColor","customColorIndicatorStyles","paletteColorIndicator","customIndicatorWrapperStyles","paletteCustomIndicatorWrapper","onCustomPress","defaultSettings","shouldShowCustomLabel","shouldShowCustomVerticalSeparator","backgroundContainer","content","InnerBlocks","template","templateInsertUpdatesSelection","overlayContainer","Gradient","MediaUpload","isReplacingMedia","render","imageEditButton","ImageEditingButton","pickerOptions","destructiveButton","label","separated","value","uploadFailedContainer","uploadFailed","cautionFilled","uploadFailedIcon","_default","exports","compose","withSelect","select","clientId","getSelectedBlockClientId","getBlock","selectedBlockClientId","innerBlocks","length","withDispatch","dispatch","editPostStore","closeGeneralSidebar","withPreferredColorScheme"],"sources":["@wordpress/block-library/src/cover/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tView,\n\tTouchableWithoutFeedback,\n\tInteractionManager,\n\tAccessibilityInfo,\n\tText,\n\tPlatform,\n} from 'react-native';\nimport Video from 'react-native-video';\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\trequestImageFullscreenPreview,\n\tmediaUploadSync,\n} from '@wordpress/react-native-bridge';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tIcon,\n\tImage,\n\tImageEditingButton,\n\tIMAGE_DEFAULT_FOCAL_POINT,\n\tToolbarButton,\n\tGradient,\n\tColorPalette,\n\tColorPicker,\n\tBottomSheetConsumer,\n\tuseConvertUnitToMobile,\n} from '@wordpress/components';\nimport {\n\tBlockControls,\n\tInnerBlocks,\n\tInspectorControls,\n\tMEDIA_TYPE_IMAGE,\n\tMediaPlaceholder,\n\tMediaUpload,\n\tMediaUploadProgress,\n\tgetColorObjectByColorValue,\n\tgetColorObjectByAttributeValues,\n\tgetGradientValueBySlug,\n\tstore as blockEditorStore,\n\tuseGlobalStyles,\n\tuseMobileGlobalStylesColors,\n} from '@wordpress/block-editor';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport {\n\tuseEffect,\n\tuseState,\n\tuseRef,\n\tuseCallback,\n\tuseMemo,\n} from '@wordpress/element';\nimport { cover as icon, replace, image, cautionFilled } from '@wordpress/icons';\nimport { getProtocol } from '@wordpress/url';\n// eslint-disable-next-line no-restricted-imports\nimport { store as editPostStore } from '@wordpress/edit-post';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport {\n\tattributesFromMedia,\n\tALLOWED_MEDIA_TYPES,\n\tIMAGE_BACKGROUND_TYPE,\n\tVIDEO_BACKGROUND_TYPE,\n\tCOVER_DEFAULT_HEIGHT,\n} from './shared';\nimport Controls from './controls';\nimport useCoverIsDark from './use-cover-is-dark';\n\n/**\n * Constants\n */\nconst INNER_BLOCKS_TEMPLATE = [\n\t[\n\t\t'core/paragraph',\n\t\t{\n\t\t\talign: 'center',\n\t\t\tplaceholder: __( 'Write titleâ€¦' ),\n\t\t},\n\t],\n];\n\nfunction useIsScreenReaderEnabled() {\n\tconst [ isScreenReaderEnabled, setIsScreenReaderEnabled ] =\n\t\tuseState( false );\n\n\tuseEffect( () => {\n\t\tlet mounted = true;\n\n\t\tconst changeListener = AccessibilityInfo.addEventListener(\n\t\t\t'screenReaderChanged',\n\t\t\t( enabled ) => setIsScreenReaderEnabled( enabled )\n\t\t);\n\n\t\tAccessibilityInfo.isScreenReaderEnabled().then(\n\t\t\t( screenReaderEnabled ) => {\n\t\t\t\tif ( mounted && screenReaderEnabled ) {\n\t\t\t\t\tsetIsScreenReaderEnabled( screenReaderEnabled );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tmounted = false;\n\n\t\t\tchangeListener.remove();\n\t\t};\n\t}, [] );\n\n\treturn isScreenReaderEnabled;\n}\n\nconst Cover = ( {\n\tattributes,\n\tgetStylesFromColorScheme,\n\tisParentSelected,\n\tonFocus,\n\tsetAttributes,\n\topenGeneralSidebar,\n\tcloseSettingsBottomSheet,\n\tisSelected,\n\tselectBlock,\n\tblockWidth,\n\thasInnerBlocks,\n} ) => {\n\tconst {\n\t\tbackgroundType,\n\t\tdimRatio,\n\t\tfocalPoint,\n\t\tminHeight,\n\t\turl,\n\t\tid,\n\t\tstyle,\n\t\tcustomOverlayColor,\n\t\tminHeightUnit = 'px',\n\t\tallowedBlocks,\n\t\ttemplateLock,\n\t\tcustomGradient,\n\t\tgradient,\n\t\toverlayColor,\n\t\tisDark,\n\t} = attributes;\n\tconst isScreenReaderEnabled = useIsScreenReaderEnabled();\n\n\tuseEffect( () => {\n\t\t// Sync with local media store.\n\t\tmediaUploadSync();\n\t}, [] );\n\n\tconst globalStyles = useGlobalStyles();\n\tconst convertedMinHeight = useConvertUnitToMobile(\n\t\tminHeight || COVER_DEFAULT_HEIGHT,\n\t\tminHeightUnit,\n\t\tglobalStyles\n\t);\n\n\tconst isImage = backgroundType === MEDIA_TYPE_IMAGE;\n\n\tconst THEME_COLORS_COUNT = 4;\n\tconst colorsDefault = useMobileGlobalStylesColors();\n\tconst coverDefaultPalette = useMemo( () => {\n\t\treturn {\n\t\t\tcolors: colorsDefault.slice( 0, THEME_COLORS_COUNT ),\n\t\t};\n\t}, [ colorsDefault ] );\n\tconst gradients = useMobileGlobalStylesColors( 'gradients' );\n\tconst gradientValue =\n\t\tcustomGradient || getGradientValueBySlug( gradients, gradient );\n\tconst overlayColorValue = getColorObjectByAttributeValues(\n\t\tcolorsDefault,\n\t\toverlayColor\n\t);\n\n\tconst hasBackground = !! (\n\t\turl ||\n\t\t( style && style.color && style.color.background ) ||\n\t\tattributes.overlayColor ||\n\t\toverlayColorValue.color ||\n\t\tcustomOverlayColor ||\n\t\tgradientValue\n\t);\n\n\tconst hasOnlyColorBackground = ! url && ( hasBackground || hasInnerBlocks );\n\n\tconst [ isCustomColorPickerShowing, setCustomColorPickerShowing ] =\n\t\tuseState( false );\n\n\tconst openMediaOptionsRef = useRef();\n\n\t// Initialize uploading flag to false, awaiting sync.\n\tconst [ isUploadInProgress, setIsUploadInProgress ] = useState( false );\n\n\t// Initialize upload failure flag to true if url is local.\n\tconst [ didUploadFail, setDidUploadFail ] = useState(\n\t\tid && getProtocol( url ) === 'file:'\n\t);\n\n\t// Don't show failure if upload is in progress.\n\tconst shouldShowFailure = didUploadFail && ! isUploadInProgress;\n\n\tconst onSelectMedia = ( media ) => {\n\t\tsetDidUploadFail( false );\n\n\t\tconst mediaAttributes = attributesFromMedia( media );\n\t\tsetAttributes( {\n\t\t\t...mediaAttributes,\n\t\t\tfocalPoint: undefined,\n\t\t\tuseFeaturedImage: undefined,\n\t\t\tdimRatio: dimRatio === 100 ? 50 : dimRatio,\n\t\t\tisDark: undefined,\n\t\t} );\n\t};\n\n\tconst onUpdateMediaProgress = useCallback(\n\t\t( payload ) => {\n\t\t\tconst { mediaUrl, state } = payload;\n\n\t\t\tsetIsUploadInProgress( true );\n\n\t\t\tif ( isUploadInProgress && isImage && mediaUrl && ! state ) {\n\t\t\t\tsetAttributes( {\n\t\t\t\t\turl: mediaUrl,\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\t\t[ isImage, isUploadInProgress, setAttributes ]\n\t);\n\n\tconst onMediaPressed = () => {\n\t\tif ( isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( id );\n\t\t} else if ( shouldShowFailure ) {\n\t\t\trequestImageFailedRetryDialog( id );\n\t\t} else if ( isImage && url ) {\n\t\t\trequestImageFullscreenPreview( url );\n\t\t}\n\t};\n\n\tconst [ isVideoLoading, setIsVideoLoading ] = useState( true );\n\n\tconst onVideoLoadStart = () => {\n\t\tsetIsVideoLoading( true );\n\t};\n\n\tconst onVideoLoad = () => {\n\t\tsetIsVideoLoading( false );\n\t};\n\n\tconst onClearMedia = useCallback( () => {\n\t\tsetAttributes( {\n\t\t\tfocalPoint: undefined,\n\t\t\thasParallax: undefined,\n\t\t\tid: undefined,\n\t\t\turl: undefined,\n\t\t} );\n\t\tcloseSettingsBottomSheet();\n\t}, [ closeSettingsBottomSheet ] );\n\n\tconst onAddMediaButtonPress = useCallback( () => {\n\t\tif ( openMediaOptionsRef?.current ) {\n\t\t\topenMediaOptionsRef.current();\n\t\t}\n\t}, [] );\n\n\tfunction setColor( color ) {\n\t\tconst colorValue = getColorObjectByColorValue( colorsDefault, color );\n\n\t\tsetAttributes( {\n\t\t\t// Clear all related attributes (only one should be set).\n\t\t\toverlayColor: colorValue?.slug ?? undefined,\n\t\t\tcustomOverlayColor: ( ! colorValue?.slug && color ) ?? undefined,\n\t\t\tgradient: undefined,\n\t\t\tcustomGradient: undefined,\n\t\t} );\n\t}\n\n\tfunction openColorPicker() {\n\t\tselectBlock();\n\t\tsetCustomColorPickerShowing( true );\n\t\topenGeneralSidebar();\n\t}\n\n\tconst { __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\tconst isCoverDark = useCoverIsDark(\n\t\tisDark,\n\t\turl,\n\t\tdimRatio,\n\t\toverlayColorValue?.color\n\t);\n\n\tuseEffect( () => {\n\t\t// This side-effect should not create an undo level.\n\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t// Used to set a default color for its InnerBlocks\n\t\t// since there's no system to inherit styles yet\n\t\t// the RichText component will check if there are\n\t\t// parent styles for the current block. If there are,\n\t\t// it will use that color instead.\n\t\tsetAttributes( {\n\t\t\tisDark: isCoverDark,\n\t\t\tchildrenStyles: isCoverDark\n\t\t\t\t? styles.defaultColor\n\t\t\t\t: styles.defaultColorLightMode,\n\t\t} );\n\n\t\t// Ensure that \"is-light\" is removed from \"className\" attribute if cover background is dark.\n\t\tif ( isCoverDark && attributes.className?.includes( 'is-light' ) ) {\n\t\t\tconst className = clsx( attributes.className, {\n\t\t\t\t'is-light': false,\n\t\t\t} );\n\t\t\tsetAttributes( {\n\t\t\t\tclassName: className !== '' ? className : undefined,\n\t\t\t} );\n\t\t}\n\t}, [ isCoverDark ] );\n\n\tconst backgroundColor = getStylesFromColorScheme(\n\t\tstyles.backgroundSolid,\n\t\tstyles.backgroundSolidDark\n\t);\n\n\tconst overlayStyles = [\n\t\tstyles.overlay,\n\t\turl && { opacity: dimRatio / 100 },\n\t\t! gradientValue && {\n\t\t\tbackgroundColor:\n\t\t\t\tcustomOverlayColor ||\n\t\t\t\toverlayColorValue?.color ||\n\t\t\t\tstyle?.color?.background ||\n\t\t\t\tstyles.overlay?.color,\n\t\t},\n\t\t// While we don't support theme colors we add a default bg color.\n\t\t! overlayColorValue.color && ! url ? backgroundColor : {},\n\t\tisImage &&\n\t\t\tisParentSelected &&\n\t\t\t! isUploadInProgress &&\n\t\t\t! didUploadFail &&\n\t\t\tstyles.overlaySelected,\n\t];\n\n\tconst placeholderIconStyle = getStylesFromColorScheme(\n\t\tstyles.icon,\n\t\tstyles.iconDark\n\t);\n\n\tconst placeholderIcon = <Icon icon={ icon } { ...placeholderIconStyle } />;\n\n\tconst toolbarControls = ( open ) => (\n\t\t<BlockControls group=\"other\">\n\t\t\t<ToolbarButton\n\t\t\t\ttitle={ __( 'Edit cover media' ) }\n\t\t\t\ticon={ replace }\n\t\t\t\tonClick={ open }\n\t\t\t/>\n\t\t</BlockControls>\n\t);\n\n\tconst accessibilityHint =\n\t\tPlatform.OS === 'ios'\n\t\t\t? __( 'Double tap to open Action Sheet to add image or video' )\n\t\t\t: __( 'Double tap to open Bottom Sheet to add image or video' );\n\n\tconst addMediaButton = () => (\n\t\t<TouchableWithoutFeedback\n\t\t\taccessibilityHint={ accessibilityHint }\n\t\t\taccessibilityLabel={ __( 'Add image or video' ) }\n\t\t\taccessibilityRole=\"button\"\n\t\t\tonPress={ onAddMediaButtonPress }\n\t\t>\n\t\t\t<View style={ styles.selectImageContainer }>\n\t\t\t\t<View style={ styles.selectImage }>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tsize={ 16 }\n\t\t\t\t\t\ticon={ image }\n\t\t\t\t\t\t{ ...styles.selectImageIcon }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t</TouchableWithoutFeedback>\n\t);\n\n\tconst onBottomSheetClosed = useCallback( () => {\n\t\tInteractionManager.runAfterInteractions( () => {\n\t\t\tsetCustomColorPickerShowing( false );\n\t\t} );\n\t}, [] );\n\n\tconst selectedColorText = getStylesFromColorScheme(\n\t\tstyles.selectedColorText,\n\t\tstyles.selectedColorTextDark\n\t);\n\n\tconst bottomLabelText = customOverlayColor ? (\n\t\t<Text style={ selectedColorText }>\n\t\t\t{ customOverlayColor.toUpperCase() }\n\t\t</Text>\n\t) : (\n\t\t__( 'Select a color' )\n\t);\n\n\tconst colorPickerControls = (\n\t\t<InspectorControls>\n\t\t\t<BottomSheetConsumer>\n\t\t\t\t{ ( {\n\t\t\t\t\tshouldEnableBottomSheetScroll,\n\t\t\t\t\tshouldEnableBottomSheetMaxHeight,\n\t\t\t\t\tonHandleClosingBottomSheet,\n\t\t\t\t\tonHandleHardwareButtonPress,\n\t\t\t\t\tisBottomSheetContentScrolling,\n\t\t\t\t} ) => (\n\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshouldEnableBottomSheetMaxHeight={\n\t\t\t\t\t\t\tshouldEnableBottomSheetMaxHeight\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\tonNavigationBack={ closeSettingsBottomSheet }\n\t\t\t\t\t\tonHandleClosingBottomSheet={\n\t\t\t\t\t\t\tonHandleClosingBottomSheet\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonHandleHardwareButtonPress={\n\t\t\t\t\t\t\tonHandleHardwareButtonPress\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonBottomSheetClosed={ onBottomSheetClosed }\n\t\t\t\t\t\tisBottomSheetContentScrolling={\n\t\t\t\t\t\t\tisBottomSheetContentScrolling\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottomLabelText={ bottomLabelText }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BottomSheetConsumer>\n\t\t</InspectorControls>\n\t);\n\n\tconst renderContent = ( getMediaOptions ) => (\n\t\t<>\n\t\t\t{ renderBackground( getMediaOptions ) }\n\t\t\t{ isParentSelected && hasOnlyColorBackground && addMediaButton() }\n\t\t</>\n\t);\n\n\tconst renderBackground = ( getMediaOptions ) => (\n\t\t<TouchableWithoutFeedback\n\t\t\taccessible={ ! isParentSelected }\n\t\t\tonPress={ onMediaPressed }\n\t\t\tdisabled={ ! isParentSelected }\n\t\t>\n\t\t\t<View style={ [ styles.background, backgroundColor ] }>\n\t\t\t\t{ getMediaOptions() }\n\t\t\t\t{ isParentSelected &&\n\t\t\t\t\tbackgroundType === VIDEO_BACKGROUND_TYPE &&\n\t\t\t\t\ttoolbarControls( openMediaOptionsRef.current ) }\n\t\t\t\t<MediaUploadProgress\n\t\t\t\t\tmediaId={ id }\n\t\t\t\t\tonUpdateMediaProgress={ onUpdateMediaProgress }\n\t\t\t\t\tonFinishMediaUploadWithSuccess={ ( {\n\t\t\t\t\t\tmediaServerId,\n\t\t\t\t\t\tmediaUrl,\n\t\t\t\t\t} ) => {\n\t\t\t\t\t\tsetIsUploadInProgress( false );\n\t\t\t\t\t\tsetDidUploadFail( false );\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tid: mediaServerId,\n\t\t\t\t\t\t\turl: mediaUrl,\n\t\t\t\t\t\t\tbackgroundType,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tonFinishMediaUploadWithFailure={ () => {\n\t\t\t\t\t\tsetIsUploadInProgress( false );\n\t\t\t\t\t\tsetDidUploadFail( true );\n\t\t\t\t\t} }\n\t\t\t\t\tonMediaUploadStateReset={ () => {\n\t\t\t\t\t\tsetIsUploadInProgress( false );\n\t\t\t\t\t\tsetDidUploadFail( false );\n\t\t\t\t\t\tsetAttributes( { id: undefined, url: undefined } );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\n\t\t\t\t{ IMAGE_BACKGROUND_TYPE === backgroundType && (\n\t\t\t\t\t<View style={ styles.imageContainer }>\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\teditButton={ false }\n\t\t\t\t\t\t\tfocalPoint={\n\t\t\t\t\t\t\t\tfocalPoint || IMAGE_DEFAULT_FOCAL_POINT\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisSelected={ isParentSelected }\n\t\t\t\t\t\t\tisUploadFailed={ didUploadFail }\n\t\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\n\t\t\t\t\t\t\tonSelectMediaUploadOption={ onSelectMedia }\n\t\t\t\t\t\t\topenMediaOptions={ openMediaOptionsRef.current }\n\t\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\t\twidth={ styles.image?.width }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\n\t\t\t\t{ VIDEO_BACKGROUND_TYPE === backgroundType && (\n\t\t\t\t\t<Video\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tdisableFocus\n\t\t\t\t\t\trepeat\n\t\t\t\t\t\tresizeMode=\"cover\"\n\t\t\t\t\t\tsource={ { uri: url } }\n\t\t\t\t\t\tonLoad={ onVideoLoad }\n\t\t\t\t\t\tonLoadStart={ onVideoLoadStart }\n\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\tstyles.background,\n\t\t\t\t\t\t\t// Hide Video component since it has black background while loading the source.\n\t\t\t\t\t\t\t{ opacity: isVideoLoading ? 0 : 1 },\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t</TouchableWithoutFeedback>\n\t);\n\n\tif (\n\t\t( ! hasBackground && ! hasInnerBlocks ) ||\n\t\tisCustomColorPickerShowing\n\t) {\n\t\treturn (\n\t\t\t<View>\n\t\t\t\t{ isCustomColorPickerShowing && colorPickerControls }\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\theight={\n\t\t\t\t\t\tstyles.mediaPlaceholderEmptyStateContainer?.height\n\t\t\t\t\t}\n\t\t\t\t\tbackgroundColor={ customOverlayColor }\n\t\t\t\t\thideContent={\n\t\t\t\t\t\tcustomOverlayColor !== '' &&\n\t\t\t\t\t\tcustomOverlayColor !== undefined\n\t\t\t\t\t}\n\t\t\t\t\ticon={ placeholderIcon }\n\t\t\t\t\tlabels={ {\n\t\t\t\t\t\ttitle: __( 'Cover' ),\n\t\t\t\t\t} }\n\t\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t>\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={ styles.colorPaletteWrapper }\n\t\t\t\t\t\tpointerEvents={\n\t\t\t\t\t\t\tisScreenReaderEnabled ? 'none' : 'auto'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<BottomSheetConsumer>\n\t\t\t\t\t\t\t{ ( { shouldEnableBottomSheetScroll } ) => (\n\t\t\t\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\t\t\t\tenableCustomColor\n\t\t\t\t\t\t\t\t\tcustomColorIndicatorStyles={\n\t\t\t\t\t\t\t\t\t\tstyles.paletteColorIndicator\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcustomIndicatorWrapperStyles={\n\t\t\t\t\t\t\t\t\t\tstyles.paletteCustomIndicatorWrapper\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\t\t\t\tonCustomPress={ openColorPicker }\n\t\t\t\t\t\t\t\t\tdefaultSettings={ coverDefaultPalette }\n\t\t\t\t\t\t\t\t\tshouldShowCustomLabel={ false }\n\t\t\t\t\t\t\t\t\tshouldShowCustomVerticalSeparator={ false }\n\t\t\t\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</BottomSheetConsumer>\n\t\t\t\t\t</View>\n\t\t\t\t</MediaPlaceholder>\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View style={ styles.backgroundContainer }>\n\t\t\t{ isSelected && (\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<Controls\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tdidUploadFail={ didUploadFail }\n\t\t\t\t\t\thasOnlyColorBackground={ hasOnlyColorBackground }\n\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\n\t\t\t\t\t\tonClearMedia={ onClearMedia }\n\t\t\t\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t/>\n\t\t\t\t</InspectorControls>\n\t\t\t) }\n\n\t\t\t<View\n\t\t\t\tpointerEvents=\"box-none\"\n\t\t\t\tstyle={ [ styles.content, { minHeight: convertedMinHeight } ] }\n\t\t\t>\n\t\t\t\t<InnerBlocks\n\t\t\t\t\tallowedBlocks={ allowedBlocks }\n\t\t\t\t\ttemplate={ INNER_BLOCKS_TEMPLATE }\n\t\t\t\t\ttemplateLock={ templateLock }\n\t\t\t\t\ttemplateInsertUpdatesSelection\n\t\t\t\t\tblockWidth={ blockWidth }\n\t\t\t\t/>\n\t\t\t</View>\n\n\t\t\t<View pointerEvents=\"none\" style={ styles.overlayContainer }>\n\t\t\t\t<View style={ overlayStyles }>\n\t\t\t\t\t{ gradientValue && (\n\t\t\t\t\t\t<Gradient\n\t\t\t\t\t\t\tgradientValue={ gradientValue }\n\t\t\t\t\t\t\tstyle={ styles.background }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t</View>\n\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\tisReplacingMedia={ ! hasOnlyColorBackground }\n\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\topenMediaOptionsRef.current = open;\n\t\t\t\t\treturn renderContent( getMediaOptions );\n\t\t\t\t} }\n\t\t\t/>\n\n\t\t\t{ isImage &&\n\t\t\t\turl &&\n\t\t\t\topenMediaOptionsRef.current &&\n\t\t\t\tisParentSelected &&\n\t\t\t\t! isUploadInProgress &&\n\t\t\t\t! didUploadFail && (\n\t\t\t\t\t<View style={ styles.imageEditButton }>\n\t\t\t\t\t\t<ImageEditingButton\n\t\t\t\t\t\t\tonSelectMediaUploadOption={ onSelectMedia }\n\t\t\t\t\t\t\topenMediaOptions={ openMediaOptionsRef.current }\n\t\t\t\t\t\t\tpickerOptions={ [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdestructiveButton: true,\n\t\t\t\t\t\t\t\t\tid: 'clearMedia',\n\t\t\t\t\t\t\t\t\tlabel: __( 'Clear Media' ),\n\t\t\t\t\t\t\t\t\tonPress: onClearMedia,\n\t\t\t\t\t\t\t\t\tseparated: true,\n\t\t\t\t\t\t\t\t\tvalue: 'clearMedia',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\n\t\t\t{ shouldShowFailure && (\n\t\t\t\t<View\n\t\t\t\t\tpointerEvents=\"none\"\n\t\t\t\t\tstyle={ styles.uploadFailedContainer }\n\t\t\t\t>\n\t\t\t\t\t<View style={ styles.uploadFailed }>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ cautionFilled }\n\t\t\t\t\t\t\t{ ...styles.uploadFailedIcon }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</View>\n\t);\n};\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getSelectedBlockClientId, getBlock } =\n\t\t\tselect( blockEditorStore );\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\n\t\tconst hasInnerBlocks = getBlock( clientId )?.innerBlocks.length > 0;\n\n\t\treturn {\n\t\t\tisParentSelected: selectedBlockClientId === clientId,\n\t\t\thasInnerBlocks,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\tconst { openGeneralSidebar } = dispatch( editPostStore );\n\t\tconst { selectBlock } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\topenGeneralSidebar: () => openGeneralSidebar( 'edit-post/block' ),\n\t\t\tcloseSettingsBottomSheet() {\n\t\t\t\tdispatch( editPostStore ).closeGeneralSidebar();\n\t\t\t},\n\t\t\tselectBlock: () => selectBlock( clientId ),\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( Cover );\n"],"mappings":"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","ignoreList":[]}