{"version":3,"names":["_element","require","_blockEditor","_i18n","_shared","_lockUnlock","_jsxRuntime","cleanEmptyObject","unlock","blockEditorPrivateApis","CoverBlockControls","attributes","setAttributes","onSelectMedia","currentSettings","toggleUseFeaturedImage","onClearMedia","contentPosition","id","useFeaturedImage","minHeight","minHeightUnit","hasInnerBlocks","url","prevMinHeightValue","setPrevMinHeightValue","useState","prevMinHeightUnit","setPrevMinHeightUnit","isMinFullHeight","style","dimensions","aspectRatio","toggleMinFullHeight","undefined","jsxs","Fragment","children","BlockControls","group","jsx","__experimentalBlockAlignmentMatrixControl","label","__","value","onChange","nextPosition","isDisabled","__experimentalBlockFullHeightAligmentControl","isActive","onToggle","MediaReplaceFlow","mediaId","mediaURL","allowedTypes","ALLOWED_MEDIA_TYPES","accept","onSelect","onToggleFeaturedImage","name","onReset"],"sources":["@wordpress/block-library/src/cover/edit/block-controls.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\n\nimport {\n\tBlockControls,\n\tMediaReplaceFlow,\n\t__experimentalBlockAlignmentMatrixControl as BlockAlignmentMatrixControl,\n\t__experimentalBlockFullHeightAligmentControl as FullHeightAlignmentControl,\n\tprivateApis as blockEditorPrivateApis,\n} from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { ALLOWED_MEDIA_TYPES } from '../shared';\nimport { unlock } from '../../lock-unlock';\n\nconst { cleanEmptyObject } = unlock( blockEditorPrivateApis );\n\nexport default function CoverBlockControls( {\n\tattributes,\n\tsetAttributes,\n\tonSelectMedia,\n\tcurrentSettings,\n\ttoggleUseFeaturedImage,\n\tonClearMedia,\n} ) {\n\tconst { contentPosition, id, useFeaturedImage, minHeight, minHeightUnit } =\n\t\tattributes;\n\tconst { hasInnerBlocks, url } = currentSettings;\n\n\tconst [ prevMinHeightValue, setPrevMinHeightValue ] = useState( minHeight );\n\tconst [ prevMinHeightUnit, setPrevMinHeightUnit ] =\n\t\tuseState( minHeightUnit );\n\tconst isMinFullHeight =\n\t\tminHeightUnit === 'vh' &&\n\t\tminHeight === 100 &&\n\t\t! attributes?.style?.dimensions?.aspectRatio;\n\tconst toggleMinFullHeight = () => {\n\t\tif ( isMinFullHeight ) {\n\t\t\t// If there aren't previous values, take the default ones.\n\t\t\tif ( prevMinHeightUnit === 'vh' && prevMinHeightValue === 100 ) {\n\t\t\t\treturn setAttributes( {\n\t\t\t\t\tminHeight: undefined,\n\t\t\t\t\tminHeightUnit: undefined,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Set the previous values of height.\n\t\t\treturn setAttributes( {\n\t\t\t\tminHeight: prevMinHeightValue,\n\t\t\t\tminHeightUnit: prevMinHeightUnit,\n\t\t\t} );\n\t\t}\n\n\t\tsetPrevMinHeightValue( minHeight );\n\t\tsetPrevMinHeightUnit( minHeightUnit );\n\n\t\t// Set full height, and clear any aspect ratio value.\n\t\treturn setAttributes( {\n\t\t\tminHeight: 100,\n\t\t\tminHeightUnit: 'vh',\n\t\t\tstyle: cleanEmptyObject( {\n\t\t\t\t...attributes?.style,\n\t\t\t\tdimensions: {\n\t\t\t\t\t...attributes?.style?.dimensions,\n\t\t\t\t\taspectRatio: undefined, // Reset aspect ratio when minHeight is set.\n\t\t\t\t},\n\t\t\t} ),\n\t\t} );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls group=\"block\">\n\t\t\t\t<BlockAlignmentMatrixControl\n\t\t\t\t\tlabel={ __( 'Change content position' ) }\n\t\t\t\t\tvalue={ contentPosition }\n\t\t\t\t\tonChange={ ( nextPosition ) =>\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tcontentPosition: nextPosition,\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t\tisDisabled={ ! hasInnerBlocks }\n\t\t\t\t/>\n\t\t\t\t<FullHeightAlignmentControl\n\t\t\t\t\tisActive={ isMinFullHeight }\n\t\t\t\t\tonToggle={ toggleMinFullHeight }\n\t\t\t\t\tisDisabled={ ! hasInnerBlocks }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t\t<BlockControls group=\"other\">\n\t\t\t\t<MediaReplaceFlow\n\t\t\t\t\tmediaId={ id }\n\t\t\t\t\tmediaURL={ url }\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\taccept=\"image/*,video/*\"\n\t\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\t\tonToggleFeaturedImage={ toggleUseFeaturedImage }\n\t\t\t\t\tuseFeaturedImage={ useFeaturedImage }\n\t\t\t\t\tname={ ! url ? __( 'Add media' ) : __( 'Replace' ) }\n\t\t\t\t\tonReset={ onClearMedia }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t</>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}