{"version":3,"names":["_clsx","_interopRequireDefault","require","_blockEditor","_components","_i18n","_url","_hooks","_userControl","_jsxRuntime","AvatarInspectorControls","setAttributes","avatar","attributes","selectUser","jsx","InspectorControls","children","jsxs","PanelBody","title","__","RangeControl","__nextHasNoMarginBottom","__next40pxDefaultSize","label","onChange","newSize","size","min","minSize","max","maxSize","initialPosition","value","ToggleControl","isLink","checked","linkTarget","default","userId","ResizableAvatar","blockProps","isSelected","borderProps","useBorderProps","doubledSizedSrc","addQueryArgs","removeQueryArgs","src","s","ResizableBox","width","height","showHandle","onResizeStop","event","direction","elt","delta","parseInt","lockAspectRatio","enable","top","right","isRTL","bottom","left","minWidth","maxWidth","alt","className","clsx","style","CommentEdit","context","commentId","useBlockProps","useCommentAvatar","Fragment","href","onClick","preventDefault","UserEdit","postId","postType","useUserAvatar","Edit","props"],"sources":["@wordpress/block-library/src/avatar/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tInspectorControls,\n\tuseBlockProps,\n\t__experimentalUseBorderProps as useBorderProps,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tRangeControl,\n\tResizableBox,\n\tToggleControl,\n} from '@wordpress/components';\nimport { __, isRTL } from '@wordpress/i18n';\nimport { addQueryArgs, removeQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { useUserAvatar, useCommentAvatar } from './hooks';\nimport UserControl from './user-control';\n\nconst AvatarInspectorControls = ( {\n\tsetAttributes,\n\tavatar,\n\tattributes,\n\tselectUser,\n} ) => (\n\t<InspectorControls>\n\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t<RangeControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tlabel={ __( 'Image size' ) }\n\t\t\t\tonChange={ ( newSize ) =>\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tsize: newSize,\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t\tmin={ avatar.minSize }\n\t\t\t\tmax={ avatar.maxSize }\n\t\t\t\tinitialPosition={ attributes?.size }\n\t\t\t\tvalue={ attributes?.size }\n\t\t\t/>\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Link to user profile' ) }\n\t\t\t\tonChange={ () =>\n\t\t\t\t\tsetAttributes( { isLink: ! attributes.isLink } )\n\t\t\t\t}\n\t\t\t\tchecked={ attributes.isLink }\n\t\t\t/>\n\t\t\t{ attributes.isLink && (\n\t\t\t\t<ToggleControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tlinkTarget: value ? '_blank' : '_self',\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t\tchecked={ attributes.linkTarget === '_blank' }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ selectUser && (\n\t\t\t\t<UserControl\n\t\t\t\t\tvalue={ attributes?.userId }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tuserId: value,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</PanelBody>\n\t</InspectorControls>\n);\n\nconst ResizableAvatar = ( {\n\tsetAttributes,\n\tattributes,\n\tavatar,\n\tblockProps,\n\tisSelected,\n} ) => {\n\tconst borderProps = useBorderProps( attributes );\n\tconst doubledSizedSrc = addQueryArgs(\n\t\tremoveQueryArgs( avatar?.src, [ 's' ] ),\n\t\t{\n\t\t\ts: attributes?.size * 2,\n\t\t}\n\t);\n\treturn (\n\t\t<div { ...blockProps }>\n\t\t\t<ResizableBox\n\t\t\t\tsize={ {\n\t\t\t\t\twidth: attributes.size,\n\t\t\t\t\theight: attributes.size,\n\t\t\t\t} }\n\t\t\t\tshowHandle={ isSelected }\n\t\t\t\tonResizeStop={ ( event, direction, elt, delta ) => {\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tsize: parseInt(\n\t\t\t\t\t\t\tattributes.size + ( delta.height || delta.width ),\n\t\t\t\t\t\t\t10\n\t\t\t\t\t\t),\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tlockAspectRatio\n\t\t\t\tenable={ {\n\t\t\t\t\ttop: false,\n\t\t\t\t\tright: ! isRTL(),\n\t\t\t\t\tbottom: true,\n\t\t\t\t\tleft: isRTL(),\n\t\t\t\t} }\n\t\t\t\tminWidth={ avatar.minSize }\n\t\t\t\tmaxWidth={ avatar.maxSize }\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tsrc={ doubledSizedSrc }\n\t\t\t\t\talt={ avatar.alt }\n\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t'avatar',\n\t\t\t\t\t\t'avatar-' + attributes.size,\n\t\t\t\t\t\t'photo',\n\t\t\t\t\t\t'wp-block-avatar__image',\n\t\t\t\t\t\tborderProps.className\n\t\t\t\t\t) }\n\t\t\t\t\tstyle={ borderProps.style }\n\t\t\t\t/>\n\t\t\t</ResizableBox>\n\t\t</div>\n\t);\n};\nconst CommentEdit = ( { attributes, context, setAttributes, isSelected } ) => {\n\tconst { commentId } = context;\n\tconst blockProps = useBlockProps();\n\tconst avatar = useCommentAvatar( { commentId } );\n\treturn (\n\t\t<>\n\t\t\t<AvatarInspectorControls\n\t\t\t\tavatar={ avatar }\n\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\tattributes={ attributes }\n\t\t\t\tselectUser={ false }\n\t\t\t/>\n\t\t\t{ attributes.isLink ? (\n\t\t\t\t<a\n\t\t\t\t\thref=\"#avatar-pseudo-link\"\n\t\t\t\t\tclassName=\"wp-block-avatar__link\"\n\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\n\t\t\t\t>\n\t\t\t\t\t<ResizableAvatar\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tavatar={ avatar }\n\t\t\t\t\t\tblockProps={ blockProps }\n\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t) : (\n\t\t\t\t<ResizableAvatar\n\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\tavatar={ avatar }\n\t\t\t\t\tblockProps={ blockProps }\n\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nconst UserEdit = ( { attributes, context, setAttributes, isSelected } ) => {\n\tconst { postId, postType } = context;\n\tconst avatar = useUserAvatar( {\n\t\tuserId: attributes?.userId,\n\t\tpostId,\n\t\tpostType,\n\t} );\n\tconst blockProps = useBlockProps();\n\treturn (\n\t\t<>\n\t\t\t<AvatarInspectorControls\n\t\t\t\tselectUser\n\t\t\t\tattributes={ attributes }\n\t\t\t\tavatar={ avatar }\n\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t/>\n\t\t\t{ attributes.isLink ? (\n\t\t\t\t<a\n\t\t\t\t\thref=\"#avatar-pseudo-link\"\n\t\t\t\t\tclassName=\"wp-block-avatar__link\"\n\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\n\t\t\t\t>\n\t\t\t\t\t<ResizableAvatar\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tavatar={ avatar }\n\t\t\t\t\t\tblockProps={ blockProps }\n\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t) : (\n\t\t\t\t<ResizableAvatar\n\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\tavatar={ avatar }\n\t\t\t\t\tblockProps={ blockProps }\n\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport default function Edit( props ) {\n\t// Don't show the Comment Edit controls if we have a comment ID set, or if we're in the Site Editor (where it is `null`).\n\tif ( props?.context?.commentId || props?.context?.commentId === null ) {\n\t\treturn <CommentEdit { ...props } />;\n\t}\n\treturn <UserEdit { ...props } />;\n}\n"],"mappings":"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","ignoreList":[]}