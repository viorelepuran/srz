{"version":3,"names":["_element","require","_i18n","_notices","_data","_blockEditor","_components","_hooks","_mapTemplatePartToBlockPattern","_searchPatterns","_jsxRuntime","TemplatePartSelectionModal","setAttributes","onClose","templatePartId","area","clientId","searchValue","setSearchValue","useState","templateParts","useAlternativeTemplateParts","filteredTemplateParts","useMemo","partsAsPatterns","map","templatePart","mapTemplatePartToBlockPattern","searchPatterns","blockPatterns","useAlternativeBlockPatterns","filteredBlockPatterns","createSuccessNotice","useDispatch","noticesStore","onTemplatePartSelect","slug","theme","undefined","sprintf","__","title","rendered","type","hasTemplateParts","length","hasBlockPatterns","jsxs","className","children","jsx","SearchControl","__nextHasNoMarginBottom","onChange","value","label","placeholder","__experimentalBlockPatternsList","onClickPattern","pattern","__experimentalHStack","alignment"],"sources":["@wordpress/block-library/src/template-part/edit/selection-modal.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useMemo, useState } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { useDispatch } from '@wordpress/data';\nimport { __experimentalBlockPatternsList as BlockPatternsList } from '@wordpress/block-editor';\nimport {\n\tSearchControl,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\tuseAlternativeBlockPatterns,\n\tuseAlternativeTemplateParts,\n} from './utils/hooks';\nimport { mapTemplatePartToBlockPattern } from './utils/map-template-part-to-block-pattern';\nimport { searchPatterns } from '../../utils/search-patterns';\n\nexport default function TemplatePartSelectionModal( {\n\tsetAttributes,\n\tonClose,\n\ttemplatePartId = null,\n\tarea,\n\tclientId,\n} ) {\n\tconst [ searchValue, setSearchValue ] = useState( '' );\n\tconst { templateParts } = useAlternativeTemplateParts(\n\t\tarea,\n\t\ttemplatePartId\n\t);\n\n\t// We can map template parts to block patters to reuse the BlockPatternsList UI\n\tconst filteredTemplateParts = useMemo( () => {\n\t\tconst partsAsPatterns = templateParts.map( ( templatePart ) =>\n\t\t\tmapTemplatePartToBlockPattern( templatePart )\n\t\t);\n\n\t\treturn searchPatterns( partsAsPatterns, searchValue );\n\t}, [ templateParts, searchValue ] );\n\tconst blockPatterns = useAlternativeBlockPatterns( area, clientId );\n\tconst filteredBlockPatterns = useMemo( () => {\n\t\treturn searchPatterns( blockPatterns, searchValue );\n\t}, [ blockPatterns, searchValue ] );\n\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\n\n\tconst onTemplatePartSelect = ( templatePart ) => {\n\t\tsetAttributes( {\n\t\t\tslug: templatePart.slug,\n\t\t\ttheme: templatePart.theme,\n\t\t\tarea: undefined,\n\t\t} );\n\t\tcreateSuccessNotice(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: template part title. */\n\t\t\t\t__( 'Template Part \"%s\" inserted.' ),\n\t\t\t\ttemplatePart.title?.rendered || templatePart.slug\n\t\t\t),\n\t\t\t{\n\t\t\t\ttype: 'snackbar',\n\t\t\t}\n\t\t);\n\t\tonClose();\n\t};\n\n\tconst hasTemplateParts = !! filteredTemplateParts.length;\n\tconst hasBlockPatterns = !! filteredBlockPatterns.length;\n\n\treturn (\n\t\t<div className=\"block-library-template-part__selection-content\">\n\t\t\t<div className=\"block-library-template-part__selection-search\">\n\t\t\t\t<SearchControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tonChange={ setSearchValue }\n\t\t\t\t\tvalue={ searchValue }\n\t\t\t\t\tlabel={ __( 'Search' ) }\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{ hasTemplateParts && (\n\t\t\t\t<div>\n\t\t\t\t\t<h2>{ __( 'Existing template parts' ) }</h2>\n\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\tblockPatterns={ filteredTemplateParts }\n\t\t\t\t\t\tonClickPattern={ ( pattern ) => {\n\t\t\t\t\t\t\tonTemplatePartSelect( pattern.templatePart );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) }\n\n\t\t\t{ ! hasTemplateParts && ! hasBlockPatterns && (\n\t\t\t\t<HStack alignment=\"center\">\n\t\t\t\t\t<p>{ __( 'No results found.' ) }</p>\n\t\t\t\t</HStack>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}