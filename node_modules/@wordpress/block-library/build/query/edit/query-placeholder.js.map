{"version":3,"names":["_data","require","_blocks","_element","_blockEditor","_components","_i18n","_utils","_patternSelection","_jsxRuntime","QueryPlaceholder","attributes","clientId","name","openPatternSelectionModal","isStartingBlank","setIsStartingBlank","useState","blockProps","useBlockProps","blockType","activeBlockVariation","useSelect","select","getActiveBlockVariation","getBlockType","blocksStore","hasPatterns","useBlockPatterns","length","icon","src","label","title","jsx","QueryVariationPicker","children","jsxs","Placeholder","instructions","__","Button","__next40pxDefaultSize","variant","onClick","scopeVariations","useScopedBlockVariations","replaceInnerBlocks","useDispatch","blockEditorStore","__experimentalBlockVariationPicker","variations","onSelect","variation","innerBlocks","createBlocksFromInnerBlocksTemplate"],"sources":["@wordpress/block-library/src/query/edit/query-placeholder.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tcreateBlocksFromInnerBlocksTemplate,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useState } from '@wordpress/element';\nimport {\n\tuseBlockProps,\n\tstore as blockEditorStore,\n\t__experimentalBlockVariationPicker,\n} from '@wordpress/block-editor';\nimport { Button, Placeholder } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useScopedBlockVariations } from '../utils';\nimport { useBlockPatterns } from './pattern-selection';\n\nexport default function QueryPlaceholder( {\n\tattributes,\n\tclientId,\n\tname,\n\topenPatternSelectionModal,\n} ) {\n\tconst [ isStartingBlank, setIsStartingBlank ] = useState( false );\n\tconst blockProps = useBlockProps();\n\tconst { blockType, activeBlockVariation } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getActiveBlockVariation, getBlockType } =\n\t\t\t\tselect( blocksStore );\n\t\t\treturn {\n\t\t\t\tblockType: getBlockType( name ),\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\n\t\t\t\t\tname,\n\t\t\t\t\tattributes\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ name, attributes ]\n\t);\n\tconst hasPatterns = !! useBlockPatterns( clientId, attributes ).length;\n\tconst icon =\n\t\tactiveBlockVariation?.icon?.src ||\n\t\tactiveBlockVariation?.icon ||\n\t\tblockType?.icon?.src;\n\tconst label = activeBlockVariation?.title || blockType?.title;\n\tif ( isStartingBlank ) {\n\t\treturn (\n\t\t\t<QueryVariationPicker\n\t\t\t\tclientId={ clientId }\n\t\t\t\tattributes={ attributes }\n\t\t\t\ticon={ icon }\n\t\t\t\tlabel={ label }\n\t\t\t/>\n\t\t);\n\t}\n\treturn (\n\t\t<div { ...blockProps }>\n\t\t\t<Placeholder\n\t\t\t\ticon={ icon }\n\t\t\t\tlabel={ label }\n\t\t\t\tinstructions={ __(\n\t\t\t\t\t'Choose a pattern for the query loop or start blank.'\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t{ !! hasPatterns && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tonClick={ openPatternSelectionModal }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Choose' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\n\t\t\t\t<Button\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tsetIsStartingBlank( true );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Start blank' ) }\n\t\t\t\t</Button>\n\t\t\t</Placeholder>\n\t\t</div>\n\t);\n}\n\nfunction QueryVariationPicker( { clientId, attributes, icon, label } ) {\n\tconst scopeVariations = useScopedBlockVariations( attributes );\n\tconst { replaceInnerBlocks } = useDispatch( blockEditorStore );\n\tconst blockProps = useBlockProps();\n\treturn (\n\t\t<div { ...blockProps }>\n\t\t\t<__experimentalBlockVariationPicker\n\t\t\t\ticon={ icon }\n\t\t\t\tlabel={ label }\n\t\t\t\tvariations={ scopeVariations }\n\t\t\t\tonSelect={ ( variation ) => {\n\t\t\t\t\tif ( variation.innerBlocks ) {\n\t\t\t\t\t\treplaceInnerBlocks(\n\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate(\n\t\t\t\t\t\t\t\tvariation.innerBlocks\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}