{"version":3,"names":["_element","require","_compose","useDeprecatedOpacity","opacity","currentColor","setAttributes","deprecatedOpacityWithNoColor","setDeprecatedOpacityWithNoColor","useState","previousColor","usePrevious","useEffect"],"sources":["@wordpress/block-library/src/separator/use-deprecated-opacity.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { usePrevious } from '@wordpress/compose';\n\nexport default function useDeprecatedOpacity(\n\topacity,\n\tcurrentColor,\n\tsetAttributes\n) {\n\tconst [ deprecatedOpacityWithNoColor, setDeprecatedOpacityWithNoColor ] =\n\t\tuseState( false );\n\tconst previousColor = usePrevious( currentColor );\n\n\t// A separator with no color set will always have previousColor set to undefined,\n\t// and we need to differentiate these from those with color set that will return\n\t// previousColor as undefined on the first render.\n\tuseEffect( () => {\n\t\tif ( opacity === 'css' && ! currentColor && ! previousColor ) {\n\t\t\tsetDeprecatedOpacityWithNoColor( true );\n\t\t}\n\t}, [ currentColor, previousColor, opacity ] );\n\n\t// For deprecated blocks, that have a default 0.4 css opacity set, we\n\t// need to remove this if the current color is changed, or a color is added.\n\t// In these instances the opacity attribute is set back to the default of\n\t// alpha-channel which allows a new custom opacity to be set via the color picker.\n\tuseEffect( () => {\n\t\tif (\n\t\t\topacity === 'css' &&\n\t\t\t( ( deprecatedOpacityWithNoColor && currentColor ) ||\n\t\t\t\t( previousColor && currentColor !== previousColor ) )\n\t\t) {\n\t\t\tsetAttributes( { opacity: 'alpha-channel' } );\n\t\t\tsetDeprecatedOpacityWithNoColor( false );\n\t\t}\n\t}, [ deprecatedOpacityWithNoColor, currentColor, previousColor ] );\n}\n"],"mappings":";;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAJA;AACA;AACA;;AAIe,SAASE,oBAAoBA,CAC3CC,OAAO,EACPC,YAAY,EACZC,aAAa,EACZ;EACD,MAAM,CAAEC,4BAA4B,EAAEC,+BAA+B,CAAE,GACtE,IAAAC,iBAAQ,EAAE,KAAM,CAAC;EAClB,MAAMC,aAAa,GAAG,IAAAC,oBAAW,EAAEN,YAAa,CAAC;;EAEjD;EACA;EACA;EACA,IAAAO,kBAAS,EAAE,MAAM;IAChB,IAAKR,OAAO,KAAK,KAAK,IAAI,CAAEC,YAAY,IAAI,CAAEK,aAAa,EAAG;MAC7DF,+BAA+B,CAAE,IAAK,CAAC;IACxC;EACD,CAAC,EAAE,CAAEH,YAAY,EAAEK,aAAa,EAAEN,OAAO,CAAG,CAAC;;EAE7C;EACA;EACA;EACA;EACA,IAAAQ,kBAAS,EAAE,MAAM;IAChB,IACCR,OAAO,KAAK,KAAK,KACbG,4BAA4B,IAAIF,YAAY,IAC7CK,aAAa,IAAIL,YAAY,KAAKK,aAAe,CAAE,EACrD;MACDJ,aAAa,CAAE;QAAEF,OAAO,EAAE;MAAgB,CAAE,CAAC;MAC7CI,+BAA+B,CAAE,KAAM,CAAC;IACzC;EACD,CAAC,EAAE,CAAED,4BAA4B,EAAEF,YAAY,EAAEK,aAAa,CAAG,CAAC;AACnE","ignoreList":[]}