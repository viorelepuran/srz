{"version":3,"names":["_clsx","_interopRequireDefault","require","_components","_blockEditor","_i18n","_compose","_data","_element","_blob","_notices","_icons","_imageFill","_jsxRuntime","ALLOWED_MEDIA_TYPES","noop","ResizableBoxContainer","forwardRef","isSelected","isStackedOnMobile","props","ref","isMobile","useViewportMatch","jsx","ResizableBox","showHandle","ToolbarEditButton","mediaId","mediaUrl","onSelectMedia","toggleUseFeaturedImage","useFeaturedImage","BlockControls","group","children","MediaReplaceFlow","mediaURL","allowedTypes","accept","onSelect","onToggleFeaturedImage","onReset","undefined","PlaceholderContainer","className","createErrorNotice","useDispatch","noticesStore","onUploadError","message","type","MediaPlaceholder","icon","BlockIcon","labels","title","__","onError","disableMediaButtons","MediaContainer","commitWidthChange","focalPoint","imageFill","mediaAlt","mediaPosition","mediaType","mediaWidth","onWidthChange","enableResize","featuredImageURL","featuredImageAlt","refMedia","isTemporaryMedia","isBlobURL","toggleSelection","blockEditorStore","onResizeStart","onResize","event","direction","elt","parseInt","style","width","onResizeStop","enablePositions","right","left","positionStyles","imageFillStyles","mediaTypeRenderers","image","src","alt","video","controls","jsxs","as","clsx","size","minWidth","maxWidth","enable","axis","Spinner","Placeholder","withIllustration","_default","exports","default"],"sources":["@wordpress/block-library/src/media-text/media-container.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { ResizableBox, Spinner, Placeholder } from '@wordpress/components';\nimport {\n\tBlockControls,\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaReplaceFlow,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useDispatch } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { isBlobURL } from '@wordpress/blob';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { media as icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { imageFillStyles } from './image-fill';\n\n/**\n * Constants\n */\nconst ALLOWED_MEDIA_TYPES = [ 'image', 'video' ];\nconst noop = () => {};\n\nconst ResizableBoxContainer = forwardRef(\n\t( { isSelected, isStackedOnMobile, ...props }, ref ) => {\n\t\tconst isMobile = useViewportMatch( 'small', '<' );\n\t\treturn (\n\t\t\t<ResizableBox\n\t\t\t\tref={ ref }\n\t\t\t\tshowHandle={\n\t\t\t\t\tisSelected && ( ! isMobile || ! isStackedOnMobile )\n\t\t\t\t}\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t);\n\t}\n);\n\nfunction ToolbarEditButton( {\n\tmediaId,\n\tmediaUrl,\n\tonSelectMedia,\n\ttoggleUseFeaturedImage,\n\tuseFeaturedImage,\n} ) {\n\treturn (\n\t\t<BlockControls group=\"other\">\n\t\t\t<MediaReplaceFlow\n\t\t\t\tmediaId={ mediaId }\n\t\t\t\tmediaURL={ mediaUrl }\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\taccept=\"image/*,video/*\"\n\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\tonToggleFeaturedImage={ toggleUseFeaturedImage }\n\t\t\t\tuseFeaturedImage={ useFeaturedImage }\n\t\t\t\tonReset={ () => onSelectMedia( undefined ) }\n\t\t\t/>\n\t\t</BlockControls>\n\t);\n}\n\nfunction PlaceholderContainer( {\n\tclassName,\n\tmediaUrl,\n\tonSelectMedia,\n\ttoggleUseFeaturedImage,\n} ) {\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\n\tconst onUploadError = ( message ) => {\n\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t};\n\n\treturn (\n\t\t<MediaPlaceholder\n\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\tlabels={ {\n\t\t\t\ttitle: __( 'Media area' ),\n\t\t\t} }\n\t\t\tclassName={ className }\n\t\t\tonSelect={ onSelectMedia }\n\t\t\taccept=\"image/*,video/*\"\n\t\t\tonToggleFeaturedImage={ toggleUseFeaturedImage }\n\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\tonError={ onUploadError }\n\t\t\tdisableMediaButtons={ mediaUrl }\n\t\t/>\n\t);\n}\n\nfunction MediaContainer( props, ref ) {\n\tconst {\n\t\tclassName,\n\t\tcommitWidthChange,\n\t\tfocalPoint,\n\t\timageFill,\n\t\tisSelected,\n\t\tisStackedOnMobile,\n\t\tmediaAlt,\n\t\tmediaId,\n\t\tmediaPosition,\n\t\tmediaType,\n\t\tmediaUrl,\n\t\tmediaWidth,\n\t\tonSelectMedia,\n\t\tonWidthChange,\n\t\tenableResize,\n\t\ttoggleUseFeaturedImage,\n\t\tuseFeaturedImage,\n\t\tfeaturedImageURL,\n\t\tfeaturedImageAlt,\n\t\trefMedia,\n\t} = props;\n\n\tconst isTemporaryMedia = ! mediaId && isBlobURL( mediaUrl );\n\n\tconst { toggleSelection } = useDispatch( blockEditorStore );\n\n\tif ( mediaUrl || featuredImageURL || useFeaturedImage ) {\n\t\tconst onResizeStart = () => {\n\t\t\ttoggleSelection( false );\n\t\t};\n\t\tconst onResize = ( event, direction, elt ) => {\n\t\t\tonWidthChange( parseInt( elt.style.width ) );\n\t\t};\n\t\tconst onResizeStop = ( event, direction, elt ) => {\n\t\t\ttoggleSelection( true );\n\t\t\tcommitWidthChange( parseInt( elt.style.width ) );\n\t\t};\n\t\tconst enablePositions = {\n\t\t\tright: enableResize && mediaPosition === 'left',\n\t\t\tleft: enableResize && mediaPosition === 'right',\n\t\t};\n\n\t\tconst positionStyles =\n\t\t\tmediaType === 'image' && imageFill\n\t\t\t\t? imageFillStyles( mediaUrl || featuredImageURL, focalPoint )\n\t\t\t\t: {};\n\n\t\tconst mediaTypeRenderers = {\n\t\t\timage: () =>\n\t\t\t\tuseFeaturedImage && featuredImageURL ? (\n\t\t\t\t\t<img\n\t\t\t\t\t\tref={ refMedia }\n\t\t\t\t\t\tsrc={ featuredImageURL }\n\t\t\t\t\t\talt={ featuredImageAlt }\n\t\t\t\t\t\tstyle={ positionStyles }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\tmediaUrl && (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tref={ refMedia }\n\t\t\t\t\t\t\tsrc={ mediaUrl }\n\t\t\t\t\t\t\talt={ mediaAlt }\n\t\t\t\t\t\t\tstyle={ positionStyles }\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\tvideo: () => <video controls ref={ refMedia } src={ mediaUrl } />,\n\t\t};\n\n\t\treturn (\n\t\t\t<ResizableBoxContainer\n\t\t\t\tas=\"figure\"\n\t\t\t\tclassName={ clsx(\n\t\t\t\t\tclassName,\n\t\t\t\t\t'editor-media-container__resizer',\n\t\t\t\t\t{ 'is-transient': isTemporaryMedia }\n\t\t\t\t) }\n\t\t\t\tsize={ { width: mediaWidth + '%' } }\n\t\t\t\tminWidth=\"10%\"\n\t\t\t\tmaxWidth=\"100%\"\n\t\t\t\tenable={ enablePositions }\n\t\t\t\tonResizeStart={ onResizeStart }\n\t\t\t\tonResize={ onResize }\n\t\t\t\tonResizeStop={ onResizeStop }\n\t\t\t\taxis=\"x\"\n\t\t\t\tisSelected={ isSelected }\n\t\t\t\tisStackedOnMobile={ isStackedOnMobile }\n\t\t\t\tref={ ref }\n\t\t\t>\n\t\t\t\t<ToolbarEditButton\n\t\t\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\t\t\tmediaUrl={\n\t\t\t\t\t\tuseFeaturedImage && featuredImageURL\n\t\t\t\t\t\t\t? featuredImageURL\n\t\t\t\t\t\t\t: mediaUrl\n\t\t\t\t\t}\n\t\t\t\t\tmediaId={ mediaId }\n\t\t\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t\t\t/>\n\t\t\t\t{ ( mediaTypeRenderers[ mediaType ] || noop )() }\n\t\t\t\t{ isTemporaryMedia && <Spinner /> }\n\t\t\t\t{ ! useFeaturedImage && <PlaceholderContainer { ...props } /> }\n\t\t\t\t{ ! featuredImageURL && useFeaturedImage && (\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\tclassName=\"wp-block-media-text--placeholder-image\"\n\t\t\t\t\t\tstyle={ positionStyles }\n\t\t\t\t\t\twithIllustration\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</ResizableBoxContainer>\n\t\t);\n\t}\n\n\treturn <PlaceholderContainer { ...props } />;\n}\n\nexport default forwardRef( MediaContainer );\n"],"mappings":"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","ignoreList":[]}