{"version":3,"names":["__","getBlockBindingsSource","getBlockBindingsSources","getBlockType","__experimentalItemGroup","ItemGroup","__experimentalItem","Item","__experimentalText","Text","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","__experimentalVStack","VStack","privateApis","componentsPrivateApis","useSelect","useContext","Fragment","useViewportMatch","canBindAttribute","getBindableAttributes","useBlockBindingsUtils","unlock","InspectorControls","BlockContext","useBlockEditContext","store","blockEditorStore","jsx","_jsx","jsxs","_jsxs","_Fragment","Menu","EMPTY_OBJECT","useToolsPanelDropdownMenuProps","isMobile","popoverProps","placement","offset","BlockBindingsPanelMenuContent","fieldsList","attribute","binding","clientId","registeredSources","updateBlockBindings","currentKey","args","key","attributeType","select","name","blockName","getBlock","_attributeType","attributes","type","children","Object","entries","map","fields","i","Group","keys","length","GroupLabel","label","filter","RadioItem","onChange","source","value","checked","ItemLabel","ItemHelpText","Separator","BlockBindingsAttribute","sourceName","sourceProps","isSourceInvalid","className","spacing","truncate","variant","isDestructive","ReadOnlyBlockBindingsPanelItems","bindings","EditableBlockBindingsPanelItems","hasValue","onDeselect","undefined","TriggerButton","render","Popover","gutter","BlockBindingsPanel","metadata","blockContext","removeAllBlockBindings","bindableAttributes","dropdownMenuProps","_fieldsList","canUpdateBlockBindings","forEach","getFieldsList","usesContext","context","sourceList","values","getSettings","filteredBindings","readOnly","group","resetAll","isBordered","isSeparated","as","edit","attributeKeys","hasSupport"],"sources":["@wordpress/block-editor/src/hooks/block-bindings.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tgetBlockBindingsSource,\n\tgetBlockBindingsSources,\n\tgetBlockType,\n} from '@wordpress/blocks';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalText as Text,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalVStack as VStack,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useContext, Fragment } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tcanBindAttribute,\n\tgetBindableAttributes,\n\tuseBlockBindingsUtils,\n} from '../utils/block-bindings';\nimport { unlock } from '../lock-unlock';\nimport InspectorControls from '../components/inspector-controls';\nimport BlockContext from '../components/block-context';\nimport { useBlockEditContext } from '../components/block-edit';\nimport { store as blockEditorStore } from '../store';\n\nconst { Menu } = unlock( componentsPrivateApis );\n\nconst EMPTY_OBJECT = {};\n\nconst useToolsPanelDropdownMenuProps = () => {\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn ! isMobile\n\t\t? {\n\t\t\t\tpopoverProps: {\n\t\t\t\t\tplacement: 'left-start',\n\t\t\t\t\t// For non-mobile, inner sidebar width (248px) - button width (24px) - border (1px) + padding (16px) + spacing (20px)\n\t\t\t\t\toffset: 259,\n\t\t\t\t},\n\t\t  }\n\t\t: {};\n};\n\nfunction BlockBindingsPanelMenuContent( { fieldsList, attribute, binding } ) {\n\tconst { clientId } = useBlockEditContext();\n\tconst registeredSources = getBlockBindingsSources();\n\tconst { updateBlockBindings } = useBlockBindingsUtils();\n\tconst currentKey = binding?.args?.key;\n\tconst attributeType = useSelect(\n\t\t( select ) => {\n\t\t\tconst { name: blockName } =\n\t\t\t\tselect( blockEditorStore ).getBlock( clientId );\n\t\t\tconst _attributeType =\n\t\t\t\tgetBlockType( blockName ).attributes?.[ attribute ]?.type;\n\t\t\treturn _attributeType === 'rich-text' ? 'string' : _attributeType;\n\t\t},\n\t\t[ clientId, attribute ]\n\t);\n\treturn (\n\t\t<>\n\t\t\t{ Object.entries( fieldsList ).map( ( [ name, fields ], i ) => (\n\t\t\t\t<Fragment key={ name }>\n\t\t\t\t\t<Menu.Group>\n\t\t\t\t\t\t{ Object.keys( fieldsList ).length > 1 && (\n\t\t\t\t\t\t\t<Menu.GroupLabel>\n\t\t\t\t\t\t\t\t{ registeredSources[ name ].label }\n\t\t\t\t\t\t\t</Menu.GroupLabel>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ Object.entries( fields )\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t( [ , args ] ) => args?.type === attributeType\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map( ( [ key, args ] ) => (\n\t\t\t\t\t\t\t\t<Menu.RadioItem\n\t\t\t\t\t\t\t\t\tkey={ key }\n\t\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\t\tupdateBlockBindings( {\n\t\t\t\t\t\t\t\t\t\t\t[ attribute ]: {\n\t\t\t\t\t\t\t\t\t\t\t\tsource: name,\n\t\t\t\t\t\t\t\t\t\t\t\targs: { key },\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tname={ attribute + '-binding' }\n\t\t\t\t\t\t\t\t\tvalue={ key }\n\t\t\t\t\t\t\t\t\tchecked={ key === currentKey }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Menu.ItemLabel>\n\t\t\t\t\t\t\t\t\t\t{ args?.label }\n\t\t\t\t\t\t\t\t\t</Menu.ItemLabel>\n\t\t\t\t\t\t\t\t\t<Menu.ItemHelpText>\n\t\t\t\t\t\t\t\t\t\t{ args?.value }\n\t\t\t\t\t\t\t\t\t</Menu.ItemHelpText>\n\t\t\t\t\t\t\t\t</Menu.RadioItem>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t</Menu.Group>\n\t\t\t\t\t{ i !== Object.keys( fieldsList ).length - 1 && (\n\t\t\t\t\t\t<Menu.Separator />\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\nfunction BlockBindingsAttribute( { attribute, binding, fieldsList } ) {\n\tconst { source: sourceName, args } = binding || {};\n\tconst sourceProps = getBlockBindingsSource( sourceName );\n\tconst isSourceInvalid = ! sourceProps;\n\treturn (\n\t\t<VStack className=\"block-editor-bindings__item\" spacing={ 0 }>\n\t\t\t<Text truncate>{ attribute }</Text>\n\t\t\t{ !! binding && (\n\t\t\t\t<Text\n\t\t\t\t\ttruncate\n\t\t\t\t\tvariant={ ! isSourceInvalid && 'muted' }\n\t\t\t\t\tisDestructive={ isSourceInvalid }\n\t\t\t\t>\n\t\t\t\t\t{ isSourceInvalid\n\t\t\t\t\t\t? __( 'Invalid source' )\n\t\t\t\t\t\t: fieldsList?.[ sourceName ]?.[ args?.key ]?.label ||\n\t\t\t\t\t\t  sourceProps?.label ||\n\t\t\t\t\t\t  sourceName }\n\t\t\t\t</Text>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n\nfunction ReadOnlyBlockBindingsPanelItems( { bindings, fieldsList } ) {\n\treturn (\n\t\t<>\n\t\t\t{ Object.entries( bindings ).map( ( [ attribute, binding ] ) => (\n\t\t\t\t<Item key={ attribute }>\n\t\t\t\t\t<BlockBindingsAttribute\n\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t/>\n\t\t\t\t</Item>\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\nfunction EditableBlockBindingsPanelItems( {\n\tattributes,\n\tbindings,\n\tfieldsList,\n} ) {\n\tconst { updateBlockBindings } = useBlockBindingsUtils();\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn (\n\t\t<>\n\t\t\t{ attributes.map( ( attribute ) => {\n\t\t\t\tconst binding = bindings[ attribute ];\n\t\t\t\treturn (\n\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\tkey={ attribute }\n\t\t\t\t\t\thasValue={ () => !! binding }\n\t\t\t\t\t\tlabel={ attribute }\n\t\t\t\t\t\tonDeselect={ () => {\n\t\t\t\t\t\t\tupdateBlockBindings( {\n\t\t\t\t\t\t\t\t[ attribute ]: undefined,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tplacement={\n\t\t\t\t\t\t\t\tisMobile ? 'bottom-start' : 'left-start'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Menu.TriggerButton render={ <Item /> }>\n\t\t\t\t\t\t\t\t<BlockBindingsAttribute\n\t\t\t\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Menu.TriggerButton>\n\t\t\t\t\t\t\t<Menu.Popover gutter={ isMobile ? 8 : 36 }>\n\t\t\t\t\t\t\t\t<BlockBindingsPanelMenuContent\n\t\t\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Menu.Popover>\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n\nexport const BlockBindingsPanel = ( { name: blockName, metadata } ) => {\n\tconst blockContext = useContext( BlockContext );\n\tconst { removeAllBlockBindings } = useBlockBindingsUtils();\n\tconst bindableAttributes = getBindableAttributes( blockName );\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\n\t// `useSelect` is used purposely here to ensure `getFieldsList`\n\t// is updated whenever there are updates in block context.\n\t// `source.getFieldsList` may also call a selector via `select`.\n\tconst _fieldsList = {};\n\tconst { fieldsList, canUpdateBlockBindings } = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! bindableAttributes || bindableAttributes.length === 0 ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\t\t\tconst registeredSources = getBlockBindingsSources();\n\t\t\tObject.entries( registeredSources ).forEach(\n\t\t\t\t( [ sourceName, { getFieldsList, usesContext } ] ) => {\n\t\t\t\t\tif ( getFieldsList ) {\n\t\t\t\t\t\t// Populate context.\n\t\t\t\t\t\tconst context = {};\n\t\t\t\t\t\tif ( usesContext?.length ) {\n\t\t\t\t\t\t\tfor ( const key of usesContext ) {\n\t\t\t\t\t\t\t\tcontext[ key ] = blockContext[ key ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst sourceList = getFieldsList( {\n\t\t\t\t\t\t\tselect,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t// Only add source if the list is not empty.\n\t\t\t\t\t\tif ( Object.keys( sourceList || {} ).length ) {\n\t\t\t\t\t\t\t_fieldsList[ sourceName ] = { ...sourceList };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tfieldsList:\n\t\t\t\t\tObject.values( _fieldsList ).length > 0\n\t\t\t\t\t\t? _fieldsList\n\t\t\t\t\t\t: EMPTY_OBJECT,\n\t\t\t\tcanUpdateBlockBindings:\n\t\t\t\t\tselect( blockEditorStore ).getSettings()\n\t\t\t\t\t\t.canUpdateBlockBindings,\n\t\t\t};\n\t\t},\n\t\t[ blockContext, bindableAttributes ]\n\t);\n\t// Return early if there are no bindable attributes.\n\tif ( ! bindableAttributes || bindableAttributes.length === 0 ) {\n\t\treturn null;\n\t}\n\t// Filter bindings to only show bindable attributes and remove pattern overrides.\n\tconst { bindings } = metadata || {};\n\tconst filteredBindings = { ...bindings };\n\tObject.keys( filteredBindings ).forEach( ( key ) => {\n\t\tif (\n\t\t\t! canBindAttribute( blockName, key ) ||\n\t\t\tfilteredBindings[ key ].source === 'core/pattern-overrides'\n\t\t) {\n\t\t\tdelete filteredBindings[ key ];\n\t\t}\n\t} );\n\n\t// Lock the UI when the user can't update bindings or there are no fields to connect to.\n\tconst readOnly =\n\t\t! canUpdateBlockBindings || ! Object.keys( fieldsList ).length;\n\n\tif ( readOnly && Object.keys( filteredBindings ).length === 0 ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<InspectorControls group=\"bindings\">\n\t\t\t<ToolsPanel\n\t\t\t\tlabel={ __( 'Attributes' ) }\n\t\t\t\tresetAll={ () => {\n\t\t\t\t\tremoveAllBlockBindings();\n\t\t\t\t} }\n\t\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t\t\tclassName=\"block-editor-bindings__panel\"\n\t\t\t>\n\t\t\t\t<ItemGroup isBordered isSeparated>\n\t\t\t\t\t{ readOnly ? (\n\t\t\t\t\t\t<ReadOnlyBlockBindingsPanelItems\n\t\t\t\t\t\t\tbindings={ filteredBindings }\n\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<EditableBlockBindingsPanelItems\n\t\t\t\t\t\t\tattributes={ bindableAttributes }\n\t\t\t\t\t\t\tbindings={ filteredBindings }\n\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ItemGroup>\n\t\t\t\t{ /*\n\t\t\t\t\tUse a div element to make the ToolsPanelHiddenInnerWrapper\n\t\t\t\t\ttoggle the visibility of this help text automatically.\n\t\t\t\t*/ }\n\t\t\t\t<Text as=\"div\" variant=\"muted\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Attributes connected to custom fields or other dynamic data.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t</Text>\n\t\t\t</ToolsPanel>\n\t\t</InspectorControls>\n\t);\n};\n\nexport default {\n\tedit: BlockBindingsPanel,\n\tattributeKeys: [ 'metadata' ],\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SACCC,sBAAsB,EACtBC,uBAAuB,EACvBC,YAAY,QACN,mBAAmB;AAC1B,SACCC,uBAAuB,IAAIC,SAAS,EACpCC,kBAAkB,IAAIC,IAAI,EAC1BC,kBAAkB,IAAIC,IAAI,EAC1BC,wBAAwB,IAAIC,UAAU,EACtCC,4BAA4B,IAAIC,cAAc,EAC9CC,oBAAoB,IAAIC,MAAM,EAC9BC,WAAW,IAAIC,qBAAqB,QAC9B,uBAAuB;AAC9B,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,UAAU,EAAEC,QAAQ,QAAQ,oBAAoB;AACzD,SAASC,gBAAgB,QAAQ,oBAAoB;;AAErD;AACA;AACA;AACA,SACCC,gBAAgB,EAChBC,qBAAqB,EACrBC,qBAAqB,QACf,yBAAyB;AAChC,SAASC,MAAM,QAAQ,gBAAgB;AACvC,OAAOC,iBAAiB,MAAM,kCAAkC;AAChE,OAAOC,YAAY,MAAM,6BAA6B;AACtD,SAASC,mBAAmB,QAAQ,0BAA0B;AAC9D,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,UAAU;AAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA,EAAAd,QAAA,IAAAe,SAAA;AAErD,MAAM;EAAEC;AAAK,CAAC,GAAGX,MAAM,CAAER,qBAAsB,CAAC;AAEhD,MAAMoB,YAAY,GAAG,CAAC,CAAC;AAEvB,MAAMC,8BAA8B,GAAGA,CAAA,KAAM;EAC5C,MAAMC,QAAQ,GAAGlB,gBAAgB,CAAE,QAAQ,EAAE,GAAI,CAAC;EAClD,OAAO,CAAEkB,QAAQ,GACd;IACAC,YAAY,EAAE;MACbC,SAAS,EAAE,YAAY;MACvB;MACAC,MAAM,EAAE;IACT;EACA,CAAC,GACD,CAAC,CAAC;AACN,CAAC;AAED,SAASC,6BAA6BA,CAAE;EAAEC,UAAU;EAAEC,SAAS;EAAEC;AAAQ,CAAC,EAAG;EAC5E,MAAM;IAAEC;EAAS,CAAC,GAAGnB,mBAAmB,CAAC,CAAC;EAC1C,MAAMoB,iBAAiB,GAAG9C,uBAAuB,CAAC,CAAC;EACnD,MAAM;IAAE+C;EAAoB,CAAC,GAAGzB,qBAAqB,CAAC,CAAC;EACvD,MAAM0B,UAAU,GAAGJ,OAAO,EAAEK,IAAI,EAAEC,GAAG;EACrC,MAAMC,aAAa,GAAGnC,SAAS,CAC5BoC,MAAM,IAAM;IACb,MAAM;MAAEC,IAAI,EAAEC;IAAU,CAAC,GACxBF,MAAM,CAAExB,gBAAiB,CAAC,CAAC2B,QAAQ,CAAEV,QAAS,CAAC;IAChD,MAAMW,cAAc,GACnBvD,YAAY,CAAEqD,SAAU,CAAC,CAACG,UAAU,GAAId,SAAS,CAAE,EAAEe,IAAI;IAC1D,OAAOF,cAAc,KAAK,WAAW,GAAG,QAAQ,GAAGA,cAAc;EAClE,CAAC,EACD,CAAEX,QAAQ,EAAEF,SAAS,CACtB,CAAC;EACD,oBACCb,IAAA,CAAAG,SAAA;IAAA0B,QAAA,EACGC,MAAM,CAACC,OAAO,CAAEnB,UAAW,CAAC,CAACoB,GAAG,CAAE,CAAE,CAAET,IAAI,EAAEU,MAAM,CAAE,EAAEC,CAAC,kBACxDhC,KAAA,CAACd,QAAQ;MAAAyC,QAAA,gBACR3B,KAAA,CAACE,IAAI,CAAC+B,KAAK;QAAAN,QAAA,GACRC,MAAM,CAACM,IAAI,CAAExB,UAAW,CAAC,CAACyB,MAAM,GAAG,CAAC,iBACrCrC,IAAA,CAACI,IAAI,CAACkC,UAAU;UAAAT,QAAA,EACbb,iBAAiB,CAAEO,IAAI,CAAE,CAACgB;QAAK,CACjB,CACjB,EACCT,MAAM,CAACC,OAAO,CAAEE,MAAO,CAAC,CACxBO,MAAM,CACN,CAAE,GAAIrB,IAAI,CAAE,KAAMA,IAAI,EAAES,IAAI,KAAKP,aAClC,CAAC,CACAW,GAAG,CAAE,CAAE,CAAEZ,GAAG,EAAED,IAAI,CAAE,kBACpBjB,KAAA,CAACE,IAAI,CAACqC,SAAS;UAEdC,QAAQ,EAAGA,CAAA,KACVzB,mBAAmB,CAAE;YACpB,CAAEJ,SAAS,GAAI;cACd8B,MAAM,EAAEpB,IAAI;cACZJ,IAAI,EAAE;gBAAEC;cAAI;YACb;UACD,CAAE,CACF;UACDG,IAAI,EAAGV,SAAS,GAAG,UAAY;UAC/B+B,KAAK,EAAGxB,GAAK;UACbyB,OAAO,EAAGzB,GAAG,KAAKF,UAAY;UAAAW,QAAA,gBAE9B7B,IAAA,CAACI,IAAI,CAAC0C,SAAS;YAAAjB,QAAA,EACZV,IAAI,EAAEoB;UAAK,CACE,CAAC,eACjBvC,IAAA,CAACI,IAAI,CAAC2C,YAAY;YAAAlB,QAAA,EACfV,IAAI,EAAEyB;UAAK,CACK,CAAC;QAAA,GAlBdxB,GAmBS,CACf,CAAC;MAAA,CACO,CAAC,EACXc,CAAC,KAAKJ,MAAM,CAACM,IAAI,CAAExB,UAAW,CAAC,CAACyB,MAAM,GAAG,CAAC,iBAC3CrC,IAAA,CAACI,IAAI,CAAC4C,SAAS,IAAE,CACjB;IAAA,GArCczB,IAsCN,CACT;EAAC,CACF,CAAC;AAEL;AAEA,SAAS0B,sBAAsBA,CAAE;EAAEpC,SAAS;EAAEC,OAAO;EAAEF;AAAW,CAAC,EAAG;EACrE,MAAM;IAAE+B,MAAM,EAAEO,UAAU;IAAE/B;EAAK,CAAC,GAAGL,OAAO,IAAI,CAAC,CAAC;EAClD,MAAMqC,WAAW,GAAGlF,sBAAsB,CAAEiF,UAAW,CAAC;EACxD,MAAME,eAAe,GAAG,CAAED,WAAW;EACrC,oBACCjD,KAAA,CAACnB,MAAM;IAACsE,SAAS,EAAC,6BAA6B;IAACC,OAAO,EAAG,CAAG;IAAAzB,QAAA,gBAC5D7B,IAAA,CAACvB,IAAI;MAAC8E,QAAQ;MAAA1B,QAAA,EAAGhB;IAAS,CAAQ,CAAC,EACjC,CAAC,CAAEC,OAAO,iBACXd,IAAA,CAACvB,IAAI;MACJ8E,QAAQ;MACRC,OAAO,EAAG,CAAEJ,eAAe,IAAI,OAAS;MACxCK,aAAa,EAAGL,eAAiB;MAAAvB,QAAA,EAE/BuB,eAAe,GACdpF,EAAE,CAAE,gBAAiB,CAAC,GACtB4C,UAAU,GAAIsC,UAAU,CAAE,GAAI/B,IAAI,EAAEC,GAAG,CAAE,EAAEmB,KAAK,IAChDY,WAAW,EAAEZ,KAAK,IAClBW;IAAU,CACR,CACN;EAAA,CACM,CAAC;AAEX;AAEA,SAASQ,+BAA+BA,CAAE;EAAEC,QAAQ;EAAE/C;AAAW,CAAC,EAAG;EACpE,oBACCZ,IAAA,CAAAG,SAAA;IAAA0B,QAAA,EACGC,MAAM,CAACC,OAAO,CAAE4B,QAAS,CAAC,CAAC3B,GAAG,CAAE,CAAE,CAAEnB,SAAS,EAAEC,OAAO,CAAE,kBACzDd,IAAA,CAACzB,IAAI;MAAAsD,QAAA,eACJ7B,IAAA,CAACiD,sBAAsB;QACtBpC,SAAS,EAAGA,SAAW;QACvBC,OAAO,EAAGA,OAAS;QACnBF,UAAU,EAAGA;MAAY,CACzB;IAAC,GALSC,SAMN,CACL;EAAC,CACF,CAAC;AAEL;AAEA,SAAS+C,+BAA+BA,CAAE;EACzCjC,UAAU;EACVgC,QAAQ;EACR/C;AACD,CAAC,EAAG;EACH,MAAM;IAAEK;EAAoB,CAAC,GAAGzB,qBAAqB,CAAC,CAAC;EACvD,MAAMe,QAAQ,GAAGlB,gBAAgB,CAAE,QAAQ,EAAE,GAAI,CAAC;EAClD,oBACCW,IAAA,CAAAG,SAAA;IAAA0B,QAAA,EACGF,UAAU,CAACK,GAAG,CAAInB,SAAS,IAAM;MAClC,MAAMC,OAAO,GAAG6C,QAAQ,CAAE9C,SAAS,CAAE;MACrC,oBACCb,IAAA,CAACnB,cAAc;QAEdgF,QAAQ,EAAGA,CAAA,KAAM,CAAC,CAAE/C,OAAS;QAC7ByB,KAAK,EAAG1B,SAAW;QACnBiD,UAAU,EAAGA,CAAA,KAAM;UAClB7C,mBAAmB,CAAE;YACpB,CAAEJ,SAAS,GAAIkD;UAChB,CAAE,CAAC;QACJ,CAAG;QAAAlC,QAAA,eAEH3B,KAAA,CAACE,IAAI;UACJK,SAAS,EACRF,QAAQ,GAAG,cAAc,GAAG,YAC5B;UAAAsB,QAAA,gBAED7B,IAAA,CAACI,IAAI,CAAC4D,aAAa;YAACC,MAAM,eAAGjE,IAAA,CAACzB,IAAI,IAAE,CAAG;YAAAsD,QAAA,eACtC7B,IAAA,CAACiD,sBAAsB;cACtBpC,SAAS,EAAGA,SAAW;cACvBC,OAAO,EAAGA,OAAS;cACnBF,UAAU,EAAGA;YAAY,CACzB;UAAC,CACiB,CAAC,eACrBZ,IAAA,CAACI,IAAI,CAAC8D,OAAO;YAACC,MAAM,EAAG5D,QAAQ,GAAG,CAAC,GAAG,EAAI;YAAAsB,QAAA,eACzC7B,IAAA,CAACW,6BAA6B;cAC7BC,UAAU,EAAGA,UAAY;cACzBC,SAAS,EAAGA,SAAW;cACvBC,OAAO,EAAGA;YAAS,CACnB;UAAC,CACW,CAAC;QAAA,CACV;MAAC,GA5BDD,SA6BS,CAAC;IAEnB,CAAE;EAAC,CACF,CAAC;AAEL;AAEA,OAAO,MAAMuD,kBAAkB,GAAGA,CAAE;EAAE7C,IAAI,EAAEC,SAAS;EAAE6C;AAAS,CAAC,KAAM;EACtE,MAAMC,YAAY,GAAGnF,UAAU,CAAEQ,YAAa,CAAC;EAC/C,MAAM;IAAE4E;EAAuB,CAAC,GAAG/E,qBAAqB,CAAC,CAAC;EAC1D,MAAMgF,kBAAkB,GAAGjF,qBAAqB,CAAEiC,SAAU,CAAC;EAC7D,MAAMiD,iBAAiB,GAAGnE,8BAA8B,CAAC,CAAC;;EAE1D;EACA;EACA;EACA,MAAMoE,WAAW,GAAG,CAAC,CAAC;EACtB,MAAM;IAAE9D,UAAU;IAAE+D;EAAuB,CAAC,GAAGzF,SAAS,CACrDoC,MAAM,IAAM;IACb,IAAK,CAAEkD,kBAAkB,IAAIA,kBAAkB,CAACnC,MAAM,KAAK,CAAC,EAAG;MAC9D,OAAOhC,YAAY;IACpB;IACA,MAAMW,iBAAiB,GAAG9C,uBAAuB,CAAC,CAAC;IACnD4D,MAAM,CAACC,OAAO,CAAEf,iBAAkB,CAAC,CAAC4D,OAAO,CAC1C,CAAE,CAAE1B,UAAU,EAAE;MAAE2B,aAAa;MAAEC;IAAY,CAAC,CAAE,KAAM;MACrD,IAAKD,aAAa,EAAG;QACpB;QACA,MAAME,OAAO,GAAG,CAAC,CAAC;QAClB,IAAKD,WAAW,EAAEzC,MAAM,EAAG;UAC1B,KAAM,MAAMjB,GAAG,IAAI0D,WAAW,EAAG;YAChCC,OAAO,CAAE3D,GAAG,CAAE,GAAGkD,YAAY,CAAElD,GAAG,CAAE;UACrC;QACD;QACA,MAAM4D,UAAU,GAAGH,aAAa,CAAE;UACjCvD,MAAM;UACNyD;QACD,CAAE,CAAC;QACH;QACA,IAAKjD,MAAM,CAACM,IAAI,CAAE4C,UAAU,IAAI,CAAC,CAAE,CAAC,CAAC3C,MAAM,EAAG;UAC7CqC,WAAW,CAAExB,UAAU,CAAE,GAAG;YAAE,GAAG8B;UAAW,CAAC;QAC9C;MACD;IACD,CACD,CAAC;IACD,OAAO;MACNpE,UAAU,EACTkB,MAAM,CAACmD,MAAM,CAAEP,WAAY,CAAC,CAACrC,MAAM,GAAG,CAAC,GACpCqC,WAAW,GACXrE,YAAY;MAChBsE,sBAAsB,EACrBrD,MAAM,CAAExB,gBAAiB,CAAC,CAACoF,WAAW,CAAC,CAAC,CACtCP;IACJ,CAAC;EACF,CAAC,EACD,CAAEL,YAAY,EAAEE,kBAAkB,CACnC,CAAC;EACD;EACA,IAAK,CAAEA,kBAAkB,IAAIA,kBAAkB,CAACnC,MAAM,KAAK,CAAC,EAAG;IAC9D,OAAO,IAAI;EACZ;EACA;EACA,MAAM;IAAEsB;EAAS,CAAC,GAAGU,QAAQ,IAAI,CAAC,CAAC;EACnC,MAAMc,gBAAgB,GAAG;IAAE,GAAGxB;EAAS,CAAC;EACxC7B,MAAM,CAACM,IAAI,CAAE+C,gBAAiB,CAAC,CAACP,OAAO,CAAIxD,GAAG,IAAM;IACnD,IACC,CAAE9B,gBAAgB,CAAEkC,SAAS,EAAEJ,GAAI,CAAC,IACpC+D,gBAAgB,CAAE/D,GAAG,CAAE,CAACuB,MAAM,KAAK,wBAAwB,EAC1D;MACD,OAAOwC,gBAAgB,CAAE/D,GAAG,CAAE;IAC/B;EACD,CAAE,CAAC;;EAEH;EACA,MAAMgE,QAAQ,GACb,CAAET,sBAAsB,IAAI,CAAE7C,MAAM,CAACM,IAAI,CAAExB,UAAW,CAAC,CAACyB,MAAM;EAE/D,IAAK+C,QAAQ,IAAItD,MAAM,CAACM,IAAI,CAAE+C,gBAAiB,CAAC,CAAC9C,MAAM,KAAK,CAAC,EAAG;IAC/D,OAAO,IAAI;EACZ;EAEA,oBACCrC,IAAA,CAACN,iBAAiB;IAAC2F,KAAK,EAAC,UAAU;IAAAxD,QAAA,eAClC3B,KAAA,CAACvB,UAAU;MACV4D,KAAK,EAAGvE,EAAE,CAAE,YAAa,CAAG;MAC5BsH,QAAQ,EAAGA,CAAA,KAAM;QAChBf,sBAAsB,CAAC,CAAC;MACzB,CAAG;MACHE,iBAAiB,EAAGA,iBAAmB;MACvCpB,SAAS,EAAC,8BAA8B;MAAAxB,QAAA,gBAExC7B,IAAA,CAAC3B,SAAS;QAACkH,UAAU;QAACC,WAAW;QAAA3D,QAAA,EAC9BuD,QAAQ,gBACTpF,IAAA,CAAC0D,+BAA+B;UAC/BC,QAAQ,EAAGwB,gBAAkB;UAC7BvE,UAAU,EAAGA;QAAY,CACzB,CAAC,gBAEFZ,IAAA,CAAC4D,+BAA+B;UAC/BjC,UAAU,EAAG6C,kBAAoB;UACjCb,QAAQ,EAAGwB,gBAAkB;UAC7BvE,UAAU,EAAGA;QAAY,CACzB;MACD,CACS,CAAC,eAKZZ,IAAA,CAACvB,IAAI;QAACgH,EAAE,EAAC,KAAK;QAACjC,OAAO,EAAC,OAAO;QAAA3B,QAAA,eAC7B7B,IAAA;UAAA6B,QAAA,EACG7D,EAAE,CACH,8DACD;QAAC,CACC;MAAC,CACC,CAAC;IAAA,CACI;EAAC,CACK,CAAC;AAEtB,CAAC;AAED,eAAe;EACd0H,IAAI,EAAEtB,kBAAkB;EACxBuB,aAAa,EAAE,CAAE,UAAU,CAAE;EAC7BC,UAAUA,CAAA,EAAG;IACZ,OAAO,IAAI;EACZ;AACD,CAAC","ignoreList":[]}