{"version":3,"names":["useMemo","useRef","useInsertionEffect","useRefEffect","beforeInputRules","inputRules","insertReplacementText","removeBrowserShortcuts","shortcuts","inputEvents","undoAutomaticChange","pasteHandler","_delete","enter","firefoxCompat","allEventListeners","useEventListeners","props","propsRef","current","refEffects","map","refEffect","element","isSelected","cleanups","effect","forEach","cleanup"],"sources":["@wordpress/block-editor/src/components/rich-text/event-listeners/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useMemo, useRef, useInsertionEffect } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport beforeInputRules from './before-input-rules';\nimport inputRules from './input-rules';\nimport insertReplacementText from './insert-replacement-text';\nimport removeBrowserShortcuts from './remove-browser-shortcuts';\nimport shortcuts from './shortcuts';\nimport inputEvents from './input-events';\nimport undoAutomaticChange from './undo-automatic-change';\nimport pasteHandler from './paste-handler';\nimport _delete from './delete';\nimport enter from './enter';\nimport firefoxCompat from './firefox-compat';\n\nconst allEventListeners = [\n\tbeforeInputRules,\n\tinputRules,\n\tinsertReplacementText,\n\tremoveBrowserShortcuts,\n\tshortcuts,\n\tinputEvents,\n\tundoAutomaticChange,\n\tpasteHandler,\n\t_delete,\n\tenter,\n\tfirefoxCompat,\n];\n\nexport function useEventListeners( props ) {\n\tconst propsRef = useRef( props );\n\tuseInsertionEffect( () => {\n\t\tpropsRef.current = props;\n\t} );\n\tconst refEffects = useMemo(\n\t\t() => allEventListeners.map( ( refEffect ) => refEffect( propsRef ) ),\n\t\t[ propsRef ]\n\t);\n\n\treturn useRefEffect(\n\t\t( element ) => {\n\t\t\tif ( ! props.isSelected ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst cleanups = refEffects.map( ( effect ) => effect( element ) );\n\t\t\treturn () => {\n\t\t\t\tcleanups.forEach( ( cleanup ) => cleanup() );\n\t\t\t};\n\t\t},\n\t\t[ refEffects, props.isSelected ]\n\t);\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,OAAO,EAAEC,MAAM,EAAEC,kBAAkB,QAAQ,oBAAoB;AACxE,SAASC,YAAY,QAAQ,oBAAoB;;AAEjD;AACA;AACA;AACA,OAAOC,gBAAgB,MAAM,sBAAsB;AACnD,OAAOC,UAAU,MAAM,eAAe;AACtC,OAAOC,qBAAqB,MAAM,2BAA2B;AAC7D,OAAOC,sBAAsB,MAAM,4BAA4B;AAC/D,OAAOC,SAAS,MAAM,aAAa;AACnC,OAAOC,WAAW,MAAM,gBAAgB;AACxC,OAAOC,mBAAmB,MAAM,yBAAyB;AACzD,OAAOC,YAAY,MAAM,iBAAiB;AAC1C,OAAOC,OAAO,MAAM,UAAU;AAC9B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,aAAa,MAAM,kBAAkB;AAE5C,MAAMC,iBAAiB,GAAG,CACzBX,gBAAgB,EAChBC,UAAU,EACVC,qBAAqB,EACrBC,sBAAsB,EACtBC,SAAS,EACTC,WAAW,EACXC,mBAAmB,EACnBC,YAAY,EACZC,OAAO,EACPC,KAAK,EACLC,aAAa,CACb;AAED,OAAO,SAASE,iBAAiBA,CAAEC,KAAK,EAAG;EAC1C,MAAMC,QAAQ,GAAGjB,MAAM,CAAEgB,KAAM,CAAC;EAChCf,kBAAkB,CAAE,MAAM;IACzBgB,QAAQ,CAACC,OAAO,GAAGF,KAAK;EACzB,CAAE,CAAC;EACH,MAAMG,UAAU,GAAGpB,OAAO,CACzB,MAAMe,iBAAiB,CAACM,GAAG,CAAIC,SAAS,IAAMA,SAAS,CAAEJ,QAAS,CAAE,CAAC,EACrE,CAAEA,QAAQ,CACX,CAAC;EAED,OAAOf,YAAY,CAChBoB,OAAO,IAAM;IACd,IAAK,CAAEN,KAAK,CAACO,UAAU,EAAG;MACzB;IACD;IACA,MAAMC,QAAQ,GAAGL,UAAU,CAACC,GAAG,CAAIK,MAAM,IAAMA,MAAM,CAAEH,OAAQ,CAAE,CAAC;IAClE,OAAO,MAAM;MACZE,QAAQ,CAACE,OAAO,CAAIC,OAAO,IAAMA,OAAO,CAAC,CAAE,CAAC;IAC7C,CAAC;EACF,CAAC,EACD,CAAER,UAAU,EAAEH,KAAK,CAACO,UAAU,CAC/B,CAAC;AACF","ignoreList":[]}