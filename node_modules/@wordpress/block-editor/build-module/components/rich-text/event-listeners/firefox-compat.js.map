{"version":3,"names":["store","blockEditorStore","props","element","onFocus","registry","current","select","isMultiSelecting","parentEditable","parentElement","closest","focus","addEventListener","removeEventListener"],"sources":["@wordpress/block-editor/src/components/rich-text/event-listeners/firefox-compat.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\nexport default ( props ) => ( element ) => {\n\tfunction onFocus() {\n\t\tconst { registry } = props.current;\n\t\tif ( ! registry.select( blockEditorStore ).isMultiSelecting() ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// This is a little hack to work around focus issues with nested\n\t\t// editable elements in Firefox. For some reason the editable child\n\t\t// element sometimes regains focus, while it should not be focusable\n\t\t// and focus should remain on the editable parent element.\n\t\t// To do: try to find the cause of the shifting focus.\n\t\tconst parentEditable = element.parentElement.closest(\n\t\t\t'[contenteditable=\"true\"]'\n\t\t);\n\n\t\tif ( parentEditable ) {\n\t\t\tparentEditable.focus();\n\t\t}\n\t}\n\n\telement.addEventListener( 'focus', onFocus );\n\treturn () => {\n\t\telement.removeEventListener( 'focus', onFocus );\n\t};\n};\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,KAAK,IAAIC,gBAAgB,QAAQ,gBAAgB;AAE1D,eAAiBC,KAAK,IAAQC,OAAO,IAAM;EAC1C,SAASC,OAAOA,CAAA,EAAG;IAClB,MAAM;MAAEC;IAAS,CAAC,GAAGH,KAAK,CAACI,OAAO;IAClC,IAAK,CAAED,QAAQ,CAACE,MAAM,CAAEN,gBAAiB,CAAC,CAACO,gBAAgB,CAAC,CAAC,EAAG;MAC/D;IACD;;IAEA;IACA;IACA;IACA;IACA;IACA,MAAMC,cAAc,GAAGN,OAAO,CAACO,aAAa,CAACC,OAAO,CACnD,0BACD,CAAC;IAED,IAAKF,cAAc,EAAG;MACrBA,cAAc,CAACG,KAAK,CAAC,CAAC;IACvB;EACD;EAEAT,OAAO,CAACU,gBAAgB,CAAE,OAAO,EAAET,OAAQ,CAAC;EAC5C,OAAO,MAAM;IACZD,OAAO,CAACW,mBAAmB,CAAE,OAAO,EAAEV,OAAQ,CAAC;EAChD,CAAC;AACF,CAAC","ignoreList":[]}