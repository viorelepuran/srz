{"version":3,"names":["store","blocksStore","useSelect","SearchControl","Button","__","_n","sprintf","useEffect","useState","useDebounce","speak","BlockManagerCategory","jsx","_jsx","jsxs","_jsxs","BlockManager","blockTypes","selectedBlockTypes","onChange","debouncedSpeak","search","setSearch","categories","isMatchingSearchTerm","select","getCategories","enableAllBlockTypes","filteredBlockTypes","filter","blockType","numberOfHiddenBlocks","length","count","resultsFoundMessage","className","children","__next40pxDefaultSize","variant","onClick","__nextHasNoMarginBottom","label","placeholder","value","nextSearch","tabIndex","role","map","category","title","slug"],"sources":["@wordpress/block-editor/src/components/block-manager/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { SearchControl, Button } from '@wordpress/components';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { useEffect, useState } from '@wordpress/element';\nimport { useDebounce } from '@wordpress/compose';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport BlockManagerCategory from './category';\n\n/**\n * Provides a list of blocks with checkboxes.\n *\n * @param {Object}   props                    Props.\n * @param {Array}    props.blockTypes         An array of blocks.\n * @param {Array}    props.selectedBlockTypes An array of selected blocks.\n * @param {Function} props.onChange           Function to be called when the selected blocks change.\n */\nexport default function BlockManager( {\n\tblockTypes,\n\tselectedBlockTypes,\n\tonChange,\n} ) {\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\tconst [ search, setSearch ] = useState( '' );\n\tconst { categories, isMatchingSearchTerm } = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tcategories: select( blocksStore ).getCategories(),\n\t\t\tisMatchingSearchTerm: select( blocksStore ).isMatchingSearchTerm,\n\t\t};\n\t}, [] );\n\n\tfunction enableAllBlockTypes() {\n\t\tonChange( blockTypes );\n\t}\n\n\tconst filteredBlockTypes = blockTypes.filter( ( blockType ) => {\n\t\treturn ! search || isMatchingSearchTerm( blockType, search );\n\t} );\n\n\tconst numberOfHiddenBlocks = blockTypes.length - selectedBlockTypes.length;\n\n\t// Announce search results on change\n\tuseEffect( () => {\n\t\tif ( ! search ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockTypes.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ filteredBlockTypes?.length, search, debouncedSpeak ] );\n\n\treturn (\n\t\t<div className=\"block-editor-block-manager__content\">\n\t\t\t{ !! numberOfHiddenBlocks && (\n\t\t\t\t<div className=\"block-editor-block-manager__disabled-blocks-count\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %d: number of blocks. */\n\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t'%d block is hidden.',\n\t\t\t\t\t\t\t'%d blocks are hidden.',\n\t\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t\t),\n\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t) }\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={ enableAllBlockTypes }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<SearchControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Search for a block' ) }\n\t\t\t\tplaceholder={ __( 'Search for a block' ) }\n\t\t\t\tvalue={ search }\n\t\t\t\tonChange={ ( nextSearch ) => setSearch( nextSearch ) }\n\t\t\t\tclassName=\"block-editor-block-manager__search\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\trole=\"region\"\n\t\t\t\taria-label={ __( 'Available block types' ) }\n\t\t\t\tclassName=\"block-editor-block-manager__results\"\n\t\t\t>\n\t\t\t\t{ filteredBlockTypes.length === 0 && (\n\t\t\t\t\t<p className=\"block-editor-block-manager__no-results\">\n\t\t\t\t\t\t{ __( 'No blocks found.' ) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t<BlockManagerCategory\n\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\tblockTypes={ filteredBlockTypes.filter(\n\t\t\t\t\t\t\t( blockType ) =>\n\t\t\t\t\t\t\t\tblockType.category === category.slug\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tselectedBlockTypes={ selectedBlockTypes }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t\t<BlockManagerCategory\n\t\t\t\t\ttitle={ __( 'Uncategorized' ) }\n\t\t\t\t\tblockTypes={ filteredBlockTypes.filter(\n\t\t\t\t\t\t( { category } ) => ! category\n\t\t\t\t\t) }\n\t\t\t\t\tselectedBlockTypes={ selectedBlockTypes }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}