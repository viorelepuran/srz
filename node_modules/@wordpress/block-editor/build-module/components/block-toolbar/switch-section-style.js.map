{"version":3,"names":["ToolbarButton","ToolbarGroup","Icon","Path","SVG","__","useDispatch","useSelect","useContext","useStylesForBlocks","replaceActiveStyle","store","blockEditorStore","GlobalStylesContext","globalStylesDataKey","getVariationStylesWithRefValues","jsx","_jsx","jsxs","_jsxs","styleIcon","viewBox","xmlns","width","height","focusable","children","d","stroke","strokeWidth","SwitchSectionStyle","clientId","_mergedConfig$setting","_mergedConfig$styles","stylesToRender","activeStyle","className","updateBlockAttributes","merged","mergedConfig","globalSettings","globalStyles","blockName","select","settings","getSettings","__experimentalFeatures","getBlockName","activeStyleBackground","name","styles","color","background","undefined","length","handleStyleSwitch","currentIndex","findIndex","style","nextIndex","nextStyle","styleClassName","onClick","label","icon","fill"],"sources":["@wordpress/block-editor/src/components/block-toolbar/switch-section-style.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tToolbarButton,\n\tToolbarGroup,\n\tIcon,\n\tPath,\n\tSVG,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useStylesForBlocks from '../block-styles/use-styles-for-block';\nimport { replaceActiveStyle } from '../block-styles/utils';\nimport { store as blockEditorStore } from '../../store';\nimport { GlobalStylesContext } from '../global-styles';\nimport { globalStylesDataKey } from '../../store/private-keys';\nimport { getVariationStylesWithRefValues } from '../../hooks/block-style-variation';\n\nconst styleIcon = (\n\t<SVG\n\t\tviewBox=\"0 0 24 24\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<Path d=\"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3z\" />\n\t\t<Path\n\t\t\tstroke=\"currentColor\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\td=\"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3z\"\n\t\t/>\n\t</SVG>\n);\n\nfunction SwitchSectionStyle( { clientId } ) {\n\tconst { stylesToRender, activeStyle, className } = useStylesForBlocks( {\n\t\tclientId,\n\t} );\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\n\t// Get global styles data\n\tconst { merged: mergedConfig } = useContext( GlobalStylesContext );\n\tconst { globalSettings, globalStyles, blockName } = useSelect(\n\t\t( select ) => {\n\t\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\t\treturn {\n\t\t\t\tglobalSettings: settings.__experimentalFeatures,\n\t\t\t\tglobalStyles: settings[ globalStylesDataKey ],\n\t\t\t\tblockName: select( blockEditorStore ).getBlockName( clientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\t// Get the background color for the active style\n\tconst activeStyleBackground = activeStyle?.name\n\t\t? getVariationStylesWithRefValues(\n\t\t\t\t{\n\t\t\t\t\tsettings: mergedConfig?.settings ?? globalSettings,\n\t\t\t\t\tstyles: mergedConfig?.styles ?? globalStyles,\n\t\t\t\t},\n\t\t\t\tblockName,\n\t\t\t\tactiveStyle.name\n\t\t  )?.color?.background\n\t\t: undefined;\n\n\tif ( ! stylesToRender || stylesToRender.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst handleStyleSwitch = () => {\n\t\tconst currentIndex = stylesToRender.findIndex(\n\t\t\t( style ) => style.name === activeStyle.name\n\t\t);\n\n\t\tconst nextIndex = ( currentIndex + 1 ) % stylesToRender.length;\n\t\tconst nextStyle = stylesToRender[ nextIndex ];\n\n\t\tconst styleClassName = replaceActiveStyle(\n\t\t\tclassName,\n\t\t\tactiveStyle,\n\t\t\tnextStyle\n\t\t);\n\n\t\tupdateBlockAttributes( clientId, {\n\t\t\tclassName: styleClassName,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\tonClick={ handleStyleSwitch }\n\t\t\t\tlabel={ __( 'Shuffle styles' ) }\n\t\t\t>\n\t\t\t\t<Icon\n\t\t\t\t\ticon={ styleIcon }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\tfill: activeStyleBackground || 'transparent',\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</ToolbarButton>\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default SwitchSectionStyle;\n"],"mappings":"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","ignoreList":[]}