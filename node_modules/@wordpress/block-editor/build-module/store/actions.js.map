{"version":3,"names":["cloneBlock","__experimentalCloneSanitizedBlock","createBlock","doBlocksMatchTemplate","getBlockType","getDefaultBlockName","hasBlockSupport","switchToBlockType","synchronizeBlocksWithTemplate","getBlockSupport","isUnmodifiedDefaultBlock","isUnmodifiedBlock","speak","__","_n","sprintf","store","noticesStore","create","insert","remove","toHTMLString","deprecated","preferencesStore","retrieveSelectedAttribute","findRichTextAttributeKey","START_OF_SELECTED_AREA","__experimentalUpdateSettings","privateRemoveBlocks","castArray","maybeArray","Array","isArray","resetBlocks","blocks","dispatch","type","validateBlocksToTemplate","select","template","getTemplate","templateLock","getTemplateLock","isBlocksValidToTemplate","isValidTemplate","setTemplateValidity","resetSelection","selectionStart","selectionEnd","initialPosition","receiveBlocks","since","alternative","updateBlockAttributes","clientIds","attributes","uniqueByBlock","updateBlock","clientId","updates","selectBlock","hoverBlock","selectPreviousBlock","fallbackToParent","previousBlockClientId","getPreviousBlockClientId","firstParentClientId","getBlockRootClientId","selectNextBlock","nextBlockClientId","getNextBlockClientId","startMultiSelect","stopMultiSelect","multiSelect","start","end","__experimentalInitialPosition","startBlockRootClientId","endBlockRootClientId","blockCount","getSelectedBlockCount","clearSelectedBlock","toggleSelection","isSelectionEnabled","replaceBlocks","indexToSelect","meta","registry","rootClientId","index","length","block","canInsertBlock","canInsertBlockType","name","batch","time","Date","now","ensureDefaultBlock","replaceBlock","createOnMove","canMoveBlocks","moveBlocksDown","moveBlocksUp","moveBlocksToPosition","fromRootClientId","toRootClientId","canRemoveBlocks","canInsertBlocks","moveBlockToPosition","insertBlock","updateSelection","insertBlocks","hint","allowedBlocks","isValid","push","showInsertionPoint","__unstableOptions","__unstableWithInserter","operation","nearestSide","hideInsertionPoint","isBlockInsertionPointVisible","synchronizeTemplate","getBlocks","updatedBlockList","__unstableDeleteSelection","isForward","selectionAnchor","getSelectionStart","selectionFocus","getSelectionEnd","attributeKey","offset","anchorRootClientId","focusRootClientId","blockOrder","getBlockOrder","anchorIndex","indexOf","focusIndex","targetSelection","targetBlock","getBlock","targetBlockType","merge","selectionA","selectionB","blockA","blockB","htmlA","htmlB","valueA","html","valueB","text","cloneA","value","cloneB","followingBlock","blocksWithTheSameType","updatedAttributes","blockToMerge","pop","shift","newAttributeKey","convertedHtml","convertedValue","newOffset","newValue","newHtml","selectedBlockClientIds","getSelectedBlockClientIds","replacement","selectionChange","getSelectedBlocksInitialCaretPosition","__unstableSplitSelection","blockAType","blockBType","attributeKeyA","attributeKeyB","blockAttributes","getBlockAttributes","bindings","metadata","createWarningNotice","insertAfterBlock","createEmpty","defaultBlockName","getBlockName","getBlockIndex","head","innerBlocks","tail","switched","selection","output","clonedBlocks","firstBlock","headType","firstBlocks","first","unshift","lastBlock","tailType","lastBlocks","last","__unstableExpandSelection","mergeBlocks","firstBlockClientId","secondBlockClientId","clientIdA","clientIdB","blockWithSameType","undefined","removeBlock","rootAttributes","previousRootAttributes","Object","keys","every","key","isBlockSelected","selectedBlockType","attributeDefinition","canRestoreTextSelection","window","console","error","selectedBlock","slice","removeBlocks","selectPrevious","replaceInnerBlocks","toggleBlockMode","startTyping","stopTyping","startDraggingBlocks","stopDraggingBlocks","enterFormattedText","version","exitFormattedText","startOffset","endOffset","insertDefaultBlock","updateBlockListSettings","settings","updateSettings","stripExperimentalSettings","__unstableSaveReusableBlock","id","updatedId","__unstableMarkLastChangeAsPersistent","__unstableMarkNextChangeAsNotPersistent","__unstableMarkAutomaticChange","requestIdleCallback","cb","setTimeout","setNavigationMode","isNavigationMode","__unstableSetEditorMode","mode","set","setBlockMovingClientId","duplicateBlocks","getBlocksByClientId","some","blockNames","map","blockName","clientIdsArray","lastSelectedIndex","insertBeforeBlock","isLocked","blockIndex","directInsertBlock","getDirectInsertBlock","copiedAttributes","attributesToCopy","forEach","toggleBlockHighlight","isHighlighted","flashBlock","Promise","resolve","setHasControlledInnerBlocks","hasControlledInnerBlocks","setBlockVisibility","__unstableSetTemporarilyEditingAsBlocks","temporarilyEditingAsBlocks","focusModeToRevert","registerInserterMediaCategory","category","labels","includes","mediaType","fetch","registeredInserterMediaCategories","getRegisteredInserterMediaCategories","isExternalResource","setBlockEditingMode","unsetBlockEditingMode"],"sources":["@wordpress/block-editor/src/store/actions.js"],"sourcesContent":["/* eslint no-console: [ 'error', { allow: [ 'error', 'warn' ] } ] */\n/**\n * WordPress dependencies\n */\nimport {\n\tcloneBlock,\n\t__experimentalCloneSanitizedBlock,\n\tcreateBlock,\n\tdoBlocksMatchTemplate,\n\tgetBlockType,\n\tgetDefaultBlockName,\n\thasBlockSupport,\n\tswitchToBlockType,\n\tsynchronizeBlocksWithTemplate,\n\tgetBlockSupport,\n\tisUnmodifiedDefaultBlock,\n\tisUnmodifiedBlock,\n} from '@wordpress/blocks';\nimport { speak } from '@wordpress/a11y';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { create, insert, remove, toHTMLString } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport {\n\tretrieveSelectedAttribute,\n\tfindRichTextAttributeKey,\n\tSTART_OF_SELECTED_AREA,\n} from '../utils/selection';\nimport {\n\t__experimentalUpdateSettings,\n\tprivateRemoveBlocks,\n} from './private-actions';\n\n/** @typedef {import('../components/use-on-block-drop/types').WPDropOperation} WPDropOperation */\n\nconst castArray = ( maybeArray ) =>\n\tArray.isArray( maybeArray ) ? maybeArray : [ maybeArray ];\n\n/**\n * Action that resets blocks state to the specified array of blocks, taking precedence\n * over any other content reflected as an edit in state.\n *\n * @param {Array} blocks Array of blocks.\n */\nexport const resetBlocks =\n\t( blocks ) =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'RESET_BLOCKS', blocks } );\n\t\tdispatch( validateBlocksToTemplate( blocks ) );\n\t};\n\n/**\n * Block validity is a function of blocks state (at the point of a\n * reset) and the template setting. As a compromise to its placement\n * across distinct parts of state, it is implemented here as a side\n * effect of the block reset action.\n *\n * @param {Array} blocks Array of blocks.\n */\nexport const validateBlocksToTemplate =\n\t( blocks ) =>\n\t( { select, dispatch } ) => {\n\t\tconst template = select.getTemplate();\n\t\tconst templateLock = select.getTemplateLock();\n\n\t\t// Unlocked templates are considered always valid because they act\n\t\t// as default values only.\n\t\tconst isBlocksValidToTemplate =\n\t\t\t! template ||\n\t\t\ttemplateLock !== 'all' ||\n\t\t\tdoBlocksMatchTemplate( blocks, template );\n\n\t\t// Update if validity has changed.\n\t\tconst isValidTemplate = select.isValidTemplate();\n\n\t\tif ( isBlocksValidToTemplate !== isValidTemplate ) {\n\t\t\tdispatch.setTemplateValidity( isBlocksValidToTemplate );\n\t\t\treturn isBlocksValidToTemplate;\n\t\t}\n\t};\n\n/**\n * A block selection object.\n *\n * @typedef {Object} WPBlockSelection\n *\n * @property {string} clientId     A block client ID.\n * @property {string} attributeKey A block attribute key.\n * @property {number} offset       An attribute value offset, based on the rich\n *                                 text value. See `wp.richText.create`.\n */\n\n/**\n * A selection object.\n *\n * @typedef {Object} WPSelection\n *\n * @property {WPBlockSelection} start The selection start.\n * @property {WPBlockSelection} end   The selection end.\n */\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that selection state should be\n * reset to the specified selection.\n *\n * @param {WPBlockSelection} selectionStart  The selection start.\n * @param {WPBlockSelection} selectionEnd    The selection end.\n * @param {0|-1|null}        initialPosition Initial block position.\n *\n * @return {Object} Action object.\n */\nexport function resetSelection(\n\tselectionStart,\n\tselectionEnd,\n\tinitialPosition\n) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'RESET_SELECTION',\n\t\tselectionStart,\n\t\tselectionEnd,\n\t\tinitialPosition,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that blocks have been received.\n * Unlike resetBlocks, these should be appended to the existing known set, not\n * replacing.\n *\n * @deprecated\n *\n * @param {Object[]} blocks Array of block objects.\n *\n * @return {Object} Action object.\n */\nexport function receiveBlocks( blocks ) {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).receiveBlocks', {\n\t\tsince: '5.9',\n\t\talternative: 'resetBlocks or insertBlocks',\n\t} );\n\n\treturn {\n\t\ttype: 'RECEIVE_BLOCKS',\n\t\tblocks,\n\t};\n}\n\n/**\n * Action that updates attributes of multiple blocks with the specified client IDs.\n *\n * @param {string|string[]} clientIds     Block client IDs.\n * @param {Object}          attributes    Block attributes to be merged. Should be keyed by clientIds if\n *                                        uniqueByBlock is true.\n * @param {boolean}         uniqueByBlock true if each block in clientIds array has a unique set of attributes\n * @return {Object} Action object.\n */\nexport function updateBlockAttributes(\n\tclientIds,\n\tattributes,\n\tuniqueByBlock = false\n) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_ATTRIBUTES',\n\t\tclientIds: castArray( clientIds ),\n\t\tattributes,\n\t\tuniqueByBlock,\n\t};\n}\n\n/**\n * Action that updates the block with the specified client ID.\n *\n * @param {string} clientId Block client ID.\n * @param {Object} updates  Block attributes to be merged.\n *\n * @return {Object} Action object.\n */\nexport function updateBlock( clientId, updates ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK',\n\t\tclientId,\n\t\tupdates,\n\t};\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID has been selected, optionally accepting a position\n * value reflecting its selection directionality. An initialPosition of -1\n * reflects a reverse selection.\n *\n * @param {string}    clientId        Block client ID.\n * @param {0|-1|null} initialPosition Optional initial position. Pass as -1 to\n *                                    reflect reverse selection.\n *\n * @return {Object} Action object.\n */\nexport function selectBlock( clientId, initialPosition = 0 ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'SELECT_BLOCK',\n\t\tinitialPosition,\n\t\tclientId,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID has been hovered.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Action object.\n */\nexport function hoverBlock( clientId ) {\n\treturn {\n\t\ttype: 'HOVER_BLOCK',\n\t\tclientId,\n\t};\n}\n\n/**\n * Yields action objects used in signalling that the block preceding the given\n * clientId (or optionally, its first parent from bottom to top)\n * should be selected.\n *\n * @param {string}  clientId         Block client ID.\n * @param {boolean} fallbackToParent If true, select the first parent if there is no previous block.\n */\nexport const selectPreviousBlock =\n\t( clientId, fallbackToParent = false ) =>\n\t( { select, dispatch } ) => {\n\t\tconst previousBlockClientId =\n\t\t\tselect.getPreviousBlockClientId( clientId );\n\t\tif ( previousBlockClientId ) {\n\t\t\tdispatch.selectBlock( previousBlockClientId, -1 );\n\t\t} else if ( fallbackToParent ) {\n\t\t\tconst firstParentClientId = select.getBlockRootClientId( clientId );\n\t\t\tif ( firstParentClientId ) {\n\t\t\t\tdispatch.selectBlock( firstParentClientId, -1 );\n\t\t\t}\n\t\t}\n\t};\n\n/**\n * Yields action objects used in signalling that the block following the given\n * clientId should be selected.\n *\n * @param {string} clientId Block client ID.\n */\nexport const selectNextBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tconst nextBlockClientId = select.getNextBlockClientId( clientId );\n\t\tif ( nextBlockClientId ) {\n\t\t\tdispatch.selectBlock( nextBlockClientId );\n\t\t}\n\t};\n\n/**\n * Action that starts block multi-selection.\n *\n * @return {Object} Action object.\n */\nexport function startMultiSelect() {\n\treturn {\n\t\ttype: 'START_MULTI_SELECT',\n\t};\n}\n\n/**\n * Action that stops block multi-selection.\n *\n * @return {Object} Action object.\n */\nexport function stopMultiSelect() {\n\treturn {\n\t\ttype: 'STOP_MULTI_SELECT',\n\t};\n}\n\n/**\n * Action that changes block multi-selection.\n *\n * @param {string}      start                         First block of the multi selection.\n * @param {string}      end                           Last block of the multiselection.\n * @param {number|null} __experimentalInitialPosition Optional initial position. Pass as null to skip focus within editor canvas.\n */\nexport const multiSelect =\n\t( start, end, __experimentalInitialPosition = 0 ) =>\n\t( { select, dispatch } ) => {\n\t\tconst startBlockRootClientId = select.getBlockRootClientId( start );\n\t\tconst endBlockRootClientId = select.getBlockRootClientId( end );\n\n\t\t// Only allow block multi-selections at the same level.\n\t\tif ( startBlockRootClientId !== endBlockRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'MULTI_SELECT',\n\t\t\tstart,\n\t\t\tend,\n\t\t\tinitialPosition: __experimentalInitialPosition,\n\t\t} );\n\n\t\tconst blockCount = select.getSelectedBlockCount();\n\n\t\tspeak(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: number of selected blocks */\n\t\t\t\t_n( '%s block selected.', '%s blocks selected.', blockCount ),\n\t\t\t\tblockCount\n\t\t\t),\n\t\t\t'assertive'\n\t\t);\n\t};\n\n/**\n * Action that clears the block selection.\n *\n * @return {Object} Action object.\n */\nexport function clearSelectedBlock() {\n\treturn {\n\t\ttype: 'CLEAR_SELECTED_BLOCK',\n\t};\n}\n\n/**\n * Action that enables or disables block selection.\n *\n * @param {boolean} [isSelectionEnabled=true] Whether block selection should\n *                                            be enabled.\n *\n * @return {Object} Action object.\n */\nexport function toggleSelection( isSelectionEnabled = true ) {\n\treturn {\n\t\ttype: 'TOGGLE_SELECTION',\n\t\tisSelectionEnabled,\n\t};\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Action that replaces given blocks with one or more replacement blocks.\n *\n * @param {(string|string[])} clientIds       Block client ID(s) to replace.\n * @param {(Object|Object[])} blocks          Replacement block(s).\n * @param {number}            indexToSelect   Index of replacement block to select.\n * @param {0|-1|null}         initialPosition Index of caret after in the selected block after the operation.\n * @param {?Object}           meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport const replaceBlocks =\n\t( clientIds, blocks, indexToSelect, initialPosition = 0, meta ) =>\n\t( { select, dispatch, registry } ) => {\n\t\t/* eslint-enable jsdoc/valid-types */\n\t\tclientIds = castArray( clientIds );\n\t\tblocks = castArray( blocks );\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\t// Replace is valid if the new blocks can be inserted in the root block.\n\t\tfor ( let index = 0; index < blocks.length; index++ ) {\n\t\t\tconst block = blocks[ index ];\n\t\t\tconst canInsertBlock = select.canInsertBlockType(\n\t\t\t\tblock.name,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tif ( ! canInsertBlock ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// We're batching these two actions because an extra `undo/redo` step can\n\t\t// be created, based on whether we insert a default block or not.\n\t\tregistry.batch( () => {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'REPLACE_BLOCKS',\n\t\t\t\tclientIds,\n\t\t\t\tblocks,\n\t\t\t\ttime: Date.now(),\n\t\t\t\tindexToSelect,\n\t\t\t\tinitialPosition,\n\t\t\t\tmeta,\n\t\t\t} );\n\t\t\t// To avoid a focus loss when removing the last block, assure there is\n\t\t\t// always a default block if the last of the blocks have been removed.\n\t\t\tdispatch.ensureDefaultBlock();\n\t\t} );\n\t};\n\n/**\n * Action that replaces a single block with one or more replacement blocks.\n *\n * @param {(string|string[])} clientId Block client ID to replace.\n * @param {(Object|Object[])} block    Replacement block(s).\n *\n * @return {Object} Action object.\n */\nexport function replaceBlock( clientId, block ) {\n\treturn replaceBlocks( clientId, block );\n}\n\n/**\n * Higher-order action creator which, given the action type to dispatch creates\n * an action creator for managing block movement.\n *\n * @param {string} type Action type to dispatch.\n *\n * @return {Function} Action creator.\n */\nconst createOnMove =\n\t( type ) =>\n\t( clientIds, rootClientId ) =>\n\t( { select, dispatch } ) => {\n\t\t// If one of the blocks is locked or the parent is locked, we cannot move any block.\n\t\tconst canMoveBlocks = select.canMoveBlocks( clientIds );\n\t\tif ( ! canMoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch( { type, clientIds: castArray( clientIds ), rootClientId } );\n\t};\n\nexport const moveBlocksDown = createOnMove( 'MOVE_BLOCKS_DOWN' );\nexport const moveBlocksUp = createOnMove( 'MOVE_BLOCKS_UP' );\n\n/**\n * Action that moves given blocks to a new position.\n *\n * @param {?string} clientIds        The client IDs of the blocks.\n * @param {?string} fromRootClientId Root client ID source.\n * @param {?string} toRootClientId   Root client ID destination.\n * @param {number}  index            The index to move the blocks to.\n */\nexport const moveBlocksToPosition =\n\t( clientIds, fromRootClientId = '', toRootClientId = '', index ) =>\n\t( { select, dispatch } ) => {\n\t\tconst canMoveBlocks = select.canMoveBlocks( clientIds );\n\n\t\t// If one of the blocks is locked or the parent is locked, we cannot move any block.\n\t\tif ( ! canMoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If moving inside the same root block the move is always possible.\n\t\tif ( fromRootClientId !== toRootClientId ) {\n\t\t\tconst canRemoveBlocks = select.canRemoveBlocks( clientIds );\n\n\t\t\t// If we're moving to another block, it means we're deleting blocks from\n\t\t\t// the original block, so we need to check if removing is possible.\n\t\t\tif ( ! canRemoveBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst canInsertBlocks = select.canInsertBlocks(\n\t\t\t\tclientIds,\n\t\t\t\ttoRootClientId\n\t\t\t);\n\n\t\t\t// If moving to other parent block, the move is possible if we can insert a block of the same type inside the new parent block.\n\t\t\tif ( ! canInsertBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'MOVE_BLOCKS_TO_POSITION',\n\t\t\tfromRootClientId,\n\t\t\ttoRootClientId,\n\t\t\tclientIds,\n\t\t\tindex,\n\t\t} );\n\t};\n\n/**\n * Action that moves given block to a new position.\n *\n * @param {?string} clientId         The client ID of the block.\n * @param {?string} fromRootClientId Root client ID source.\n * @param {?string} toRootClientId   Root client ID destination.\n * @param {number}  index            The index to move the block to.\n */\nexport function moveBlockToPosition(\n\tclientId,\n\tfromRootClientId = '',\n\ttoRootClientId = '',\n\tindex\n) {\n\treturn moveBlocksToPosition(\n\t\t[ clientId ],\n\t\tfromRootClientId,\n\t\ttoRootClientId,\n\t\tindex\n\t);\n}\n\n/**\n * Action that inserts a single block, optionally at a specific index respective a root block list.\n *\n * Only allowed blocks are inserted. The action may fail silently for blocks that are not allowed or if\n * a templateLock is active on the block list.\n *\n * @param {Object}   block           Block object to insert.\n * @param {?number}  index           Index at which block should be inserted.\n * @param {?string}  rootClientId    Optional root client ID of block list on which to insert.\n * @param {?boolean} updateSelection If true block selection will be updated. If false, block selection will not change. Defaults to true.\n * @param {?Object}  meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport function insertBlock(\n\tblock,\n\tindex,\n\trootClientId,\n\tupdateSelection,\n\tmeta\n) {\n\treturn insertBlocks(\n\t\t[ block ],\n\t\tindex,\n\t\trootClientId,\n\t\tupdateSelection,\n\t\t0,\n\t\tmeta\n\t);\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Action that inserts an array of blocks, optionally at a specific index respective a root block list.\n *\n * Only allowed blocks are inserted. The action may fail silently for blocks that are not allowed or if\n * a templateLock is active on the block list.\n *\n * @param {Object[]}  blocks          Block objects to insert.\n * @param {?number}   index           Index at which block should be inserted.\n * @param {?string}   rootClientId    Optional root client ID of block list on which to insert.\n * @param {?boolean}  updateSelection If true block selection will be updated.  If false, block selection will not change. Defaults to true.\n * @param {0|-1|null} initialPosition Initial focus position. Setting it to null prevent focusing the inserted block.\n * @param {?Object}   meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport const insertBlocks =\n\t(\n\t\tblocks,\n\t\tindex,\n\t\trootClientId,\n\t\tupdateSelection = true,\n\t\tinitialPosition = 0,\n\t\tmeta\n\t) =>\n\t( { select, dispatch } ) => {\n\t\t/* eslint-enable jsdoc/valid-types */\n\t\tif ( initialPosition !== null && typeof initialPosition === 'object' ) {\n\t\t\tmeta = initialPosition;\n\t\t\tinitialPosition = 0;\n\t\t\tdeprecated(\n\t\t\t\t\"meta argument in wp.data.dispatch('core/block-editor')\",\n\t\t\t\t{\n\t\t\t\t\tsince: '5.8',\n\t\t\t\t\thint: 'The meta argument is now the 6th argument of the function',\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tblocks = castArray( blocks );\n\t\tconst allowedBlocks = [];\n\t\tfor ( const block of blocks ) {\n\t\t\tconst isValid = select.canInsertBlockType(\n\t\t\t\tblock.name,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tif ( isValid ) {\n\t\t\t\tallowedBlocks.push( block );\n\t\t\t}\n\t\t}\n\t\tif ( allowedBlocks.length ) {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'INSERT_BLOCKS',\n\t\t\t\tblocks: allowedBlocks,\n\t\t\t\tindex,\n\t\t\t\trootClientId,\n\t\t\t\ttime: Date.now(),\n\t\t\t\tupdateSelection,\n\t\t\t\tinitialPosition: updateSelection ? initialPosition : null,\n\t\t\t\tmeta,\n\t\t\t} );\n\t\t}\n\t};\n\n/**\n * Action that shows the insertion point.\n *\n * @param    {?string}         rootClientId           Optional root client ID of block list on\n *                                                    which to insert.\n * @param    {?number}         index                  Index at which block should be inserted.\n * @param    {?Object}         __unstableOptions      Additional options.\n * @property {boolean}         __unstableWithInserter Whether or not to show an inserter button.\n * @property {WPDropOperation} operation              The operation to perform when applied,\n *                                                    either 'insert' or 'replace' for now.\n *\n * @return {Object} Action object.\n */\nexport function showInsertionPoint(\n\trootClientId,\n\tindex,\n\t__unstableOptions = {}\n) {\n\tconst { __unstableWithInserter, operation, nearestSide } =\n\t\t__unstableOptions;\n\treturn {\n\t\ttype: 'SHOW_INSERTION_POINT',\n\t\trootClientId,\n\t\tindex,\n\t\t__unstableWithInserter,\n\t\toperation,\n\t\tnearestSide,\n\t};\n}\n/**\n * Action that hides the insertion point.\n */\nexport const hideInsertionPoint =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! select.isBlockInsertionPointVisible() ) {\n\t\t\treturn;\n\t\t}\n\t\tdispatch( {\n\t\t\ttype: 'HIDE_INSERTION_POINT',\n\t\t} );\n\t};\n\n/**\n * Action that resets the template validity.\n *\n * @param {boolean} isValid template validity flag.\n *\n * @return {Object} Action object.\n */\nexport function setTemplateValidity( isValid ) {\n\treturn {\n\t\ttype: 'SET_TEMPLATE_VALIDITY',\n\t\tisValid,\n\t};\n}\n\n/**\n * Action that synchronizes the template with the list of blocks.\n *\n * @return {Object} Action object.\n */\nexport const synchronizeTemplate =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tdispatch( { type: 'SYNCHRONIZE_TEMPLATE' } );\n\t\tconst blocks = select.getBlocks();\n\t\tconst template = select.getTemplate();\n\t\tconst updatedBlockList = synchronizeBlocksWithTemplate(\n\t\t\tblocks,\n\t\t\ttemplate\n\t\t);\n\n\t\tdispatch.resetBlocks( updatedBlockList );\n\t};\n\n/**\n * Delete the current selection.\n *\n * @param {boolean} isForward\n */\nexport const __unstableDeleteSelection =\n\t( isForward ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\n\t\tif ( selectionAnchor.clientId === selectionFocus.clientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// It's not mergeable if there's no rich text selection.\n\t\tif (\n\t\t\t! selectionAnchor.attributeKey ||\n\t\t\t! selectionFocus.attributeKey ||\n\t\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\t\ttypeof selectionFocus.offset === 'undefined'\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst anchorRootClientId = select.getBlockRootClientId(\n\t\t\tselectionAnchor.clientId\n\t\t);\n\t\tconst focusRootClientId = select.getBlockRootClientId(\n\t\t\tselectionFocus.clientId\n\t\t);\n\n\t\t// It's not mergeable if the selection doesn't start and end in the same\n\t\t// block list. Maybe in the future it should be allowed.\n\t\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockOrder = select.getBlockOrder( anchorRootClientId );\n\t\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\t\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t\t// Reassign selection start and end based on order.\n\t\tlet selectionStart, selectionEnd;\n\n\t\tif ( anchorIndex > focusIndex ) {\n\t\t\tselectionStart = selectionFocus;\n\t\t\tselectionEnd = selectionAnchor;\n\t\t} else {\n\t\t\tselectionStart = selectionAnchor;\n\t\t\tselectionEnd = selectionFocus;\n\t\t}\n\n\t\tconst targetSelection = isForward ? selectionEnd : selectionStart;\n\t\tconst targetBlock = select.getBlock( targetSelection.clientId );\n\t\tconst targetBlockType = getBlockType( targetBlock.name );\n\n\t\tif ( ! targetBlockType.merge ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectionA = selectionStart;\n\t\tconst selectionB = selectionEnd;\n\n\t\tconst blockA = select.getBlock( selectionA.clientId );\n\t\tconst blockB = select.getBlock( selectionB.clientId );\n\n\t\tconst htmlA = blockA.attributes[ selectionA.attributeKey ];\n\t\tconst htmlB = blockB.attributes[ selectionB.attributeKey ];\n\n\t\tlet valueA = create( { html: htmlA } );\n\t\tlet valueB = create( { html: htmlB } );\n\n\t\tvalueA = remove( valueA, selectionA.offset, valueA.text.length );\n\t\tvalueB = insert( valueB, START_OF_SELECTED_AREA, 0, selectionB.offset );\n\n\t\t// Clone the blocks so we don't manipulate the original.\n\t\tconst cloneA = cloneBlock( blockA, {\n\t\t\t[ selectionA.attributeKey ]: toHTMLString( { value: valueA } ),\n\t\t} );\n\t\tconst cloneB = cloneBlock( blockB, {\n\t\t\t[ selectionB.attributeKey ]: toHTMLString( { value: valueB } ),\n\t\t} );\n\n\t\tconst followingBlock = isForward ? cloneA : cloneB;\n\n\t\t// We can only merge blocks with similar types\n\t\t// thus, we transform the block to merge first\n\t\tconst blocksWithTheSameType =\n\t\t\tblockA.name === blockB.name\n\t\t\t\t? [ followingBlock ]\n\t\t\t\t: switchToBlockType( followingBlock, targetBlockType.name );\n\n\t\t// If the block types can not match, do nothing\n\t\tif ( ! blocksWithTheSameType || ! blocksWithTheSameType.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet updatedAttributes;\n\n\t\tif ( isForward ) {\n\t\t\tconst blockToMerge = blocksWithTheSameType.pop();\n\t\t\tupdatedAttributes = targetBlockType.merge(\n\t\t\t\tblockToMerge.attributes,\n\t\t\t\tcloneB.attributes\n\t\t\t);\n\t\t} else {\n\t\t\tconst blockToMerge = blocksWithTheSameType.shift();\n\t\t\tupdatedAttributes = targetBlockType.merge(\n\t\t\t\tcloneA.attributes,\n\t\t\t\tblockToMerge.attributes\n\t\t\t);\n\t\t}\n\n\t\tconst newAttributeKey = retrieveSelectedAttribute( updatedAttributes );\n\n\t\tconst convertedHtml = updatedAttributes[ newAttributeKey ];\n\t\tconst convertedValue = create( { html: convertedHtml } );\n\t\tconst newOffset = convertedValue.text.indexOf( START_OF_SELECTED_AREA );\n\t\tconst newValue = remove( convertedValue, newOffset, newOffset + 1 );\n\t\tconst newHtml = toHTMLString( { value: newValue } );\n\n\t\tupdatedAttributes[ newAttributeKey ] = newHtml;\n\n\t\tconst selectedBlockClientIds = select.getSelectedBlockClientIds();\n\t\tconst replacement = [\n\t\t\t...( isForward ? blocksWithTheSameType : [] ),\n\t\t\t{\n\t\t\t\t// Preserve the original client ID.\n\t\t\t\t...targetBlock,\n\t\t\t\tattributes: {\n\t\t\t\t\t...targetBlock.attributes,\n\t\t\t\t\t...updatedAttributes,\n\t\t\t\t},\n\t\t\t},\n\t\t\t...( isForward ? [] : blocksWithTheSameType ),\n\t\t];\n\n\t\tregistry.batch( () => {\n\t\t\tdispatch.selectionChange(\n\t\t\t\ttargetBlock.clientId,\n\t\t\t\tnewAttributeKey,\n\t\t\t\tnewOffset,\n\t\t\t\tnewOffset\n\t\t\t);\n\n\t\t\tdispatch.replaceBlocks(\n\t\t\t\tselectedBlockClientIds,\n\t\t\t\treplacement,\n\t\t\t\t0, // If we don't pass the `indexToSelect` it will default to the last block.\n\t\t\t\tselect.getSelectedBlocksInitialCaretPosition()\n\t\t\t);\n\t\t} );\n\t};\n\n/**\n * Split the current selection.\n * @param {?Array} blocks\n */\nexport const __unstableSplitSelection =\n\t( blocks = [] ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\t\tconst anchorRootClientId = select.getBlockRootClientId(\n\t\t\tselectionAnchor.clientId\n\t\t);\n\t\tconst focusRootClientId = select.getBlockRootClientId(\n\t\t\tselectionFocus.clientId\n\t\t);\n\n\t\t// It's not splittable if the selection doesn't start and end in the same\n\t\t// block list. Maybe in the future it should be allowed.\n\t\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockOrder = select.getBlockOrder( anchorRootClientId );\n\t\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\t\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t\t// Reassign selection start and end based on order.\n\t\tlet selectionStart, selectionEnd;\n\n\t\tif ( anchorIndex > focusIndex ) {\n\t\t\tselectionStart = selectionFocus;\n\t\t\tselectionEnd = selectionAnchor;\n\t\t} else {\n\t\t\tselectionStart = selectionAnchor;\n\t\t\tselectionEnd = selectionFocus;\n\t\t}\n\n\t\tconst selectionA = selectionStart;\n\t\tconst selectionB = selectionEnd;\n\t\tconst blockA = select.getBlock( selectionA.clientId );\n\t\tconst blockB = select.getBlock( selectionB.clientId );\n\t\tconst blockAType = getBlockType( blockA.name );\n\t\tconst blockBType = getBlockType( blockB.name );\n\t\tconst attributeKeyA =\n\t\t\ttypeof selectionA.attributeKey === 'string'\n\t\t\t\t? selectionA.attributeKey\n\t\t\t\t: findRichTextAttributeKey( blockAType );\n\t\tconst attributeKeyB =\n\t\t\ttypeof selectionB.attributeKey === 'string'\n\t\t\t\t? selectionB.attributeKey\n\t\t\t\t: findRichTextAttributeKey( blockBType );\n\t\tconst blockAttributes = select.getBlockAttributes(\n\t\t\tselectionA.clientId\n\t\t);\n\t\tconst bindings = blockAttributes?.metadata?.bindings;\n\n\t\t// If the attribute is bound, don't split the selection and insert a new block instead.\n\t\tif ( bindings?.[ attributeKeyA ] ) {\n\t\t\t// Show warning if user tries to insert a block into another block with bindings.\n\t\t\tif ( blocks.length ) {\n\t\t\t\tconst { createWarningNotice } =\n\t\t\t\t\tregistry.dispatch( noticesStore );\n\t\t\t\tcreateWarningNotice(\n\t\t\t\t\t__(\n\t\t\t\t\t\t\"Blocks can't be inserted into other blocks with bindings\"\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch.insertAfterBlock( selectionA.clientId );\n\t\t\treturn;\n\t\t}\n\n\t\t// Can't split if the selection is not set.\n\t\tif (\n\t\t\t! attributeKeyA ||\n\t\t\t! attributeKeyB ||\n\t\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\t\ttypeof selectionFocus.offset === 'undefined'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We can do some short-circuiting if the selection is collapsed.\n\t\tif (\n\t\t\tselectionA.clientId === selectionB.clientId &&\n\t\t\tattributeKeyA === attributeKeyB &&\n\t\t\tselectionA.offset === selectionB.offset\n\t\t) {\n\t\t\t// If an unmodified default block is selected, replace it. We don't\n\t\t\t// want to be converting into a default block.\n\t\t\tif ( blocks.length ) {\n\t\t\t\tif ( isUnmodifiedDefaultBlock( blockA ) ) {\n\t\t\t\t\tdispatch.replaceBlocks(\n\t\t\t\t\t\t[ selectionA.clientId ],\n\t\t\t\t\t\tblocks,\n\t\t\t\t\t\tblocks.length - 1,\n\t\t\t\t\t\t-1\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If selection is at the start or end, we can simply insert an\n\t\t\t// empty block, provided this block has no inner blocks.\n\t\t\telse if ( ! select.getBlockOrder( selectionA.clientId ).length ) {\n\t\t\t\tfunction createEmpty() {\n\t\t\t\t\tconst defaultBlockName = getDefaultBlockName();\n\t\t\t\t\treturn select.canInsertBlockType(\n\t\t\t\t\t\tdefaultBlockName,\n\t\t\t\t\t\tanchorRootClientId\n\t\t\t\t\t)\n\t\t\t\t\t\t? createBlock( defaultBlockName )\n\t\t\t\t\t\t: createBlock(\n\t\t\t\t\t\t\t\tselect.getBlockName( selectionA.clientId )\n\t\t\t\t\t\t  );\n\t\t\t\t}\n\n\t\t\t\tconst length = blockAttributes[ attributeKeyA ].length;\n\n\t\t\t\tif ( selectionA.offset === 0 && length ) {\n\t\t\t\t\tdispatch.insertBlocks(\n\t\t\t\t\t\t[ createEmpty() ],\n\t\t\t\t\t\tselect.getBlockIndex( selectionA.clientId ),\n\t\t\t\t\t\tanchorRootClientId,\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( selectionA.offset === length ) {\n\t\t\t\t\tdispatch.insertBlocks(\n\t\t\t\t\t\t[ createEmpty() ],\n\t\t\t\t\t\tselect.getBlockIndex( selectionA.clientId ) + 1,\n\t\t\t\t\t\tanchorRootClientId\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst htmlA = blockA.attributes[ attributeKeyA ];\n\t\tconst htmlB = blockB.attributes[ attributeKeyB ];\n\n\t\tlet valueA = create( { html: htmlA } );\n\t\tlet valueB = create( { html: htmlB } );\n\n\t\tvalueA = remove( valueA, selectionA.offset, valueA.text.length );\n\t\tvalueB = remove( valueB, 0, selectionB.offset );\n\n\t\tlet head = {\n\t\t\t// Preserve the original client ID.\n\t\t\t...blockA,\n\t\t\t// If both start and end are the same, should only copy innerBlocks\n\t\t\t// once.\n\t\t\tinnerBlocks:\n\t\t\t\tblockA.clientId === blockB.clientId ? [] : blockA.innerBlocks,\n\t\t\tattributes: {\n\t\t\t\t...blockA.attributes,\n\t\t\t\t[ attributeKeyA ]: toHTMLString( { value: valueA } ),\n\t\t\t},\n\t\t};\n\n\t\tlet tail = {\n\t\t\t...blockB,\n\t\t\t// Only preserve the original client ID if the end is different.\n\t\t\tclientId:\n\t\t\t\tblockA.clientId === blockB.clientId\n\t\t\t\t\t? createBlock( blockB.name ).clientId\n\t\t\t\t\t: blockB.clientId,\n\t\t\tattributes: {\n\t\t\t\t...blockB.attributes,\n\t\t\t\t[ attributeKeyB ]: toHTMLString( { value: valueB } ),\n\t\t\t},\n\t\t};\n\n\t\t// When splitting a block, attempt to convert the tail block to the\n\t\t// default block type. For example, when splitting a heading block, the\n\t\t// tail block will be converted to a paragraph block. Note that for\n\t\t// blocks such as a list item and button, this will be skipped because\n\t\t// the default block type cannot be inserted.\n\t\tconst defaultBlockName = getDefaultBlockName();\n\t\tif (\n\t\t\t// A block is only split when the selection is within the same\n\t\t\t// block.\n\t\t\tblockA.clientId === blockB.clientId &&\n\t\t\tdefaultBlockName &&\n\t\t\ttail.name !== defaultBlockName &&\n\t\t\tselect.canInsertBlockType( defaultBlockName, anchorRootClientId )\n\t\t) {\n\t\t\tconst switched = switchToBlockType( tail, defaultBlockName );\n\t\t\tif ( switched?.length === 1 ) {\n\t\t\t\ttail = switched[ 0 ];\n\t\t\t}\n\t\t}\n\n\t\tif ( ! blocks.length ) {\n\t\t\tdispatch.replaceBlocks( select.getSelectedBlockClientIds(), [\n\t\t\t\thead,\n\t\t\t\ttail,\n\t\t\t] );\n\t\t\treturn;\n\t\t}\n\n\t\tlet selection;\n\t\tconst output = [];\n\t\tconst clonedBlocks = [ ...blocks ];\n\t\tconst firstBlock = clonedBlocks.shift();\n\t\tconst headType = getBlockType( head.name );\n\t\tconst firstBlocks =\n\t\t\theadType.merge && firstBlock.name === headType.name\n\t\t\t\t? [ firstBlock ]\n\t\t\t\t: switchToBlockType( firstBlock, headType.name );\n\n\t\tif ( firstBlocks?.length ) {\n\t\t\tconst first = firstBlocks.shift();\n\t\t\thead = {\n\t\t\t\t...head,\n\t\t\t\tattributes: {\n\t\t\t\t\t...head.attributes,\n\t\t\t\t\t...headType.merge( head.attributes, first.attributes ),\n\t\t\t\t},\n\t\t\t};\n\t\t\toutput.push( head );\n\t\t\tselection = {\n\t\t\t\tclientId: head.clientId,\n\t\t\t\tattributeKey: attributeKeyA,\n\t\t\t\toffset: create( { html: head.attributes[ attributeKeyA ] } )\n\t\t\t\t\t.text.length,\n\t\t\t};\n\t\t\tclonedBlocks.unshift( ...firstBlocks );\n\t\t} else {\n\t\t\tif ( ! isUnmodifiedBlock( head ) ) {\n\t\t\t\toutput.push( head );\n\t\t\t}\n\t\t\toutput.push( firstBlock );\n\t\t}\n\n\t\tconst lastBlock = clonedBlocks.pop();\n\t\tconst tailType = getBlockType( tail.name );\n\n\t\tif ( clonedBlocks.length ) {\n\t\t\toutput.push( ...clonedBlocks );\n\t\t}\n\n\t\tif ( lastBlock ) {\n\t\t\tconst lastBlocks =\n\t\t\t\ttailType.merge && tailType.name === lastBlock.name\n\t\t\t\t\t? [ lastBlock ]\n\t\t\t\t\t: switchToBlockType( lastBlock, tailType.name );\n\n\t\t\tif ( lastBlocks?.length ) {\n\t\t\t\tconst last = lastBlocks.pop();\n\t\t\t\toutput.push( {\n\t\t\t\t\t...tail,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...tail.attributes,\n\t\t\t\t\t\t...tailType.merge( last.attributes, tail.attributes ),\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t\toutput.push( ...lastBlocks );\n\t\t\t\tselection = {\n\t\t\t\t\tclientId: tail.clientId,\n\t\t\t\t\tattributeKey: attributeKeyB,\n\t\t\t\t\toffset: create( {\n\t\t\t\t\t\thtml: last.attributes[ attributeKeyB ],\n\t\t\t\t\t} ).text.length,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toutput.push( lastBlock );\n\t\t\t\tif ( ! isUnmodifiedBlock( tail ) ) {\n\t\t\t\t\toutput.push( tail );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( ! isUnmodifiedBlock( tail ) ) {\n\t\t\toutput.push( tail );\n\t\t}\n\n\t\tregistry.batch( () => {\n\t\t\tdispatch.replaceBlocks(\n\t\t\t\tselect.getSelectedBlockClientIds(),\n\t\t\t\toutput,\n\t\t\t\toutput.length - 1,\n\t\t\t\t0\n\t\t\t);\n\t\t\tif ( selection ) {\n\t\t\t\tdispatch.selectionChange(\n\t\t\t\t\tselection.clientId,\n\t\t\t\t\tselection.attributeKey,\n\t\t\t\t\tselection.offset,\n\t\t\t\t\tselection.offset\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t};\n\n/**\n * Expand the selection to cover the entire blocks, removing partial selection.\n */\nexport const __unstableExpandSelection =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\t\tdispatch.selectionChange( {\n\t\t\tstart: { clientId: selectionAnchor.clientId },\n\t\t\tend: { clientId: selectionFocus.clientId },\n\t\t} );\n\t};\n\n/**\n * Action that merges two blocks.\n *\n * @param {string} firstBlockClientId  Client ID of the first block to merge.\n * @param {string} secondBlockClientId Client ID of the second block to merge.\n */\nexport const mergeBlocks =\n\t( firstBlockClientId, secondBlockClientId ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst clientIdA = firstBlockClientId;\n\t\tconst clientIdB = secondBlockClientId;\n\t\tconst blockA = select.getBlock( clientIdA );\n\t\tconst blockAType = getBlockType( blockA.name );\n\n\t\tif ( ! blockAType ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockB = select.getBlock( clientIdB );\n\n\t\tif (\n\t\t\t! blockAType.merge &&\n\t\t\tgetBlockSupport( blockA.name, '__experimentalOnMerge' )\n\t\t) {\n\t\t\t// If there's no merge function defined, attempt merging inner\n\t\t\t// blocks.\n\t\t\tconst blocksWithTheSameType = switchToBlockType(\n\t\t\t\tblockB,\n\t\t\t\tblockAType.name\n\t\t\t);\n\t\t\t// Only focus the previous block if it's not mergeable.\n\t\t\tif ( blocksWithTheSameType?.length !== 1 ) {\n\t\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst [ blockWithSameType ] = blocksWithTheSameType;\n\t\t\tif ( blockWithSameType.innerBlocks.length < 1 ) {\n\t\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tregistry.batch( () => {\n\t\t\t\tdispatch.insertBlocks(\n\t\t\t\t\tblockWithSameType.innerBlocks,\n\t\t\t\t\tundefined,\n\t\t\t\t\tclientIdA\n\t\t\t\t);\n\t\t\t\tdispatch.removeBlock( clientIdB );\n\t\t\t\tdispatch.selectBlock(\n\t\t\t\t\tblockWithSameType.innerBlocks[ 0 ].clientId\n\t\t\t\t);\n\n\t\t\t\t// Attempt to merge the next block if it's the same type and\n\t\t\t\t// same attributes. This is useful when merging a paragraph into\n\t\t\t\t// a list, and the next block is also a list. If we don't merge,\n\t\t\t\t// it looks like one list, but it's actually two lists. The same\n\t\t\t\t// applies to other blocks such as a group with the same\n\t\t\t\t// attributes.\n\t\t\t\tconst nextBlockClientId =\n\t\t\t\t\tselect.getNextBlockClientId( clientIdA );\n\n\t\t\t\tif (\n\t\t\t\t\tnextBlockClientId &&\n\t\t\t\t\tselect.getBlockName( clientIdA ) ===\n\t\t\t\t\t\tselect.getBlockName( nextBlockClientId )\n\t\t\t\t) {\n\t\t\t\t\tconst rootAttributes =\n\t\t\t\t\t\tselect.getBlockAttributes( clientIdA );\n\t\t\t\t\tconst previousRootAttributes =\n\t\t\t\t\t\tselect.getBlockAttributes( nextBlockClientId );\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tObject.keys( rootAttributes ).every(\n\t\t\t\t\t\t\t( key ) =>\n\t\t\t\t\t\t\t\trootAttributes[ key ] ===\n\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tdispatch.moveBlocksToPosition(\n\t\t\t\t\t\t\tselect.getBlockOrder( nextBlockClientId ),\n\t\t\t\t\t\t\tnextBlockClientId,\n\t\t\t\t\t\t\tclientIdA\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdispatch.removeBlock( nextBlockClientId, false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isUnmodifiedDefaultBlock( blockA ) ) {\n\t\t\tdispatch.removeBlock(\n\t\t\t\tclientIdA,\n\t\t\t\tselect.isBlockSelected( clientIdA )\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isUnmodifiedDefaultBlock( blockB ) ) {\n\t\t\tdispatch.removeBlock(\n\t\t\t\tclientIdB,\n\t\t\t\tselect.isBlockSelected( clientIdB )\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! blockAType.merge ) {\n\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockBType = getBlockType( blockB.name );\n\t\tconst { clientId, attributeKey, offset } = select.getSelectionStart();\n\t\tconst selectedBlockType =\n\t\t\tclientId === clientIdA ? blockAType : blockBType;\n\t\tconst attributeDefinition =\n\t\t\tselectedBlockType.attributes[ attributeKey ];\n\t\tconst canRestoreTextSelection =\n\t\t\t( clientId === clientIdA || clientId === clientIdB ) &&\n\t\t\tattributeKey !== undefined &&\n\t\t\toffset !== undefined &&\n\t\t\t// We cannot restore text selection if the RichText identifier\n\t\t\t// is not a defined block attribute key. This can be the case if the\n\t\t\t// fallback instance ID is used to store selection (and no RichText\n\t\t\t// identifier is set), or when the identifier is wrong.\n\t\t\t!! attributeDefinition;\n\n\t\tif ( ! attributeDefinition ) {\n\t\t\tif ( typeof attributeKey === 'number' ) {\n\t\t\t\twindow.console.error(\n\t\t\t\t\t`RichText needs an identifier prop that is the block attribute key of the attribute it controls. Its type is expected to be a string, but was ${ typeof attributeKey }`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\twindow.console.error(\n\t\t\t\t\t'The RichText identifier prop does not match any attributes defined by the block.'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Clone the blocks so we don't insert the character in a \"live\" block.\n\t\tconst cloneA = cloneBlock( blockA );\n\t\tconst cloneB = cloneBlock( blockB );\n\n\t\tif ( canRestoreTextSelection ) {\n\t\t\tconst selectedBlock = clientId === clientIdA ? cloneA : cloneB;\n\t\t\tconst html = selectedBlock.attributes[ attributeKey ];\n\t\t\tconst value = insert(\n\t\t\t\tcreate( { html } ),\n\t\t\t\tSTART_OF_SELECTED_AREA,\n\t\t\t\toffset,\n\t\t\t\toffset\n\t\t\t);\n\n\t\t\tselectedBlock.attributes[ attributeKey ] = toHTMLString( {\n\t\t\t\tvalue,\n\t\t\t} );\n\t\t}\n\n\t\t// We can only merge blocks with similar types\n\t\t// thus, we transform the block to merge first.\n\t\tconst blocksWithTheSameType =\n\t\t\tblockA.name === blockB.name\n\t\t\t\t? [ cloneB ]\n\t\t\t\t: switchToBlockType( cloneB, blockA.name );\n\n\t\t// If the block types can not match, do nothing.\n\t\tif ( ! blocksWithTheSameType || ! blocksWithTheSameType.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Calling the merge to update the attributes and remove the block to be merged.\n\t\tconst updatedAttributes = blockAType.merge(\n\t\t\tcloneA.attributes,\n\t\t\tblocksWithTheSameType[ 0 ].attributes\n\t\t);\n\n\t\tif ( canRestoreTextSelection ) {\n\t\t\tconst newAttributeKey =\n\t\t\t\tretrieveSelectedAttribute( updatedAttributes );\n\t\t\tconst convertedHtml = updatedAttributes[ newAttributeKey ];\n\t\t\tconst convertedValue = create( { html: convertedHtml } );\n\t\t\tconst newOffset = convertedValue.text.indexOf(\n\t\t\t\tSTART_OF_SELECTED_AREA\n\t\t\t);\n\t\t\tconst newValue = remove( convertedValue, newOffset, newOffset + 1 );\n\t\t\tconst newHtml = toHTMLString( { value: newValue } );\n\n\t\t\tupdatedAttributes[ newAttributeKey ] = newHtml;\n\n\t\t\tdispatch.selectionChange(\n\t\t\t\tblockA.clientId,\n\t\t\t\tnewAttributeKey,\n\t\t\t\tnewOffset,\n\t\t\t\tnewOffset\n\t\t\t);\n\t\t}\n\n\t\tdispatch.replaceBlocks(\n\t\t\t[ blockA.clientId, blockB.clientId ],\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t...blockA,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...blockA.attributes,\n\t\t\t\t\t\t...updatedAttributes,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...blocksWithTheSameType.slice( 1 ),\n\t\t\t],\n\t\t\t0 // If we don't pass the `indexToSelect` it will default to the last block.\n\t\t);\n\t};\n\n/**\n * Yields action objects used in signalling that the blocks corresponding to\n * the set of specified client IDs are to be removed.\n *\n * @param {string|string[]} clientIds      Client IDs of blocks to remove.\n * @param {boolean}         selectPrevious True if the previous block\n *                                         or the immediate parent\n *                                         (if no previous block exists)\n *                                         should be selected\n *                                         when a block is removed.\n */\nexport const removeBlocks = ( clientIds, selectPrevious = true ) =>\n\tprivateRemoveBlocks( clientIds, selectPrevious );\n\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID is to be removed.\n *\n * @param {string}  clientId       Client ID of block to remove.\n * @param {boolean} selectPrevious True if the previous block should be\n *                                 selected when a block is removed.\n *\n * @return {Object} Action object.\n */\nexport function removeBlock( clientId, selectPrevious ) {\n\treturn removeBlocks( [ clientId ], selectPrevious );\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that the inner blocks with the\n * specified client ID should be replaced.\n *\n * @param {string}    rootClientId    Client ID of the block whose InnerBlocks will re replaced.\n * @param {Object[]}  blocks          Block objects to insert as new InnerBlocks\n * @param {?boolean}  updateSelection If true block selection will be updated. If false, block selection will not change. Defaults to false.\n * @param {0|-1|null} initialPosition Initial block position.\n * @return {Object} Action object.\n */\nexport function replaceInnerBlocks(\n\trootClientId,\n\tblocks,\n\tupdateSelection = false,\n\tinitialPosition = 0\n) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'REPLACE_INNER_BLOCKS',\n\t\trootClientId,\n\t\tblocks,\n\t\tupdateSelection,\n\t\tinitialPosition: updateSelection ? initialPosition : null,\n\t\ttime: Date.now(),\n\t};\n}\n\n/**\n * Returns an action object used to toggle the block editing mode between\n * visual and HTML modes.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Action object.\n */\nexport function toggleBlockMode( clientId ) {\n\treturn {\n\t\ttype: 'TOGGLE_BLOCK_MODE',\n\t\tclientId,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to type.\n *\n * @return {Object} Action object.\n */\nexport function startTyping() {\n\treturn {\n\t\ttype: 'START_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped typing.\n *\n * @return {Object} Action object.\n */\nexport function stopTyping() {\n\treturn {\n\t\ttype: 'STOP_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to drag blocks.\n *\n * @param {string[]} clientIds An array of client ids being dragged\n *\n * @return {Object} Action object.\n */\nexport function startDraggingBlocks( clientIds = [] ) {\n\treturn {\n\t\ttype: 'START_DRAGGING_BLOCKS',\n\t\tclientIds,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped dragging blocks.\n *\n * @return {Object} Action object.\n */\nexport function stopDraggingBlocks() {\n\treturn {\n\t\ttype: 'STOP_DRAGGING_BLOCKS',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the caret has entered formatted text.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function enterFormattedText() {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).enterFormattedText', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user caret has exited formatted text.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function exitFormattedText() {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).exitFormattedText', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Action that changes the position of the user caret.\n *\n * @param {string|WPSelection} clientId     The selected block client ID.\n * @param {string}             attributeKey The selected block attribute key.\n * @param {number}             startOffset  The start offset.\n * @param {number}             endOffset    The end offset.\n *\n * @return {Object} Action object.\n */\nexport function selectionChange(\n\tclientId,\n\tattributeKey,\n\tstartOffset,\n\tendOffset\n) {\n\tif ( typeof clientId === 'string' ) {\n\t\treturn {\n\t\t\ttype: 'SELECTION_CHANGE',\n\t\t\tclientId,\n\t\t\tattributeKey,\n\t\t\tstartOffset,\n\t\t\tendOffset,\n\t\t};\n\t}\n\n\treturn { type: 'SELECTION_CHANGE', ...clientId };\n}\n\n/**\n * Action that adds a new block of the default type to the block list.\n *\n * @param {?Object} attributes   Optional attributes of the block to assign.\n * @param {?string} rootClientId Optional root client ID of block list on which\n *                               to append.\n * @param {?number} index        Optional index where to insert the default block.\n */\nexport const insertDefaultBlock =\n\t( attributes, rootClientId, index ) =>\n\t( { dispatch } ) => {\n\t\t// Abort if there is no default block type (if it has been unregistered).\n\t\tconst defaultBlockName = getDefaultBlockName();\n\t\tif ( ! defaultBlockName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst block = createBlock( defaultBlockName, attributes );\n\n\t\treturn dispatch.insertBlock( block, index, rootClientId );\n\t};\n\n/**\n * @typedef {Object< string, Object >} SettingsByClientId\n */\n\n/**\n * Action that changes the nested settings of the given block(s).\n *\n * @param {string | SettingsByClientId} clientId Client ID of the block whose\n *                                               nested setting are being\n *                                               received, or object of settings\n *                                               by client ID.\n * @param {Object}                      settings Object with the new settings\n *                                               for the nested block.\n *\n * @return {Object} Action object\n */\nexport function updateBlockListSettings( clientId, settings ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_LIST_SETTINGS',\n\t\tclientId,\n\t\tsettings,\n\t};\n}\n\n/**\n * Action that updates the block editor settings.\n *\n * @param {Object} settings Updated settings\n *\n * @return {Object} Action object\n */\nexport function updateSettings( settings ) {\n\treturn __experimentalUpdateSettings( settings, {\n\t\tstripExperimentalSettings: true,\n\t} );\n}\n\n/**\n * Action that signals that a temporary reusable block has been saved\n * in order to switch its temporary id with the real id.\n *\n * @param {string} id        Reusable block's id.\n * @param {string} updatedId Updated block's id.\n *\n * @return {Object} Action object.\n */\nexport function __unstableSaveReusableBlock( id, updatedId ) {\n\treturn {\n\t\ttype: 'SAVE_REUSABLE_BLOCK_SUCCESS',\n\t\tid,\n\t\tupdatedId,\n\t};\n}\n\n/**\n * Action that marks the last block change explicitly as persistent.\n *\n * @return {Object} Action object.\n */\nexport function __unstableMarkLastChangeAsPersistent() {\n\treturn { type: 'MARK_LAST_CHANGE_AS_PERSISTENT' };\n}\n\n/**\n * Action that signals that the next block change should be marked explicitly as not persistent.\n *\n * @return {Object} Action object.\n */\nexport function __unstableMarkNextChangeAsNotPersistent() {\n\treturn { type: 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT' };\n}\n\n/**\n * Action that marks the last block change as an automatic change, meaning it was not\n * performed by the user, and can be undone using the `Escape` and `Backspace` keys.\n * This action must be called after the change was made, and any actions that are a\n * consequence of it, so it is recommended to be called at the next idle period to ensure all\n * selection changes have been recorded.\n */\nexport const __unstableMarkAutomaticChange =\n\t() =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'MARK_AUTOMATIC_CHANGE' } );\n\t\tconst { requestIdleCallback = ( cb ) => setTimeout( cb, 100 ) } =\n\t\t\twindow;\n\t\trequestIdleCallback( () => {\n\t\t\tdispatch( { type: 'MARK_AUTOMATIC_CHANGE_FINAL' } );\n\t\t} );\n\t};\n\n/**\n * Action that enables or disables the navigation mode.\n *\n * @param {boolean} isNavigationMode Enable/Disable navigation mode.\n */\nexport const setNavigationMode =\n\t( isNavigationMode = true ) =>\n\t( { dispatch } ) => {\n\t\tdispatch.__unstableSetEditorMode(\n\t\t\tisNavigationMode ? 'navigation' : 'edit'\n\t\t);\n\t};\n\n/**\n * Action that sets the editor mode\n *\n * @param {string} mode Editor mode\n */\nexport const __unstableSetEditorMode =\n\t( mode ) =>\n\t( { registry } ) => {\n\t\tregistry.dispatch( preferencesStore ).set( 'core', 'editorTool', mode );\n\n\t\tif ( mode === 'navigation' ) {\n\t\t\tspeak( __( 'You are currently in Write mode.' ) );\n\t\t} else if ( mode === 'edit' ) {\n\t\t\tspeak( __( 'You are currently in Design mode.' ) );\n\t\t}\n\t};\n\n/**\n * Set the block moving client ID.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function setBlockMovingClientId() {\n\tdeprecated(\n\t\t'wp.data.dispatch( \"core/block-editor\" ).setBlockMovingClientId',\n\t\t{\n\t\t\tsince: '6.7',\n\t\t\thint: 'Block moving mode feature has been removed',\n\t\t}\n\t);\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Action that duplicates a list of blocks.\n *\n * @param {string[]} clientIds\n * @param {boolean}  updateSelection\n */\nexport const duplicateBlocks =\n\t( clientIds, updateSelection = true ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientIds || ! clientIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if blocks don't exist.\n\t\tconst blocks = select.getBlocksByClientId( clientIds );\n\t\tif ( blocks.some( ( block ) => ! block ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if blocks don't support multiple usage.\n\t\tconst blockNames = blocks.map( ( block ) => block.name );\n\t\tif (\n\t\t\tblockNames.some(\n\t\t\t\t( blockName ) =>\n\t\t\t\t\t! hasBlockSupport( blockName, 'multiple', true )\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\tconst clientIdsArray = castArray( clientIds );\n\t\tconst lastSelectedIndex = select.getBlockIndex(\n\t\t\tclientIdsArray[ clientIdsArray.length - 1 ]\n\t\t);\n\t\tconst clonedBlocks = blocks.map( ( block ) =>\n\t\t\t__experimentalCloneSanitizedBlock( block )\n\t\t);\n\t\tdispatch.insertBlocks(\n\t\t\tclonedBlocks,\n\t\t\tlastSelectedIndex + 1,\n\t\t\trootClientId,\n\t\t\tupdateSelection\n\t\t);\n\t\tif ( clonedBlocks.length > 1 && updateSelection ) {\n\t\t\tdispatch.multiSelect(\n\t\t\t\tclonedBlocks[ 0 ].clientId,\n\t\t\t\tclonedBlocks[ clonedBlocks.length - 1 ].clientId\n\t\t\t);\n\t\t}\n\t\treturn clonedBlocks.map( ( block ) => block.clientId );\n\t};\n\n/**\n * Action that inserts a default block before a given block.\n *\n * @param {string} clientId\n */\nexport const insertBeforeBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rootClientId = select.getBlockRootClientId( clientId );\n\t\tconst isLocked = select.getTemplateLock( rootClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockIndex = select.getBlockIndex( clientId );\n\t\tconst directInsertBlock = rootClientId\n\t\t\t? select.getDirectInsertBlock( rootClientId )\n\t\t\t: null;\n\n\t\tif ( ! directInsertBlock ) {\n\t\t\treturn dispatch.insertDefaultBlock( {}, rootClientId, blockIndex );\n\t\t}\n\n\t\tconst copiedAttributes = {};\n\t\tif ( directInsertBlock.attributesToCopy ) {\n\t\t\tconst attributes = select.getBlockAttributes( clientId );\n\t\t\tdirectInsertBlock.attributesToCopy.forEach( ( key ) => {\n\t\t\t\tif ( attributes[ key ] ) {\n\t\t\t\t\tcopiedAttributes[ key ] = attributes[ key ];\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tconst block = createBlock( directInsertBlock.name, {\n\t\t\t...directInsertBlock.attributes,\n\t\t\t...copiedAttributes,\n\t\t} );\n\t\treturn dispatch.insertBlock( block, blockIndex, rootClientId );\n\t};\n\n/**\n * Action that inserts a default block after a given block.\n *\n * @param {string} clientId\n */\nexport const insertAfterBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rootClientId = select.getBlockRootClientId( clientId );\n\t\tconst isLocked = select.getTemplateLock( rootClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockIndex = select.getBlockIndex( clientId );\n\t\tconst directInsertBlock = rootClientId\n\t\t\t? select.getDirectInsertBlock( rootClientId )\n\t\t\t: null;\n\n\t\tif ( ! directInsertBlock ) {\n\t\t\treturn dispatch.insertDefaultBlock(\n\t\t\t\t{},\n\t\t\t\trootClientId,\n\t\t\t\tblockIndex + 1\n\t\t\t);\n\t\t}\n\n\t\tconst copiedAttributes = {};\n\t\tif ( directInsertBlock.attributesToCopy ) {\n\t\t\tconst attributes = select.getBlockAttributes( clientId );\n\t\t\tdirectInsertBlock.attributesToCopy.forEach( ( key ) => {\n\t\t\t\tif ( attributes[ key ] ) {\n\t\t\t\t\tcopiedAttributes[ key ] = attributes[ key ];\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tconst block = createBlock( directInsertBlock.name, {\n\t\t\t...directInsertBlock.attributes,\n\t\t\t...copiedAttributes,\n\t\t} );\n\t\treturn dispatch.insertBlock( block, blockIndex + 1, rootClientId );\n\t};\n\n/**\n * Action that toggles the highlighted block state.\n *\n * @param {string}  clientId      The block's clientId.\n * @param {boolean} isHighlighted The highlight state.\n */\nexport function toggleBlockHighlight( clientId, isHighlighted ) {\n\treturn {\n\t\ttype: 'TOGGLE_BLOCK_HIGHLIGHT',\n\t\tclientId,\n\t\tisHighlighted,\n\t};\n}\n\n/**\n * Action that \"flashes\" the block with a given `clientId` by rhythmically highlighting it.\n *\n * @param {string} clientId Target block client ID.\n */\nexport const flashBlock =\n\t( clientId ) =>\n\tasync ( { dispatch } ) => {\n\t\tdispatch( toggleBlockHighlight( clientId, true ) );\n\t\tawait new Promise( ( resolve ) => setTimeout( resolve, 150 ) );\n\t\tdispatch( toggleBlockHighlight( clientId, false ) );\n\t};\n\n/**\n * Action that sets whether a block has controlled inner blocks.\n *\n * @param {string}  clientId                 The block's clientId.\n * @param {boolean} hasControlledInnerBlocks True if the block's inner blocks are controlled.\n */\nexport function setHasControlledInnerBlocks(\n\tclientId,\n\thasControlledInnerBlocks\n) {\n\treturn {\n\t\ttype: 'SET_HAS_CONTROLLED_INNER_BLOCKS',\n\t\thasControlledInnerBlocks,\n\t\tclientId,\n\t};\n}\n\n/**\n * Action that sets whether given blocks are visible on the canvas.\n *\n * @param {Record<string,boolean>} updates For each block's clientId, its new visibility setting.\n */\nexport function setBlockVisibility( updates ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_VISIBILITY',\n\t\tupdates,\n\t};\n}\n\n/**\n * Action that sets whether a block is being temporarily edited as blocks.\n *\n * DO-NOT-USE in production.\n * This action is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @param {?string} temporarilyEditingAsBlocks The block's clientId being temporarily edited as blocks.\n * @param {?string} focusModeToRevert          The focus mode to revert after temporarily edit as blocks finishes.\n */\nexport function __unstableSetTemporarilyEditingAsBlocks(\n\ttemporarilyEditingAsBlocks,\n\tfocusModeToRevert\n) {\n\treturn {\n\t\ttype: 'SET_TEMPORARILY_EDITING_AS_BLOCKS',\n\t\ttemporarilyEditingAsBlocks,\n\t\tfocusModeToRevert,\n\t};\n}\n\n/**\n * Interface for inserter media requests.\n *\n * @typedef {Object} InserterMediaRequest\n * @property {number} per_page How many items to fetch per page.\n * @property {string} search   The search term to use for filtering the results.\n */\n\n/**\n * Interface for inserter media responses. Any media resource should\n * map their response to this interface, in order to create the core\n * WordPress media blocks (image, video, audio).\n *\n * @typedef {Object} InserterMediaItem\n * @property {string}        title        The title of the media item.\n * @property {string}        url          The source url of the media item.\n * @property {string}        [previewUrl] The preview source url of the media item to display in the media list.\n * @property {number}        [id]         The WordPress id of the media item.\n * @property {number|string} [sourceId]   The id of the media item from external source.\n * @property {string}        [alt]        The alt text of the media item.\n * @property {string}        [caption]    The caption of the media item.\n */\n\n/**\n * Registers a new inserter media category. Once registered, the media category is\n * available in the inserter's media tab.\n *\n * The following interfaces are used:\n *\n * _Type Definition_\n *\n * - _InserterMediaRequest_ `Object`: Interface for inserter media requests.\n *\n * _Properties_\n *\n * - _per_page_ `number`: How many items to fetch per page.\n * - _search_ `string`: The search term to use for filtering the results.\n *\n * _Type Definition_\n *\n * - _InserterMediaItem_ `Object`: Interface for inserter media responses. Any media resource should\n * map their response to this interface, in order to create the core\n * WordPress media blocks (image, video, audio).\n *\n * _Properties_\n *\n * - _title_ `string`: The title of the media item.\n * - _url_ `string: The source url of the media item.\n * - _previewUrl_ `[string]`: The preview source url of the media item to display in the media list.\n * - _id_ `[number]`: The WordPress id of the media item.\n * - _sourceId_ `[number|string]`: The id of the media item from external source.\n * - _alt_ `[string]`: The alt text of the media item.\n * - _caption_ `[string]`: The caption of the media item.\n *\n * @param    {InserterMediaCategory}                                  category                       The inserter media category to register.\n *\n * @example\n * ```js\n *\n * wp.data.dispatch('core/block-editor').registerInserterMediaCategory( {\n * \t name: 'openverse',\n * \t labels: {\n * \t \tname: 'Openverse',\n * \t \tsearch_items: 'Search Openverse',\n * \t },\n * \t mediaType: 'image',\n * \t async fetch( query = {} ) {\n * \t \tconst defaultArgs = {\n * \t \t\tmature: false,\n * \t \t\texcluded_source: 'flickr,inaturalist,wikimedia',\n * \t \t\tlicense: 'pdm,cc0',\n * \t \t};\n * \t \tconst finalQuery = { ...query, ...defaultArgs };\n * \t \t// Sometimes you might need to map the supported request params according to `InserterMediaRequest`.\n * \t \t// interface. In this example the `search` query param is named `q`.\n * \t \tconst mapFromInserterMediaRequest = {\n * \t \t\tper_page: 'page_size',\n * \t \t\tsearch: 'q',\n * \t \t};\n * \t \tconst url = new URL( 'https://api.openverse.org/v1/images/' );\n * \t \tObject.entries( finalQuery ).forEach( ( [ key, value ] ) => {\n * \t \t\tconst queryKey = mapFromInserterMediaRequest[ key ] || key;\n * \t \t\turl.searchParams.set( queryKey, value );\n * \t \t} );\n * \t \tconst response = await window.fetch( url, {\n * \t \t\theaders: {\n * \t \t\t\t'User-Agent': 'WordPress/inserter-media-fetch',\n * \t \t\t},\n * \t \t} );\n * \t \tconst jsonResponse = await response.json();\n * \t \tconst results = jsonResponse.results;\n * \t \treturn results.map( ( result ) => ( {\n * \t \t\t...result,\n * \t \t\t// If your response result includes an `id` prop that you want to access later, it should\n * \t \t\t// be mapped to `InserterMediaItem`'s `sourceId` prop. This can be useful if you provide\n * \t \t\t// a report URL getter.\n * \t \t\t// Additionally you should always clear the `id` value of your response results because\n * \t \t\t// it is used to identify WordPress media items.\n * \t \t\tsourceId: result.id,\n * \t \t\tid: undefined,\n * \t \t\tcaption: result.caption,\n * \t \t\tpreviewUrl: result.thumbnail,\n * \t \t} ) );\n * \t },\n * \t getReportUrl: ( { sourceId } ) =>\n * \t \t`https://wordpress.org/openverse/image/${ sourceId }/report/`,\n * \t isExternalResource: true,\n * } );\n * ```\n *\n * @typedef {Object} InserterMediaCategory Interface for inserter media category.\n * @property {string}                                                 name                           The name of the media category, that should be unique among all media categories.\n * @property {Object}                                                 labels                         Labels for the media category.\n * @property {string}                                                 labels.name                    General name of the media category. It's used in the inserter media items list.\n * @property {string}                                                 [labels.search_items='Search'] Label for searching items. Default is ‘Search Posts’ / ‘Search Pages’.\n * @property {('image'|'audio'|'video')}                              mediaType                      The media type of the media category.\n * @property {(InserterMediaRequest) => Promise<InserterMediaItem[]>} fetch                          The function to fetch media items for the category.\n * @property {(InserterMediaItem) => string}                          [getReportUrl]                 If the media category supports reporting media items, this function should return\n *                                                                                                   the report url for the media item. It accepts the `InserterMediaItem` as an argument.\n * @property {boolean}                                                [isExternalResource]           If the media category is an external resource, this should be set to true.\n *                                                                                                   This is used to avoid making a request to the external resource when the user\n */\nexport const registerInserterMediaCategory =\n\t( category ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! category || typeof category !== 'object' ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should be an `InserterMediaCategory` object.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif ( ! category.name ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should have a `name` that should be unique among all media categories.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif ( ! category.labels?.name ) {\n\t\t\tconsole.error( 'Category should have a `labels.name`.' );\n\t\t\treturn;\n\t\t}\n\t\tif ( ! [ 'image', 'audio', 'video' ].includes( category.mediaType ) ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should have `mediaType` property that is one of `image|audio|video`.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif ( ! category.fetch || typeof category.fetch !== 'function' ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should have a `fetch` function defined with the following signature `(InserterMediaRequest) => Promise<InserterMediaItem[]>`.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tconst registeredInserterMediaCategories =\n\t\t\tselect.getRegisteredInserterMediaCategories();\n\t\tif (\n\t\t\tregisteredInserterMediaCategories.some(\n\t\t\t\t( { name } ) => name === category.name\n\t\t\t)\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t`A category is already registered with the same name: \"${ category.name }\".`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tregisteredInserterMediaCategories.some(\n\t\t\t\t( { labels: { name } = {} } ) => name === category.labels?.name\n\t\t\t)\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t`A category is already registered with the same labels.name: \"${ category.labels.name }\".`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\t// `inserterMediaCategories` is a private block editor setting, which means it cannot\n\t\t// be updated through the public `updateSettings` action. We preserve this setting as\n\t\t// private, so extenders can only add new inserter media categories and don't have any\n\t\t// control over the core media categories.\n\t\tdispatch( {\n\t\t\ttype: 'REGISTER_INSERTER_MEDIA_CATEGORY',\n\t\t\tcategory: { ...category, isExternalResource: true },\n\t\t} );\n\t};\n\n/**\n * @typedef {import('../components/block-editing-mode').BlockEditingMode} BlockEditingMode\n */\n\n/**\n * Sets the block editing mode for a given block.\n *\n * @see useBlockEditingMode\n *\n * @param {string}           clientId The block client ID, or `''` for the root container.\n * @param {BlockEditingMode} mode     The block editing mode. One of `'disabled'`,\n *                                    `'contentOnly'`, or `'default'`.\n *\n * @return {Object} Action object.\n */\nexport function setBlockEditingMode( clientId = '', mode ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_EDITING_MODE',\n\t\tclientId,\n\t\tmode,\n\t};\n}\n\n/**\n * Clears the block editing mode for a given block.\n *\n * @see useBlockEditingMode\n *\n * @param {string} clientId The block client ID, or `''` for the root container.\n *\n * @return {Object} Action object.\n */\nexport function unsetBlockEditingMode( clientId = '' ) {\n\treturn {\n\t\ttype: 'UNSET_BLOCK_EDITING_MODE',\n\t\tclientId,\n\t};\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SACCA,UAAU,EACVC,iCAAiC,EACjCC,WAAW,EACXC,qBAAqB,EACrBC,YAAY,EACZC,mBAAmB,EACnBC,eAAe,EACfC,iBAAiB,EACjBC,6BAA6B,EAC7BC,eAAe,EACfC,wBAAwB,EACxBC,iBAAiB,QACX,mBAAmB;AAC1B,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,EAAE,EAAEC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AACjD,SAASC,KAAK,IAAIC,YAAY,QAAQ,oBAAoB;AAC1D,SAASC,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAEC,YAAY,QAAQ,sBAAsB;AAC3E,OAAOC,UAAU,MAAM,uBAAuB;AAC9C,SAASN,KAAK,IAAIO,gBAAgB,QAAQ,wBAAwB;;AAElE;AACA;AACA;AACA,SACCC,yBAAyB,EACzBC,wBAAwB,EACxBC,sBAAsB,QAChB,oBAAoB;AAC3B,SACCC,4BAA4B,EAC5BC,mBAAmB,QACb,mBAAmB;;AAE1B;;AAEA,MAAMC,SAAS,GAAKC,UAAU,IAC7BC,KAAK,CAACC,OAAO,CAAEF,UAAW,CAAC,GAAGA,UAAU,GAAG,CAAEA,UAAU,CAAE;;AAE1D;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMG,WAAW,GACrBC,MAAM,IACR,CAAE;EAAEC;AAAS,CAAC,KAAM;EACnBA,QAAQ,CAAE;IAAEC,IAAI,EAAE,cAAc;IAAEF;EAAO,CAAE,CAAC;EAC5CC,QAAQ,CAAEE,wBAAwB,CAAEH,MAAO,CAAE,CAAC;AAC/C,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMG,wBAAwB,GAClCH,MAAM,IACR,CAAE;EAAEI,MAAM;EAAEH;AAAS,CAAC,KAAM;EAC3B,MAAMI,QAAQ,GAAGD,MAAM,CAACE,WAAW,CAAC,CAAC;EACrC,MAAMC,YAAY,GAAGH,MAAM,CAACI,eAAe,CAAC,CAAC;;EAE7C;EACA;EACA,MAAMC,uBAAuB,GAC5B,CAAEJ,QAAQ,IACVE,YAAY,KAAK,KAAK,IACtBtC,qBAAqB,CAAE+B,MAAM,EAAEK,QAAS,CAAC;;EAE1C;EACA,MAAMK,eAAe,GAAGN,MAAM,CAACM,eAAe,CAAC,CAAC;EAEhD,IAAKD,uBAAuB,KAAKC,eAAe,EAAG;IAClDT,QAAQ,CAACU,mBAAmB,CAAEF,uBAAwB,CAAC;IACvD,OAAOA,uBAAuB;EAC/B;AACD,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASG,cAAcA,CAC7BC,cAAc,EACdC,YAAY,EACZC,eAAe,EACd;EACD;EACA,OAAO;IACNb,IAAI,EAAE,iBAAiB;IACvBW,cAAc;IACdC,YAAY;IACZC;EACD,CAAC;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,aAAaA,CAAEhB,MAAM,EAAG;EACvCZ,UAAU,CAAE,uDAAuD,EAAE;IACpE6B,KAAK,EAAE,KAAK;IACZC,WAAW,EAAE;EACd,CAAE,CAAC;EAEH,OAAO;IACNhB,IAAI,EAAE,gBAAgB;IACtBF;EACD,CAAC;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASmB,qBAAqBA,CACpCC,SAAS,EACTC,UAAU,EACVC,aAAa,GAAG,KAAK,EACpB;EACD,OAAO;IACNpB,IAAI,EAAE,yBAAyB;IAC/BkB,SAAS,EAAEzB,SAAS,CAAEyB,SAAU,CAAC;IACjCC,UAAU;IACVC;EACD,CAAC;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAAEC,QAAQ,EAAEC,OAAO,EAAG;EAChD,OAAO;IACNvB,IAAI,EAAE,cAAc;IACpBsB,QAAQ;IACRC;EACD,CAAC;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAAEF,QAAQ,EAAET,eAAe,GA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","ignoreList":[]}