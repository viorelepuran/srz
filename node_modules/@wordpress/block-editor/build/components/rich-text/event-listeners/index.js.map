{"version":3,"names":["_element","require","_compose","_beforeInputRules","_interopRequireDefault","_inputRules","_insertReplacementText","_removeBrowserShortcuts","_shortcuts","_inputEvents","_undoAutomaticChange","_pasteHandler","_delete2","_enter","_firefoxCompat","allEventListeners","beforeInputRules","inputRules","insertReplacementText","removeBrowserShortcuts","shortcuts","inputEvents","undoAutomaticChange","pasteHandler","_delete","enter","firefoxCompat","useEventListeners","props","propsRef","useRef","useInsertionEffect","current","refEffects","useMemo","map","refEffect","useRefEffect","element","isSelected","cleanups","effect","forEach","cleanup"],"sources":["@wordpress/block-editor/src/components/rich-text/event-listeners/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useMemo, useRef, useInsertionEffect } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport beforeInputRules from './before-input-rules';\nimport inputRules from './input-rules';\nimport insertReplacementText from './insert-replacement-text';\nimport removeBrowserShortcuts from './remove-browser-shortcuts';\nimport shortcuts from './shortcuts';\nimport inputEvents from './input-events';\nimport undoAutomaticChange from './undo-automatic-change';\nimport pasteHandler from './paste-handler';\nimport _delete from './delete';\nimport enter from './enter';\nimport firefoxCompat from './firefox-compat';\n\nconst allEventListeners = [\n\tbeforeInputRules,\n\tinputRules,\n\tinsertReplacementText,\n\tremoveBrowserShortcuts,\n\tshortcuts,\n\tinputEvents,\n\tundoAutomaticChange,\n\tpasteHandler,\n\t_delete,\n\tenter,\n\tfirefoxCompat,\n];\n\nexport function useEventListeners( props ) {\n\tconst propsRef = useRef( props );\n\tuseInsertionEffect( () => {\n\t\tpropsRef.current = props;\n\t} );\n\tconst refEffects = useMemo(\n\t\t() => allEventListeners.map( ( refEffect ) => refEffect( propsRef ) ),\n\t\t[ propsRef ]\n\t);\n\n\treturn useRefEffect(\n\t\t( element ) => {\n\t\t\tif ( ! props.isSelected ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst cleanups = refEffects.map( ( effect ) => effect( element ) );\n\t\t\treturn () => {\n\t\t\t\tcleanups.forEach( ( cleanup ) => cleanup() );\n\t\t\t};\n\t\t},\n\t\t[ refEffects, props.isSelected ]\n\t);\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAKA,IAAAE,iBAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,WAAA,GAAAD,sBAAA,CAAAH,OAAA;AACA,IAAAK,sBAAA,GAAAF,sBAAA,CAAAH,OAAA;AACA,IAAAM,uBAAA,GAAAH,sBAAA,CAAAH,OAAA;AACA,IAAAO,UAAA,GAAAJ,sBAAA,CAAAH,OAAA;AACA,IAAAQ,YAAA,GAAAL,sBAAA,CAAAH,OAAA;AACA,IAAAS,oBAAA,GAAAN,sBAAA,CAAAH,OAAA;AACA,IAAAU,aAAA,GAAAP,sBAAA,CAAAH,OAAA;AACA,IAAAW,QAAA,GAAAR,sBAAA,CAAAH,OAAA;AACA,IAAAY,MAAA,GAAAT,sBAAA,CAAAH,OAAA;AACA,IAAAa,cAAA,GAAAV,sBAAA,CAAAH,OAAA;AAnBA;AACA;AACA;;AAIA;AACA;AACA;;AAaA,MAAMc,iBAAiB,GAAG,CACzBC,yBAAgB,EAChBC,mBAAU,EACVC,8BAAqB,EACrBC,+BAAsB,EACtBC,kBAAS,EACTC,oBAAW,EACXC,4BAAmB,EACnBC,qBAAY,EACZC,gBAAO,EACPC,cAAK,EACLC,sBAAa,CACb;AAEM,SAASC,iBAAiBA,CAAEC,KAAK,EAAG;EAC1C,MAAMC,QAAQ,GAAG,IAAAC,eAAM,EAAEF,KAAM,CAAC;EAChC,IAAAG,2BAAkB,EAAE,MAAM;IACzBF,QAAQ,CAACG,OAAO,GAAGJ,KAAK;EACzB,CAAE,CAAC;EACH,MAAMK,UAAU,GAAG,IAAAC,gBAAO,EACzB,MAAMnB,iBAAiB,CAACoB,GAAG,CAAIC,SAAS,IAAMA,SAAS,CAAEP,QAAS,CAAE,CAAC,EACrE,CAAEA,QAAQ,CACX,CAAC;EAED,OAAO,IAAAQ,qBAAY,EAChBC,OAAO,IAAM;IACd,IAAK,CAAEV,KAAK,CAACW,UAAU,EAAG;MACzB;IACD;IACA,MAAMC,QAAQ,GAAGP,UAAU,CAACE,GAAG,CAAIM,MAAM,IAAMA,MAAM,CAAEH,OAAQ,CAAE,CAAC;IAClE,OAAO,MAAM;MACZE,QAAQ,CAACE,OAAO,CAAIC,OAAO,IAAMA,OAAO,CAAC,CAAE,CAAC;IAC7C,CAAC;EACF,CAAC,EACD,CAAEV,UAAU,EAAEL,KAAK,CAACW,UAAU,CAC/B,CAAC;AACF","ignoreList":[]}