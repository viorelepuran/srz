{"version":3,"names":["_i18n","require","_icons","RANGE_CONTROL_MAX_SIZE","exports","ALL_SIDES","DEFAULT_VALUES","top","undefined","right","bottom","left","ICONS","custom","sidesAll","axial","horizontal","sidesHorizontal","vertical","sidesVertical","sidesTop","sidesRight","sidesBottom","sidesLeft","LABELS","default","__","mixed","VIEWS","isValueSpacingPreset","value","includes","getCustomValueFromPreset","spacingSizes","slug","getSpacingPresetSlug","spacingSize","find","size","String","getPresetValueFromCustomValue","spacingMatch","getSpacingPresetCssVar","match","getSliderValueFromPreset","presetValue","parseFloat","sliderValue","findIndex","NaN","hasAxisSupport","sides","axis","length","hasHorizontalSupport","hasVerticalSupport","hasBalancedSidesSupport","counts","forEach","side","getInitialView","values","sideValues","filter","Boolean","hasMatchingAxialValues","hasNoValuesAndBalancedSides","hasOnlyAxialSides","Object","entries","some","key"],"sources":["@wordpress/block-editor/src/components/spacing-sizes-control/utils.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tsidesAll,\n\tsidesBottom,\n\tsidesHorizontal,\n\tsidesLeft,\n\tsidesRight,\n\tsidesTop,\n\tsidesVertical,\n} from '@wordpress/icons';\n\nexport const RANGE_CONTROL_MAX_SIZE = 8;\n\nexport const ALL_SIDES = [ 'top', 'right', 'bottom', 'left' ];\n\nexport const DEFAULT_VALUES = {\n\ttop: undefined,\n\tright: undefined,\n\tbottom: undefined,\n\tleft: undefined,\n};\n\nexport const ICONS = {\n\tcustom: sidesAll,\n\taxial: sidesAll,\n\thorizontal: sidesHorizontal,\n\tvertical: sidesVertical,\n\ttop: sidesTop,\n\tright: sidesRight,\n\tbottom: sidesBottom,\n\tleft: sidesLeft,\n};\n\nexport const LABELS = {\n\tdefault: __( 'Spacing control' ),\n\ttop: __( 'Top' ),\n\tbottom: __( 'Bottom' ),\n\tleft: __( 'Left' ),\n\tright: __( 'Right' ),\n\tmixed: __( 'Mixed' ),\n\tvertical: __( 'Vertical' ),\n\thorizontal: __( 'Horizontal' ),\n\taxial: __( 'Horizontal & vertical' ),\n\tcustom: __( 'Custom' ),\n};\n\nexport const VIEWS = {\n\taxial: 'axial',\n\ttop: 'top',\n\tright: 'right',\n\tbottom: 'bottom',\n\tleft: 'left',\n\tcustom: 'custom',\n};\n\n/**\n * Checks is given value is a spacing preset.\n *\n * @param {string} value Value to check\n *\n * @return {boolean} Return true if value is string in format var:preset|spacing|.\n */\nexport function isValueSpacingPreset( value ) {\n\tif ( ! value?.includes ) {\n\t\treturn false;\n\t}\n\treturn value === '0' || value.includes( 'var:preset|spacing|' );\n}\n\n/**\n * Converts a spacing preset into a custom value.\n *\n * @param {string} value        Value to convert\n * @param {Array}  spacingSizes Array of the current spacing preset objects\n *\n * @return {string} Mapping of the spacing preset to its equivalent custom value.\n */\nexport function getCustomValueFromPreset( value, spacingSizes ) {\n\tif ( ! isValueSpacingPreset( value ) ) {\n\t\treturn value;\n\t}\n\n\tconst slug = getSpacingPresetSlug( value );\n\tconst spacingSize = spacingSizes.find(\n\t\t( size ) => String( size.slug ) === slug\n\t);\n\n\treturn spacingSize?.size;\n}\n\n/**\n * Converts a custom value to preset value if one can be found.\n *\n * Returns value as-is if no match is found.\n *\n * @param {string} value        Value to convert\n * @param {Array}  spacingSizes Array of the current spacing preset objects\n *\n * @return {string} The preset value if it can be found.\n */\nexport function getPresetValueFromCustomValue( value, spacingSizes ) {\n\t// Return value as-is if it is undefined or is already a preset, or '0';\n\tif ( ! value || isValueSpacingPreset( value ) || value === '0' ) {\n\t\treturn value;\n\t}\n\n\tconst spacingMatch = spacingSizes.find(\n\t\t( size ) => String( size.size ) === String( value )\n\t);\n\n\tif ( spacingMatch?.slug ) {\n\t\treturn `var:preset|spacing|${ spacingMatch.slug }`;\n\t}\n\n\treturn value;\n}\n\n/**\n * Converts a spacing preset into a custom value.\n *\n * @param {string} value Value to convert.\n *\n * @return {string | undefined} CSS var string for given spacing preset value.\n */\nexport function getSpacingPresetCssVar( value ) {\n\tif ( ! value ) {\n\t\treturn;\n\t}\n\n\tconst slug = value.match( /var:preset\\|spacing\\|(.+)/ );\n\n\tif ( ! slug ) {\n\t\treturn value;\n\t}\n\n\treturn `var(--wp--preset--spacing--${ slug[ 1 ] })`;\n}\n\n/**\n * Returns the slug section of the given spacing preset string.\n *\n * @param {string} value Value to extract slug from.\n *\n * @return {string|undefined} The int value of the slug from given spacing preset.\n */\nexport function getSpacingPresetSlug( value ) {\n\tif ( ! value ) {\n\t\treturn;\n\t}\n\n\tif ( value === '0' || value === 'default' ) {\n\t\treturn value;\n\t}\n\n\tconst slug = value.match( /var:preset\\|spacing\\|(.+)/ );\n\n\treturn slug ? slug[ 1 ] : undefined;\n}\n\n/**\n * Converts spacing preset value into a Range component value .\n *\n * @param {string} presetValue  Value to convert to Range value.\n * @param {Array}  spacingSizes Array of current spacing preset value objects.\n *\n * @return {number} The int value for use in Range control.\n */\nexport function getSliderValueFromPreset( presetValue, spacingSizes ) {\n\tif ( presetValue === undefined ) {\n\t\treturn 0;\n\t}\n\tconst slug =\n\t\tparseFloat( presetValue, 10 ) === 0\n\t\t\t? '0'\n\t\t\t: getSpacingPresetSlug( presetValue );\n\tconst sliderValue = spacingSizes.findIndex( ( spacingSize ) => {\n\t\treturn String( spacingSize.slug ) === slug;\n\t} );\n\n\t// Returning NaN rather than undefined as undefined makes range control thumb sit in center\n\treturn sliderValue !== -1 ? sliderValue : NaN;\n}\n\n/**\n * Determines whether a particular axis has support. If no axis is\n * specified, this function checks if either axis is supported.\n *\n * @param {Array}  sides Supported sides.\n * @param {string} axis  Which axis to check.\n *\n * @return {boolean} Whether there is support for the specified axis or both axes.\n */\nexport function hasAxisSupport( sides, axis ) {\n\tif ( ! sides || ! sides.length ) {\n\t\treturn false;\n\t}\n\n\tconst hasHorizontalSupport =\n\t\tsides.includes( 'horizontal' ) ||\n\t\t( sides.includes( 'left' ) && sides.includes( 'right' ) );\n\n\tconst hasVerticalSupport =\n\t\tsides.includes( 'vertical' ) ||\n\t\t( sides.includes( 'top' ) && sides.includes( 'bottom' ) );\n\n\tif ( axis === 'horizontal' ) {\n\t\treturn hasHorizontalSupport;\n\t}\n\n\tif ( axis === 'vertical' ) {\n\t\treturn hasVerticalSupport;\n\t}\n\n\treturn hasHorizontalSupport || hasVerticalSupport;\n}\n\n/**\n * Checks if the supported sides are balanced for each axis.\n * - Horizontal - both left and right sides are supported.\n * - Vertical - both top and bottom are supported.\n *\n * @param {Array} sides The supported sides which may be axes as well.\n *\n * @return {boolean} Whether or not the supported sides are balanced.\n */\nexport function hasBalancedSidesSupport( sides = [] ) {\n\tconst counts = { top: 0, right: 0, bottom: 0, left: 0 };\n\tsides.forEach( ( side ) => ( counts[ side ] += 1 ) );\n\n\treturn (\n\t\t( counts.top + counts.bottom ) % 2 === 0 &&\n\t\t( counts.left + counts.right ) % 2 === 0\n\t);\n}\n\n/**\n * Determines which view the SpacingSizesControl should default to on its\n * first render; Axial, Custom, or Single side.\n *\n * @param {Object} values Current side values.\n * @param {Array}  sides  Supported sides.\n *\n * @return {string} View to display.\n */\nexport function getInitialView( values = {}, sides ) {\n\tconst { top, right, bottom, left } = values;\n\tconst sideValues = [ top, right, bottom, left ].filter( Boolean );\n\n\t// Axial ( Horizontal & vertical ).\n\t// - Has axial side support\n\t// - Has axial side values which match\n\t// - Has no values and the supported sides are balanced\n\tconst hasMatchingAxialValues =\n\t\ttop === bottom && left === right && ( !! top || !! left );\n\tconst hasNoValuesAndBalancedSides =\n\t\t! sideValues.length && hasBalancedSidesSupport( sides );\n\tconst hasOnlyAxialSides =\n\t\tsides?.includes( 'horizontal' ) &&\n\t\tsides?.includes( 'vertical' ) &&\n\t\tsides?.length === 2;\n\n\tif (\n\t\thasAxisSupport( sides ) &&\n\t\t( hasMatchingAxialValues || hasNoValuesAndBalancedSides )\n\t) {\n\t\treturn VIEWS.axial;\n\t}\n\n\t// Only axial sides are supported and single value defined.\n\t// - Ensure the side returned is the first side that has a value.\n\tif ( hasOnlyAxialSides && sideValues.length === 1 ) {\n\t\tlet side;\n\n\t\tObject.entries( values ).some( ( [ key, value ] ) => {\n\t\t\tside = key;\n\t\t\treturn value !== undefined;\n\t\t} );\n\n\t\treturn side;\n\t}\n\n\t// Only single side supported and no value defined.\n\tif ( sides?.length === 1 && ! sideValues.length ) {\n\t\treturn sides[ 0 ];\n\t}\n\n\t// Default to the Custom (separated sides) view.\n\treturn VIEWS.custom;\n}\n"],"mappings":"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","ignoreList":[]}