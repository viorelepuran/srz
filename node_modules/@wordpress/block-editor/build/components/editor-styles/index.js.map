{"version":3,"names":["_colord","require","_names","_interopRequireDefault","_a11y","_components","_element","_data","_transformStyles","_store","_lockUnlock","_jsxRuntime","extend","namesPlugin","a11yPlugin","useDarkThemeBodyClassName","styles","scope","useCallback","node","ownerDocument","defaultView","body","canvas","querySelector","backgroundColor","tempCanvas","createElement","classList","add","appendChild","getComputedStyle","getPropertyValue","removeChild","colordBackgroundColor","colord","luminance","alpha","remove","EditorStyles","transformOptions","overrides","useSelect","select","unlock","blockEditorStore","getStyleOverrides","transformedStyles","transformedSvgs","useMemo","_styles","Object","values","id","override","index","findIndex","_id","overrideWithId","push","transformStyles","filter","style","css","__unstableType","map","assets","join","jsxs","Fragment","children","jsx","ref","SVG","xmlns","viewBox","width","height","role","visibility","position","left","overflow","dangerouslySetInnerHTML","__html","_default","exports","default","memo"],"sources":["@wordpress/block-editor/src/components/editor-styles/index.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { colord, extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport a11yPlugin from 'colord/plugins/a11y';\n\n/**\n * WordPress dependencies\n */\nimport { SVG } from '@wordpress/components';\nimport { useCallback, useMemo, memo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport transformStyles from '../../utils/transform-styles';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nextend( [ namesPlugin, a11yPlugin ] );\n\nfunction useDarkThemeBodyClassName( styles, scope ) {\n\treturn useCallback(\n\t\t( node ) => {\n\t\t\tif ( ! node ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView, body } = ownerDocument;\n\t\t\tconst canvas = scope ? ownerDocument.querySelector( scope ) : body;\n\n\t\t\tlet backgroundColor;\n\n\t\t\tif ( ! canvas ) {\n\t\t\t\t// The real .editor-styles-wrapper element might not exist in the\n\t\t\t\t// DOM, so calculate the background color by creating a fake\n\t\t\t\t// wrapper.\n\t\t\t\tconst tempCanvas = ownerDocument.createElement( 'div' );\n\t\t\t\ttempCanvas.classList.add( 'editor-styles-wrapper' );\n\t\t\t\tbody.appendChild( tempCanvas );\n\n\t\t\t\tbackgroundColor = defaultView\n\t\t\t\t\t?.getComputedStyle( tempCanvas, null )\n\t\t\t\t\t.getPropertyValue( 'background-color' );\n\n\t\t\t\tbody.removeChild( tempCanvas );\n\t\t\t} else {\n\t\t\t\tbackgroundColor = defaultView\n\t\t\t\t\t?.getComputedStyle( canvas, null )\n\t\t\t\t\t.getPropertyValue( 'background-color' );\n\t\t\t}\n\t\t\tconst colordBackgroundColor = colord( backgroundColor );\n\t\t\t// If background is transparent, it should be treated as light color.\n\t\t\tif (\n\t\t\t\tcolordBackgroundColor.luminance() > 0.5 ||\n\t\t\t\tcolordBackgroundColor.alpha() === 0\n\t\t\t) {\n\t\t\t\tbody.classList.remove( 'is-dark-theme' );\n\t\t\t} else {\n\t\t\t\tbody.classList.add( 'is-dark-theme' );\n\t\t\t}\n\t\t},\n\t\t[ styles, scope ]\n\t);\n}\n\nfunction EditorStyles( { styles, scope, transformOptions } ) {\n\tconst overrides = useSelect(\n\t\t( select ) => unlock( select( blockEditorStore ) ).getStyleOverrides(),\n\t\t[]\n\t);\n\tconst [ transformedStyles, transformedSvgs ] = useMemo( () => {\n\t\tconst _styles = Object.values( styles ?? [] );\n\n\t\tfor ( const [ id, override ] of overrides ) {\n\t\t\tconst index = _styles.findIndex( ( { id: _id } ) => id === _id );\n\t\t\tconst overrideWithId = { ...override, id };\n\t\t\tif ( index === -1 ) {\n\t\t\t\t_styles.push( overrideWithId );\n\t\t\t} else {\n\t\t\t\t_styles[ index ] = overrideWithId;\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\ttransformStyles(\n\t\t\t\t_styles.filter( ( style ) => style?.css ),\n\t\t\t\tscope,\n\t\t\t\ttransformOptions\n\t\t\t),\n\t\t\t_styles\n\t\t\t\t.filter( ( style ) => style.__unstableType === 'svgs' )\n\t\t\t\t.map( ( style ) => style.assets )\n\t\t\t\t.join( '' ),\n\t\t];\n\t}, [ styles, overrides, scope, transformOptions ] );\n\n\treturn (\n\t\t<>\n\t\t\t{ /* Use an empty style element to have a document reference,\n\t\t\t     but this could be any element. */ }\n\t\t\t<style\n\t\t\t\tref={ useDarkThemeBodyClassName( transformedStyles, scope ) }\n\t\t\t/>\n\t\t\t{ transformedStyles.map( ( css, index ) => (\n\t\t\t\t<style key={ index }>{ css }</style>\n\t\t\t) ) }\n\t\t\t<SVG\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 0 0\"\n\t\t\t\twidth=\"0\"\n\t\t\t\theight=\"0\"\n\t\t\t\trole=\"none\"\n\t\t\t\tstyle={ {\n\t\t\t\t\tvisibility: 'hidden',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tleft: '-9999px',\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t} }\n\t\t\t\tdangerouslySetInnerHTML={ { __html: transformedSvgs } }\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nexport default memo( EditorStyles );\n"],"mappings":"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","ignoreList":[]}