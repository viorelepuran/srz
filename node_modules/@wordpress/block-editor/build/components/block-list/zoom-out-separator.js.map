{"version":3,"names":["_clsx","_interopRequireDefault","require","_components","_compose","_data","_element","_i18n","_store","_lockUnlock","_jsxRuntime","ZoomOutSeparator","clientId","rootClientId","position","isDraggedOver","setIsDraggedOver","useState","sectionRootClientId","sectionClientIds","insertionPoint","blockInsertionPointVisible","blockInsertionPoint","blocksBeingDragged","useSelect","select","getInsertionPoint","getBlockOrder","getSectionRootClientId","isBlockInsertionPointVisible","getBlockInsertionPoint","getDraggedBlockClientIds","unlock","blockEditorStore","root","sectionRootClientIds","blockOrder","isReducedMotion","useReducedMotion","isVisible","isSectionBlock","includes","hasTopInsertionPoint","index","hasBottomInsertionPoint","hasOwnProperty","blockBeingDraggedClientId","isCurrentBlockBeingDragged","blockBeingDraggedIndex","indexOf","blockBeingDraggedPreviousSiblingClientId","isCurrentBlockPreviousSiblingOfBlockBeingDragged","jsx","__unstableAnimatePresence","children","__unstableMotion","div","initial","height","animate","exit","transition","type","duration","ease","className","clsx","onDragOver","onDragLeave","opacity","delay","__"],"sources":["@wordpress/block-editor/src/components/block-list/zoom-out-separator.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__unstableMotion as motion,\n\t__unstableAnimatePresence as AnimatePresence,\n} from '@wordpress/components';\nimport { useReducedMotion } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport function ZoomOutSeparator( {\n\tclientId,\n\trootClientId = '',\n\tposition = 'top',\n} ) {\n\tconst [ isDraggedOver, setIsDraggedOver ] = useState( false );\n\tconst {\n\t\tsectionRootClientId,\n\t\tsectionClientIds,\n\t\tinsertionPoint,\n\t\tblockInsertionPointVisible,\n\t\tblockInsertionPoint,\n\t\tblocksBeingDragged,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetInsertionPoint,\n\t\t\tgetBlockOrder,\n\t\t\tgetSectionRootClientId,\n\t\t\tisBlockInsertionPointVisible,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tgetDraggedBlockClientIds,\n\t\t} = unlock( select( blockEditorStore ) );\n\n\t\tconst root = getSectionRootClientId();\n\t\tconst sectionRootClientIds = getBlockOrder( root );\n\t\treturn {\n\t\t\tsectionRootClientId: root,\n\t\t\tsectionClientIds: sectionRootClientIds,\n\t\t\tblockOrder: getBlockOrder( root ),\n\t\t\tinsertionPoint: getInsertionPoint(),\n\t\t\tblockInsertionPoint: getBlockInsertionPoint(),\n\t\t\tblockInsertionPointVisible: isBlockInsertionPointVisible(),\n\t\t\tblocksBeingDragged: getDraggedBlockClientIds(),\n\t\t};\n\t}, [] );\n\n\tconst isReducedMotion = useReducedMotion();\n\n\tif ( ! clientId ) {\n\t\treturn;\n\t}\n\n\tlet isVisible = false;\n\n\tconst isSectionBlock =\n\t\trootClientId === sectionRootClientId &&\n\t\tsectionClientIds &&\n\t\tsectionClientIds.includes( clientId );\n\n\tif ( ! isSectionBlock ) {\n\t\treturn null;\n\t}\n\n\tconst hasTopInsertionPoint =\n\t\tinsertionPoint?.index === 0 &&\n\t\tclientId === sectionClientIds[ insertionPoint.index ];\n\tconst hasBottomInsertionPoint =\n\t\tinsertionPoint &&\n\t\tinsertionPoint.hasOwnProperty( 'index' ) &&\n\t\tclientId === sectionClientIds[ insertionPoint.index - 1 ];\n\n\t// We want to show the zoom out separator in either of these conditions:\n\t// 1. If the inserter has an insertion index set\n\t// 2. We are dragging a pattern over an insertion point\n\tif ( position === 'top' ) {\n\t\tisVisible =\n\t\t\thasTopInsertionPoint ||\n\t\t\t( blockInsertionPointVisible &&\n\t\t\t\tblockInsertionPoint.index === 0 &&\n\t\t\t\tclientId === sectionClientIds[ blockInsertionPoint.index ] );\n\t}\n\n\tif ( position === 'bottom' ) {\n\t\tisVisible =\n\t\t\thasBottomInsertionPoint ||\n\t\t\t( blockInsertionPointVisible &&\n\t\t\t\tclientId ===\n\t\t\t\t\tsectionClientIds[ blockInsertionPoint.index - 1 ] );\n\t}\n\n\tconst blockBeingDraggedClientId = blocksBeingDragged[ 0 ];\n\n\tconst isCurrentBlockBeingDragged = blocksBeingDragged.includes( clientId );\n\n\tconst blockBeingDraggedIndex = sectionClientIds.indexOf(\n\t\tblockBeingDraggedClientId\n\t);\n\tconst blockBeingDraggedPreviousSiblingClientId =\n\t\tblockBeingDraggedIndex > 0\n\t\t\t? sectionClientIds[ blockBeingDraggedIndex - 1 ]\n\t\t\t: null;\n\n\tconst isCurrentBlockPreviousSiblingOfBlockBeingDragged =\n\t\tblockBeingDraggedPreviousSiblingClientId === clientId;\n\n\t// The separators are visually top/bottom of the block, but in actual fact\n\t// the \"top\" separator is the \"bottom\" separator of the previous block.\n\t// Therefore, this logic hides the separator if the current block is being dragged\n\t// or if the current block is the previous sibling of the block being dragged.\n\tif (\n\t\tisCurrentBlockBeingDragged ||\n\t\tisCurrentBlockPreviousSiblingOfBlockBeingDragged\n\t) {\n\t\tisVisible = false;\n\t}\n\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{ isVisible && (\n\t\t\t\t<motion.div\n\t\t\t\t\tinitial={ { height: 0 } }\n\t\t\t\t\tanimate={ {\n\t\t\t\t\t\t// Use a height equal to that of the zoom out frame size.\n\t\t\t\t\t\theight: 'calc(1 * var(--wp-block-editor-iframe-zoom-out-frame-size) / var(--wp-block-editor-iframe-zoom-out-scale)',\n\t\t\t\t\t} }\n\t\t\t\t\texit={ { height: 0 } }\n\t\t\t\t\ttransition={ {\n\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\tduration: isReducedMotion ? 0 : 0.2,\n\t\t\t\t\t\tease: [ 0.6, 0, 0.4, 1 ],\n\t\t\t\t\t} }\n\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t'block-editor-block-list__zoom-out-separator',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-dragged-over': isDraggedOver,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tdata-is-insertion-point=\"true\"\n\t\t\t\t\tonDragOver={ () => setIsDraggedOver( true ) }\n\t\t\t\t\tonDragLeave={ () => setIsDraggedOver( false ) }\n\t\t\t\t>\n\t\t\t\t\t<motion.div\n\t\t\t\t\t\tinitial={ { opacity: 0 } }\n\t\t\t\t\t\tanimate={ { opacity: 1 } }\n\t\t\t\t\t\texit={ { opacity: 0, transition: { delay: -0.125 } } }\n\t\t\t\t\t\ttransition={ {\n\t\t\t\t\t\t\tease: 'linear',\n\t\t\t\t\t\t\tduration: 0.1,\n\t\t\t\t\t\t\tdelay: 0.125,\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Drop pattern.' ) }\n\t\t\t\t\t</motion.div>\n\t\t\t\t</motion.div>\n\t\t\t) }\n\t\t</AnimatePresence>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}