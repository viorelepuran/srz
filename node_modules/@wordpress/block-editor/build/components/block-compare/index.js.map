{"version":3,"names":["_clsx","_interopRequireDefault","require","_character","_i18n","_blocks","_blockView","_jsxRuntime","BlockCompare","block","onKeep","onConvert","convertor","convertButtonText","getDifference","originalContent","newContent","difference","diffChars","map","item","pos","classes","clsx","added","removed","jsx","className","children","value","getConvertedContent","convertedBlock","newBlocks","Array","isArray","getSaveContent","name","attributes","innerBlocks","join","converted","jsxs","default","title","__","action","actionText","rawContent","renderedContent","_default","exports"],"sources":["@wordpress/block-editor/src/components/block-compare/index.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n// diff doesn't tree-shake correctly, so we import from the individual\n// module here, to avoid including too much of the library\nimport { diffChars } from 'diff/lib/diff/character';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { getSaveContent } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport BlockView from './block-view';\n\nfunction BlockCompare( {\n\tblock,\n\tonKeep,\n\tonConvert,\n\tconvertor,\n\tconvertButtonText,\n} ) {\n\tfunction getDifference( originalContent, newContent ) {\n\t\tconst difference = diffChars( originalContent, newContent );\n\n\t\treturn difference.map( ( item, pos ) => {\n\t\t\tconst classes = clsx( {\n\t\t\t\t'block-editor-block-compare__added': item.added,\n\t\t\t\t'block-editor-block-compare__removed': item.removed,\n\t\t\t} );\n\n\t\t\treturn (\n\t\t\t\t<span key={ pos } className={ classes }>\n\t\t\t\t\t{ item.value }\n\t\t\t\t</span>\n\t\t\t);\n\t\t} );\n\t}\n\n\tfunction getConvertedContent( convertedBlock ) {\n\t\t// The convertor may return an array of items or a single item.\n\t\tconst newBlocks = Array.isArray( convertedBlock )\n\t\t\t? convertedBlock\n\t\t\t: [ convertedBlock ];\n\n\t\t// Get converted block details.\n\t\tconst newContent = newBlocks.map( ( item ) =>\n\t\t\tgetSaveContent( item.name, item.attributes, item.innerBlocks )\n\t\t);\n\n\t\treturn newContent.join( '' );\n\t}\n\n\tconst converted = getConvertedContent( convertor( block ) );\n\tconst difference = getDifference( block.originalContent, converted );\n\n\treturn (\n\t\t<div className=\"block-editor-block-compare__wrapper\">\n\t\t\t<BlockView\n\t\t\t\ttitle={ __( 'Current' ) }\n\t\t\t\tclassName=\"block-editor-block-compare__current\"\n\t\t\t\taction={ onKeep }\n\t\t\t\tactionText={ __( 'Convert to HTML' ) }\n\t\t\t\trawContent={ block.originalContent }\n\t\t\t\trenderedContent={ block.originalContent }\n\t\t\t/>\n\n\t\t\t<BlockView\n\t\t\t\ttitle={ __( 'After Conversion' ) }\n\t\t\t\tclassName=\"block-editor-block-compare__converted\"\n\t\t\t\taction={ onConvert }\n\t\t\t\tactionText={ convertButtonText }\n\t\t\t\trawContent={ difference }\n\t\t\t\trenderedContent={ converted }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default BlockCompare;\n"],"mappings":";;;;;;;AAGA,IAAAA,KAAA,GAAAC,sBAAA,CAAAC,OAAA;AAGA,IAAAC,UAAA,GAAAD,OAAA;AAKA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,OAAA,GAAAH,OAAA;AAKA,IAAAI,UAAA,GAAAL,sBAAA,CAAAC,OAAA;AAAqC,IAAAK,WAAA,GAAAL,OAAA;AAjBrC;AACA;AACA;;AAEA;AACA;;AAGA;AACA;AACA;;AAIA;AACA;AACA;;AAGA,SAASM,YAAYA,CAAE;EACtBC,KAAK;EACLC,MAAM;EACNC,SAAS;EACTC,SAAS;EACTC;AACD,CAAC,EAAG;EACH,SAASC,aAAaA,CAAEC,eAAe,EAAEC,UAAU,EAAG;IACrD,MAAMC,UAAU,GAAG,IAAAC,oBAAS,EAAEH,eAAe,EAAEC,UAAW,CAAC;IAE3D,OAAOC,UAAU,CAACE,GAAG,CAAE,CAAEC,IAAI,EAAEC,GAAG,KAAM;MACvC,MAAMC,OAAO,GAAG,IAAAC,aAAI,EAAE;QACrB,mCAAmC,EAAEH,IAAI,CAACI,KAAK;QAC/C,qCAAqC,EAAEJ,IAAI,CAACK;MAC7C,CAAE,CAAC;MAEH,oBACC,IAAAlB,WAAA,CAAAmB,GAAA;QAAkBC,SAAS,EAAGL,OAAS;QAAAM,QAAA,EACpCR,IAAI,CAACS;MAAK,GADDR,GAEN,CAAC;IAET,CAAE,CAAC;EACJ;EAEA,SAASS,mBAAmBA,CAAEC,cAAc,EAAG;IAC9C;IACA,MAAMC,SAAS,GAAGC,KAAK,CAACC,OAAO,CAAEH,cAAe,CAAC,GAC9CA,cAAc,GACd,CAAEA,cAAc,CAAE;;IAErB;IACA,MAAMf,UAAU,GAAGgB,SAAS,CAACb,GAAG,CAAIC,IAAI,IACvC,IAAAe,sBAAc,EAAEf,IAAI,CAACgB,IAAI,EAAEhB,IAAI,CAACiB,UAAU,EAAEjB,IAAI,CAACkB,WAAY,CAC9D,CAAC;IAED,OAAOtB,UAAU,CAACuB,IAAI,CAAE,EAAG,CAAC;EAC7B;EAEA,MAAMC,SAAS,GAAGV,mBAAmB,CAAElB,SAAS,CAAEH,KAAM,CAAE,CAAC;EAC3D,MAAMQ,UAAU,GAAGH,aAAa,CAAEL,KAAK,CAACM,eAAe,EAAEyB,SAAU,CAAC;EAEpE,oBACC,IAAAjC,WAAA,CAAAkC,IAAA;IAAKd,SAAS,EAAC,qCAAqC;IAAAC,QAAA,gBACnD,IAAArB,WAAA,CAAAmB,GAAA,EAACpB,UAAA,CAAAoC,OAAS;MACTC,KAAK,EAAG,IAAAC,QAAE,EAAE,SAAU,CAAG;MACzBjB,SAAS,EAAC,qCAAqC;MAC/CkB,MAAM,EAAGnC,MAAQ;MACjBoC,UAAU,EAAG,IAAAF,QAAE,EAAE,iBAAkB,CAAG;MACtCG,UAAU,EAAGtC,KAAK,CAACM,eAAiB;MACpCiC,eAAe,EAAGvC,KAAK,CAACM;IAAiB,CACzC,CAAC,eAEF,IAAAR,WAAA,CAAAmB,GAAA,EAACpB,UAAA,CAAAoC,OAAS;MACTC,KAAK,EAAG,IAAAC,QAAE,EAAE,kBAAmB,CAAG;MAClCjB,SAAS,EAAC,uCAAuC;MACjDkB,MAAM,EAAGlC,SAAW;MACpBmC,UAAU,EAAGjC,iBAAmB;MAChCkC,UAAU,EAAG9B,UAAY;MACzB+B,eAAe,EAAGR;IAAW,CAC7B,CAAC;EAAA,CACE,CAAC;AAER;AAAC,IAAAS,QAAA,GAAAC,OAAA,CAAAR,OAAA,GAEclC,YAAY","ignoreList":[]}