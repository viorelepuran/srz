{"version":3,"names":["_data","require","_element","_inbetween","_interopRequireDefault","_zoomOutModeInserterButton","_store","_lockUnlock","_jsxRuntime","ZoomOutModeInserters","isReady","setIsReady","useState","hasSelection","blockOrder","setInserterIsOpened","sectionRootClientId","selectedBlockClientId","blockInsertionPoint","insertionPointVisible","useSelect","select","getSettings","getBlockOrder","getSelectionStart","getSelectedBlockClientId","getSectionRootClientId","getBlockInsertionPoint","isBlockInsertionPointVisible","unlock","blockEditorStore","root","clientId","__experimentalSetIsInserterOpened","showInsertionPoint","useDispatch","useEffect","timeout","setTimeout","clearTimeout","previousClientId","index","findIndex","insertionIndex","nextClientId","jsx","default","children","onClick","rootClientId","tab","category","operation","_default","exports"],"sources":["@wordpress/block-editor/src/components/block-tools/zoom-out-mode-inserters.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverInbetween from '../block-popover/inbetween';\nimport ZoomOutModeInserterButton from './zoom-out-mode-inserter-button';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction ZoomOutModeInserters() {\n\tconst [ isReady, setIsReady ] = useState( false );\n\tconst {\n\t\thasSelection,\n\t\tblockOrder,\n\t\tsetInserterIsOpened,\n\t\tsectionRootClientId,\n\t\tselectedBlockClientId,\n\t\tblockInsertionPoint,\n\t\tinsertionPointVisible,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSettings,\n\t\t\tgetBlockOrder,\n\t\t\tgetSelectionStart,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetSectionRootClientId,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockInsertionPointVisible,\n\t\t} = unlock( select( blockEditorStore ) );\n\n\t\tconst root = getSectionRootClientId();\n\n\t\treturn {\n\t\t\thasSelection: !! getSelectionStart().clientId,\n\t\t\tblockOrder: getBlockOrder( root ),\n\t\t\tsectionRootClientId: root,\n\t\t\tsetInserterIsOpened:\n\t\t\t\tgetSettings().__experimentalSetIsInserterOpened,\n\t\t\tselectedBlockClientId: getSelectedBlockClientId(),\n\t\t\tblockInsertionPoint: getBlockInsertionPoint(),\n\t\t\tinsertionPointVisible: isBlockInsertionPointVisible(),\n\t\t};\n\t}, [] );\n\n\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\n\tconst { showInsertionPoint } = unlock( useDispatch( blockEditorStore ) );\n\n\t// Defer the initial rendering to avoid the jumps due to the animation.\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tsetIsReady( true );\n\t\t}, 500 );\n\t\treturn () => {\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t}, [] );\n\n\tif ( ! isReady || ! hasSelection ) {\n\t\treturn null;\n\t}\n\n\tconst previousClientId = selectedBlockClientId;\n\tconst index = blockOrder.findIndex(\n\t\t( clientId ) => selectedBlockClientId === clientId\n\t);\n\n\tconst insertionIndex = index + 1;\n\n\tconst nextClientId = blockOrder[ insertionIndex ];\n\n\t// If the block insertion point is visible, and the insertion\n\t// Indices match then we don't need to render the inserter.\n\tif (\n\t\tinsertionPointVisible &&\n\t\tblockInsertionPoint?.index === insertionIndex\n\t) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BlockPopoverInbetween\n\t\t\tpreviousClientId={ previousClientId }\n\t\t\tnextClientId={ nextClientId }\n\t\t>\n\t\t\t<ZoomOutModeInserterButton\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tsetInserterIsOpened( {\n\t\t\t\t\t\trootClientId: sectionRootClientId,\n\t\t\t\t\t\tinsertionIndex,\n\t\t\t\t\t\ttab: 'patterns',\n\t\t\t\t\t\tcategory: 'all',\n\t\t\t\t\t} );\n\t\t\t\t\tshowInsertionPoint( sectionRootClientId, insertionIndex, {\n\t\t\t\t\t\toperation: 'insert',\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t/>\n\t\t</BlockPopoverInbetween>\n\t);\n}\n\nexport default ZoomOutModeInserters;\n"],"mappings":"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","ignoreList":[]}