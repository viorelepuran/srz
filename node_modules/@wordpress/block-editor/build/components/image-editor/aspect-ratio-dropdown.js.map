{"version":3,"names":["_icons","require","_components","_i18n","_useSettings","_constants","_context","_jsxRuntime","AspectRatioGroup","aspectRatios","isDisabled","label","onClick","value","jsx","MenuGroup","children","map","name","slug","ratio","MenuItem","disabled","role","isSelected","icon","check","undefined","ratioToNumber","str","a","b","rest","split","Number","isNaN","length","NaN","presetRatioAsNumber","AspectRatioDropdown","toggleProps","isInProgress","aspect","setAspect","defaultAspect","useImageEditingContext","defaultRatios","themeRatios","showDefaultRatios","useSettings","DropdownMenu","aspectRatioIcon","__","popoverProps","POPOVER_PROPS","onClose","jsxs","Fragment","newAspect","filter"],"sources":["@wordpress/block-editor/src/components/image-editor/aspect-ratio-dropdown.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { check, aspectRatio as aspectRatioIcon } from '@wordpress/icons';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\nimport { POPOVER_PROPS } from './constants';\nimport { useImageEditingContext } from './context';\n\nfunction AspectRatioGroup( {\n\taspectRatios,\n\tisDisabled,\n\tlabel,\n\tonClick,\n\tvalue,\n} ) {\n\treturn (\n\t\t<MenuGroup label={ label }>\n\t\t\t{ aspectRatios.map( ( { name, slug, ratio } ) => (\n\t\t\t\t<MenuItem\n\t\t\t\t\tkey={ slug }\n\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonClick( ratio );\n\t\t\t\t\t} }\n\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\tisSelected={ ratio === value }\n\t\t\t\t\ticon={ ratio === value ? check : undefined }\n\t\t\t\t>\n\t\t\t\t\t{ name }\n\t\t\t\t</MenuItem>\n\t\t\t) ) }\n\t\t</MenuGroup>\n\t);\n}\n\nexport function ratioToNumber( str ) {\n\t// TODO: support two-value aspect ratio?\n\t// https://css-tricks.com/almanac/properties/a/aspect-ratio/#aa-it-can-take-two-values\n\tconst [ a, b, ...rest ] = str.split( '/' ).map( Number );\n\tif (\n\t\ta <= 0 ||\n\t\tb <= 0 ||\n\t\tNumber.isNaN( a ) ||\n\t\tNumber.isNaN( b ) ||\n\t\trest.length\n\t) {\n\t\treturn NaN;\n\t}\n\treturn b ? a / b : a;\n}\n\nfunction presetRatioAsNumber( { ratio, ...rest } ) {\n\treturn {\n\t\tratio: ratioToNumber( ratio ),\n\t\t...rest,\n\t};\n}\n\nexport default function AspectRatioDropdown( { toggleProps } ) {\n\tconst { isInProgress, aspect, setAspect, defaultAspect } =\n\t\tuseImageEditingContext();\n\n\tconst [ defaultRatios, themeRatios, showDefaultRatios ] = useSettings(\n\t\t'dimensions.aspectRatios.default',\n\t\t'dimensions.aspectRatios.theme',\n\t\t'dimensions.defaultAspectRatios'\n\t);\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ aspectRatioIcon }\n\t\t\tlabel={ __( 'Aspect Ratio' ) }\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\ttoggleProps={ toggleProps }\n\t\t>\n\t\t\t{ ( { onClose } ) => (\n\t\t\t\t<>\n\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\taspectRatios={ [\n\t\t\t\t\t\t\t// All ratios should be mirrored in AspectRatioTool in @wordpress/block-editor.\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tslug: 'original',\n\t\t\t\t\t\t\t\tname: __( 'Original' ),\n\t\t\t\t\t\t\t\tratio: defaultAspect,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...( showDefaultRatios\n\t\t\t\t\t\t\t\t? defaultRatios\n\t\t\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio === 1 )\n\t\t\t\t\t\t\t\t: [] ),\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t\t{ themeRatios?.length > 0 && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Theme' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ themeRatios }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showDefaultRatios && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Landscape' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio > 1 ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showDefaultRatios && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Portrait' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio < 1 ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}