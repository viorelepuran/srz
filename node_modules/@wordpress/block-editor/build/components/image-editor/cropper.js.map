{"version":3,"names":["_reactEasyCrop","_interopRequireDefault","require","_clsx","_components","_compose","_constants","_context","_jsxRuntime","ImageCropper","url","width","height","naturalHeight","naturalWidth","borderProps","isInProgress","editedUrl","position","zoom","aspect","setPosition","setCrop","setZoom","rotation","useImageEditingContext","contentResizeListener","clientWidth","useResizeObserver","editedHeight","area","jsxs","className","clsx","style","children","jsx","default","image","disabled","minZoom","MIN_ZOOM","maxZoom","MAX_ZOOM","crop","onCropChange","pos","onCropComplete","newCropPercent","onZoomChange","newZoom","Spinner","Fragment"],"sources":["@wordpress/block-editor/src/components/image-editor/cropper.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport Cropper from 'react-easy-crop';\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { Spinner } from '@wordpress/components';\nimport { useResizeObserver } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { MIN_ZOOM, MAX_ZOOM } from './constants';\n\nimport { useImageEditingContext } from './context';\n\nexport default function ImageCropper( {\n\turl,\n\twidth,\n\theight,\n\tnaturalHeight,\n\tnaturalWidth,\n\tborderProps,\n} ) {\n\tconst {\n\t\tisInProgress,\n\t\teditedUrl,\n\t\tposition,\n\t\tzoom,\n\t\taspect,\n\t\tsetPosition,\n\t\tsetCrop,\n\t\tsetZoom,\n\t\trotation,\n\t} = useImageEditingContext();\n\tconst [ contentResizeListener, { width: clientWidth } ] =\n\t\tuseResizeObserver();\n\n\tlet editedHeight = height || ( clientWidth * naturalHeight ) / naturalWidth;\n\n\tif ( rotation % 180 === 90 ) {\n\t\teditedHeight = ( clientWidth * naturalWidth ) / naturalHeight;\n\t}\n\n\tconst area = (\n\t\t<div\n\t\t\tclassName={ clsx(\n\t\t\t\t'wp-block-image__crop-area',\n\t\t\t\tborderProps?.className,\n\t\t\t\t{\n\t\t\t\t\t'is-applying': isInProgress,\n\t\t\t\t}\n\t\t\t) }\n\t\t\tstyle={ {\n\t\t\t\t...borderProps?.style,\n\t\t\t\twidth: width || clientWidth,\n\t\t\t\theight: editedHeight,\n\t\t\t} }\n\t\t>\n\t\t\t<Cropper\n\t\t\t\timage={ editedUrl || url }\n\t\t\t\tdisabled={ isInProgress }\n\t\t\t\tminZoom={ MIN_ZOOM / 100 }\n\t\t\t\tmaxZoom={ MAX_ZOOM / 100 }\n\t\t\t\tcrop={ position }\n\t\t\t\tzoom={ zoom / 100 }\n\t\t\t\taspect={ aspect }\n\t\t\t\tonCropChange={ ( pos ) => {\n\t\t\t\t\tsetPosition( pos );\n\t\t\t\t} }\n\t\t\t\tonCropComplete={ ( newCropPercent ) => {\n\t\t\t\t\tsetCrop( newCropPercent );\n\t\t\t\t} }\n\t\t\t\tonZoomChange={ ( newZoom ) => {\n\t\t\t\t\tsetZoom( newZoom * 100 );\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ isInProgress && <Spinner /> }\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ contentResizeListener }\n\t\t\t{ area }\n\t\t</>\n\t);\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,cAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AAKA,IAAAE,WAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AAKA,IAAAI,UAAA,GAAAJ,OAAA;AAEA,IAAAK,QAAA,GAAAL,OAAA;AAAmD,IAAAM,WAAA,GAAAN,OAAA;AAjBnD;AACA;AACA;;AAIA;AACA;AACA;;AAIA;AACA;AACA;;AAKe,SAASO,YAAYA,CAAE;EACrCC,GAAG;EACHC,KAAK;EACLC,MAAM;EACNC,aAAa;EACbC,YAAY;EACZC;AACD,CAAC,EAAG;EACH,MAAM;IACLC,YAAY;IACZC,SAAS;IACTC,QAAQ;IACRC,IAAI;IACJC,MAAM;IACNC,WAAW;IACXC,OAAO;IACPC,OAAO;IACPC;EACD,CAAC,GAAG,IAAAC,+BAAsB,EAAC,CAAC;EAC5B,MAAM,CAAEC,qBAAqB,EAAE;IAAEf,KAAK,EAAEgB;EAAY,CAAC,CAAE,GACtD,IAAAC,0BAAiB,EAAC,CAAC;EAEpB,IAAIC,YAAY,GAAGjB,MAAM,IAAMe,WAAW,GAAGd,aAAa,GAAKC,YAAY;EAE3E,IAAKU,QAAQ,GAAG,GAAG,KAAK,EAAE,EAAG;IAC5BK,YAAY,GAAKF,WAAW,GAAGb,YAAY,GAAKD,aAAa;EAC9D;EAEA,MAAMiB,IAAI,gBACT,IAAAtB,WAAA,CAAAuB,IAAA;IACCC,SAAS,EAAG,IAAAC,aAAI,EACf,2BAA2B,EAC3BlB,WAAW,EAAEiB,SAAS,EACtB;MACC,aAAa,EAAEhB;IAChB,CACD,CAAG;IACHkB,KAAK,EAAG;MACP,GAAGnB,WAAW,EAAEmB,KAAK;MACrBvB,KAAK,EAAEA,KAAK,IAAIgB,WAAW;MAC3Bf,MAAM,EAAEiB;IACT,CAAG;IAAAM,QAAA,gBAEH,IAAA3B,WAAA,CAAA4B,GAAA,EAACpC,cAAA,CAAAqC,OAAO;MACPC,KAAK,EAAGrB,SAAS,IAAIP,GAAK;MAC1B6B,QAAQ,EAAGvB,YAAc;MACzBwB,OAAO,EAAGC,mBAAQ,GAAG,GAAK;MAC1BC,OAAO,EAAGC,mBAAQ,GAAG,GAAK;MAC1BC,IAAI,EAAG1B,QAAU;MACjBC,IAAI,EAAGA,IAAI,GAAG,GAAK;MACnBC,MAAM,EAAGA,MAAQ;MACjByB,YAAY,EAAKC,GAAG,IAAM;QACzBzB,WAAW,CAAEyB,GAAI,CAAC;MACnB,CAAG;MACHC,cAAc,EAAKC,cAAc,IAAM;QACtC1B,OAAO,CAAE0B,cAAe,CAAC;MAC1B,CAAG;MACHC,YAAY,EAAKC,OAAO,IAAM;QAC7B3B,OAAO,CAAE2B,OAAO,GAAG,GAAI,CAAC;MACzB;IAAG,CACH,CAAC,EACAlC,YAAY,iBAAI,IAAAR,WAAA,CAAA4B,GAAA,EAAChC,WAAA,CAAA+C,OAAO,IAAE,CAAC;EAAA,CACzB,CACL;EAED,oBACC,IAAA3C,WAAA,CAAAuB,IAAA,EAAAvB,WAAA,CAAA4C,QAAA;IAAAjB,QAAA,GACGT,qBAAqB,EACrBI,IAAI;EAAA,CACL,CAAC;AAEL","ignoreList":[]}