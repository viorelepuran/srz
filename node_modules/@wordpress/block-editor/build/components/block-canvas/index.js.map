{"version":3,"names":["_compose","require","_element","_data","_blockList","_interopRequireDefault","_blockTools","_editorStyles","_iframe","_writingFlow","_observeTyping","_blockSelectionClearer","_useBlockCommands","_store","_lockUnlock","_jsxRuntime","EDITOR_STYLE_TRANSFORM_OPTIONS","ignoredSelectors","ExperimentalBlockCanvas","shouldIframe","height","children","jsx","default","styles","contentRef","contentRefProp","iframeProps","useBlockCommands","isTabletViewport","useViewportMatch","resetTypingRef","useMouseMoveTypingReset","clearerRef","useBlockSelectionClearer","localRef","useRef","useMergeRefs","zoomLevel","useSelect","select","unlock","blockEditorStore","getZoomLevel","zoomOutIframeProps","scale","frameSize","jsxs","__unstableContentRef","className","style","scope","transformOptions","ref","tabIndex","display","name","BlockCanvas","_default","exports"],"sources":["@wordpress/block-editor/src/components/block-canvas/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useMergeRefs, useViewportMatch } from '@wordpress/compose';\nimport { useRef } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../block-list';\nimport BlockTools from '../block-tools';\nimport EditorStyles from '../editor-styles';\nimport Iframe from '../iframe';\nimport WritingFlow from '../writing-flow';\nimport { useMouseMoveTypingReset } from '../observe-typing';\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\nimport { useBlockCommands } from '../use-block-commands';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n// EditorStyles is a memoized component, so avoid passing a new\n// object reference on each render.\nconst EDITOR_STYLE_TRANSFORM_OPTIONS = {\n\t// Don't transform selectors that already specify `.editor-styles-wrapper`.\n\tignoredSelectors: [ /\\.editor-styles-wrapper/gi ],\n};\n\nexport function ExperimentalBlockCanvas( {\n\tshouldIframe = true,\n\theight = '300px',\n\tchildren = <BlockList />,\n\tstyles,\n\tcontentRef: contentRefProp,\n\tiframeProps,\n} ) {\n\tuseBlockCommands();\n\tconst isTabletViewport = useViewportMatch( 'medium', '<' );\n\tconst resetTypingRef = useMouseMoveTypingReset();\n\tconst clearerRef = useBlockSelectionClearer();\n\tconst localRef = useRef();\n\tconst contentRef = useMergeRefs( [ contentRefProp, clearerRef, localRef ] );\n\tconst zoomLevel = useSelect(\n\t\t( select ) => unlock( select( blockEditorStore ) ).getZoomLevel(),\n\t\t[]\n\t);\n\tconst zoomOutIframeProps =\n\t\tzoomLevel !== 100 && ! isTabletViewport\n\t\t\t? {\n\t\t\t\t\tscale: zoomLevel,\n\t\t\t\t\tframeSize: '40px',\n\t\t\t  }\n\t\t\t: {};\n\n\tif ( ! shouldIframe ) {\n\t\treturn (\n\t\t\t<BlockTools\n\t\t\t\t__unstableContentRef={ localRef }\n\t\t\t\tclassName=\"block-editor-block-canvas\"\n\t\t\t\tstyle={ { height } }\n\t\t\t>\n\t\t\t\t<EditorStyles\n\t\t\t\t\tstyles={ styles }\n\t\t\t\t\tscope=\":where(.editor-styles-wrapper)\"\n\t\t\t\t\ttransformOptions={ EDITOR_STYLE_TRANSFORM_OPTIONS }\n\t\t\t\t/>\n\t\t\t\t<WritingFlow\n\t\t\t\t\tref={ contentRef }\n\t\t\t\t\tclassName=\"editor-styles-wrapper\"\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</WritingFlow>\n\t\t\t</BlockTools>\n\t\t);\n\t}\n\n\treturn (\n\t\t<BlockTools\n\t\t\t__unstableContentRef={ localRef }\n\t\t\tclassName=\"block-editor-block-canvas\"\n\t\t\tstyle={ { height, display: 'flex' } }\n\t\t>\n\t\t\t<Iframe\n\t\t\t\t{ ...iframeProps }\n\t\t\t\t{ ...zoomOutIframeProps }\n\t\t\t\tref={ resetTypingRef }\n\t\t\t\tcontentRef={ contentRef }\n\t\t\t\tstyle={ {\n\t\t\t\t\t...iframeProps?.style,\n\t\t\t\t} }\n\t\t\t\tname=\"editor-canvas\"\n\t\t\t>\n\t\t\t\t<EditorStyles styles={ styles } />\n\t\t\t\t{ children }\n\t\t\t</Iframe>\n\t\t</BlockTools>\n\t);\n}\n\n/**\n * BlockCanvas component is a component used to display the canvas of the block editor.\n * What we call the canvas is an iframe containing the block list that you can manipulate.\n * The component is also responsible of wiring up all the necessary hooks to enable\n * the keyboard navigation across blocks in the editor and inject content styles into the iframe.\n *\n * @example\n *\n * ```jsx\n * function MyBlockEditor() {\n *   const [ blocks, updateBlocks ] = useState([]);\n *   return (\n *     <BlockEditorProvider\n *       value={ blocks }\n *       onInput={ updateBlocks }\n *       onChange={ persistBlocks }\n *      >\n *        <BlockCanvas height=\"400px\" />\n *      </BlockEditorProvider>\n *    );\n * }\n * ```\n *\n * @param {Object}  props          Component props.\n * @param {string}  props.height   Canvas height, defaults to 300px.\n * @param {Array}   props.styles   Content styles to inject into the iframe.\n * @param {Element} props.children Content of the canvas, defaults to the BlockList component.\n * @return {Element}               Block Breadcrumb.\n */\nfunction BlockCanvas( { children, height, styles } ) {\n\treturn (\n\t\t<ExperimentalBlockCanvas height={ height } styles={ styles }>\n\t\t\t{ children }\n\t\t</ExperimentalBlockCanvas>\n\t);\n}\n\nexport default BlockCanvas;\n"],"mappings":"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","ignoreList":[]}