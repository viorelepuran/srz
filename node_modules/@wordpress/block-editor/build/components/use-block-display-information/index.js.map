{"version":3,"names":["_data","require","_blocks","_i18n","_store","getPositionTypeLabel","attributes","positionType","style","position","type","__","useBlockDisplayInformation","clientId","useSelect","select","getBlockName","getBlockAttributes","blockEditorStore","getBlockType","getActiveBlockVariation","blocksStore","blockName","blockType","match","isSynced","isReusableBlock","isTemplatePart","syncedTitle","getBlockLabel","undefined","title","positionLabel","blockTypeInfo","icon","description","anchor","name","metadata"],"sources":["@wordpress/block-editor/src/components/use-block-display-information/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tstore as blocksStore,\n\tisReusableBlock,\n\tisTemplatePart,\n\t__experimentalGetBlockLabel as getBlockLabel,\n} from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('@wordpress/blocks').WPIcon} WPIcon */\n\n/**\n * Contains basic block's information for display reasons.\n *\n * @typedef {Object} WPBlockDisplayInformation\n *\n * @property {boolean} isSynced    True if is a reusable block or template part\n * @property {string}  title       Human-readable block type label.\n * @property {WPIcon}  icon        Block type icon.\n * @property {string}  description A detailed block type description.\n * @property {string}  anchor      HTML anchor.\n * @property {name}    name        A custom, human readable name for the block.\n */\n\n/**\n * Get the display label for a block's position type.\n *\n * @param {Object} attributes Block attributes.\n * @return {string} The position type label.\n */\nfunction getPositionTypeLabel( attributes ) {\n\tconst positionType = attributes?.style?.position?.type;\n\n\tif ( positionType === 'sticky' ) {\n\t\treturn __( 'Sticky' );\n\t}\n\n\tif ( positionType === 'fixed' ) {\n\t\treturn __( 'Fixed' );\n\t}\n\n\treturn null;\n}\n\n/**\n * Hook used to try to find a matching block variation and return\n * the appropriate information for display reasons. In order to\n * to try to find a match we need to things:\n * 1. Block's client id to extract it's current attributes.\n * 2. A block variation should have set `isActive` prop to a proper function.\n *\n * If for any reason a block variation match cannot be found,\n * the returned information come from the Block Type.\n * If no blockType is found with the provided clientId, returns null.\n *\n * @param {string} clientId Block's client id.\n * @return {?WPBlockDisplayInformation} Block's display information, or `null` when the block or its type not found.\n */\n\nexport default function useBlockDisplayInformation( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { getBlockType, getActiveBlockVariation } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tif ( ! blockType ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\n\t\t\tconst isSynced =\n\t\t\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\n\t\t\tconst syncedTitle = isSynced\n\t\t\t\t? getBlockLabel( blockType, attributes )\n\t\t\t\t: undefined;\n\t\t\tconst title = syncedTitle || blockType.title;\n\t\t\tconst positionLabel = getPositionTypeLabel( attributes );\n\t\t\tconst blockTypeInfo = {\n\t\t\t\tisSynced,\n\t\t\t\ttitle,\n\t\t\t\ticon: blockType.icon,\n\t\t\t\tdescription: blockType.description,\n\t\t\t\tanchor: attributes?.anchor,\n\t\t\t\tpositionLabel,\n\t\t\t\tpositionType: attributes?.style?.position?.type,\n\t\t\t\tname: attributes?.metadata?.name,\n\t\t\t};\n\t\t\tif ( ! match ) {\n\t\t\t\treturn blockTypeInfo;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisSynced,\n\t\t\t\ttitle: match.title || blockType.title,\n\t\t\t\ticon: match.icon || blockType.icon,\n\t\t\t\tdescription: match.description || blockType.description,\n\t\t\t\tanchor: attributes?.anchor,\n\t\t\t\tpositionLabel,\n\t\t\t\tpositionType: attributes?.style?.position?.type,\n\t\t\t\tname: attributes?.metadata?.name,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n"],"mappings":"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","ignoreList":[]}