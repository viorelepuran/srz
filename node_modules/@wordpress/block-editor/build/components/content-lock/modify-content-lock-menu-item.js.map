{"version":3,"names":["_components","require","_data","_i18n","_store","_lockUnlock","_jsxRuntime","ModifyContentLockMenuItem","clientId","onClose","templateLock","isLockedByParent","isEditingAsBlocks","useSelect","select","getContentLockingParent","getTemplateLock","getTemporarilyEditingAsBlocks","unlock","blockEditorStore","blockEditorActions","useDispatch","isContentLocked","modifyContentLockBlock","showStartEditingAsBlocks","jsx","MenuItem","onClick","children","_x"],"sources":["@wordpress/block-editor/src/components/content-lock/modify-content-lock-menu-item.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n// The implementation of content locking is mainly in this file, although the mechanism\n// to stop temporarily editing as blocks when an outside block is selected is on component StopEditingAsBlocksOnOutsideSelect\n// at block-editor/src/components/block-list/index.js.\n// Besides the components on this file and the file referenced above the implementation\n// also includes artifacts on the store (actions, reducers, and selector).\n\nexport function ModifyContentLockMenuItem( { clientId, onClose } ) {\n\tconst { templateLock, isLockedByParent, isEditingAsBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetContentLockingParent,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetTemporarilyEditingAsBlocks,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\treturn {\n\t\t\t\ttemplateLock: getTemplateLock( clientId ),\n\t\t\t\tisLockedByParent: !! getContentLockingParent( clientId ),\n\t\t\t\tisEditingAsBlocks: getTemporarilyEditingAsBlocks() === clientId,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst blockEditorActions = useDispatch( blockEditorStore );\n\tconst isContentLocked =\n\t\t! isLockedByParent && templateLock === 'contentOnly';\n\tif ( ! isContentLocked && ! isEditingAsBlocks ) {\n\t\treturn null;\n\t}\n\n\tconst { modifyContentLockBlock } = unlock( blockEditorActions );\n\tconst showStartEditingAsBlocks = ! isEditingAsBlocks && isContentLocked;\n\n\treturn (\n\t\tshowStartEditingAsBlocks && (\n\t\t\t<MenuItem\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tmodifyContentLockBlock( clientId );\n\t\t\t\t\tonClose();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ _x( 'Modify', 'Unlock content locked blocks' ) }\n\t\t\t</MenuItem>\n\t\t)\n\t);\n}\n"],"mappings":";;;;;;AAGA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AAKA,IAAAG,MAAA,GAAAH,OAAA;AACA,IAAAI,WAAA,GAAAJ,OAAA;AAA2C,IAAAK,WAAA,GAAAL,OAAA;AAX3C;AACA;AACA;;AAKA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;;AAEO,SAASM,yBAAyBA,CAAE;EAAEC,QAAQ;EAAEC;AAAQ,CAAC,EAAG;EAClE,MAAM;IAAEC,YAAY;IAAEC,gBAAgB;IAAEC;EAAkB,CAAC,GAAG,IAAAC,eAAS,EACpEC,MAAM,IAAM;IACb,MAAM;MACLC,uBAAuB;MACvBC,eAAe;MACfC;IACD,CAAC,GAAG,IAAAC,kBAAM,EAAEJ,MAAM,CAAEK,YAAiB,CAAE,CAAC;IACxC,OAAO;MACNT,YAAY,EAAEM,eAAe,CAAER,QAAS,CAAC;MACzCG,gBAAgB,EAAE,CAAC,CAAEI,uBAAuB,CAAEP,QAAS,CAAC;MACxDI,iBAAiB,EAAEK,6BAA6B,CAAC,CAAC,KAAKT;IACxD,CAAC;EACF,CAAC,EACD,CAAEA,QAAQ,CACX,CAAC;EACD,MAAMY,kBAAkB,GAAG,IAAAC,iBAAW,EAAEF,YAAiB,CAAC;EAC1D,MAAMG,eAAe,GACpB,CAAEX,gBAAgB,IAAID,YAAY,KAAK,aAAa;EACrD,IAAK,CAAEY,eAAe,IAAI,CAAEV,iBAAiB,EAAG;IAC/C,OAAO,IAAI;EACZ;EAEA,MAAM;IAAEW;EAAuB,CAAC,GAAG,IAAAL,kBAAM,EAAEE,kBAAmB,CAAC;EAC/D,MAAMI,wBAAwB,GAAG,CAAEZ,iBAAiB,IAAIU,eAAe;EAEvE,OACCE,wBAAwB,iBACvB,IAAAlB,WAAA,CAAAmB,GAAA,EAACzB,WAAA,CAAA0B,QAAQ;IACRC,OAAO,EAAGA,CAAA,KAAM;MACfJ,sBAAsB,CAAEf,QAAS,CAAC;MAClCC,OAAO,CAAC,CAAC;IACV,CAAG;IAAAmB,QAAA,EAED,IAAAC,QAAE,EAAE,QAAQ,EAAE,8BAA+B;EAAC,CACvC,CACV;AAEH","ignoreList":[]}