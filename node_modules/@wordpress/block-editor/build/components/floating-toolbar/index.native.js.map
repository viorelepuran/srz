{"version":3,"names":["_reactNative","require","_components","_element","_data","_compose","_i18n","_styles","_interopRequireDefault","_navUpIcon","_blockSelectionButton","_store","_jsxRuntime","EASE_IN_DURATION","EASE_OUT_DURATION","TRANSLATION_RANGE","FloatingToolbar","selectedClientId","parentId","showFloatingToolbar","onNavigateUp","isRTL","opacity","useRef","Animated","Value","current","previousSelection","setPreviousSelection","useState","useEffect","timing","toValue","duration","easing","Easing","ease","useNativeDriver","start","clientId","translationRange","Platform","OS","translation","interpolate","inputRange","outputRange","animationStyle","transform","translateY","previousSelectedClientId","previousSelectedParentId","showPrevious","blockSelectionButtonClientId","showNavUpButton","jsxs","View","style","styles","floatingToolbar","pointerEvents","children","ToolbarGroup","passedStyle","toolbar","jsx","ToolbarButton","title","__","onClick","icon","default","pipe","_default","exports","compose","withSelect","select","getSelectedBlockClientId","getBlockHierarchyRootClientId","getBlockRootClientId","getBlockCount","getSettings","blockEditorStore","rootBlockId","withDispatch","dispatch","selectBlock","initialPosition"],"sources":["@wordpress/block-editor/src/components/floating-toolbar/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Animated, Easing, View, Platform } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { useEffect, useState, useRef } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\nimport NavigateUpSVG from './nav-up-icon';\nimport BlockSelectionButton from '../block-list/block-selection-button.native';\nimport { store as blockEditorStore } from '../../store';\n\nconst EASE_IN_DURATION = 250;\nconst EASE_OUT_DURATION = 80;\nconst TRANSLATION_RANGE = 8;\n\nconst FloatingToolbar = ( {\n\tselectedClientId,\n\tparentId,\n\tshowFloatingToolbar,\n\tonNavigateUp,\n\tisRTL,\n} ) => {\n\tconst opacity = useRef( new Animated.Value( 0 ) ).current;\n\t// Sustain old selection for proper block selection button rendering when exit animation is ongoing.\n\tconst [ previousSelection, setPreviousSelection ] = useState( {} );\n\n\tuseEffect( () => {\n\t\tAnimated.timing( opacity, {\n\t\t\ttoValue: showFloatingToolbar ? 1 : 0,\n\t\t\tduration: showFloatingToolbar\n\t\t\t\t? EASE_IN_DURATION\n\t\t\t\t: EASE_OUT_DURATION,\n\t\t\teasing: Easing.ease,\n\t\t\tuseNativeDriver: true,\n\t\t} ).start();\n\t}, [ showFloatingToolbar ] );\n\n\tuseEffect( () => {\n\t\tif ( showFloatingToolbar ) {\n\t\t\tsetPreviousSelection( { clientId: selectedClientId, parentId } );\n\t\t}\n\t}, [ selectedClientId ] );\n\n\tconst translationRange =\n\t\t( Platform.OS === 'android' ? -1 : 1 ) * TRANSLATION_RANGE;\n\n\tconst translation = opacity.interpolate( {\n\t\tinputRange: [ 0, 1 ],\n\t\toutputRange: [ translationRange, 0 ],\n\t} );\n\n\tconst animationStyle = {\n\t\topacity,\n\t\ttransform: [ { translateY: translation } ],\n\t};\n\n\tconst {\n\t\tclientId: previousSelectedClientId,\n\t\tparentId: previousSelectedParentId,\n\t} = previousSelection;\n\n\tconst showPrevious = previousSelectedClientId && ! showFloatingToolbar;\n\tconst blockSelectionButtonClientId = showPrevious\n\t\t? previousSelectedClientId\n\t\t: selectedClientId;\n\tconst showNavUpButton =\n\t\t!! parentId || ( showPrevious && !! previousSelectedParentId );\n\n\treturn (\n\t\t!! opacity && (\n\t\t\t<Animated.View\n\t\t\t\tstyle={ [ styles.floatingToolbar, animationStyle ] }\n\t\t\t\tpointerEvents={ showFloatingToolbar ? 'auto' : 'none' }\n\t\t\t>\n\t\t\t\t{ showNavUpButton && (\n\t\t\t\t\t<ToolbarGroup passedStyle={ styles.toolbar }>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ttitle={ __( 'Navigate Up' ) }\n\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t! showPrevious &&\n\t\t\t\t\t\t\t\t( () => onNavigateUp( parentId ) )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ticon={ <NavigateUpSVG isRTL={ isRTL } /> }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<View style={ styles.pipe } />\n\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t) }\n\t\t\t\t<BlockSelectionButton\n\t\t\t\t\tclientId={ blockSelectionButtonClientId }\n\t\t\t\t/>\n\t\t\t</Animated.View>\n\t\t)\n\t);\n};\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockHierarchyRootClientId,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockCount,\n\t\t\tgetSettings,\n\t\t} = select( blockEditorStore );\n\n\t\tconst selectedClientId = getSelectedBlockClientId();\n\n\t\tif ( ! selectedClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rootBlockId = getBlockHierarchyRootClientId( selectedClientId );\n\n\t\treturn {\n\t\t\tselectedClientId,\n\t\t\tshowFloatingToolbar: !! getBlockCount( rootBlockId ),\n\t\t\tparentId: getBlockRootClientId( selectedClientId ),\n\t\t\tisRTL: getSettings().isRTL,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { selectBlock } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonNavigateUp( clientId, initialPosition ) {\n\t\t\t\tselectBlock( clientId, initialPosition );\n\t\t\t},\n\t\t};\n\t} ),\n] )( FloatingToolbar );\n"],"mappings":"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","ignoreList":[]}