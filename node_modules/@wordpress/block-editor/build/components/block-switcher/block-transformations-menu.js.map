{"version":3,"names":["_i18n","require","_components","_blocks","_element","_blockIcon","_interopRequireDefault","_previewBlockPopover","_blockVariationTransformations","_jsxRuntime","useGroupedTransforms","possibleBlockTransformations","priorityContentTransformationBlocks","transformations","useMemo","priorityTextTransformsNames","Object","keys","groupedPossibleTransforms","reduce","accumulator","item","name","includes","priorityTextTransformations","push","restTransformations","length","singleQuote","pop","sort","currentName","nextName","BlockTransformationsMenu","className","possibleBlockVariationTransformations","onSelect","onSelectVariation","blocks","hoveredTransformItemName","setHoveredTransformItemName","useState","hasBothContentTransformations","restTransformItems","jsx","RestTransformationItems","jsxs","Fragment","children","MenuGroup","label","__","default","switchToBlockType","map","BlockTransformationItem","icon","title","isDisabled","MenuItem","getBlockMenuDefaultClassName","onClick","event","preventDefault","disabled","onMouseLeave","onMouseEnter","showColors","_default","exports"],"sources":["@wordpress/block-editor/src/components/block-switcher/block-transformations-menu.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuGroup, MenuItem } from '@wordpress/components';\nimport {\n\tgetBlockMenuDefaultClassName,\n\tswitchToBlockType,\n} from '@wordpress/blocks';\nimport { useState, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport PreviewBlockPopover from './preview-block-popover';\nimport BlockVariationTransformations from './block-variation-transformations';\n\n/**\n * Helper hook to group transformations to display them in a specific order in the UI.\n * For now we group only priority content driven transformations(ex. paragraph -> heading).\n *\n * Later on we could also group 'layout' transformations(ex. paragraph -> group) and\n * display them in different sections.\n *\n * @param {Object[]} possibleBlockTransformations The available block transformations.\n * @return {Record<string, Object[]>} The grouped block transformations.\n */\nfunction useGroupedTransforms( possibleBlockTransformations ) {\n\tconst priorityContentTransformationBlocks = {\n\t\t'core/paragraph': 1,\n\t\t'core/heading': 2,\n\t\t'core/list': 3,\n\t\t'core/quote': 4,\n\t};\n\tconst transformations = useMemo( () => {\n\t\tconst priorityTextTransformsNames = Object.keys(\n\t\t\tpriorityContentTransformationBlocks\n\t\t);\n\t\tconst groupedPossibleTransforms = possibleBlockTransformations.reduce(\n\t\t\t( accumulator, item ) => {\n\t\t\t\tconst { name } = item;\n\t\t\t\tif ( priorityTextTransformsNames.includes( name ) ) {\n\t\t\t\t\taccumulator.priorityTextTransformations.push( item );\n\t\t\t\t} else {\n\t\t\t\t\taccumulator.restTransformations.push( item );\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t},\n\t\t\t{ priorityTextTransformations: [], restTransformations: [] }\n\t\t);\n\t\t/**\n\t\t * If there is only one priority text transformation and it's a Quote,\n\t\t * is should move to the rest transformations. This is because Quote can\n\t\t * be a container for any block type, so in multi-block selection it will\n\t\t * always be suggested, even for non-text blocks.\n\t\t */\n\t\tif (\n\t\t\tgroupedPossibleTransforms.priorityTextTransformations.length ===\n\t\t\t\t1 &&\n\t\t\tgroupedPossibleTransforms.priorityTextTransformations[ 0 ].name ===\n\t\t\t\t'core/quote'\n\t\t) {\n\t\t\tconst singleQuote =\n\t\t\t\tgroupedPossibleTransforms.priorityTextTransformations.pop();\n\t\t\tgroupedPossibleTransforms.restTransformations.push( singleQuote );\n\t\t}\n\t\treturn groupedPossibleTransforms;\n\t}, [ possibleBlockTransformations ] );\n\n\t// Order the priority text transformations.\n\ttransformations.priorityTextTransformations.sort(\n\t\t( { name: currentName }, { name: nextName } ) => {\n\t\t\treturn priorityContentTransformationBlocks[ currentName ] <\n\t\t\t\tpriorityContentTransformationBlocks[ nextName ]\n\t\t\t\t? -1\n\t\t\t\t: 1;\n\t\t}\n\t);\n\treturn transformations;\n}\n\nconst BlockTransformationsMenu = ( {\n\tclassName,\n\tpossibleBlockTransformations,\n\tpossibleBlockVariationTransformations,\n\tonSelect,\n\tonSelectVariation,\n\tblocks,\n} ) => {\n\tconst [ hoveredTransformItemName, setHoveredTransformItemName ] =\n\t\tuseState();\n\n\tconst { priorityTextTransformations, restTransformations } =\n\t\tuseGroupedTransforms( possibleBlockTransformations );\n\t// We have to check if both content transformations(priority and rest) are set\n\t// in order to create a separate MenuGroup for them.\n\tconst hasBothContentTransformations =\n\t\tpriorityTextTransformations.length && restTransformations.length;\n\tconst restTransformItems = !! restTransformations.length && (\n\t\t<RestTransformationItems\n\t\t\trestTransformations={ restTransformations }\n\t\t\tonSelect={ onSelect }\n\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\n\t\t/>\n\t);\n\treturn (\n\t\t<>\n\t\t\t<MenuGroup label={ __( 'Transform to' ) } className={ className }>\n\t\t\t\t{ hoveredTransformItemName && (\n\t\t\t\t\t<PreviewBlockPopover\n\t\t\t\t\t\tblocks={ switchToBlockType(\n\t\t\t\t\t\t\tblocks,\n\t\t\t\t\t\t\thoveredTransformItemName\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ !! possibleBlockVariationTransformations?.length && (\n\t\t\t\t\t<BlockVariationTransformations\n\t\t\t\t\t\ttransformations={\n\t\t\t\t\t\t\tpossibleBlockVariationTransformations\n\t\t\t\t\t\t}\n\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\tonSelect={ onSelectVariation }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ priorityTextTransformations.map( ( item ) => (\n\t\t\t\t\t<BlockTransformationItem\n\t\t\t\t\t\tkey={ item.name }\n\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\tsetHoveredTransformItemName={\n\t\t\t\t\t\t\tsetHoveredTransformItemName\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t\t{ ! hasBothContentTransformations && restTransformItems }\n\t\t\t</MenuGroup>\n\t\t\t{ !! hasBothContentTransformations && (\n\t\t\t\t<MenuGroup className={ className }>\n\t\t\t\t\t{ restTransformItems }\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nfunction RestTransformationItems( {\n\trestTransformations,\n\tonSelect,\n\tsetHoveredTransformItemName,\n} ) {\n\treturn restTransformations.map( ( item ) => (\n\t\t<BlockTransformationItem\n\t\t\tkey={ item.name }\n\t\t\titem={ item }\n\t\t\tonSelect={ onSelect }\n\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\n\t\t/>\n\t) );\n}\n\nfunction BlockTransformationItem( {\n\titem,\n\tonSelect,\n\tsetHoveredTransformItemName,\n} ) {\n\tconst { name, icon, title, isDisabled } = item;\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName={ getBlockMenuDefaultClassName( name ) }\n\t\t\tonClick={ ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonSelect( name );\n\t\t\t} }\n\t\t\tdisabled={ isDisabled }\n\t\t\tonMouseLeave={ () => setHoveredTransformItemName( null ) }\n\t\t\tonMouseEnter={ () => setHoveredTransformItemName( name ) }\n\t\t>\n\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t{ title }\n\t\t</MenuItem>\n\t);\n}\n\nexport default BlockTransformationsMenu;\n"],"mappings":"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","ignoreList":[]}