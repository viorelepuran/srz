{"version":3,"names":["_i18n","require","_components","_element","_icons","_modal","_interopRequireDefault","_useBlockLock","_jsxRuntime","BlockLockToolbar","clientId","canLock","isLocked","useBlockLock","isModalOpen","toggleModal","useReducer","isActive","hasLockButtonShownRef","useRef","useEffect","current","label","__","jsxs","Fragment","children","jsx","ToolbarGroup","className","ToolbarButton","disabled","icon","lock","unlock","onClick","default","onClose"],"sources":["@wordpress/block-editor/src/components/block-lock/toolbar.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { useReducer, useRef, useEffect } from '@wordpress/element';\nimport { lock, unlock } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockLockModal from './modal';\nimport useBlockLock from './use-block-lock';\n\nexport default function BlockLockToolbar( { clientId } ) {\n\tconst { canLock, isLocked } = useBlockLock( clientId );\n\n\tconst [ isModalOpen, toggleModal ] = useReducer(\n\t\t( isActive ) => ! isActive,\n\t\tfalse\n\t);\n\n\tconst hasLockButtonShownRef = useRef( false );\n\n\t// If the block lock button has been shown, we don't want to remove it\n\t// from the toolbar until the toolbar is rendered again without it.\n\t// Removing it beforehand can cause focus loss issues, such as when\n\t// unlocking the block from the modal. It needs to return focus from\n\t// whence it came, and to do that, we need to leave the button in the toolbar.\n\tuseEffect( () => {\n\t\tif ( isLocked ) {\n\t\t\thasLockButtonShownRef.current = true;\n\t\t}\n\t}, [ isLocked ] );\n\n\tif ( ! isLocked && ! hasLockButtonShownRef.current ) {\n\t\treturn null;\n\t}\n\n\tlet label = isLocked ? __( 'Unlock' ) : __( 'Lock' );\n\n\tif ( ! canLock && isLocked ) {\n\t\tlabel = __( 'Locked' );\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<ToolbarGroup className=\"block-editor-block-lock-toolbar\">\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tdisabled={ ! canLock }\n\t\t\t\t\ticon={ isLocked ? lock : unlock }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tonClick={ toggleModal }\n\t\t\t\t\taria-expanded={ isModalOpen }\n\t\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t\t{ isModalOpen && (\n\t\t\t\t<BlockLockModal clientId={ clientId } onClose={ toggleModal } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAKA,IAAAI,MAAA,GAAAC,sBAAA,CAAAL,OAAA;AACA,IAAAM,aAAA,GAAAD,sBAAA,CAAAL,OAAA;AAA4C,IAAAO,WAAA,GAAAP,OAAA;AAZ5C;AACA;AACA;;AAMA;AACA;AACA;;AAIe,SAASQ,gBAAgBA,CAAE;EAAEC;AAAS,CAAC,EAAG;EACxD,MAAM;IAAEC,OAAO;IAAEC;EAAS,CAAC,GAAG,IAAAC,qBAAY,EAAEH,QAAS,CAAC;EAEtD,MAAM,CAAEI,WAAW,EAAEC,WAAW,CAAE,GAAG,IAAAC,mBAAU,EAC5CC,QAAQ,IAAM,CAAEA,QAAQ,EAC1B,KACD,CAAC;EAED,MAAMC,qBAAqB,GAAG,IAAAC,eAAM,EAAE,KAAM,CAAC;;EAE7C;EACA;EACA;EACA;EACA;EACA,IAAAC,kBAAS,EAAE,MAAM;IAChB,IAAKR,QAAQ,EAAG;MACfM,qBAAqB,CAACG,OAAO,GAAG,IAAI;IACrC;EACD,CAAC,EAAE,CAAET,QAAQ,CAAG,CAAC;EAEjB,IAAK,CAAEA,QAAQ,IAAI,CAAEM,qBAAqB,CAACG,OAAO,EAAG;IACpD,OAAO,IAAI;EACZ;EAEA,IAAIC,KAAK,GAAGV,QAAQ,GAAG,IAAAW,QAAE,EAAE,QAAS,CAAC,GAAG,IAAAA,QAAE,EAAE,MAAO,CAAC;EAEpD,IAAK,CAAEZ,OAAO,IAAIC,QAAQ,EAAG;IAC5BU,KAAK,GAAG,IAAAC,QAAE,EAAE,QAAS,CAAC;EACvB;EAEA,oBACC,IAAAf,WAAA,CAAAgB,IAAA,EAAAhB,WAAA,CAAAiB,QAAA;IAAAC,QAAA,gBACC,IAAAlB,WAAA,CAAAmB,GAAA,EAACzB,WAAA,CAAA0B,YAAY;MAACC,SAAS,EAAC,iCAAiC;MAAAH,QAAA,eACxD,IAAAlB,WAAA,CAAAmB,GAAA,EAACzB,WAAA,CAAA4B,aAAa;QACbC,QAAQ,EAAG,CAAEpB,OAAS;QACtBqB,IAAI,EAAGpB,QAAQ,GAAGqB,WAAI,GAAGC,aAAQ;QACjCZ,KAAK,EAAGA,KAAO;QACfa,OAAO,EAAGpB,WAAa;QACvB,iBAAgBD,WAAa;QAC7B,iBAAc;MAAQ,CACtB;IAAC,CACW,CAAC,EACbA,WAAW,iBACZ,IAAAN,WAAA,CAAAmB,GAAA,EAACtB,MAAA,CAAA+B,OAAc;MAAC1B,QAAQ,EAAGA,QAAU;MAAC2B,OAAO,EAAGtB;IAAa,CAAE,CAC/D;EAAA,CACA,CAAC;AAEL","ignoreList":[]}