{"version":3,"names":["_components","require","_i18n","_element","_a11y","_data","_store","_","_isEmptyString","_interopRequireDefault","_jsxRuntime","BlockRenameModal","clientId","onClose","editedBlockName","setEditedBlockName","useState","blockInformation","useBlockDisplayInformation","metadata","useSelect","select","getBlockAttributes","blockEditorStore","updateBlockAttributes","useDispatch","blockName","name","originalBlockName","title","hasOverridesWarning","bindings","Object","values","some","binding","source","nameHasChanged","undefined","nameIsOriginal","nameIsEmpty","isEmptyString","isNameValid","autoSelectInputText","event","target","handleSubmit","newName","message","sprintf","__","speak","jsx","Modal","onRequestClose","overlayClassName","focusOnMount","size","children","onSubmit","e","preventDefault","jsxs","__experimentalVStack","spacing","TextControl","__nextHasNoMarginBottom","__next40pxDefaultSize","value","label","help","placeholder","onChange","onFocus","__experimentalHStack","justify","Button","variant","onClick","accessibleWhenDisabled","disabled","type"],"sources":["@wordpress/block-editor/src/components/block-rename/modal.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\tButton,\n\tTextControl,\n\tModal,\n} from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { speak } from '@wordpress/a11y';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useBlockDisplayInformation } from '..';\nimport isEmptyString from './is-empty-string';\n\nexport default function BlockRenameModal( { clientId, onClose } ) {\n\tconst [ editedBlockName, setEditedBlockName ] = useState();\n\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst { metadata } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockAttributes } = select( blockEditorStore );\n\n\t\t\treturn {\n\t\t\t\tmetadata: getBlockAttributes( clientId )?.metadata,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\n\tconst blockName = metadata?.name || '';\n\tconst originalBlockName = blockInformation?.title;\n\t// Pattern Overrides is a WordPress-only feature but it also uses the Block Binding API.\n\t// Ideally this should not be inside the block editor package, but we keep it here for simplicity.\n\tconst hasOverridesWarning =\n\t\t!! blockName &&\n\t\t!! metadata?.bindings &&\n\t\tObject.values( metadata.bindings ).some(\n\t\t\t( binding ) => binding.source === 'core/pattern-overrides'\n\t\t);\n\n\tconst nameHasChanged =\n\t\teditedBlockName !== undefined && editedBlockName !== blockName;\n\tconst nameIsOriginal = editedBlockName === originalBlockName;\n\tconst nameIsEmpty = isEmptyString( editedBlockName );\n\n\tconst isNameValid = nameHasChanged || nameIsOriginal;\n\n\tconst autoSelectInputText = ( event ) => event.target.select();\n\n\tconst handleSubmit = () => {\n\t\tconst newName =\n\t\t\tnameIsOriginal || nameIsEmpty ? undefined : editedBlockName;\n\t\tconst message =\n\t\t\tnameIsOriginal || nameIsEmpty\n\t\t\t\t? sprintf(\n\t\t\t\t\t\t/* translators: %s: new name/label for the block */\n\t\t\t\t\t\t__( 'Block name reset to: \"%s\".' ),\n\t\t\t\t\t\teditedBlockName\n\t\t\t\t  )\n\t\t\t\t: sprintf(\n\t\t\t\t\t\t/* translators: %s: new name/label for the block */\n\t\t\t\t\t\t__( 'Block name changed to: \"%s\".' ),\n\t\t\t\t\t\teditedBlockName\n\t\t\t\t  );\n\n\t\t// Must be assertive to immediately announce change.\n\t\tspeak( message, 'assertive' );\n\t\tupdateBlockAttributes( [ clientId ], {\n\t\t\tmetadata: {\n\t\t\t\t...metadata,\n\t\t\t\tname: newName,\n\t\t\t},\n\t\t} );\n\n\t\t// Immediate close avoids ability to hit save multiple times.\n\t\tonClose();\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Rename' ) }\n\t\t\tonRequestClose={ onClose }\n\t\t\toverlayClassName=\"block-editor-block-rename-modal\"\n\t\t\tfocusOnMount=\"firstContentElement\"\n\t\t\tsize=\"small\"\n\t\t>\n\t\t\t<form\n\t\t\t\tonSubmit={ ( e ) => {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif ( ! isNameValid ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\thandleSubmit();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvalue={ editedBlockName ?? blockName }\n\t\t\t\t\t\tlabel={ __( 'Name' ) }\n\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\thasOverridesWarning\n\t\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t\t'This block allows overrides. Changing the name can cause problems with content entered into instances of this pattern.'\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplaceholder={ originalBlockName }\n\t\t\t\t\t\tonChange={ setEditedBlockName }\n\t\t\t\t\t\tonFocus={ autoSelectInputText }\n\t\t\t\t\t/>\n\t\t\t\t\t<HStack justify=\"right\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t\t\tdisabled={ ! isNameValid }\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</HStack>\n\t\t\t\t</VStack>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}