{"version":3,"names":["_blocks","require","_data","_components","_i18n","_element","_compose","_a11y","_category","_interopRequireDefault","_jsxRuntime","BlockManager","blockTypes","selectedBlockTypes","onChange","debouncedSpeak","useDebounce","speak","search","setSearch","useState","categories","isMatchingSearchTerm","useSelect","select","blocksStore","getCategories","enableAllBlockTypes","filteredBlockTypes","filter","blockType","numberOfHiddenBlocks","length","useEffect","count","resultsFoundMessage","sprintf","_n","jsxs","className","children","jsx","Button","__next40pxDefaultSize","variant","onClick","__","SearchControl","__nextHasNoMarginBottom","label","placeholder","value","nextSearch","tabIndex","role","map","category","default","title","slug"],"sources":["@wordpress/block-editor/src/components/block-manager/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { SearchControl, Button } from '@wordpress/components';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { useEffect, useState } from '@wordpress/element';\nimport { useDebounce } from '@wordpress/compose';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport BlockManagerCategory from './category';\n\n/**\n * Provides a list of blocks with checkboxes.\n *\n * @param {Object}   props                    Props.\n * @param {Array}    props.blockTypes         An array of blocks.\n * @param {Array}    props.selectedBlockTypes An array of selected blocks.\n * @param {Function} props.onChange           Function to be called when the selected blocks change.\n */\nexport default function BlockManager( {\n\tblockTypes,\n\tselectedBlockTypes,\n\tonChange,\n} ) {\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\tconst [ search, setSearch ] = useState( '' );\n\tconst { categories, isMatchingSearchTerm } = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tcategories: select( blocksStore ).getCategories(),\n\t\t\tisMatchingSearchTerm: select( blocksStore ).isMatchingSearchTerm,\n\t\t};\n\t}, [] );\n\n\tfunction enableAllBlockTypes() {\n\t\tonChange( blockTypes );\n\t}\n\n\tconst filteredBlockTypes = blockTypes.filter( ( blockType ) => {\n\t\treturn ! search || isMatchingSearchTerm( blockType, search );\n\t} );\n\n\tconst numberOfHiddenBlocks = blockTypes.length - selectedBlockTypes.length;\n\n\t// Announce search results on change\n\tuseEffect( () => {\n\t\tif ( ! search ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockTypes.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ filteredBlockTypes?.length, search, debouncedSpeak ] );\n\n\treturn (\n\t\t<div className=\"block-editor-block-manager__content\">\n\t\t\t{ !! numberOfHiddenBlocks && (\n\t\t\t\t<div className=\"block-editor-block-manager__disabled-blocks-count\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %d: number of blocks. */\n\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t'%d block is hidden.',\n\t\t\t\t\t\t\t'%d blocks are hidden.',\n\t\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t\t),\n\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t) }\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={ enableAllBlockTypes }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<SearchControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Search for a block' ) }\n\t\t\t\tplaceholder={ __( 'Search for a block' ) }\n\t\t\t\tvalue={ search }\n\t\t\t\tonChange={ ( nextSearch ) => setSearch( nextSearch ) }\n\t\t\t\tclassName=\"block-editor-block-manager__search\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\trole=\"region\"\n\t\t\t\taria-label={ __( 'Available block types' ) }\n\t\t\t\tclassName=\"block-editor-block-manager__results\"\n\t\t\t>\n\t\t\t\t{ filteredBlockTypes.length === 0 && (\n\t\t\t\t\t<p className=\"block-editor-block-manager__no-results\">\n\t\t\t\t\t\t{ __( 'No blocks found.' ) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t<BlockManagerCategory\n\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\tblockTypes={ filteredBlockTypes.filter(\n\t\t\t\t\t\t\t( blockType ) =>\n\t\t\t\t\t\t\t\tblockType.category === category.slug\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tselectedBlockTypes={ selectedBlockTypes }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t\t<BlockManagerCategory\n\t\t\t\t\ttitle={ __( 'Uncategorized' ) }\n\t\t\t\t\tblockTypes={ filteredBlockTypes.filter(\n\t\t\t\t\t\t( { category } ) => ! category\n\t\t\t\t\t) }\n\t\t\t\t\tselectedBlockTypes={ selectedBlockTypes }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}