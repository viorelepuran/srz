{"version":3,"names":["_data","require","_element","_blockToolbarMenu","_interopRequireDefault","_blockControls","_blockMover","_ungroupButton","_blockSettings","_store","_jsxRuntime","REMOVE_EMPTY_PARENT_BLOCKS","BlockToolbar","anchorNodeRef","rootClientId","blockClientId","isSelected","isValidAndVisual","isStackedHorizontally","parentBlockName","parentNumberOfInnerBlocks","useSelect","select","getBlockListSettings","getBlockMode","getBlockName","getBlockCount","getBlockRootClientId","getSelectedBlockClientIds","isBlockValid","blockEditorStore","selectedBlockClientIds","selectedBlockClientId","blockRootClientId","blockListSettings","orientation","isBlockStackedHorizontally","parentName","numberOfInnerBlocks","length","removeBlock","useDispatch","onRemove","useCallback","includes","jsx","Fragment","children","jsxs","BlockSettingsButton","Slot","fills","default","group","clientIds","clientId","onDelete"],"sources":["@wordpress/block-editor/src/components/block-toolbar/index.native.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockActionsMenu from './block-toolbar-menu';\nimport BlockControls from '../block-controls';\nimport BlockMover from '../block-mover';\nimport UngroupButton from '../ungroup-button';\nimport { BlockSettingsButton } from '../block-settings';\nimport { store as blockEditorStore } from '../../store';\n\nconst REMOVE_EMPTY_PARENT_BLOCKS = [\n\t'core/buttons',\n\t'core/columns',\n\t'core/social-links',\n];\n\nexport default function BlockToolbar( { anchorNodeRef } ) {\n\tconst {\n\t\trootClientId,\n\t\tblockClientId,\n\t\tisSelected,\n\t\tisValidAndVisual,\n\t\tisStackedHorizontally,\n\t\tparentBlockName,\n\t\tparentNumberOfInnerBlocks,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockListSettings,\n\t\t\tgetBlockMode,\n\t\t\tgetBlockName,\n\t\t\tgetBlockCount,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\tisBlockValid,\n\t\t} = select( blockEditorStore );\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\tconst blockRootClientId = getBlockRootClientId( selectedBlockClientId );\n\t\tconst blockListSettings = getBlockListSettings( blockRootClientId );\n\t\tconst orientation = blockListSettings?.orientation;\n\t\tconst isBlockStackedHorizontally = orientation === 'horizontal';\n\t\tconst parentName = getBlockName( blockRootClientId );\n\t\tconst numberOfInnerBlocks = getBlockCount( blockRootClientId );\n\n\t\treturn {\n\t\t\trootClientId: blockRootClientId,\n\t\t\tblockClientId: selectedBlockClientId,\n\t\t\tisSelected: selectedBlockClientIds.length > 0,\n\t\t\tisStackedHorizontally: isBlockStackedHorizontally,\n\t\t\tparentBlockName: parentName,\n\t\t\tparentNumberOfInnerBlocks: numberOfInnerBlocks,\n\t\t\tisValidAndVisual:\n\t\t\t\tselectedBlockClientIds.length === 1\n\t\t\t\t\t? isBlockValid( selectedBlockClientIds[ 0 ] ) &&\n\t\t\t\t\t  getBlockMode( selectedBlockClientIds[ 0 ] ) === 'visual'\n\t\t\t\t\t: false,\n\t\t};\n\t}, [] );\n\n\tconst { removeBlock } = useDispatch( blockEditorStore );\n\tconst onRemove = useCallback( () => {\n\t\t// Temp: remove parent block for specific cases where they don't\n\t\t// have inner blocks, ideally we should match the behavior as in\n\t\t// the Web editor and show a placeholder instead of removing the parent.\n\t\tif (\n\t\t\tREMOVE_EMPTY_PARENT_BLOCKS.includes( parentBlockName ) &&\n\t\t\tparentNumberOfInnerBlocks === 1\n\t\t) {\n\t\t\tremoveBlock( rootClientId );\n\t\t\treturn;\n\t\t}\n\n\t\tremoveBlock( blockClientId );\n\t}, [\n\t\tblockClientId,\n\t\tparentBlockName,\n\t\tparentNumberOfInnerBlocks,\n\t\tremoveBlock,\n\t\trootClientId,\n\t] );\n\n\tif ( ! isSelected ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ isValidAndVisual && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockSettingsButton.Slot>\n\t\t\t\t\t\t{ /* Render only one settings icon even if we have more than one fill - need for hooks with controls. */ }\n\t\t\t\t\t\t{ ( fills = [ null ] ) => {\n\t\t\t\t\t\t\tif ( ! fills?.length > 0 ) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn fills[ 0 ];\n\t\t\t\t\t\t} }\n\t\t\t\t\t</BlockSettingsButton.Slot>\n\t\t\t\t\t<BlockControls.Slot group=\"block\" />\n\t\t\t\t\t<BlockControls.Slot />\n\t\t\t\t\t<BlockControls.Slot group=\"inline\" />\n\t\t\t\t\t<BlockControls.Slot group=\"other\" />\n\t\t\t\t\t<UngroupButton />\n\n\t\t\t\t\t<BlockMover\n\t\t\t\t\t\tclientIds={ [ blockClientId ] }\n\t\t\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\t\t/>\n\n\t\t\t\t\t<BlockActionsMenu\n\t\t\t\t\t\tclientId={ blockClientId }\n\t\t\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\t\t\tonDelete={ onRemove }\n\t\t\t\t\t\tanchorNodeRef={ anchorNodeRef }\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</>\n\t);\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAKA,IAAAE,iBAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,cAAA,GAAAD,sBAAA,CAAAH,OAAA;AACA,IAAAK,WAAA,GAAAF,sBAAA,CAAAH,OAAA;AACA,IAAAM,cAAA,GAAAH,sBAAA,CAAAH,OAAA;AACA,IAAAO,cAAA,GAAAP,OAAA;AACA,IAAAQ,MAAA,GAAAR,OAAA;AAAwD,IAAAS,WAAA,GAAAT,OAAA;AAdxD;AACA;AACA;;AAIA;AACA;AACA;;AAQA,MAAMU,0BAA0B,GAAG,CAClC,cAAc,EACd,cAAc,EACd,mBAAmB,CACnB;AAEc,SAASC,YAAYA,CAAE;EAAEC;AAAc,CAAC,EAAG;EACzD,MAAM;IACLC,YAAY;IACZC,aAAa;IACbC,UAAU;IACVC,gBAAgB;IAChBC,qBAAqB;IACrBC,eAAe;IACfC;EACD,CAAC,GAAG,IAAAC,eAAS,EAAIC,MAAM,IAAM;IAC5B,MAAM;MACLC,oBAAoB;MACpBC,YAAY;MACZC,YAAY;MACZC,aAAa;MACbC,oBAAoB;MACpBC,yBAAyB;MACzBC;IACD,CAAC,GAAGP,MAAM,CAAEQ,YAAiB,CAAC;IAC9B,MAAMC,sBAAsB,GAAGH,yBAAyB,CAAC,CAAC;IAC1D,MAAMI,qBAAqB,GAAGD,sBAAsB,CAAE,CAAC,CAAE;IACzD,MAAME,iBAAiB,GAAGN,oBAAoB,CAAEK,qBAAsB,CAAC;IACvE,MAAME,iBAAiB,GAAGX,oBAAoB,CAAEU,iBAAkB,CAAC;IACnE,MAAME,WAAW,GAAGD,iBAAiB,EAAEC,WAAW;IAClD,MAAMC,0BAA0B,GAAGD,WAAW,KAAK,YAAY;IAC/D,MAAME,UAAU,GAAGZ,YAAY,CAAEQ,iBAAkB,CAAC;IACpD,MAAMK,mBAAmB,GAAGZ,aAAa,CAAEO,iBAAkB,CAAC;IAE9D,OAAO;MACNnB,YAAY,EAAEmB,iBAAiB;MAC/BlB,aAAa,EAAEiB,qBAAqB;MACpChB,UAAU,EAAEe,sBAAsB,CAACQ,MAAM,GAAG,CAAC;MAC7CrB,qBAAqB,EAAEkB,0BAA0B;MACjDjB,eAAe,EAAEkB,UAAU;MAC3BjB,yBAAyB,EAAEkB,mBAAmB;MAC9CrB,gBAAgB,EACfc,sBAAsB,CAACQ,MAAM,KAAK,CAAC,GAChCV,YAAY,CAAEE,sBAAsB,CAAE,CAAC,CAAG,CAAC,IAC3CP,YAAY,CAAEO,sBAAsB,CAAE,CAAC,CAAG,CAAC,KAAK,QAAQ,GACxD;IACL,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,MAAM;IAAES;EAAY,CAAC,GAAG,IAAAC,iBAAW,EAAEX,YAAiB,CAAC;EACvD,MAAMY,QAAQ,GAAG,IAAAC,oBAAW,EAAE,MAAM;IACnC;IACA;IACA;IACA,IACChC,0BAA0B,CAACiC,QAAQ,CAAEzB,eAAgB,CAAC,IACtDC,yBAAyB,KAAK,CAAC,EAC9B;MACDoB,WAAW,CAAE1B,YAAa,CAAC;MAC3B;IACD;IAEA0B,WAAW,CAAEzB,aAAc,CAAC;EAC7B,CAAC,EAAE,CACFA,aAAa,EACbI,eAAe,EACfC,yBAAyB,EACzBoB,WAAW,EACX1B,YAAY,CACX,CAAC;EAEH,IAAK,CAAEE,UAAU,EAAG;IACnB,OAAO,IAAI;EACZ;EAEA,oBACC,IAAAN,WAAA,CAAAmC,GAAA,EAAAnC,WAAA,CAAAoC,QAAA;IAAAC,QAAA,EACG9B,gBAAgB,iBACjB,IAAAP,WAAA,CAAAsC,IAAA,EAAAtC,WAAA,CAAAoC,QAAA;MAAAC,QAAA,gBACC,IAAArC,WAAA,CAAAmC,GAAA,EAACrC,cAAA,CAAAyC,mBAAmB,CAACC,IAAI;QAAAH,QAAA,EAEtBA,CAAEI,KAAK,GAAG,CAAE,IAAI,CAAE,KAAM;UACzB,IAAK,CAAEA,KAAK,EAAEZ,MAAM,GAAG,CAAC,EAAG;YAC1B,OAAO,IAAI;UACZ;UACA,OAAOY,KAAK,CAAE,CAAC,CAAE;QAClB;MAAC,CACwB,CAAC,eAC3B,IAAAzC,WAAA,CAAAmC,GAAA,EAACxC,cAAA,CAAA+C,OAAa,CAACF,IAAI;QAACG,KAAK,EAAC;MAAO,CAAE,CAAC,eACpC,IAAA3C,WAAA,CAAAmC,GAAA,EAACxC,cAAA,CAAA+C,OAAa,CAACF,IAAI,IAAE,CAAC,eACtB,IAAAxC,WAAA,CAAAmC,GAAA,EAACxC,cAAA,CAAA+C,OAAa,CAACF,IAAI;QAACG,KAAK,EAAC;MAAQ,CAAE,CAAC,eACrC,IAAA3C,WAAA,CAAAmC,GAAA,EAACxC,cAAA,CAAA+C,OAAa,CAACF,IAAI;QAACG,KAAK,EAAC;MAAO,CAAE,CAAC,eACpC,IAAA3C,WAAA,CAAAmC,GAAA,EAACtC,cAAA,CAAA6C,OAAa,IAAE,CAAC,eAEjB,IAAA1C,WAAA,CAAAmC,GAAA,EAACvC,WAAA,CAAA8C,OAAU;QACVE,SAAS,EAAG,CAAEvC,aAAa,CAAI;QAC/BG,qBAAqB,EAAGA;MAAuB,CAC/C,CAAC,eAEF,IAAAR,WAAA,CAAAmC,GAAA,EAAC1C,iBAAA,CAAAiD,OAAgB;QAChBG,QAAQ,EAAGxC,aAAe;QAC1BG,qBAAqB,EAAGA,qBAAuB;QAC/CsC,QAAQ,EAAGd,QAAU;QACrB7B,aAAa,EAAGA;MAAe,CAC/B,CAAC;IAAA,CACD;EACF,CACA,CAAC;AAEL","ignoreList":[]}