{"version":3,"names":["_compose","require","_a11y","_data","_element","_i18n","_store","_useBlockDisplayTitle","_interopRequireDefault","_context","_inserter","_ariaReferencedText","_lockUnlock","_jsxRuntime","Appender","exports","forwardRef","nestingLevel","blockCount","clientId","props","ref","insertedBlock","setInsertedBlock","useListViewContext","instanceId","useInstanceId","hideInserter","useSelect","select","getTemplateLock","isZoomOut","unlock","blockEditorStore","blockTitle","useBlockDisplayTitle","context","insertedBlockTitle","useEffect","length","speak","sprintf","__","descriptionId","description","jsxs","className","children","jsx","default","rootClientId","position","isAppender","selectBlockOnInsert","shouldDirectInsert","__experimentalIsQuick","toggleProps","onSelectOrClose","maybeInsertedBlock","id"],"sources":["@wordpress/block-editor/src/components/list-view/appender.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { speak } from '@wordpress/a11y';\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef, useEffect } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\nimport { useListViewContext } from './context';\nimport Inserter from '../inserter';\nimport AriaReferencedText from './aria-referenced-text';\nimport { unlock } from '../../lock-unlock';\n\nexport const Appender = forwardRef(\n\t( { nestingLevel, blockCount, clientId, ...props }, ref ) => {\n\t\tconst { insertedBlock, setInsertedBlock } = useListViewContext();\n\n\t\tconst instanceId = useInstanceId( Appender );\n\t\tconst hideInserter = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst { getTemplateLock, isZoomOut } = unlock(\n\t\t\t\t\tselect( blockEditorStore )\n\t\t\t\t);\n\n\t\t\t\treturn !! getTemplateLock( clientId ) || isZoomOut();\n\t\t\t},\n\t\t\t[ clientId ]\n\t\t);\n\n\t\tconst blockTitle = useBlockDisplayTitle( {\n\t\t\tclientId,\n\t\t\tcontext: 'list-view',\n\t\t} );\n\n\t\tconst insertedBlockTitle = useBlockDisplayTitle( {\n\t\t\tclientId: insertedBlock?.clientId,\n\t\t\tcontext: 'list-view',\n\t\t} );\n\n\t\tuseEffect( () => {\n\t\t\tif ( ! insertedBlockTitle?.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tspeak(\n\t\t\t\tsprintf(\n\t\t\t\t\t// translators: %s: name of block being inserted (i.e. Paragraph, Image, Group etc)\n\t\t\t\t\t__( '%s block inserted' ),\n\t\t\t\t\tinsertedBlockTitle\n\t\t\t\t),\n\t\t\t\t'assertive'\n\t\t\t);\n\t\t}, [ insertedBlockTitle ] );\n\n\t\tif ( hideInserter ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst descriptionId = `list-view-appender__${ instanceId }`;\n\t\tconst description = sprintf(\n\t\t\t/* translators: 1: The name of the block. 2: The numerical position of the block. 3: The level of nesting for the block. */\n\t\t\t__( 'Append to %1$s block at position %2$d, Level %3$d' ),\n\t\t\tblockTitle,\n\t\t\tblockCount + 1,\n\t\t\tnestingLevel\n\t\t);\n\n\t\treturn (\n\t\t\t<div className=\"list-view-appender\">\n\t\t\t\t<Inserter\n\t\t\t\t\tref={ ref }\n\t\t\t\t\trootClientId={ clientId }\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\tisAppender\n\t\t\t\t\tselectBlockOnInsert={ false }\n\t\t\t\t\tshouldDirectInsert={ false }\n\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t\t{ ...props }\n\t\t\t\t\ttoggleProps={ { 'aria-describedby': descriptionId } }\n\t\t\t\t\tonSelectOrClose={ ( maybeInsertedBlock ) => {\n\t\t\t\t\t\tif ( maybeInsertedBlock?.clientId ) {\n\t\t\t\t\t\t\tsetInsertedBlock( maybeInsertedBlock );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<AriaReferencedText id={ descriptionId }>\n\t\t\t\t\t{ description }\n\t\t\t\t</AriaReferencedText>\n\t\t\t</div>\n\t\t);\n\t}\n);\n"],"mappings":"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","ignoreList":[]}