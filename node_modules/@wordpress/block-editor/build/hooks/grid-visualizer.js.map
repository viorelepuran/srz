{"version":3,"names":["_compose","require","_hooks","_data","_grid","_store","_jsxRuntime","GridLayoutSync","props","useGridLayoutSync","GridTools","clientId","layout","isVisible","useSelect","select","isBlockSelected","isDraggingBlocks","getTemplateLock","getBlockEditingMode","blockEditorStore","jsxs","Fragment","children","jsx","GridVisualizer","parentLayout","addGridVisualizerToBlockEdit","createHigherOrderComponent","BlockEdit","attributes","type","addFilter"],"sources":["@wordpress/block-editor/src/hooks/grid-visualizer.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { GridVisualizer, useGridLayoutSync } from '../components/grid';\nimport { store as blockEditorStore } from '../store';\n\nfunction GridLayoutSync( props ) {\n\tuseGridLayoutSync( props );\n}\n\nfunction GridTools( { clientId, layout } ) {\n\tconst isVisible = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tisBlockSelected,\n\t\t\t\tisDraggingBlocks,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\t// These calls are purposely ordered from least expensive to most expensive.\n\t\t\t// Hides the visualizer in cases where the user is not or cannot interact with it.\n\t\t\tif (\n\t\t\t\t( ! isDraggingBlocks() && ! isBlockSelected( clientId ) ) ||\n\t\t\t\tgetTemplateLock( clientId ) ||\n\t\t\t\tgetBlockEditingMode( clientId ) !== 'default'\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<GridLayoutSync clientId={ clientId } />\n\t\t\t{ isVisible && (\n\t\t\t\t<GridVisualizer clientId={ clientId } parentLayout={ layout } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nconst addGridVisualizerToBlockEdit = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tif ( props.attributes.layout?.type !== 'grid' ) {\n\t\t\treturn <BlockEdit key=\"edit\" { ...props } />;\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<GridTools\n\t\t\t\t\tclientId={ props.clientId }\n\t\t\t\t\tlayout={ props.attributes.layout }\n\t\t\t\t/>\n\t\t\t\t<BlockEdit key=\"edit\" { ...props } />\n\t\t\t</>\n\t\t);\n\t},\n\t'addGridVisualizerToBlockEdit'\n);\n\naddFilter(\n\t'editor.BlockEdit',\n\t'core/editor/grid-visualizer',\n\taddGridVisualizerToBlockEdit\n);\n"],"mappings":";;AAGA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AAKA,IAAAG,KAAA,GAAAH,OAAA;AACA,IAAAI,MAAA,GAAAJ,OAAA;AAAqD,IAAAK,WAAA,GAAAL,OAAA;AAXrD;AACA;AACA;;AAKA;AACA;AACA;;AAIA,SAASM,cAAcA,CAAEC,KAAK,EAAG;EAChC,IAAAC,uBAAiB,EAAED,KAAM,CAAC;AAC3B;AAEA,SAASE,SAASA,CAAE;EAAEC,QAAQ;EAAEC;AAAO,CAAC,EAAG;EAC1C,MAAMC,SAAS,GAAG,IAAAC,eAAS,EACxBC,MAAM,IAAM;IACb,MAAM;MACLC,eAAe;MACfC,gBAAgB;MAChBC,eAAe;MACfC;IACD,CAAC,GAAGJ,MAAM,CAAEK,YAAiB,CAAC;;IAE9B;IACA;IACA,IACG,CAAEH,gBAAgB,CAAC,CAAC,IAAI,CAAED,eAAe,CAAEL,QAAS,CAAC,IACvDO,eAAe,CAAEP,QAAS,CAAC,IAC3BQ,mBAAmB,CAAER,QAAS,CAAC,KAAK,SAAS,EAC5C;MACD,OAAO,KAAK;IACb;IAEA,OAAO,IAAI;EACZ,CAAC,EACD,CAAEA,QAAQ,CACX,CAAC;EAED,oBACC,IAAAL,WAAA,CAAAe,IAAA,EAAAf,WAAA,CAAAgB,QAAA;IAAAC,QAAA,gBACC,IAAAjB,WAAA,CAAAkB,GAAA,EAACjB,cAAc;MAACI,QAAQ,EAAGA;IAAU,CAAE,CAAC,EACtCE,SAAS,iBACV,IAAAP,WAAA,CAAAkB,GAAA,EAACpB,KAAA,CAAAqB,cAAc;MAACd,QAAQ,EAAGA,QAAU;MAACe,YAAY,EAAGd;IAAQ,CAAE,CAC/D;EAAA,CACA,CAAC;AAEL;AAEA,MAAMe,4BAA4B,GAAG,IAAAC,mCAA0B,EAC5DC,SAAS,IAAQrB,KAAK,IAAM;EAC7B,IAAKA,KAAK,CAACsB,UAAU,CAAClB,MAAM,EAAEmB,IAAI,KAAK,MAAM,EAAG;IAC/C,oBAAO,IAAAzB,WAAA,CAAAkB,GAAA,EAACK,SAAS;MAAA,GAAiBrB;IAAK,GAAjB,MAAqB,CAAC;EAC7C;EAEA,oBACC,IAAAF,WAAA,CAAAe,IAAA,EAAAf,WAAA,CAAAgB,QAAA;IAAAC,QAAA,gBACC,IAAAjB,WAAA,CAAAkB,GAAA,EAACd,SAAS;MACTC,QAAQ,EAAGH,KAAK,CAACG,QAAU;MAC3BC,MAAM,EAAGJ,KAAK,CAACsB,UAAU,CAAClB;IAAQ,CAClC,CAAC,eACF,IAAAN,WAAA,CAAAkB,GAAA,EAACK,SAAS;MAAA,GAAiBrB;IAAK,GAAjB,MAAqB,CAAC;EAAA,CACpC,CAAC;AAEL,CAAC,EACD,8BACD,CAAC;AAED,IAAAwB,gBAAS,EACR,kBAAkB,EAClB,6BAA6B,EAC7BL,4BACD,CAAC","ignoreList":[]}