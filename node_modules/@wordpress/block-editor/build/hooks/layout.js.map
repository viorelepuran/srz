{"version":3,"names":["_clsx","_interopRequireDefault","require","_compose","_hooks","_blocks","_data","_components","_i18n","_store","_components2","_useSettings","_layouts","_blockEditingMode","_definitions","_utils","_lockUnlock","_jsxRuntime","layoutBlockSupportKey","kebabCase","unlock","componentsPrivateApis","hasLayoutBlockSupport","blockName","hasBlockSupport","useLayoutClasses","blockAttributes","layout","default","defaultBlockLayout","getBlockSupport","usedLayout","inherit","contentSize","wideSize","type","layoutClassnames","LAYOUT_DEFINITIONS","className","baseClassName","splitBlockName","split","fullBlockName","pop","join","compoundClassName","push","hasGlobalPadding","useSelect","select","blockEditorStore","getSettings","__experimentalFeatures","useRootPaddingAwareAlignments","orientation","justifyContent","flexWrap","useLayoutStyles","selector","style","fullLayoutType","getLayoutType","blockGapSupport","useSettings","hasBlockGapSupport","getLayoutStyle","LayoutPanelPure","setAttributes","name","clientId","settings","useBlockSettings","layoutSettings","themeSupportsLayout","supportsLayout","blockEditingMode","useBlockEditingMode","layoutBlockSupport","blockSupportAndThemeSettings","allowSwitching","allowEditing","allowInheriting","blockSupportAndLayout","defaultType","blockLayoutType","showInheritToggle","layoutType","constrainedType","displayControlsForLegacyLayouts","hasContentSizeOrLegacySettings","onChangeType","newType","onChangeLayout","newLayout","jsxs","Fragment","children","jsx","InspectorControls","PanelBody","title","__","ToggleControl","__nextHasNoMarginBottom","label","checked","onChange","help","LayoutTypeSwitcher","inspectorControls","toolBarControls","_default","exports","shareWithChildBlocks","edit","attributeKeys","hasSupport","__experimentalToggleGroupControl","__next40pxDefaultSize","isBlock","hideLabelFromVision","isAdaptiveWidth","value","getLayoutTypes","map","__experimentalToggleGroupControlOption","addAttribute","_settings$attributes$","attributes","BlockWithLayoutStyles","block","BlockListBlock","props","layoutClasses","id","useInstanceId","selectorPrefix","css","layoutClassNames","clsx","useStyleOverride","__unstableLayoutClassNames","withLayoutStyles","createHigherOrderComponent","blockSupportsLayout","extraProps","getBlockSettings","disableLayoutStyles","undefined","addFilter"],"sources":["@wordpress/block-editor/src/hooks/layout.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent, useInstanceId } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\tToggleControl,\n\tPanelBody,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { InspectorControls } from '../components';\nimport { useSettings } from '../components/use-settings';\nimport { getLayoutType, getLayoutTypes } from '../layouts';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\nimport { LAYOUT_DEFINITIONS } from '../layouts/definitions';\nimport { useBlockSettings, useStyleOverride } from './utils';\nimport { unlock } from '../lock-unlock';\n\nconst layoutBlockSupportKey = 'layout';\nconst { kebabCase } = unlock( componentsPrivateApis );\n\nfunction hasLayoutBlockSupport( blockName ) {\n\treturn (\n\t\thasBlockSupport( blockName, 'layout' ) ||\n\t\thasBlockSupport( blockName, '__experimentalLayout' )\n\t);\n}\n\n/**\n * Generates the utility classnames for the given block's layout attributes.\n *\n * @param { Object } blockAttributes Block attributes.\n * @param { string } blockName       Block name.\n *\n * @return { Array } Array of CSS classname strings.\n */\nexport function useLayoutClasses( blockAttributes = {}, blockName = '' ) {\n\tconst { layout } = blockAttributes;\n\tconst { default: defaultBlockLayout } =\n\t\tgetBlockSupport( blockName, layoutBlockSupportKey ) || {};\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || defaultBlockLayout || {};\n\n\tconst layoutClassnames = [];\n\n\tif ( LAYOUT_DEFINITIONS[ usedLayout?.type || 'default' ]?.className ) {\n\t\tconst baseClassName =\n\t\t\tLAYOUT_DEFINITIONS[ usedLayout?.type || 'default' ]?.className;\n\t\tconst splitBlockName = blockName.split( '/' );\n\t\tconst fullBlockName =\n\t\t\tsplitBlockName[ 0 ] === 'core'\n\t\t\t\t? splitBlockName.pop()\n\t\t\t\t: splitBlockName.join( '-' );\n\t\tconst compoundClassName = `wp-block-${ fullBlockName }-${ baseClassName }`;\n\t\tlayoutClassnames.push( baseClassName, compoundClassName );\n\t}\n\n\tconst hasGlobalPadding = useSelect(\n\t\t( select ) => {\n\t\t\treturn (\n\t\t\t\t( usedLayout?.inherit ||\n\t\t\t\t\tusedLayout?.contentSize ||\n\t\t\t\t\tusedLayout?.type === 'constrained' ) &&\n\t\t\t\tselect( blockEditorStore ).getSettings().__experimentalFeatures\n\t\t\t\t\t?.useRootPaddingAwareAlignments\n\t\t\t);\n\t\t},\n\t\t[ usedLayout?.contentSize, usedLayout?.inherit, usedLayout?.type ]\n\t);\n\n\tif ( hasGlobalPadding ) {\n\t\tlayoutClassnames.push( 'has-global-padding' );\n\t}\n\n\tif ( usedLayout?.orientation ) {\n\t\tlayoutClassnames.push( `is-${ kebabCase( usedLayout.orientation ) }` );\n\t}\n\n\tif ( usedLayout?.justifyContent ) {\n\t\tlayoutClassnames.push(\n\t\t\t`is-content-justification-${ kebabCase(\n\t\t\t\tusedLayout.justifyContent\n\t\t\t) }`\n\t\t);\n\t}\n\n\tif ( usedLayout?.flexWrap && usedLayout.flexWrap === 'nowrap' ) {\n\t\tlayoutClassnames.push( 'is-nowrap' );\n\t}\n\n\treturn layoutClassnames;\n}\n\n/**\n * Generates a CSS rule with the given block's layout styles.\n *\n * @param { Object } blockAttributes Block attributes.\n * @param { string } blockName       Block name.\n * @param { string } selector        A selector to use in generating the CSS rule.\n *\n * @return { string } CSS rule.\n */\nexport function useLayoutStyles( blockAttributes = {}, blockName, selector ) {\n\tconst { layout = {}, style = {} } = blockAttributes;\n\t// Update type for blocks using legacy layouts.\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || {};\n\tconst fullLayoutType = getLayoutType( usedLayout?.type || 'default' );\n\tconst [ blockGapSupport ] = useSettings( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGapSupport !== null;\n\treturn fullLayoutType?.getLayoutStyle?.( {\n\t\tblockName,\n\t\tselector,\n\t\tlayout,\n\t\tstyle,\n\t\thasBlockGapSupport,\n\t} );\n}\n\nfunction LayoutPanelPure( {\n\tlayout,\n\tsetAttributes,\n\tname: blockName,\n\tclientId,\n} ) {\n\tconst settings = useBlockSettings( blockName );\n\t// Block settings come from theme.json under settings.[blockName].\n\tconst { layout: layoutSettings } = settings;\n\tconst { themeSupportsLayout } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\tthemeSupportsLayout: getSettings().supportsLayout,\n\t\t};\n\t}, [] );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tif ( blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\n\t// Layout block support comes from the block's block.json.\n\tconst layoutBlockSupport = getBlockSupport(\n\t\tblockName,\n\t\tlayoutBlockSupportKey,\n\t\t{}\n\t);\n\tconst blockSupportAndThemeSettings = {\n\t\t...layoutSettings,\n\t\t...layoutBlockSupport,\n\t};\n\tconst {\n\t\tallowSwitching,\n\t\tallowEditing = true,\n\t\tallowInheriting = true,\n\t\tdefault: defaultBlockLayout,\n\t} = blockSupportAndThemeSettings;\n\n\tif ( ! allowEditing ) {\n\t\treturn null;\n\t}\n\n\t/*\n\t * Try to find the layout type from either the\n\t * block's layout settings or any saved layout config.\n\t */\n\tconst blockSupportAndLayout = {\n\t\t...layoutBlockSupport,\n\t\t...layout,\n\t};\n\tconst { type, default: { type: defaultType = 'default' } = {} } =\n\t\tblockSupportAndLayout;\n\tconst blockLayoutType = type || defaultType;\n\n\t// Only show the inherit toggle if it's supported,\n\t// and either the default / flow or the constrained layout type is in use, as the toggle switches from one to the other.\n\tconst showInheritToggle = !! (\n\t\tallowInheriting &&\n\t\t( ! blockLayoutType ||\n\t\t\tblockLayoutType === 'default' ||\n\t\t\tblockLayoutType === 'constrained' ||\n\t\t\tblockSupportAndLayout.inherit )\n\t);\n\n\tconst usedLayout = layout || defaultBlockLayout || {};\n\tconst { inherit = false, contentSize = null } = usedLayout;\n\t/**\n\t * `themeSupportsLayout` is only relevant to the `default/flow` or\n\t * `constrained` layouts and it should not be taken into account when other\n\t * `layout` types are used.\n\t */\n\tif (\n\t\t( blockLayoutType === 'default' ||\n\t\t\tblockLayoutType === 'constrained' ) &&\n\t\t! themeSupportsLayout\n\t) {\n\t\treturn null;\n\t}\n\tconst layoutType = getLayoutType( blockLayoutType );\n\tconst constrainedType = getLayoutType( 'constrained' );\n\tconst displayControlsForLegacyLayouts =\n\t\t! usedLayout.type && ( contentSize || inherit );\n\tconst hasContentSizeOrLegacySettings = !! inherit || !! contentSize;\n\n\tconst onChangeType = ( newType ) =>\n\t\tsetAttributes( { layout: { type: newType } } );\n\tconst onChangeLayout = ( newLayout ) =>\n\t\tsetAttributes( { layout: newLayout } );\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Layout' ) }>\n\t\t\t\t\t{ showInheritToggle && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Inner blocks use content width' ) }\n\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\tlayoutType?.name === 'constrained' ||\n\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\t\t\tlayoutType?.name ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t'constrained' ||\n\t\t\t\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'constrained',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t\tlayoutType?.name === 'constrained' ||\n\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Nested blocks use content width with options for full and wide widths.'\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Nested blocks will fill the width of this container.'\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ ! inherit && allowSwitching && (\n\t\t\t\t\t\t<LayoutTypeSwitcher\n\t\t\t\t\t\t\ttype={ blockLayoutType }\n\t\t\t\t\t\t\tonChange={ onChangeType }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ layoutType && layoutType.name !== 'default' && (\n\t\t\t\t\t\t<layoutType.inspectorControls\n\t\t\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\t\t\tlayoutBlockSupport={ blockSupportAndThemeSettings }\n\t\t\t\t\t\t\tname={ blockName }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ constrainedType && displayControlsForLegacyLayouts && (\n\t\t\t\t\t\t<constrainedType.inspectorControls\n\t\t\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\t\t\tlayoutBlockSupport={ blockSupportAndThemeSettings }\n\t\t\t\t\t\t\tname={ blockName }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{ ! inherit && layoutType && (\n\t\t\t\t<layoutType.toolBarControls\n\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\tlayoutBlockSupport={ layoutBlockSupport }\n\t\t\t\t\tname={ blockName }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default {\n\tshareWithChildBlocks: true,\n\tedit: LayoutPanelPure,\n\tattributeKeys: [ 'layout' ],\n\thasSupport( name ) {\n\t\treturn hasLayoutBlockSupport( name );\n\t},\n};\n\nfunction LayoutTypeSwitcher( { type, onChange } ) {\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\t__next40pxDefaultSize\n\t\t\tisBlock\n\t\t\tlabel={ __( 'Layout type' ) }\n\t\t\t__nextHasNoMarginBottom\n\t\t\thideLabelFromVision\n\t\t\tisAdaptiveWidth\n\t\t\tvalue={ type }\n\t\t\tonChange={ onChange }\n\t\t>\n\t\t\t{ getLayoutTypes().map( ( { name, label } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\tvalue={ name }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ToggleGroupControl>\n\t);\n}\n\n/**\n * Filters registered block settings, extending attributes to include `layout`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\tif ( 'type' in ( settings.attributes?.layout ?? {} ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasLayoutBlockSupport( settings ) ) {\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tlayout: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\nfunction BlockWithLayoutStyles( {\n\tblock: BlockListBlock,\n\tprops,\n\tblockGapSupport,\n\tlayoutClasses,\n} ) {\n\tconst { name, attributes } = props;\n\tconst id = useInstanceId( BlockListBlock );\n\tconst { layout } = attributes;\n\tconst { default: defaultBlockLayout } =\n\t\tgetBlockSupport( name, layoutBlockSupportKey ) || {};\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || defaultBlockLayout || {};\n\n\tconst selectorPrefix = `wp-container-${ kebabCase( name ) }-is-layout-`;\n\t// Higher specificity to override defaults from theme.json.\n\tconst selector = `.${ selectorPrefix }${ id }`;\n\tconst hasBlockGapSupport = blockGapSupport !== null;\n\n\t// Get CSS string for the current layout type.\n\t// The CSS and `style` element is only output if it is not empty.\n\tconst fullLayoutType = getLayoutType( usedLayout?.type || 'default' );\n\tconst css = fullLayoutType?.getLayoutStyle?.( {\n\t\tblockName: name,\n\t\tselector,\n\t\tlayout: usedLayout,\n\t\tstyle: attributes?.style,\n\t\thasBlockGapSupport,\n\t} );\n\n\t// Attach a `wp-container-` id-based class name as well as a layout class name such as `is-layout-flex`.\n\tconst layoutClassNames = clsx(\n\t\t{\n\t\t\t[ `${ selectorPrefix }${ id }` ]: !! css, // Only attach a container class if there is generated CSS to be attached.\n\t\t},\n\t\tlayoutClasses\n\t);\n\n\tuseStyleOverride( { css } );\n\n\treturn (\n\t\t<BlockListBlock\n\t\t\t{ ...props }\n\t\t\t__unstableLayoutClassNames={ layoutClassNames }\n\t\t/>\n\t);\n}\n\n/**\n * Override the default block element to add the layout styles.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withLayoutStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { clientId, name, attributes } = props;\n\t\tconst blockSupportsLayout = hasLayoutBlockSupport( name );\n\t\tconst layoutClasses = useLayoutClasses( attributes, name );\n\t\tconst extraProps = useSelect(\n\t\t\t( select ) => {\n\t\t\t\t// The callback returns early to avoid block editor subscription.\n\t\t\t\tif ( ! blockSupportsLayout ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { getSettings, getBlockSettings } = unlock(\n\t\t\t\t\tselect( blockEditorStore )\n\t\t\t\t);\n\t\t\t\tconst { disableLayoutStyles } = getSettings();\n\n\t\t\t\tif ( disableLayoutStyles ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst [ blockGapSupport ] = getBlockSettings(\n\t\t\t\t\tclientId,\n\t\t\t\t\t'spacing.blockGap'\n\t\t\t\t);\n\n\t\t\t\treturn { blockGapSupport };\n\t\t\t},\n\t\t\t[ blockSupportsLayout, clientId ]\n\t\t);\n\n\t\tif ( ! extraProps ) {\n\t\t\treturn (\n\t\t\t\t<BlockListBlock\n\t\t\t\t\t{ ...props }\n\t\t\t\t\t__unstableLayoutClassNames={\n\t\t\t\t\t\tblockSupportsLayout ? layoutClasses : undefined\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<BlockWithLayoutStyles\n\t\t\t\tblock={ BlockListBlock }\n\t\t\t\tprops={ props }\n\t\t\t\tlayoutClasses={ layoutClasses }\n\t\t\t\t{ ...extraProps }\n\t\t\t/>\n\t\t);\n\t},\n\t'withLayoutStyles'\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/layout/addAttribute',\n\taddAttribute\n);\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/layout/with-layout-styles',\n\twithLayoutStyles\n);\n"],"mappings":"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","ignoreList":[]}