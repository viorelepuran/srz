{"version":3,"names":["_components","require","_coreData","_data","_element","_htmlEntities","_i18n","_notices","_jsxRuntime","RenamePatternModal","onClose","onError","onSuccess","pattern","props","originalName","decodeEntities","title","name","setName","useState","isSaving","setIsSaving","editEntityRecord","__experimentalSaveSpecifiedEntityEdits","saveSpecifiedEntityEdits","useDispatch","coreStore","createSuccessNotice","createErrorNotice","noticesStore","onRename","event","preventDefault","type","id","savedRecord","throwOnError","__","error","errorMessage","message","code","onRequestClose","jsx","Modal","focusOnMount","size","children","onSubmit","jsxs","__experimentalVStack","spacing","TextControl","__nextHasNoMarginBottom","__next40pxDefaultSize","label","value","onChange","required","__experimentalHStack","justify","Button","variant","onClick"],"sources":["@wordpress/patterns/src/components/rename-pattern-modal.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tModal,\n\tTextControl,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { useDispatch } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\n\nexport default function RenamePatternModal( {\n\tonClose,\n\tonError,\n\tonSuccess,\n\tpattern,\n\t...props\n} ) {\n\tconst originalName = decodeEntities( pattern.title );\n\tconst [ name, setName ] = useState( originalName );\n\tconst [ isSaving, setIsSaving ] = useState( false );\n\n\tconst {\n\t\teditEntityRecord,\n\t\t__experimentalSaveSpecifiedEntityEdits: saveSpecifiedEntityEdits,\n\t} = useDispatch( coreStore );\n\n\tconst { createSuccessNotice, createErrorNotice } =\n\t\tuseDispatch( noticesStore );\n\n\tconst onRename = async ( event ) => {\n\t\tevent.preventDefault();\n\n\t\tif ( ! name || name === pattern.title || isSaving ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait editEntityRecord( 'postType', pattern.type, pattern.id, {\n\t\t\t\ttitle: name,\n\t\t\t} );\n\n\t\t\tsetIsSaving( true );\n\t\t\tsetName( '' );\n\t\t\tonClose?.();\n\n\t\t\tconst savedRecord = await saveSpecifiedEntityEdits(\n\t\t\t\t'postType',\n\t\t\t\tpattern.type,\n\t\t\t\tpattern.id,\n\t\t\t\t[ 'title' ],\n\t\t\t\t{ throwOnError: true }\n\t\t\t);\n\n\t\t\tonSuccess?.( savedRecord );\n\n\t\t\tcreateSuccessNotice( __( 'Pattern renamed' ), {\n\t\t\t\ttype: 'snackbar',\n\t\t\t\tid: 'pattern-update',\n\t\t\t} );\n\t\t} catch ( error ) {\n\t\t\tonError?.();\n\n\t\t\tconst errorMessage =\n\t\t\t\terror.message && error.code !== 'unknown_error'\n\t\t\t\t\t? error.message\n\t\t\t\t\t: __( 'An error occurred while renaming the pattern.' );\n\n\t\t\tcreateErrorNotice( errorMessage, {\n\t\t\t\ttype: 'snackbar',\n\t\t\t\tid: 'pattern-update',\n\t\t\t} );\n\t\t} finally {\n\t\t\tsetIsSaving( false );\n\t\t\tsetName( '' );\n\t\t}\n\t};\n\n\tconst onRequestClose = () => {\n\t\tonClose?.();\n\t\tsetName( '' );\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Rename' ) }\n\t\t\t{ ...props }\n\t\t\tonRequestClose={ onClose }\n\t\t\tfocusOnMount=\"firstContentElement\"\n\t\t\tsize=\"small\"\n\t\t>\n\t\t\t<form onSubmit={ onRename }>\n\t\t\t\t<VStack spacing=\"5\">\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tlabel={ __( 'Name' ) }\n\t\t\t\t\t\tvalue={ name }\n\t\t\t\t\t\tonChange={ setName }\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\n\t\t\t\t\t<HStack justify=\"right\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ onRequestClose }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</HStack>\n\t\t\t\t</VStack>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}