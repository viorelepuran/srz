{"version":3,"names":["store","coreStore","doAction","viewPost","viewPostRevisions","duplicatePost","duplicatePattern","reorderPage","exportPattern","permanentlyDeletePost","restorePost","trashPost","renamePost","resetPost","deletePost","duplicateTemplatePart","featuredImageField","dateField","parentField","passwordField","commentStatusField","slugField","statusField","authorField","titleField","templateField","templateTitleField","pageTitleField","patternTitleField","editorStore","postPreviewField","unlock","registerEntityAction","kind","name","config","type","unregisterEntityAction","actionId","registerEntityField","unregisterEntityField","fieldId","setIsReady","registerPostTypeSchema","postType","registry","isReady","select","isEntityReady","dispatch","postTypeConfig","resolveSelect","getPostType","canCreate","canUser","currentTheme","getCurrentTheme","actions","viewable","undefined","supports","revisions","globalThis","IS_GUTENBERG_PLUGIN","includes","slug","is_block_theme","title","filter","Boolean","fields","thumbnail","theme_supports","author","comments","editor","_titleField","push","batch","forEach","action","field"],"sources":["@wordpress/editor/src/dataviews/store/private-actions.ts"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { store as coreStore } from '@wordpress/core-data';\nimport type { Action, Field } from '@wordpress/dataviews';\nimport { doAction } from '@wordpress/hooks';\nimport type { PostType } from '@wordpress/fields';\nimport {\n\tviewPost,\n\tviewPostRevisions,\n\tduplicatePost,\n\tduplicatePattern,\n\treorderPage,\n\texportPattern,\n\tpermanentlyDeletePost,\n\trestorePost,\n\ttrashPost,\n\trenamePost,\n\tresetPost,\n\tdeletePost,\n\tduplicateTemplatePart,\n\tfeaturedImageField,\n\tdateField,\n\tparentField,\n\tpasswordField,\n\tcommentStatusField,\n\tslugField,\n\tstatusField,\n\tauthorField,\n\ttitleField,\n\ttemplateField,\n\ttemplateTitleField,\n\tpageTitleField,\n\tpatternTitleField,\n} from '@wordpress/fields';\n\n/**\n * Internal dependencies\n */\nimport { store as editorStore } from '../../store';\nimport postPreviewField from '../fields/content-preview';\nimport { unlock } from '../../lock-unlock';\n\nexport function registerEntityAction< Item >(\n\tkind: string,\n\tname: string,\n\tconfig: Action< Item >\n) {\n\treturn {\n\t\ttype: 'REGISTER_ENTITY_ACTION' as const,\n\t\tkind,\n\t\tname,\n\t\tconfig,\n\t};\n}\n\nexport function unregisterEntityAction(\n\tkind: string,\n\tname: string,\n\tactionId: string\n) {\n\treturn {\n\t\ttype: 'UNREGISTER_ENTITY_ACTION' as const,\n\t\tkind,\n\t\tname,\n\t\tactionId,\n\t};\n}\n\nexport function registerEntityField< Item >(\n\tkind: string,\n\tname: string,\n\tconfig: Field< Item >\n) {\n\treturn {\n\t\ttype: 'REGISTER_ENTITY_FIELD' as const,\n\t\tkind,\n\t\tname,\n\t\tconfig,\n\t};\n}\n\nexport function unregisterEntityField(\n\tkind: string,\n\tname: string,\n\tfieldId: string\n) {\n\treturn {\n\t\ttype: 'UNREGISTER_ENTITY_FIELD' as const,\n\t\tkind,\n\t\tname,\n\t\tfieldId,\n\t};\n}\n\nexport function setIsReady( kind: string, name: string ) {\n\treturn {\n\t\ttype: 'SET_IS_READY' as const,\n\t\tkind,\n\t\tname,\n\t};\n}\n\nexport const registerPostTypeSchema =\n\t( postType: string ) =>\n\tasync ( { registry }: { registry: any } ) => {\n\t\tconst isReady = unlock( registry.select( editorStore ) ).isEntityReady(\n\t\t\t'postType',\n\t\t\tpostType\n\t\t);\n\t\tif ( isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\tunlock( registry.dispatch( editorStore ) ).setIsReady(\n\t\t\t'postType',\n\t\t\tpostType\n\t\t);\n\n\t\tconst postTypeConfig = ( await registry\n\t\t\t.resolveSelect( coreStore )\n\t\t\t.getPostType( postType ) ) as PostType;\n\n\t\tconst canCreate = await registry\n\t\t\t.resolveSelect( coreStore )\n\t\t\t.canUser( 'create', {\n\t\t\t\tkind: 'postType',\n\t\t\t\tname: postType,\n\t\t\t} );\n\t\tconst currentTheme = await registry\n\t\t\t.resolveSelect( coreStore )\n\t\t\t.getCurrentTheme();\n\n\t\tconst actions = [\n\t\t\tpostTypeConfig.viewable ? viewPost : undefined,\n\t\t\t!! postTypeConfig.supports?.revisions\n\t\t\t\t? viewPostRevisions\n\t\t\t\t: undefined,\n\t\t\t// @ts-ignore\n\t\t\tglobalThis.IS_GUTENBERG_PLUGIN\n\t\t\t\t? ! [ 'wp_template', 'wp_block', 'wp_template_part' ].includes(\n\t\t\t\t\t\tpostTypeConfig.slug\n\t\t\t\t  ) &&\n\t\t\t\t  canCreate &&\n\t\t\t\t  duplicatePost\n\t\t\t\t: undefined,\n\t\t\tpostTypeConfig.slug === 'wp_template_part' &&\n\t\t\tcanCreate &&\n\t\t\tcurrentTheme?.is_block_theme\n\t\t\t\t? duplicateTemplatePart\n\t\t\t\t: undefined,\n\t\t\tcanCreate && postTypeConfig.slug === 'wp_block'\n\t\t\t\t? duplicatePattern\n\t\t\t\t: undefined,\n\t\t\tpostTypeConfig.supports?.title ? renamePost : undefined,\n\t\t\tpostTypeConfig.supports?.[ 'page-attributes' ]\n\t\t\t\t? reorderPage\n\t\t\t\t: undefined,\n\t\t\tpostTypeConfig.slug === 'wp_block' ? exportPattern : undefined,\n\t\t\trestorePost,\n\t\t\tresetPost,\n\t\t\tdeletePost,\n\t\t\ttrashPost,\n\t\t\tpermanentlyDeletePost,\n\t\t].filter( Boolean );\n\n\t\tconst fields = [\n\t\t\tpostTypeConfig.supports?.thumbnail &&\n\t\t\t\tcurrentTheme?.theme_supports?.[ 'post-thumbnails' ] &&\n\t\t\t\tfeaturedImageField,\n\t\t\tpostTypeConfig.supports?.author && authorField,\n\t\t\tstatusField,\n\t\t\tdateField,\n\t\t\tslugField,\n\t\t\tpostTypeConfig.supports?.[ 'page-attributes' ] && parentField,\n\t\t\tpostTypeConfig.supports?.comments && commentStatusField,\n\t\t\ttemplateField,\n\t\t\tpasswordField,\n\t\t\tpostTypeConfig.supports?.editor &&\n\t\t\t\tpostTypeConfig.viewable &&\n\t\t\t\tpostPreviewField,\n\t\t].filter( Boolean );\n\t\tif ( postTypeConfig.supports?.title ) {\n\t\t\tlet _titleField;\n\t\t\tif ( postType === 'page' ) {\n\t\t\t\t_titleField = pageTitleField;\n\t\t\t} else if ( postType === 'wp_template' ) {\n\t\t\t\t_titleField = templateTitleField;\n\t\t\t} else if ( postType === 'wp_block' ) {\n\t\t\t\t_titleField = patternTitleField;\n\t\t\t} else {\n\t\t\t\t_titleField = titleField;\n\t\t\t}\n\t\t\tfields.push( _titleField );\n\t\t}\n\n\t\tregistry.batch( () => {\n\t\t\tactions.forEach( ( action ) => {\n\t\t\t\tunlock( registry.dispatch( editorStore ) ).registerEntityAction(\n\t\t\t\t\t'postType',\n\t\t\t\t\tpostType,\n\t\t\t\t\taction\n\t\t\t\t);\n\t\t\t} );\n\t\t\tfields.forEach( ( field ) => {\n\t\t\t\tunlock( registry.dispatch( editorStore ) ).registerEntityField(\n\t\t\t\t\t'postType',\n\t\t\t\t\tpostType,\n\t\t\t\t\tfield\n\t\t\t\t);\n\t\t\t} );\n\t\t} );\n\n\t\tdoAction( 'core.registerPostTypeSchema', postType );\n\t};\n"],"mappings":"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","ignoreList":[]}