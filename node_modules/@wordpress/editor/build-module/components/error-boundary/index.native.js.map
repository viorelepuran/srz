{"version":3,"names":["ScrollView","Text","TouchableOpacity","View","Clipboard","SafeAreaView","Component","__","select","logException","usePreferredColorSchemeStyle","withPreferredColorScheme","cautionFilled","Icon","store","editorStore","styles","jsx","_jsx","jsxs","_jsxs","getContent","getEditedPostContent","error","CopyButton","text","label","accessibilityLabel","accessibilityHint","secondary","containerStyle","containerSecondaryStyle","textStyle","textSecondaryStyle","activeOpacity","style","accessibilityRole","onPress","setString","children","ErrorBoundary","constructor","arguments","state","componentDidCatch","context","component_stack","componentStack","isHandled","handledBy","getDerivedStateFromError","render","props","getStylesFromColorScheme","iconContainerStyle","titleStyle","messageStyle","contentContainerStyle","icon","stack"],"sources":["@wordpress/editor/src/components/error-boundary/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { ScrollView, Text, TouchableOpacity, View } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { select } from '@wordpress/data';\nimport { logException } from '@wordpress/react-native-bridge';\nimport {\n\tusePreferredColorSchemeStyle,\n\twithPreferredColorScheme,\n} from '@wordpress/compose';\nimport { cautionFilled } from '@wordpress/icons';\nimport { Icon } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { store as editorStore } from '../../store';\nimport styles from './style.scss';\n\nfunction getContent() {\n\ttry {\n\t\t// While `select` in a component is generally discouraged, it is\n\t\t// used here because it (a) reduces the chance of data loss in the\n\t\t// case of additional errors by performing a direct retrieval and\n\t\t// (b) avoids the performance cost associated with unnecessary\n\t\t// content serialization throughout the lifetime of a non-erroring\n\t\t// application.\n\t\treturn select( editorStore ).getEditedPostContent();\n\t} catch ( error ) {}\n}\n\nfunction CopyButton( {\n\ttext,\n\tlabel,\n\taccessibilityLabel,\n\taccessibilityHint,\n\tsecondary = false,\n} ) {\n\tconst containerStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__container' ],\n\t\tstyles[ 'copy-button__container--dark' ]\n\t);\n\n\tconst containerSecondaryStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__container--secondary' ],\n\t\tstyles[ 'copy-button__container--secondary-dark' ]\n\t);\n\n\tconst textStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__text' ],\n\t\tstyles[ 'copy-button__text--dark' ]\n\t);\n\n\tconst textSecondaryStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__text--secondary' ],\n\t\tstyles[ 'copy-button__text--secondary-dark' ]\n\t);\n\n\treturn (\n\t\t<TouchableOpacity\n\t\t\tactiveOpacity={ 0.5 }\n\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\tstyle={ [ containerStyle, secondary && containerSecondaryStyle ] }\n\t\t\taccessibilityRole=\"button\"\n\t\t\taccessibilityHint={ accessibilityHint }\n\t\t\tonPress={ () => {\n\t\t\t\tClipboard.setString(\n\t\t\t\t\ttypeof text === 'function' ? text() : text || ''\n\t\t\t\t);\n\t\t\t} }\n\t\t>\n\t\t\t<Text style={ [ textStyle, secondary && textSecondaryStyle ] }>\n\t\t\t\t{ label }\n\t\t\t</Text>\n\t\t</TouchableOpacity>\n\t);\n}\n\nclass ErrorBoundary extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\terror: null,\n\t\t};\n\t}\n\n\tcomponentDidCatch( error ) {\n\t\tlogException( error, {\n\t\t\tcontext: {\n\t\t\t\tcomponent_stack: error.componentStack,\n\t\t\t},\n\t\t\tisHandled: true,\n\t\t\thandledBy: 'Editor-level Error Boundary',\n\t\t} );\n\t}\n\n\tstatic getDerivedStateFromError( error ) {\n\t\treturn { error };\n\t}\n\n\trender() {\n\t\tconst { error } = this.state;\n\t\tif ( ! error ) {\n\t\t\treturn this.props.children;\n\t\t}\n\n\t\tconst { getStylesFromColorScheme } = this.props;\n\n\t\tconst iconContainerStyle = getStylesFromColorScheme(\n\t\t\tstyles[ 'error-boundary__icon-container' ],\n\t\t\tstyles[ 'error-boundary__icon-container--dark' ]\n\t\t);\n\n\t\tconst titleStyle = getStylesFromColorScheme(\n\t\t\tstyles[ 'error-boundary__title' ],\n\t\t\tstyles[ 'error-boundary__title--dark' ]\n\t\t);\n\n\t\tconst messageStyle = getStylesFromColorScheme(\n\t\t\tstyles[ 'error-boundary__message' ],\n\t\t\tstyles[ 'error-boundary__message--dark' ]\n\t\t);\n\n\t\treturn (\n\t\t\t<SafeAreaView>\n\t\t\t\t<ScrollView\n\t\t\t\t\tstyle={ styles[ 'error-boundary__scroll' ] }\n\t\t\t\t\tcontentContainerStyle={\n\t\t\t\t\t\tstyles[ 'error-boundary__scroll-container' ]\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<View style={ styles[ 'error-boundary__container' ] }>\n\t\t\t\t\t\t<View style={ iconContainerStyle }>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ cautionFilled }\n\t\t\t\t\t\t\t\t{ ...styles[ 'error-boundary__icon' ] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t<Text style={ titleStyle }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'The editor has encountered an unexpected error'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<Text style={ messageStyle }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'You can copy your post text in case your content is impacted. Copy error details to debug and share with support.'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<View\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\tstyles[ 'error-boundary__actions-container' ]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CopyButton\n\t\t\t\t\t\t\t\tlabel={ __( 'Copy post text' ) }\n\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t'Button to copy post text'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t\t\t\t\t'Tap here to copy post text'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ttext={ getContent }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CopyButton\n\t\t\t\t\t\t\t\tlabel={ __( 'Copy error details' ) }\n\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t'Button to copy error details'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t\t\t\t\t'Tap here to copy error details'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ttext={ error.stack }\n\t\t\t\t\t\t\t\tsecondary\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t</ScrollView>\n\t\t\t</SafeAreaView>\n\t\t);\n\t}\n}\n\nexport default withPreferredColorScheme( ErrorBoundary );\n"],"mappings":"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","ignoreList":[]}