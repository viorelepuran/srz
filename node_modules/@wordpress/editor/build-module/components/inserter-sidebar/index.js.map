{"version":3,"names":["useDispatch","useSelect","store","blockEditorStore","privateApis","blockEditorPrivateApis","useViewportMatch","useCallback","useRef","preferencesStore","ESCAPE","interfaceStore","unlock","editorStore","jsx","_jsx","PrivateInserterLibrary","InserterSidebar","blockSectionRootClientId","inserterSidebarToggleRef","inserter","showMostUsedBlocks","sidebarIsOpened","select","getInserterSidebarToggleRef","getInserter","isPublishSidebarOpened","getBlockRootClientId","isZoomOut","getSectionRootClientId","get","getActiveComplementaryArea","getBlockSectionRootClientId","sectionRootClientId","setIsInserterOpened","disableComplementaryArea","isMobileViewport","libraryRef","closeInserterSidebar","current","focus","closeOnEscape","event","keyCode","defaultPrevented","preventDefault","inserterContents","className","children","showInserterHelpPanel","shouldFocusBlock","rootClientId","onSelect","__experimentalInitialTab","tab","__experimentalInitialCategory","category","__experimentalFilterValue","filterValue","onPatternCategorySelection","undefined","ref","onClose","onKeyDown"],"sources":["@wordpress/editor/src/components/inserter-sidebar/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tstore as blockEditorStore,\n\tprivateApis as blockEditorPrivateApis,\n} from '@wordpress/block-editor';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useCallback, useRef } from '@wordpress/element';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { ESCAPE } from '@wordpress/keycodes';\nimport { store as interfaceStore } from '@wordpress/interface';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport { store as editorStore } from '../../store';\n\nconst { PrivateInserterLibrary } = unlock( blockEditorPrivateApis );\n\nexport default function InserterSidebar() {\n\tconst {\n\t\tblockSectionRootClientId,\n\t\tinserterSidebarToggleRef,\n\t\tinserter,\n\t\tshowMostUsedBlocks,\n\t\tsidebarIsOpened,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetInserterSidebarToggleRef,\n\t\t\tgetInserter,\n\t\t\tisPublishSidebarOpened,\n\t\t} = unlock( select( editorStore ) );\n\t\tconst { getBlockRootClientId, isZoomOut, getSectionRootClientId } =\n\t\t\tunlock( select( blockEditorStore ) );\n\t\tconst { get } = select( preferencesStore );\n\t\tconst { getActiveComplementaryArea } = select( interfaceStore );\n\t\tconst getBlockSectionRootClientId = () => {\n\t\t\tif ( isZoomOut() ) {\n\t\t\t\tconst sectionRootClientId = getSectionRootClientId();\n\n\t\t\t\tif ( sectionRootClientId ) {\n\t\t\t\t\treturn sectionRootClientId;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn getBlockRootClientId();\n\t\t};\n\t\treturn {\n\t\t\tinserterSidebarToggleRef: getInserterSidebarToggleRef(),\n\t\t\tinserter: getInserter(),\n\t\t\tshowMostUsedBlocks: get( 'core', 'mostUsedBlocks' ),\n\t\t\tblockSectionRootClientId: getBlockSectionRootClientId(),\n\t\t\tsidebarIsOpened: !! (\n\t\t\t\tgetActiveComplementaryArea( 'core' ) || isPublishSidebarOpened()\n\t\t\t),\n\t\t};\n\t}, [] );\n\tconst { setIsInserterOpened } = useDispatch( editorStore );\n\tconst { disableComplementaryArea } = useDispatch( interfaceStore );\n\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\tconst libraryRef = useRef();\n\n\t// When closing the inserter, focus should return to the toggle button.\n\tconst closeInserterSidebar = useCallback( () => {\n\t\tsetIsInserterOpened( false );\n\t\tinserterSidebarToggleRef.current?.focus();\n\t}, [ inserterSidebarToggleRef, setIsInserterOpened ] );\n\n\tconst closeOnEscape = useCallback(\n\t\t( event ) => {\n\t\t\tif ( event.keyCode === ESCAPE && ! event.defaultPrevented ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tcloseInserterSidebar();\n\t\t\t}\n\t\t},\n\t\t[ closeInserterSidebar ]\n\t);\n\n\tconst inserterContents = (\n\t\t<div className=\"editor-inserter-sidebar__content\">\n\t\t\t<PrivateInserterLibrary\n\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t\tshowInserterHelpPanel\n\t\t\t\tshouldFocusBlock={ isMobileViewport }\n\t\t\t\trootClientId={ blockSectionRootClientId }\n\t\t\t\tonSelect={ inserter.onSelect }\n\t\t\t\t__experimentalInitialTab={ inserter.tab }\n\t\t\t\t__experimentalInitialCategory={ inserter.category }\n\t\t\t\t__experimentalFilterValue={ inserter.filterValue }\n\t\t\t\tonPatternCategorySelection={\n\t\t\t\t\tsidebarIsOpened\n\t\t\t\t\t\t? () => disableComplementaryArea( 'core' )\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\tref={ libraryRef }\n\t\t\t\tonClose={ closeInserterSidebar }\n\t\t\t/>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n\t\t<div onKeyDown={ closeOnEscape } className=\"editor-inserter-sidebar\">\n\t\t\t{ inserterContents }\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}