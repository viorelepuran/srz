{"version":3,"names":["clsx","useViewportMatch","useSelect","useDispatch","__","_x","NavigableToolbar","ToolSelector","ToolbarButton","ToolbarItem","listView","plus","useCallback","store","keyboardShortcutsStore","preferencesStore","unlock","editorStore","EditorHistoryRedo","EditorHistoryUndo","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DocumentTools","className","disableBlockTools","setIsInserterOpened","setIsListViewOpened","isDistractionFree","isInserterOpened","isListViewOpen","listViewShortcut","inserterSidebarToggleRef","listViewToggleRef","showIconLabels","showTools","select","get","isListViewOpened","getEditorMode","getInserterSidebarToggleRef","getListViewToggleRef","getRenderingMode","getCurrentPostType","getShortcutRepresentation","isVisualMode","window","__experimentalEditorWriteMode","preventDefault","event","isLargeViewport","isWideViewport","toolbarAriaLabel","toggleListView","toggleInserter","longLabel","shortLabel","variant","children","ref","isPressed","onMouseDown","onClick","disabled","icon","label","showTooltip","as","undefined","size","shortcut"],"sources":["@wordpress/editor/src/components/document-tools/index.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, _x } from '@wordpress/i18n';\nimport { NavigableToolbar, ToolSelector } from '@wordpress/block-editor';\nimport { ToolbarButton, ToolbarItem } from '@wordpress/components';\nimport { listView, plus } from '@wordpress/icons';\nimport { useCallback } from '@wordpress/element';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport { store as editorStore } from '../../store';\nimport EditorHistoryRedo from '../editor-history/redo';\nimport EditorHistoryUndo from '../editor-history/undo';\n\nfunction DocumentTools( { className, disableBlockTools = false } ) {\n\tconst { setIsInserterOpened, setIsListViewOpened } =\n\t\tuseDispatch( editorStore );\n\tconst {\n\t\tisDistractionFree,\n\t\tisInserterOpened,\n\t\tisListViewOpen,\n\t\tlistViewShortcut,\n\t\tinserterSidebarToggleRef,\n\t\tlistViewToggleRef,\n\t\tshowIconLabels,\n\t\tshowTools,\n\t} = useSelect( ( select ) => {\n\t\tconst { get } = select( preferencesStore );\n\t\tconst {\n\t\t\tisListViewOpened,\n\t\t\tgetEditorMode,\n\t\t\tgetInserterSidebarToggleRef,\n\t\t\tgetListViewToggleRef,\n\t\t\tgetRenderingMode,\n\t\t\tgetCurrentPostType,\n\t\t} = unlock( select( editorStore ) );\n\t\tconst { getShortcutRepresentation } = select( keyboardShortcutsStore );\n\n\t\treturn {\n\t\t\tisInserterOpened: select( editorStore ).isInserterOpened(),\n\t\t\tisListViewOpen: isListViewOpened(),\n\t\t\tlistViewShortcut: getShortcutRepresentation(\n\t\t\t\t'core/editor/toggle-list-view'\n\t\t\t),\n\t\t\tinserterSidebarToggleRef: getInserterSidebarToggleRef(),\n\t\t\tlistViewToggleRef: getListViewToggleRef(),\n\t\t\tshowIconLabels: get( 'core', 'showIconLabels' ),\n\t\t\tisDistractionFree: get( 'core', 'distractionFree' ),\n\t\t\tisVisualMode: getEditorMode() === 'visual',\n\t\t\tshowTools:\n\t\t\t\t!! window?.__experimentalEditorWriteMode &&\n\t\t\t\t( getRenderingMode() !== 'post-only' ||\n\t\t\t\t\tgetCurrentPostType() === 'wp_template' ),\n\t\t};\n\t}, [] );\n\n\tconst preventDefault = ( event ) => {\n\t\t// Because the inserter behaves like a dialog,\n\t\t// if the inserter is opened already then when we click on the toggle button\n\t\t// then the initial click event will close the inserter and then be propagated\n\t\t// to the inserter toggle and it will open it again.\n\t\t// To prevent this we need to stop the propagation of the event.\n\t\t// This won't be necessary when the inserter no longer behaves like a dialog.\n\n\t\tif ( isInserterOpened ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t};\n\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst isWideViewport = useViewportMatch( 'wide' );\n\n\t/* translators: accessibility text for the editor toolbar */\n\tconst toolbarAriaLabel = __( 'Document tools' );\n\n\tconst toggleListView = useCallback(\n\t\t() => setIsListViewOpened( ! isListViewOpen ),\n\t\t[ setIsListViewOpened, isListViewOpen ]\n\t);\n\n\tconst toggleInserter = useCallback(\n\t\t() => setIsInserterOpened( ! isInserterOpened ),\n\t\t[ isInserterOpened, setIsInserterOpened ]\n\t);\n\n\t/* translators: button label text should, if possible, be under 16 characters. */\n\tconst longLabel = _x(\n\t\t'Block Inserter',\n\t\t'Generic label for block inserter button'\n\t);\n\tconst shortLabel = ! isInserterOpened ? __( 'Add' ) : __( 'Close' );\n\n\treturn (\n\t\t// Some plugins expect and use the `edit-post-header-toolbar` CSS class to\n\t\t// find the toolbar and inject UI elements into it. This is not officially\n\t\t// supported, but we're keeping it in the list of class names for backwards\n\t\t// compatibility.\n\t\t<NavigableToolbar\n\t\t\tclassName={ clsx(\n\t\t\t\t'editor-document-tools',\n\t\t\t\t'edit-post-header-toolbar',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\taria-label={ toolbarAriaLabel }\n\t\t\tvariant=\"unstyled\"\n\t\t>\n\t\t\t<div className=\"editor-document-tools__left\">\n\t\t\t\t{ ! isDistractionFree && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tref={ inserterSidebarToggleRef }\n\t\t\t\t\t\tclassName=\"editor-document-tools__inserter-toggle\"\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tisPressed={ isInserterOpened }\n\t\t\t\t\t\tonMouseDown={ preventDefault }\n\t\t\t\t\t\tonClick={ toggleInserter }\n\t\t\t\t\t\tdisabled={ disableBlockTools }\n\t\t\t\t\t\ticon={ plus }\n\t\t\t\t\t\tlabel={ showIconLabels ? shortLabel : longLabel }\n\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\taria-expanded={ isInserterOpened }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ( isWideViewport || ! showIconLabels ) && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ showTools && isLargeViewport && (\n\t\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\t\tas={ ToolSelector }\n\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\t\tshowIconLabels ? 'tertiary' : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdisabled={ disableBlockTools }\n\t\t\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tas={ EditorHistoryUndo }\n\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\tvariant={ showIconLabels ? 'tertiary' : undefined }\n\t\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tas={ EditorHistoryRedo }\n\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\tvariant={ showIconLabels ? 'tertiary' : undefined }\n\t\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ ! isDistractionFree && (\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\tclassName=\"editor-document-tools__document-overview-toggle\"\n\t\t\t\t\t\t\t\ticon={ listView }\n\t\t\t\t\t\t\t\tdisabled={ disableBlockTools }\n\t\t\t\t\t\t\t\tisPressed={ isListViewOpen }\n\t\t\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\t\t\t\t\t\tlabel={ __( 'Document Overview' ) }\n\t\t\t\t\t\t\t\tonClick={ toggleListView }\n\t\t\t\t\t\t\t\tshortcut={ listViewShortcut }\n\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\t\tshowIconLabels ? 'tertiary' : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-expanded={ isListViewOpen }\n\t\t\t\t\t\t\t\tref={ listViewToggleRef }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</NavigableToolbar>\n\t);\n}\n\nexport default DocumentTools;\n"],"mappings":"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","ignoreList":[]}