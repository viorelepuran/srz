{"version":3,"names":["__","sprintf","Button","__experimentalConfirmDialog","ConfirmDialog","useSelect","useDispatch","useRegistry","useState","store","editorStore","PostTrashCheck","jsx","_jsx","jsxs","_jsxs","PostTrash","onActionPerformed","registry","isNew","isDeleting","postId","title","select","isEditedPostNew","isDeletingPost","getCurrentPostId","getCurrentPostAttribute","trashPost","showConfirmDialog","setShowConfirmDialog","handleConfirm","item","resolveSelect","getCurrentPost","children","__next40pxDefaultSize","className","isDestructive","variant","isBusy","onClick","undefined","isOpen","onConfirm","onCancel","confirmButtonText","size"],"sources":["@wordpress/editor/src/components/post-trash/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { useSelect, useDispatch, useRegistry } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as editorStore } from '../../store';\nimport PostTrashCheck from './check';\n\n/**\n * Displays the Post Trash Button and Confirm Dialog in the Editor.\n *\n * @param {?{onActionPerformed: Object}} An object containing the onActionPerformed function.\n * @return {React.ReactNode} The rendered PostTrash component.\n */\nexport default function PostTrash( { onActionPerformed } ) {\n\tconst registry = useRegistry();\n\tconst { isNew, isDeleting, postId, title } = useSelect( ( select ) => {\n\t\tconst store = select( editorStore );\n\t\treturn {\n\t\t\tisNew: store.isEditedPostNew(),\n\t\t\tisDeleting: store.isDeletingPost(),\n\t\t\tpostId: store.getCurrentPostId(),\n\t\t\ttitle: store.getCurrentPostAttribute( 'title' ),\n\t\t};\n\t}, [] );\n\tconst { trashPost } = useDispatch( editorStore );\n\tconst [ showConfirmDialog, setShowConfirmDialog ] = useState( false );\n\n\tif ( isNew || ! postId ) {\n\t\treturn null;\n\t}\n\n\tconst handleConfirm = async () => {\n\t\tsetShowConfirmDialog( false );\n\t\tawait trashPost();\n\t\tconst item = await registry\n\t\t\t.resolveSelect( editorStore )\n\t\t\t.getCurrentPost();\n\t\t// After the post is trashed, we want to trigger the onActionPerformed callback, so the user is redirect\n\t\t// to the post view depending on if the user is on post editor or site editor.\n\t\tonActionPerformed?.( 'move-to-trash', [ item ] );\n\t};\n\treturn (\n\t\t<PostTrashCheck>\n\t\t\t<Button\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tclassName=\"editor-post-trash\"\n\t\t\t\tisDestructive\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tisBusy={ isDeleting }\n\t\t\t\taria-disabled={ isDeleting }\n\t\t\t\tonClick={\n\t\t\t\t\tisDeleting ? undefined : () => setShowConfirmDialog( true )\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ __( 'Move to trash' ) }\n\t\t\t</Button>\n\t\t\t<ConfirmDialog\n\t\t\t\tisOpen={ showConfirmDialog }\n\t\t\t\tonConfirm={ handleConfirm }\n\t\t\t\tonCancel={ () => setShowConfirmDialog( false ) }\n\t\t\t\tconfirmButtonText={ __( 'Move to trash' ) }\n\t\t\t\tsize=\"small\"\n\t\t\t>\n\t\t\t\t{ sprintf(\n\t\t\t\t\t// translators: %s: The item's title.\n\t\t\t\t\t__( 'Are you sure you want to move \"%s\" to the trash?' ),\n\t\t\t\t\ttitle\n\t\t\t\t) }\n\t\t\t</ConfirmDialog>\n\t\t</PostTrashCheck>\n\t);\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SACCC,MAAM,EACNC,2BAA2B,IAAIC,aAAa,QACtC,uBAAuB;AAC9B,SAASC,SAAS,EAAEC,WAAW,EAAEC,WAAW,QAAQ,iBAAiB;AACrE,SAASC,QAAQ,QAAQ,oBAAoB;;AAE7C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,WAAW,QAAQ,aAAa;AAClD,OAAOC,cAAc,MAAM,SAAS;;AAEpC;AACA;AACA;AACA;AACA;AACA;AALA,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAMA,eAAe,SAASC,SAASA,CAAE;EAAEC;AAAkB,CAAC,EAAG;EAC1D,MAAMC,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEY,KAAK;IAAEC,UAAU;IAAEC,MAAM;IAAEC;EAAM,CAAC,GAAGjB,SAAS,CAAIkB,MAAM,IAAM;IACrE,MAAMd,KAAK,GAAGc,MAAM,CAAEb,WAAY,CAAC;IACnC,OAAO;MACNS,KAAK,EAAEV,KAAK,CAACe,eAAe,CAAC,CAAC;MAC9BJ,UAAU,EAAEX,KAAK,CAACgB,cAAc,CAAC,CAAC;MAClCJ,MAAM,EAAEZ,KAAK,CAACiB,gBAAgB,CAAC,CAAC;MAChCJ,KAAK,EAAEb,KAAK,CAACkB,uBAAuB,CAAE,OAAQ;IAC/C,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EACP,MAAM;IAAEC;EAAU,CAAC,GAAGtB,WAAW,CAAEI,WAAY,CAAC;EAChD,MAAM,CAAEmB,iBAAiB,EAAEC,oBAAoB,CAAE,GAAGtB,QAAQ,CAAE,KAAM,CAAC;EAErE,IAAKW,KAAK,IAAI,CAAEE,MAAM,EAAG;IACxB,OAAO,IAAI;EACZ;EAEA,MAAMU,aAAa,GAAG,MAAAA,CAAA,KAAY;IACjCD,oBAAoB,CAAE,KAAM,CAAC;IAC7B,MAAMF,SAAS,CAAC,CAAC;IACjB,MAAMI,IAAI,GAAG,MAAMd,QAAQ,CACzBe,aAAa,CAAEvB,WAAY,CAAC,CAC5BwB,cAAc,CAAC,CAAC;IAClB;IACA;IACAjB,iBAAiB,GAAI,eAAe,EAAE,CAAEe,IAAI,CAAG,CAAC;EACjD,CAAC;EACD,oBACCjB,KAAA,CAACJ,cAAc;IAAAwB,QAAA,gBACdtB,IAAA,CAACX,MAAM;MACNkC,qBAAqB;MACrBC,SAAS,EAAC,mBAAmB;MAC7BC,aAAa;MACbC,OAAO,EAAC,WAAW;MACnBC,MAAM,EAAGpB,UAAY;MACrB,iBAAgBA,UAAY;MAC5BqB,OAAO,EACNrB,UAAU,GAAGsB,SAAS,GAAG,MAAMZ,oBAAoB,CAAE,IAAK,CAC1D;MAAAK,QAAA,EAECnC,EAAE,CAAE,eAAgB;IAAC,CAChB,CAAC,eACTa,IAAA,CAACT,aAAa;MACbuC,MAAM,EAAGd,iBAAmB;MAC5Be,SAAS,EAAGb,aAAe;MAC3Bc,QAAQ,EAAGA,CAAA,KAAMf,oBAAoB,CAAE,KAAM,CAAG;MAChDgB,iBAAiB,EAAG9C,EAAE,CAAE,eAAgB,CAAG;MAC3C+C,IAAI,EAAC,OAAO;MAAAZ,QAAA,EAEVlC,OAAO;MACR;MACAD,EAAE,CAAE,kDAAmD,CAAC,EACxDsB,KACD;IAAC,CACa,CAAC;EAAA,CACD,CAAC;AAEnB","ignoreList":[]}