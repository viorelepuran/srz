{"version":3,"names":["PanelBody","Button","TextControl","__","sprintf","useCallback","useEffect","useState","useRef","useSelect","addQueryArgs","safeDecodeURIComponent","decodeEntities","useCopyToClipboard","store","coreStore","PostScheduleLabel","editorStore","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","POSTNAME","PAGENAME","getFuturePostUrl","post","slug","permalink_template","includes","replace","CopyButton","text","showCopyConfirmation","setShowCopyConfirmation","timeoutIdRef","ref","current","clearTimeout","setTimeout","__next40pxDefaultSize","variant","children","PostPublishPanelPostpublish","focusOnMount","postType","isScheduled","select","getEditedPostAttribute","getCurrentPost","isCurrentPostScheduled","getPostType","postLabel","labels","singular_name","viewPostLabel","view_item","addNewPostLabel","add_new_item","link","status","addLink","post_type","type","postLinkRef","node","focus","postPublishNonLinkHeader","className","href","title","__nextHasNoMarginBottom","readOnly","label","value","onFocus","event","target"],"sources":["@wordpress/editor/src/components/post-publish-panel/postpublish.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { PanelBody, Button, TextControl } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useCallback, useEffect, useState, useRef } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { addQueryArgs, safeDecodeURIComponent } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { useCopyToClipboard } from '@wordpress/compose';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport PostScheduleLabel from '../post-schedule/label';\nimport { store as editorStore } from '../../store';\n\nconst POSTNAME = '%postname%';\nconst PAGENAME = '%pagename%';\n\n/**\n * Returns URL for a future post.\n *\n * @param {Object} post Post object.\n *\n * @return {string} PostPublish URL.\n */\n\nconst getFuturePostUrl = ( post ) => {\n\tconst { slug } = post;\n\n\tif ( post.permalink_template.includes( POSTNAME ) ) {\n\t\treturn post.permalink_template.replace( POSTNAME, slug );\n\t}\n\n\tif ( post.permalink_template.includes( PAGENAME ) ) {\n\t\treturn post.permalink_template.replace( PAGENAME, slug );\n\t}\n\n\treturn post.permalink_template;\n};\n\nfunction CopyButton( { text } ) {\n\tconst [ showCopyConfirmation, setShowCopyConfirmation ] = useState( false );\n\tconst timeoutIdRef = useRef();\n\tconst ref = useCopyToClipboard( text, () => {\n\t\tsetShowCopyConfirmation( true );\n\t\tif ( timeoutIdRef.current ) {\n\t\t\tclearTimeout( timeoutIdRef.current );\n\t\t}\n\t\ttimeoutIdRef.current = setTimeout( () => {\n\t\t\tsetShowCopyConfirmation( false );\n\t\t}, 4000 );\n\t} );\n\n\tuseEffect( () => {\n\t\treturn () => {\n\t\t\tif ( timeoutIdRef.current ) {\n\t\t\t\tclearTimeout( timeoutIdRef.current );\n\t\t\t}\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Button __next40pxDefaultSize variant=\"secondary\" ref={ ref }>\n\t\t\t{ showCopyConfirmation ? __( 'Copied!' ) : __( 'Copy' ) }\n\t\t</Button>\n\t);\n}\n\nexport default function PostPublishPanelPostpublish( {\n\tfocusOnMount,\n\tchildren,\n} ) {\n\tconst { post, postType, isScheduled } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetEditedPostAttribute,\n\t\t\tgetCurrentPost,\n\t\t\tisCurrentPostScheduled,\n\t\t} = select( editorStore );\n\t\tconst { getPostType } = select( coreStore );\n\n\t\treturn {\n\t\t\tpost: getCurrentPost(),\n\t\t\tpostType: getPostType( getEditedPostAttribute( 'type' ) ),\n\t\t\tisScheduled: isCurrentPostScheduled(),\n\t\t};\n\t}, [] );\n\n\tconst postLabel = postType?.labels?.singular_name;\n\tconst viewPostLabel = postType?.labels?.view_item;\n\tconst addNewPostLabel = postType?.labels?.add_new_item;\n\tconst link =\n\t\tpost.status === 'future' ? getFuturePostUrl( post ) : post.link;\n\tconst addLink = addQueryArgs( 'post-new.php', {\n\t\tpost_type: post.type,\n\t} );\n\n\tconst postLinkRef = useCallback(\n\t\t( node ) => {\n\t\t\tif ( focusOnMount && node ) {\n\t\t\t\tnode.focus();\n\t\t\t}\n\t\t},\n\t\t[ focusOnMount ]\n\t);\n\n\tconst postPublishNonLinkHeader = isScheduled ? (\n\t\t<>\n\t\t\t{ __( 'is now scheduled. It will go live on' ) }{ ' ' }\n\t\t\t<PostScheduleLabel />.\n\t\t</>\n\t) : (\n\t\t__( 'is now live.' )\n\t);\n\n\treturn (\n\t\t<div className=\"post-publish-panel__postpublish\">\n\t\t\t<PanelBody className=\"post-publish-panel__postpublish-header\">\n\t\t\t\t<a ref={ postLinkRef } href={ link }>\n\t\t\t\t\t{ decodeEntities( post.title ) || __( '(no title)' ) }\n\t\t\t\t</a>{ ' ' }\n\t\t\t\t{ postPublishNonLinkHeader }\n\t\t\t</PanelBody>\n\t\t\t<PanelBody>\n\t\t\t\t<p className=\"post-publish-panel__postpublish-subheader\">\n\t\t\t\t\t<strong>{ __( 'Whatâ€™s next?' ) }</strong>\n\t\t\t\t</p>\n\t\t\t\t<div className=\"post-publish-panel__postpublish-post-address-container\">\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tclassName=\"post-publish-panel__postpublish-post-address\"\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: post type singular name */\n\t\t\t\t\t\t\t__( '%s address' ),\n\t\t\t\t\t\t\tpostLabel\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tvalue={ safeDecodeURIComponent( link ) }\n\t\t\t\t\t\tonFocus={ ( event ) => event.target.select() }\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className=\"post-publish-panel__postpublish-post-address__copy-button-wrap\">\n\t\t\t\t\t\t<CopyButton text={ link } />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"post-publish-panel__postpublish-buttons\">\n\t\t\t\t\t{ ! isScheduled && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\thref={ link }\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ viewPostLabel }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant={ isScheduled ? 'primary' : 'secondary' }\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\thref={ addLink }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ addNewPostLabel }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</PanelBody>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}