{"version":3,"names":["useRegistry","useSelect","useState","useMemo","__","privateApis","componentsPrivateApis","Button","Modal","moreVertical","store","coreStore","unlock","usePostActions","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Menu","kebabCase","PostActions","postType","postId","onActionPerformed","activeModalAction","setActiveModalAction","item","permissions","select","getEditedEntityRecord","getEntityRecordPermissions","itemWithPermissions","allActions","actions","filter","action","isEligible","children","placement","TriggerButton","render","size","icon","label","disabled","length","accessibleWhenDisabled","className","Popover","ActionsDropdownMenuGroup","items","ActionModal","closeModal","DropdownMenuItemTrigger","onClick","Item","ItemLabel","title","modalHeader","__experimentalHideHeader","hideModalHeader","onRequestClose","focusOnMount","overlayClassName","id","RenderModal","registry","Group","map","callback"],"sources":["@wordpress/editor/src/components/post-actions/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRegistry, useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tprivateApis as componentsPrivateApis,\n\tButton,\n\tModal,\n} from '@wordpress/components';\nimport { moreVertical } from '@wordpress/icons';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport { usePostActions } from './actions';\n\nconst { Menu, kebabCase } = unlock( componentsPrivateApis );\n\nexport default function PostActions( { postType, postId, onActionPerformed } ) {\n\tconst [ activeModalAction, setActiveModalAction ] = useState( null );\n\n\tconst { item, permissions } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedEntityRecord, getEntityRecordPermissions } =\n\t\t\t\tunlock( select( coreStore ) );\n\t\t\treturn {\n\t\t\t\titem: getEditedEntityRecord( 'postType', postType, postId ),\n\t\t\t\tpermissions: getEntityRecordPermissions(\n\t\t\t\t\t'postType',\n\t\t\t\t\tpostType,\n\t\t\t\t\tpostId\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ postId, postType ]\n\t);\n\tconst itemWithPermissions = useMemo( () => {\n\t\treturn {\n\t\t\t...item,\n\t\t\tpermissions,\n\t\t};\n\t}, [ item, permissions ] );\n\tconst allActions = usePostActions( { postType, onActionPerformed } );\n\n\tconst actions = useMemo( () => {\n\t\treturn allActions.filter( ( action ) => {\n\t\t\treturn (\n\t\t\t\t! action.isEligible || action.isEligible( itemWithPermissions )\n\t\t\t);\n\t\t} );\n\t}, [ allActions, itemWithPermissions ] );\n\n\treturn (\n\t\t<>\n\t\t\t<Menu placement=\"bottom-end\">\n\t\t\t\t<Menu.TriggerButton\n\t\t\t\t\trender={\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\t\t\tlabel={ __( 'Actions' ) }\n\t\t\t\t\t\t\tdisabled={ ! actions.length }\n\t\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t\t\tclassName=\"editor-all-actions-button\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Menu.Popover>\n\t\t\t\t\t<ActionsDropdownMenuGroup\n\t\t\t\t\t\tactions={ actions }\n\t\t\t\t\t\titems={ [ itemWithPermissions ] }\n\t\t\t\t\t\tsetActiveModalAction={ setActiveModalAction }\n\t\t\t\t\t/>\n\t\t\t\t</Menu.Popover>\n\t\t\t</Menu>\n\t\t\t{ !! activeModalAction && (\n\t\t\t\t<ActionModal\n\t\t\t\t\taction={ activeModalAction }\n\t\t\t\t\titems={ [ itemWithPermissions ] }\n\t\t\t\t\tcloseModal={ () => setActiveModalAction( null ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\n// From now on all the functions on this file are copied as from the dataviews packages,\n// The editor packages should not be using the dataviews packages directly,\n// and the dataviews package should not be using the editor packages directly,\n// so duplicating the code here seems like the least bad option.\n\nfunction DropdownMenuItemTrigger( { action, onClick, items } ) {\n\tconst label =\n\t\ttypeof action.label === 'string' ? action.label : action.label( items );\n\treturn (\n\t\t<Menu.Item onClick={ onClick }>\n\t\t\t<Menu.ItemLabel>{ label }</Menu.ItemLabel>\n\t\t</Menu.Item>\n\t);\n}\n\nexport function ActionModal( { action, items, closeModal } ) {\n\tconst label =\n\t\ttypeof action.label === 'string' ? action.label : action.label( items );\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ action.modalHeader || label }\n\t\t\t__experimentalHideHeader={ !! action.hideModalHeader }\n\t\t\tonRequestClose={ closeModal ?? ( () => {} ) }\n\t\t\tfocusOnMount=\"firstContentElement\"\n\t\t\tsize=\"medium\"\n\t\t\toverlayClassName={ `editor-action-modal editor-action-modal__${ kebabCase(\n\t\t\t\taction.id\n\t\t\t) }` }\n\t\t>\n\t\t\t<action.RenderModal items={ items } closeModal={ closeModal } />\n\t\t</Modal>\n\t);\n}\n\nfunction ActionsDropdownMenuGroup( { actions, items, setActiveModalAction } ) {\n\tconst registry = useRegistry();\n\treturn (\n\t\t<Menu.Group>\n\t\t\t{ actions.map( ( action ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<DropdownMenuItemTrigger\n\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tif ( 'RenderModal' in action ) {\n\t\t\t\t\t\t\t\tsetActiveModalAction( action );\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taction.callback( items, { registry } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\titems={ items }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</Menu.Group>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}