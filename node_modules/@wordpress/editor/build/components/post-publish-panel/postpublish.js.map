{"version":3,"names":["_components","require","_i18n","_element","_data","_url","_htmlEntities","_compose","_coreData","_label","_interopRequireDefault","_store","_jsxRuntime","POSTNAME","PAGENAME","getFuturePostUrl","post","slug","permalink_template","includes","replace","CopyButton","text","showCopyConfirmation","setShowCopyConfirmation","useState","timeoutIdRef","useRef","ref","useCopyToClipboard","current","clearTimeout","setTimeout","useEffect","jsx","Button","__next40pxDefaultSize","variant","children","__","PostPublishPanelPostpublish","focusOnMount","postType","isScheduled","useSelect","select","getEditedPostAttribute","getCurrentPost","isCurrentPostScheduled","editorStore","getPostType","coreStore","postLabel","labels","singular_name","viewPostLabel","view_item","addNewPostLabel","add_new_item","link","status","addLink","addQueryArgs","post_type","type","postLinkRef","useCallback","node","focus","postPublishNonLinkHeader","jsxs","Fragment","default","className","PanelBody","href","decodeEntities","title","TextControl","__nextHasNoMarginBottom","readOnly","label","sprintf","value","safeDecodeURIComponent","onFocus","event","target"],"sources":["@wordpress/editor/src/components/post-publish-panel/postpublish.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { PanelBody, Button, TextControl } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useCallback, useEffect, useState, useRef } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { addQueryArgs, safeDecodeURIComponent } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { useCopyToClipboard } from '@wordpress/compose';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport PostScheduleLabel from '../post-schedule/label';\nimport { store as editorStore } from '../../store';\n\nconst POSTNAME = '%postname%';\nconst PAGENAME = '%pagename%';\n\n/**\n * Returns URL for a future post.\n *\n * @param {Object} post Post object.\n *\n * @return {string} PostPublish URL.\n */\n\nconst getFuturePostUrl = ( post ) => {\n\tconst { slug } = post;\n\n\tif ( post.permalink_template.includes( POSTNAME ) ) {\n\t\treturn post.permalink_template.replace( POSTNAME, slug );\n\t}\n\n\tif ( post.permalink_template.includes( PAGENAME ) ) {\n\t\treturn post.permalink_template.replace( PAGENAME, slug );\n\t}\n\n\treturn post.permalink_template;\n};\n\nfunction CopyButton( { text } ) {\n\tconst [ showCopyConfirmation, setShowCopyConfirmation ] = useState( false );\n\tconst timeoutIdRef = useRef();\n\tconst ref = useCopyToClipboard( text, () => {\n\t\tsetShowCopyConfirmation( true );\n\t\tif ( timeoutIdRef.current ) {\n\t\t\tclearTimeout( timeoutIdRef.current );\n\t\t}\n\t\ttimeoutIdRef.current = setTimeout( () => {\n\t\t\tsetShowCopyConfirmation( false );\n\t\t}, 4000 );\n\t} );\n\n\tuseEffect( () => {\n\t\treturn () => {\n\t\t\tif ( timeoutIdRef.current ) {\n\t\t\t\tclearTimeout( timeoutIdRef.current );\n\t\t\t}\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Button __next40pxDefaultSize variant=\"secondary\" ref={ ref }>\n\t\t\t{ showCopyConfirmation ? __( 'Copied!' ) : __( 'Copy' ) }\n\t\t</Button>\n\t);\n}\n\nexport default function PostPublishPanelPostpublish( {\n\tfocusOnMount,\n\tchildren,\n} ) {\n\tconst { post, postType, isScheduled } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetEditedPostAttribute,\n\t\t\tgetCurrentPost,\n\t\t\tisCurrentPostScheduled,\n\t\t} = select( editorStore );\n\t\tconst { getPostType } = select( coreStore );\n\n\t\treturn {\n\t\t\tpost: getCurrentPost(),\n\t\t\tpostType: getPostType( getEditedPostAttribute( 'type' ) ),\n\t\t\tisScheduled: isCurrentPostScheduled(),\n\t\t};\n\t}, [] );\n\n\tconst postLabel = postType?.labels?.singular_name;\n\tconst viewPostLabel = postType?.labels?.view_item;\n\tconst addNewPostLabel = postType?.labels?.add_new_item;\n\tconst link =\n\t\tpost.status === 'future' ? getFuturePostUrl( post ) : post.link;\n\tconst addLink = addQueryArgs( 'post-new.php', {\n\t\tpost_type: post.type,\n\t} );\n\n\tconst postLinkRef = useCallback(\n\t\t( node ) => {\n\t\t\tif ( focusOnMount && node ) {\n\t\t\t\tnode.focus();\n\t\t\t}\n\t\t},\n\t\t[ focusOnMount ]\n\t);\n\n\tconst postPublishNonLinkHeader = isScheduled ? (\n\t\t<>\n\t\t\t{ __( 'is now scheduled. It will go live on' ) }{ ' ' }\n\t\t\t<PostScheduleLabel />.\n\t\t</>\n\t) : (\n\t\t__( 'is now live.' )\n\t);\n\n\treturn (\n\t\t<div className=\"post-publish-panel__postpublish\">\n\t\t\t<PanelBody className=\"post-publish-panel__postpublish-header\">\n\t\t\t\t<a ref={ postLinkRef } href={ link }>\n\t\t\t\t\t{ decodeEntities( post.title ) || __( '(no title)' ) }\n\t\t\t\t</a>{ ' ' }\n\t\t\t\t{ postPublishNonLinkHeader }\n\t\t\t</PanelBody>\n\t\t\t<PanelBody>\n\t\t\t\t<p className=\"post-publish-panel__postpublish-subheader\">\n\t\t\t\t\t<strong>{ __( 'Whatâ€™s next?' ) }</strong>\n\t\t\t\t</p>\n\t\t\t\t<div className=\"post-publish-panel__postpublish-post-address-container\">\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tclassName=\"post-publish-panel__postpublish-post-address\"\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: post type singular name */\n\t\t\t\t\t\t\t__( '%s address' ),\n\t\t\t\t\t\t\tpostLabel\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tvalue={ safeDecodeURIComponent( link ) }\n\t\t\t\t\t\tonFocus={ ( event ) => event.target.select() }\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className=\"post-publish-panel__postpublish-post-address__copy-button-wrap\">\n\t\t\t\t\t\t<CopyButton text={ link } />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"post-publish-panel__postpublish-buttons\">\n\t\t\t\t\t{ ! isScheduled && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\thref={ link }\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ viewPostLabel }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant={ isScheduled ? 'primary' : 'secondary' }\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\thref={ addLink }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ addNewPostLabel }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</PanelBody>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}