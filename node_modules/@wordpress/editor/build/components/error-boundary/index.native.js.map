{"version":3,"names":["_reactNative","require","_clipboard","_interopRequireDefault","_reactNativeSafeAreaContext","_element","_i18n","_data","_reactNativeBridge","_compose","_icons","_components","_store","_style","_jsxRuntime","getContent","select","editorStore","getEditedPostContent","error","CopyButton","text","label","accessibilityLabel","accessibilityHint","secondary","containerStyle","usePreferredColorSchemeStyle","styles","containerSecondaryStyle","textStyle","textSecondaryStyle","jsx","TouchableOpacity","activeOpacity","style","accessibilityRole","onPress","Clipboard","setString","children","Text","ErrorBoundary","Component","constructor","arguments","state","componentDidCatch","logException","context","component_stack","componentStack","isHandled","handledBy","getDerivedStateFromError","render","props","getStylesFromColorScheme","iconContainerStyle","titleStyle","messageStyle","SafeAreaView","ScrollView","contentContainerStyle","jsxs","View","Icon","icon","cautionFilled","__","stack","_default","exports","default","withPreferredColorScheme"],"sources":["@wordpress/editor/src/components/error-boundary/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { ScrollView, Text, TouchableOpacity, View } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { select } from '@wordpress/data';\nimport { logException } from '@wordpress/react-native-bridge';\nimport {\n\tusePreferredColorSchemeStyle,\n\twithPreferredColorScheme,\n} from '@wordpress/compose';\nimport { cautionFilled } from '@wordpress/icons';\nimport { Icon } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { store as editorStore } from '../../store';\nimport styles from './style.scss';\n\nfunction getContent() {\n\ttry {\n\t\t// While `select` in a component is generally discouraged, it is\n\t\t// used here because it (a) reduces the chance of data loss in the\n\t\t// case of additional errors by performing a direct retrieval and\n\t\t// (b) avoids the performance cost associated with unnecessary\n\t\t// content serialization throughout the lifetime of a non-erroring\n\t\t// application.\n\t\treturn select( editorStore ).getEditedPostContent();\n\t} catch ( error ) {}\n}\n\nfunction CopyButton( {\n\ttext,\n\tlabel,\n\taccessibilityLabel,\n\taccessibilityHint,\n\tsecondary = false,\n} ) {\n\tconst containerStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__container' ],\n\t\tstyles[ 'copy-button__container--dark' ]\n\t);\n\n\tconst containerSecondaryStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__container--secondary' ],\n\t\tstyles[ 'copy-button__container--secondary-dark' ]\n\t);\n\n\tconst textStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__text' ],\n\t\tstyles[ 'copy-button__text--dark' ]\n\t);\n\n\tconst textSecondaryStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'copy-button__text--secondary' ],\n\t\tstyles[ 'copy-button__text--secondary-dark' ]\n\t);\n\n\treturn (\n\t\t<TouchableOpacity\n\t\t\tactiveOpacity={ 0.5 }\n\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\tstyle={ [ containerStyle, secondary && containerSecondaryStyle ] }\n\t\t\taccessibilityRole=\"button\"\n\t\t\taccessibilityHint={ accessibilityHint }\n\t\t\tonPress={ () => {\n\t\t\t\tClipboard.setString(\n\t\t\t\t\ttypeof text === 'function' ? text() : text || ''\n\t\t\t\t);\n\t\t\t} }\n\t\t>\n\t\t\t<Text style={ [ textStyle, secondary && textSecondaryStyle ] }>\n\t\t\t\t{ label }\n\t\t\t</Text>\n\t\t</TouchableOpacity>\n\t);\n}\n\nclass ErrorBoundary extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\terror: null,\n\t\t};\n\t}\n\n\tcomponentDidCatch( error ) {\n\t\tlogException( error, {\n\t\t\tcontext: {\n\t\t\t\tcomponent_stack: error.componentStack,\n\t\t\t},\n\t\t\tisHandled: true,\n\t\t\thandledBy: 'Editor-level Error Boundary',\n\t\t} );\n\t}\n\n\tstatic getDerivedStateFromError( error ) {\n\t\treturn { error };\n\t}\n\n\trender() {\n\t\tconst { error } = this.state;\n\t\tif ( ! error ) {\n\t\t\treturn this.props.children;\n\t\t}\n\n\t\tconst { getStylesFromColorScheme } = this.props;\n\n\t\tconst iconContainerStyle = getStylesFromColorScheme(\n\t\t\tstyles[ 'error-boundary__icon-container' ],\n\t\t\tstyles[ 'error-boundary__icon-container--dark' ]\n\t\t);\n\n\t\tconst titleStyle = getStylesFromColorScheme(\n\t\t\tstyles[ 'error-boundary__title' ],\n\t\t\tstyles[ 'error-boundary__title--dark' ]\n\t\t);\n\n\t\tconst messageStyle = getStylesFromColorScheme(\n\t\t\tstyles[ 'error-boundary__message' ],\n\t\t\tstyles[ 'error-boundary__message--dark' ]\n\t\t);\n\n\t\treturn (\n\t\t\t<SafeAreaView>\n\t\t\t\t<ScrollView\n\t\t\t\t\tstyle={ styles[ 'error-boundary__scroll' ] }\n\t\t\t\t\tcontentContainerStyle={\n\t\t\t\t\t\tstyles[ 'error-boundary__scroll-container' ]\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<View style={ styles[ 'error-boundary__container' ] }>\n\t\t\t\t\t\t<View style={ iconContainerStyle }>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ cautionFilled }\n\t\t\t\t\t\t\t\t{ ...styles[ 'error-boundary__icon' ] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t<Text style={ titleStyle }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'The editor has encountered an unexpected error'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<Text style={ messageStyle }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'You can copy your post text in case your content is impacted. Copy error details to debug and share with support.'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<View\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\tstyles[ 'error-boundary__actions-container' ]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CopyButton\n\t\t\t\t\t\t\t\tlabel={ __( 'Copy post text' ) }\n\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t'Button to copy post text'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t\t\t\t\t'Tap here to copy post text'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ttext={ getContent }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CopyButton\n\t\t\t\t\t\t\t\tlabel={ __( 'Copy error details' ) }\n\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t'Button to copy error details'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t\t\t\t\t'Tap here to copy error details'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ttext={ error.stack }\n\t\t\t\t\t\t\t\tsecondary\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t</ScrollView>\n\t\t\t</SafeAreaView>\n\t\t);\n\t}\n}\n\nexport default withPreferredColorScheme( ErrorBoundary );\n"],"mappings":"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","ignoreList":[]}