{"version":3,"names":["_element","require","_i18n","_components","_data","_compose","_hooks","_store","_jsxRuntime","getContent","select","editorStore","getEditedPostContent","error","CopyButton","text","children","variant","ref","useCopyToClipboard","jsx","Button","__next40pxDefaultSize","ErrorBoundary","Component","constructor","arguments","state","componentDidCatch","doAction","getDerivedStateFromError","render","canCopyContent","props","jsxs","__experimentalHStack","className","alignment","spacing","justify","expanded","wrap","__experimentalText","as","__","stack","_default","exports","default"],"sources":["@wordpress/editor/src/components/error-boundary/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tButton,\n\t__experimentalHStack as HStack,\n\t__experimentalText as Text,\n} from '@wordpress/components';\nimport { select } from '@wordpress/data';\nimport { useCopyToClipboard } from '@wordpress/compose';\nimport { doAction } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { store as editorStore } from '../../store';\n\nfunction getContent() {\n\ttry {\n\t\t// While `select` in a component is generally discouraged, it is\n\t\t// used here because it (a) reduces the chance of data loss in the\n\t\t// case of additional errors by performing a direct retrieval and\n\t\t// (b) avoids the performance cost associated with unnecessary\n\t\t// content serialization throughout the lifetime of a non-erroring\n\t\t// application.\n\t\treturn select( editorStore ).getEditedPostContent();\n\t} catch ( error ) {}\n}\n\nfunction CopyButton( { text, children, variant = 'secondary' } ) {\n\tconst ref = useCopyToClipboard( text );\n\treturn (\n\t\t<Button __next40pxDefaultSize variant={ variant } ref={ ref }>\n\t\t\t{ children }\n\t\t</Button>\n\t);\n}\n\nclass ErrorBoundary extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\terror: null,\n\t\t};\n\t}\n\n\tcomponentDidCatch( error ) {\n\t\tdoAction( 'editor.ErrorBoundary.errorLogged', error );\n\t}\n\n\tstatic getDerivedStateFromError( error ) {\n\t\treturn { error };\n\t}\n\n\trender() {\n\t\tconst { error } = this.state;\n\t\tconst { canCopyContent = false } = this.props;\n\t\tif ( ! error ) {\n\t\t\treturn this.props.children;\n\t\t}\n\n\t\treturn (\n\t\t\t<HStack\n\t\t\t\tclassName=\"editor-error-boundary\"\n\t\t\t\talignment=\"baseline\"\n\t\t\t\tspacing={ 4 }\n\t\t\t\tjustify=\"space-between\"\n\t\t\t\texpanded={ false }\n\t\t\t\twrap\n\t\t\t>\n\t\t\t\t<Text as=\"p\">\n\t\t\t\t\t{ __( 'The editor has encountered an unexpected error.' ) }\n\t\t\t\t</Text>\n\t\t\t\t<HStack expanded={ false }>\n\t\t\t\t\t{ canCopyContent && (\n\t\t\t\t\t\t<CopyButton text={ getContent }>\n\t\t\t\t\t\t\t{ __( 'Copy contents' ) }\n\t\t\t\t\t\t</CopyButton>\n\t\t\t\t\t) }\n\t\t\t\t\t<CopyButton variant=\"primary\" text={ error?.stack }>\n\t\t\t\t\t\t{ __( 'Copy error' ) }\n\t\t\t\t\t</CopyButton>\n\t\t\t\t</HStack>\n\t\t\t</HStack>\n\t\t);\n\t}\n}\n\n/**\n * ErrorBoundary is used to catch JavaScript errors anywhere in a child component tree, log those errors, and display a fallback UI.\n *\n * It uses the lifecycle methods getDerivedStateFromError and componentDidCatch to catch errors in a child component tree.\n *\n * getDerivedStateFromError is used to render a fallback UI after an error has been thrown, and componentDidCatch is used to log error information.\n *\n * @class ErrorBoundary\n * @augments Component\n */\nexport default ErrorBoundary;\n"],"mappings":"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","ignoreList":[]}