{"version":3,"names":["_i18n","require","_compose","_data","_coreData","_htmlEntities","_components","_element","_blockEditor","_constants","_postPanelRow","_interopRequireDefault","_store","_jsxRuntime","EMPTY_OBJECT","BlogTitle","editEntityRecord","useDispatch","coreStore","postsPageTitle","postsPageId","isTemplate","postSlug","useSelect","select","getEntityRecord","getEditedEntityRecord","canUser","siteSettings","kind","name","undefined","_postsPageRecord","page_for_posts","getEditedPostAttribute","getCurrentPostType","editorStore","id","title","TEMPLATE_POST_TYPE","popoverAnchor","setPopoverAnchor","useState","popoverProps","useMemo","anchor","placement","offset","shift","includes","setPostsPageTitle","newValue","decodedTitle","decodeEntities","jsx","default","label","__","ref","children","Dropdown","contentClassName","focusOnMount","renderToggle","isOpen","onToggle","Button","size","variant","sprintf","onClick","renderContent","onClose","jsxs","Fragment","__experimentalInspectorPopoverHeader","__experimentalInputControl","placeholder","value","onChange","debounce","help","hideLabelFromVision"],"sources":["@wordpress/editor/src/components/blog-title/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { debounce } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport {\n\tButton,\n\tDropdown,\n\t__experimentalInputControl as InputControl,\n} from '@wordpress/components';\nimport { useState, useMemo } from '@wordpress/element';\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { TEMPLATE_POST_TYPE } from '../../store/constants';\nimport PostPanelRow from '../post-panel-row';\nimport { store as editorStore } from '../../store';\n\nconst EMPTY_OBJECT = {};\n\nexport default function BlogTitle() {\n\tconst { editEntityRecord } = useDispatch( coreStore );\n\tconst { postsPageTitle, postsPageId, isTemplate, postSlug } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEntityRecord, getEditedEntityRecord, canUser } =\n\t\t\t\tselect( coreStore );\n\t\t\tconst siteSettings = canUser( 'read', {\n\t\t\t\tkind: 'root',\n\t\t\t\tname: 'site',\n\t\t\t} )\n\t\t\t\t? getEntityRecord( 'root', 'site' )\n\t\t\t\t: undefined;\n\t\t\tconst _postsPageRecord = siteSettings?.page_for_posts\n\t\t\t\t? getEditedEntityRecord(\n\t\t\t\t\t\t'postType',\n\t\t\t\t\t\t'page',\n\t\t\t\t\t\tsiteSettings?.page_for_posts\n\t\t\t\t  )\n\t\t\t\t: EMPTY_OBJECT;\n\t\t\tconst { getEditedPostAttribute, getCurrentPostType } =\n\t\t\t\tselect( editorStore );\n\t\t\treturn {\n\t\t\t\tpostsPageId: _postsPageRecord?.id,\n\t\t\t\tpostsPageTitle: _postsPageRecord?.title,\n\t\t\t\tisTemplate: getCurrentPostType() === TEMPLATE_POST_TYPE,\n\t\t\t\tpostSlug: getEditedPostAttribute( 'slug' ),\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\t// Use internal state instead of a ref to make sure that the component\n\t// re-renders when the popover's anchor updates.\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\n\t// Memoize popoverProps to avoid returning a new object every time.\n\tconst popoverProps = useMemo(\n\t\t() => ( {\n\t\t\t// Anchor the popover to the middle of the entire row so that it doesn't\n\t\t\t// move around when the label changes.\n\t\t\tanchor: popoverAnchor,\n\t\t\tplacement: 'left-start',\n\t\t\toffset: 36,\n\t\t\tshift: true,\n\t\t} ),\n\t\t[ popoverAnchor ]\n\t);\n\n\tif (\n\t\t! isTemplate ||\n\t\t! [ 'home', 'index' ].includes( postSlug ) ||\n\t\t! postsPageId\n\t) {\n\t\treturn null;\n\t}\n\n\tconst setPostsPageTitle = ( newValue ) => {\n\t\teditEntityRecord( 'postType', 'page', postsPageId, {\n\t\t\ttitle: newValue,\n\t\t} );\n\t};\n\tconst decodedTitle = decodeEntities( postsPageTitle );\n\treturn (\n\t\t<PostPanelRow label={ __( 'Blog title' ) } ref={ setPopoverAnchor }>\n\t\t\t<Dropdown\n\t\t\t\tpopoverProps={ popoverProps }\n\t\t\t\tcontentClassName=\"editor-blog-title-dropdown__content\"\n\t\t\t\tfocusOnMount\n\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\taria-label={ sprintf(\n\t\t\t\t\t\t\t// translators: %s: Current post link.\n\t\t\t\t\t\t\t__( 'Change blog title: %s' ),\n\t\t\t\t\t\t\tdecodedTitle\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ decodedTitle }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<InspectorPopoverHeader\n\t\t\t\t\t\t\ttitle={ __( 'Blog title' ) }\n\t\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InputControl\n\t\t\t\t\t\t\tplaceholder={ __( 'No title' ) }\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t\tvalue={ postsPageTitle }\n\t\t\t\t\t\t\tonChange={ debounce( setPostsPageTitle, 300 ) }\n\t\t\t\t\t\t\tlabel={ __( 'Blog title' ) }\n\t\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t\t'Set the Posts Page title. Appears in search results, and when the page is shared on social media.'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</PostPanelRow>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}