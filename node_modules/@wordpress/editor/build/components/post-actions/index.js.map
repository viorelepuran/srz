{"version":3,"names":["_data","require","_element","_i18n","_components","_icons","_coreData","_lockUnlock","_actions","_jsxRuntime","Menu","kebabCase","unlock","componentsPrivateApis","PostActions","postType","postId","onActionPerformed","activeModalAction","setActiveModalAction","useState","item","permissions","useSelect","select","getEditedEntityRecord","getEntityRecordPermissions","coreStore","itemWithPermissions","useMemo","allActions","usePostActions","actions","filter","action","isEligible","jsxs","Fragment","children","placement","jsx","TriggerButton","render","Button","size","icon","moreVertical","label","__","disabled","length","accessibleWhenDisabled","className","Popover","ActionsDropdownMenuGroup","items","ActionModal","closeModal","DropdownMenuItemTrigger","onClick","Item","ItemLabel","Modal","title","modalHeader","__experimentalHideHeader","hideModalHeader","onRequestClose","focusOnMount","overlayClassName","id","RenderModal","registry","useRegistry","Group","map","callback"],"sources":["@wordpress/editor/src/components/post-actions/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRegistry, useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tprivateApis as componentsPrivateApis,\n\tButton,\n\tModal,\n} from '@wordpress/components';\nimport { moreVertical } from '@wordpress/icons';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport { usePostActions } from './actions';\n\nconst { Menu, kebabCase } = unlock( componentsPrivateApis );\n\nexport default function PostActions( { postType, postId, onActionPerformed } ) {\n\tconst [ activeModalAction, setActiveModalAction ] = useState( null );\n\n\tconst { item, permissions } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedEntityRecord, getEntityRecordPermissions } =\n\t\t\t\tunlock( select( coreStore ) );\n\t\t\treturn {\n\t\t\t\titem: getEditedEntityRecord( 'postType', postType, postId ),\n\t\t\t\tpermissions: getEntityRecordPermissions(\n\t\t\t\t\t'postType',\n\t\t\t\t\tpostType,\n\t\t\t\t\tpostId\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ postId, postType ]\n\t);\n\tconst itemWithPermissions = useMemo( () => {\n\t\treturn {\n\t\t\t...item,\n\t\t\tpermissions,\n\t\t};\n\t}, [ item, permissions ] );\n\tconst allActions = usePostActions( { postType, onActionPerformed } );\n\n\tconst actions = useMemo( () => {\n\t\treturn allActions.filter( ( action ) => {\n\t\t\treturn (\n\t\t\t\t! action.isEligible || action.isEligible( itemWithPermissions )\n\t\t\t);\n\t\t} );\n\t}, [ allActions, itemWithPermissions ] );\n\n\treturn (\n\t\t<>\n\t\t\t<Menu placement=\"bottom-end\">\n\t\t\t\t<Menu.TriggerButton\n\t\t\t\t\trender={\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\t\t\tlabel={ __( 'Actions' ) }\n\t\t\t\t\t\t\tdisabled={ ! actions.length }\n\t\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t\t\tclassName=\"editor-all-actions-button\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Menu.Popover>\n\t\t\t\t\t<ActionsDropdownMenuGroup\n\t\t\t\t\t\tactions={ actions }\n\t\t\t\t\t\titems={ [ itemWithPermissions ] }\n\t\t\t\t\t\tsetActiveModalAction={ setActiveModalAction }\n\t\t\t\t\t/>\n\t\t\t\t</Menu.Popover>\n\t\t\t</Menu>\n\t\t\t{ !! activeModalAction && (\n\t\t\t\t<ActionModal\n\t\t\t\t\taction={ activeModalAction }\n\t\t\t\t\titems={ [ itemWithPermissions ] }\n\t\t\t\t\tcloseModal={ () => setActiveModalAction( null ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\n// From now on all the functions on this file are copied as from the dataviews packages,\n// The editor packages should not be using the dataviews packages directly,\n// and the dataviews package should not be using the editor packages directly,\n// so duplicating the code here seems like the least bad option.\n\nfunction DropdownMenuItemTrigger( { action, onClick, items } ) {\n\tconst label =\n\t\ttypeof action.label === 'string' ? action.label : action.label( items );\n\treturn (\n\t\t<Menu.Item onClick={ onClick }>\n\t\t\t<Menu.ItemLabel>{ label }</Menu.ItemLabel>\n\t\t</Menu.Item>\n\t);\n}\n\nexport function ActionModal( { action, items, closeModal } ) {\n\tconst label =\n\t\ttypeof action.label === 'string' ? action.label : action.label( items );\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ action.modalHeader || label }\n\t\t\t__experimentalHideHeader={ !! action.hideModalHeader }\n\t\t\tonRequestClose={ closeModal ?? ( () => {} ) }\n\t\t\tfocusOnMount=\"firstContentElement\"\n\t\t\tsize=\"medium\"\n\t\t\toverlayClassName={ `editor-action-modal editor-action-modal__${ kebabCase(\n\t\t\t\taction.id\n\t\t\t) }` }\n\t\t>\n\t\t\t<action.RenderModal items={ items } closeModal={ closeModal } />\n\t\t</Modal>\n\t);\n}\n\nfunction ActionsDropdownMenuGroup( { actions, items, setActiveModalAction } ) {\n\tconst registry = useRegistry();\n\treturn (\n\t\t<Menu.Group>\n\t\t\t{ actions.map( ( action ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<DropdownMenuItemTrigger\n\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tif ( 'RenderModal' in action ) {\n\t\t\t\t\t\t\t\tsetActiveModalAction( action );\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taction.callback( items, { registry } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\titems={ items }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</Menu.Group>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}