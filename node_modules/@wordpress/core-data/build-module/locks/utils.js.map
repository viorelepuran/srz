{"version":3,"names":["deepCopyLocksTreePath","tree","path","newTree","currentNode","branchName","children","locks","getNode","nextNode","iteratePath","iterateDescendants","node","stack","Object","values","length","childNode","pop","push","hasConflictingLock","exclusive","filter","lock"],"sources":["@wordpress/core-data/src/locks/utils.js"],"sourcesContent":["export function deepCopyLocksTreePath( tree, path ) {\n\tconst newTree = { ...tree };\n\tlet currentNode = newTree;\n\tfor ( const branchName of path ) {\n\t\tcurrentNode.children = {\n\t\t\t...currentNode.children,\n\t\t\t[ branchName ]: {\n\t\t\t\tlocks: [],\n\t\t\t\tchildren: {},\n\t\t\t\t...currentNode.children[ branchName ],\n\t\t\t},\n\t\t};\n\t\tcurrentNode = currentNode.children[ branchName ];\n\t}\n\treturn newTree;\n}\n\nexport function getNode( tree, path ) {\n\tlet currentNode = tree;\n\tfor ( const branchName of path ) {\n\t\tconst nextNode = currentNode.children[ branchName ];\n\t\tif ( ! nextNode ) {\n\t\t\treturn null;\n\t\t}\n\t\tcurrentNode = nextNode;\n\t}\n\treturn currentNode;\n}\n\nexport function* iteratePath( tree, path ) {\n\tlet currentNode = tree;\n\tyield currentNode;\n\tfor ( const branchName of path ) {\n\t\tconst nextNode = currentNode.children[ branchName ];\n\t\tif ( ! nextNode ) {\n\t\t\tbreak;\n\t\t}\n\t\tyield nextNode;\n\t\tcurrentNode = nextNode;\n\t}\n}\n\nexport function* iterateDescendants( node ) {\n\tconst stack = Object.values( node.children );\n\twhile ( stack.length ) {\n\t\tconst childNode = stack.pop();\n\t\tyield childNode;\n\t\tstack.push( ...Object.values( childNode.children ) );\n\t}\n}\n\nexport function hasConflictingLock( { exclusive }, locks ) {\n\tif ( exclusive && locks.length ) {\n\t\treturn true;\n\t}\n\n\tif ( ! exclusive && locks.filter( ( lock ) => lock.exclusive ).length ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n"],"mappings":"AAAA,OAAO,SAASA,qBAAqBA,CAAEC,IAAI,EAAEC,IAAI,EAAG;EACnD,MAAMC,OAAO,GAAG;IAAE,GAAGF;EAAK,CAAC;EAC3B,IAAIG,WAAW,GAAGD,OAAO;EACzB,KAAM,MAAME,UAAU,IAAIH,IAAI,EAAG;IAChCE,WAAW,CAACE,QAAQ,GAAG;MACtB,GAAGF,WAAW,CAACE,QAAQ;MACvB,CAAED,UAAU,GAAI;QACfE,KAAK,EAAE,EAAE;QACTD,QAAQ,EAAE,CAAC,CAAC;QACZ,GAAGF,WAAW,CAACE,QAAQ,CAAED,UAAU;MACpC;IACD,CAAC;IACDD,WAAW,GAAGA,WAAW,CAACE,QAAQ,CAAED,UAAU,CAAE;EACjD;EACA,OAAOF,OAAO;AACf;AAEA,OAAO,SAASK,OAAOA,CAAEP,IAAI,EAAEC,IAAI,EAAG;EACrC,IAAIE,WAAW,GAAGH,IAAI;EACtB,KAAM,MAAMI,UAAU,IAAIH,IAAI,EAAG;IAChC,MAAMO,QAAQ,GAAGL,WAAW,CAACE,QAAQ,CAAED,UAAU,CAAE;IACnD,IAAK,CAAEI,QAAQ,EAAG;MACjB,OAAO,IAAI;IACZ;IACAL,WAAW,GAAGK,QAAQ;EACvB;EACA,OAAOL,WAAW;AACnB;AAEA,OAAO,UAAUM,WAAWA,CAAET,IAAI,EAAEC,IAAI,EAAG;EAC1C,IAAIE,WAAW,GAAGH,IAAI;EACtB,MAAMG,WAAW;EACjB,KAAM,MAAMC,UAAU,IAAIH,IAAI,EAAG;IAChC,MAAMO,QAAQ,GAAGL,WAAW,CAACE,QAAQ,CAAED,UAAU,CAAE;IACnD,IAAK,CAAEI,QAAQ,EAAG;MACjB;IACD;IACA,MAAMA,QAAQ;IACdL,WAAW,GAAGK,QAAQ;EACvB;AACD;AAEA,OAAO,UAAUE,kBAAkBA,CAAEC,IAAI,EAAG;EAC3C,MAAMC,KAAK,GAAGC,MAAM,CAACC,MAAM,CAAEH,IAAI,CAACN,QAAS,CAAC;EAC5C,OAAQO,KAAK,CAACG,MAAM,EAAG;IACtB,MAAMC,SAAS,GAAGJ,KAAK,CAACK,GAAG,CAAC,CAAC;IAC7B,MAAMD,SAAS;IACfJ,KAAK,CAACM,IAAI,CAAE,GAAGL,MAAM,CAACC,MAAM,CAAEE,SAAS,CAACX,QAAS,CAAE,CAAC;EACrD;AACD;AAEA,OAAO,SAASc,kBAAkBA,CAAE;EAAEC;AAAU,CAAC,EAAEd,KAAK,EAAG;EAC1D,IAAKc,SAAS,IAAId,KAAK,CAACS,MAAM,EAAG;IAChC,OAAO,IAAI;EACZ;EAEA,IAAK,CAAEK,SAAS,IAAId,KAAK,CAACe,MAAM,CAAIC,IAAI,IAAMA,IAAI,CAACF,SAAU,CAAC,CAACL,MAAM,EAAG;IACvE,OAAO,IAAI;EACZ;EAEA,OAAO,KAAK;AACb","ignoreList":[]}