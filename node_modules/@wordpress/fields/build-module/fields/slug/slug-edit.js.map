{"version":3,"names":["Button","ExternalLink","__experimentalInputControl","InputControl","__experimentalInputControlPrefixWrapper","InputControlPrefixWrapper","__experimentalVStack","VStack","copySmall","useCopyToClipboard","useInstanceId","useDispatch","useCallback","useEffect","useRef","store","noticesStore","safeDecodeURIComponent","__","getSlug","jsx","_jsx","jsxs","_jsxs","SlugEdit","field","onChange","data","id","slug","getValue","item","permalinkTemplate","permalink_template","PERMALINK_POSTNAME_REGEX","prefix","suffix","split","permalinkPrefix","permalinkSuffix","isEditable","test","originalSlugRef","slugToDisplay","current","permalink","link","undefined","onChangeControl","newValue","createNotice","copyButtonRef","isDismissible","type","postUrlSlugDescriptionId","className","children","spacing","href","__next40pxDefaultSize","icon","ref","label","hideLabelFromVision","value","autoComplete","spellCheck","onBlur"],"sources":["@wordpress/fields/src/fields/slug/slug-edit.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tExternalLink,\n\t__experimentalInputControl as InputControl,\n\t__experimentalInputControlPrefixWrapper as InputControlPrefixWrapper,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { copySmall } from '@wordpress/icons';\nimport { useCopyToClipboard, useInstanceId } from '@wordpress/compose';\nimport { useDispatch } from '@wordpress/data';\nimport { useCallback, useEffect, useRef } from '@wordpress/element';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { safeDecodeURIComponent } from '@wordpress/url';\nimport type { DataFormControlProps } from '@wordpress/dataviews';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport type { BasePost } from '../../types';\nimport { getSlug } from './utils';\n\nconst SlugEdit = ( {\n\tfield,\n\tonChange,\n\tdata,\n}: DataFormControlProps< BasePost > ) => {\n\tconst { id } = field;\n\n\tconst slug = field.getValue( { item: data } ) || getSlug( data );\n\tconst permalinkTemplate = data.permalink_template || '';\n\tconst PERMALINK_POSTNAME_REGEX = /%(?:postname|pagename)%/;\n\tconst [ prefix, suffix ] = permalinkTemplate.split(\n\t\tPERMALINK_POSTNAME_REGEX\n\t);\n\tconst permalinkPrefix = prefix;\n\tconst permalinkSuffix = suffix;\n\tconst isEditable = PERMALINK_POSTNAME_REGEX.test( permalinkTemplate );\n\tconst originalSlugRef = useRef( slug );\n\tconst slugToDisplay = slug || originalSlugRef.current;\n\tconst permalink = isEditable\n\t\t? `${ permalinkPrefix }${ slugToDisplay }${ permalinkSuffix }`\n\t\t: safeDecodeURIComponent( data.link || '' );\n\n\tuseEffect( () => {\n\t\tif ( slug && originalSlugRef.current === undefined ) {\n\t\t\toriginalSlugRef.current = slug;\n\t\t}\n\t}, [ slug ] );\n\n\tconst onChangeControl = useCallback(\n\t\t( newValue?: string ) =>\n\t\t\tonChange( {\n\t\t\t\t[ id ]: newValue,\n\t\t\t} ),\n\t\t[ id, onChange ]\n\t);\n\n\tconst { createNotice } = useDispatch( noticesStore );\n\n\tconst copyButtonRef = useCopyToClipboard( permalink, () => {\n\t\tcreateNotice( 'info', __( 'Copied Permalink to clipboard.' ), {\n\t\t\tisDismissible: true,\n\t\t\ttype: 'snackbar',\n\t\t} );\n\t} );\n\n\tconst postUrlSlugDescriptionId =\n\t\t'editor-post-url__slug-description-' + useInstanceId( SlugEdit );\n\n\treturn (\n\t\t<fieldset className=\"fields-controls__slug\">\n\t\t\t{ isEditable && (\n\t\t\t\t<VStack>\n\t\t\t\t\t<VStack spacing=\"0px\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Customize the last part of the Permalink.'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ExternalLink href=\"https://wordpress.org/documentation/article/page-post-settings-sidebar/#permalink\">\n\t\t\t\t\t\t\t{ __( 'Learn more' ) }\n\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t</VStack>\n\t\t\t\t\t<InputControl\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tprefix={\n\t\t\t\t\t\t\t<InputControlPrefixWrapper>\n\t\t\t\t\t\t\t\t/\n\t\t\t\t\t\t\t</InputControlPrefixWrapper>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\ticon={ copySmall }\n\t\t\t\t\t\t\t\tref={ copyButtonRef }\n\t\t\t\t\t\t\t\tlabel={ __( 'Copy' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlabel={ __( 'Link' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\tvalue={ slug }\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"fields-controls__slug-input\"\n\t\t\t\t\t\tonChange={ ( newValue?: string ) => {\n\t\t\t\t\t\t\tonChangeControl( newValue );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\tif ( slug === '' ) {\n\t\t\t\t\t\t\t\tonChangeControl( originalSlugRef.current );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\taria-describedby={ postUrlSlugDescriptionId }\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"fields-controls__slug-help\">\n\t\t\t\t\t\t<span className=\"fields-controls__slug-help-visual-label\">\n\t\t\t\t\t\t\t{ __( 'Permalink:' ) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\tclassName=\"fields-controls__slug-help-link\"\n\t\t\t\t\t\t\thref={ permalink }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"fields-controls__slug-help-prefix\">\n\t\t\t\t\t\t\t\t{ permalinkPrefix }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"fields-controls__slug-help-slug\">\n\t\t\t\t\t\t\t\t{ slugToDisplay }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"fields-controls__slug-help-suffix\">\n\t\t\t\t\t\t\t\t{ permalinkSuffix }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t</div>\n\t\t\t\t</VStack>\n\t\t\t) }\n\t\t\t{ ! isEditable && (\n\t\t\t\t<ExternalLink\n\t\t\t\t\tclassName=\"fields-controls__slug-help\"\n\t\t\t\t\thref={ permalink }\n\t\t\t\t>\n\t\t\t\t\t{ permalink }\n\t\t\t\t</ExternalLink>\n\t\t\t) }\n\t\t</fieldset>\n\t);\n};\n\nexport default SlugEdit;\n"],"mappings":"AAAA;AACA;AACA;AACA,SACCA,MAAM,EACNC,YAAY,EACZC,0BAA0B,IAAIC,YAAY,EAC1CC,uCAAuC,IAAIC,yBAAyB,EACpEC,oBAAoB,IAAIC,MAAM,QACxB,uBAAuB;AAC9B,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,kBAAkB,EAAEC,aAAa,QAAQ,oBAAoB;AACtE,SAASC,WAAW,QAAQ,iBAAiB;AAC7C,SAASC,WAAW,EAAEC,SAAS,EAAEC,MAAM,QAAQ,oBAAoB;AACnE,SAASC,KAAK,IAAIC,YAAY,QAAQ,oBAAoB;AAC1D,SAASC,sBAAsB,QAAQ,gBAAgB;AAEvD,SAASC,EAAE,QAAQ,iBAAiB;;AAEpC;AACA;AACA;;AAEA,SAASC,OAAO,QAAQ,SAAS;AAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAElC,MAAMC,QAAQ,GAAGA,CAAE;EAClBC,KAAK;EACLC,QAAQ;EACRC;AACiC,CAAC,KAAM;EACxC,MAAM;IAAEC;EAAG,CAAC,GAAGH,KAAK;EAEpB,MAAMI,IAAI,GAAGJ,KAAK,CAACK,QAAQ,CAAE;IAAEC,IAAI,EAAEJ;EAAK,CAAE,CAAC,IAAIR,OAAO,CAAEQ,IAAK,CAAC;EAChE,MAAMK,iBAAiB,GAAGL,IAAI,CAACM,kBAAkB,IAAI,EAAE;EACvD,MAAMC,wBAAwB,GAAG,yBAAyB;EAC1D,MAAM,CAAEC,MAAM,EAAEC,MAAM,CAAE,GAAGJ,iBAAiB,CAACK,KAAK,CACjDH,wBACD,CAAC;EACD,MAAMI,eAAe,GAAGH,MAAM;EAC9B,MAAMI,eAAe,GAAGH,MAAM;EAC9B,MAAMI,UAAU,GAAGN,wBAAwB,CAACO,IAAI,CAAET,iBAAkB,CAAC;EACrE,MAAMU,eAAe,GAAG5B,MAAM,CAAEe,IAAK,CAAC;EACtC,MAAMc,aAAa,GAAGd,IAAI,IAAIa,eAAe,CAACE,OAAO;EACrD,MAAMC,SAAS,GAAGL,UAAU,GACzB,GAAIF,eAAe,GAAKK,aAAa,GAAKJ,eAAe,EAAG,GAC5DtB,sBAAsB,CAAEU,IAAI,CAACmB,IAAI,IAAI,EAAG,CAAC;EAE5CjC,SAAS,CAAE,MAAM;IAChB,IAAKgB,IAAI,IAAIa,eAAe,CAACE,OAAO,KAAKG,SAAS,EAAG;MACpDL,eAAe,CAACE,OAAO,GAAGf,IAAI;IAC/B;EACD,CAAC,EAAE,CAAEA,IAAI,CAAG,CAAC;EAEb,MAAMmB,eAAe,GAAGpC,WAAW,CAChCqC,QAAiB,IAClBvB,QAAQ,CAAE;IACT,CAAEE,EAAE,GAAIqB;EACT,CAAE,CAAC,EACJ,CAAErB,EAAE,EAAEF,QAAQ,CACf,CAAC;EAED,MAAM;IAAEwB;EAAa,CAAC,GAAGvC,WAAW,CAAEK,YAAa,CAAC;EAEpD,MAAMmC,aAAa,GAAG1C,kBAAkB,CAAEoC,SAAS,EAAE,MAAM;IAC1DK,YAAY,CAAE,MAAM,EAAEhC,EAAE,CAAE,gCAAiC,CAAC,EAAE;MAC7DkC,aAAa,EAAE,IAAI;MACnBC,IAAI,EAAE;IACP,CAAE,CAAC;EACJ,CAAE,CAAC;EAEH,MAAMC,wBAAwB,GAC7B,oCAAoC,GAAG5C,aAAa,CAAEc,QAAS,CAAC;EAEjE,oBACCD,KAAA;IAAUgC,SAAS,EAAC,uBAAuB;IAAAC,QAAA,GACxChB,UAAU,iBACXjB,KAAA,CAAChB,MAAM;MAAAiD,QAAA,gBACNjC,KAAA,CAAChB,MAAM;QAACkD,OAAO,EAAC,KAAK;QAAAD,QAAA,gBACpBnC,IAAA;UAAAmC,QAAA,EACGtC,EAAE,CACH,2CACD;QAAC,CACI,CAAC,eACPG,IAAA,CAACpB,YAAY;UAACyD,IAAI,EAAC,mFAAmF;UAAAF,QAAA,EACnGtC,EAAE,CAAE,YAAa;QAAC,CACP,CAAC;MAAA,CACR,CAAC,eACTG,IAAA,CAAClB,YAAY;QACZwD,qBAAqB;QACrBxB,MAAM,eACLd,IAAA,CAAChB,yBAAyB;UAAAmD,QAAA,EAAC;QAE3B,CAA2B,CAC3B;QACDpB,MAAM,eACLf,IAAA,CAACrB,MAAM;UACN2D,qBAAqB;UACrBC,IAAI,EAAGpD,SAAW;UAClBqD,GAAG,EAAGV,aAAe;UACrBW,KAAK,EAAG5C,EAAE,CAAE,MAAO;QAAG,CACtB,CACD;QACD4C,KAAK,EAAG5C,EAAE,CAAE,MAAO,CAAG;QACtB6C,mBAAmB;QACnBC,KAAK,EAAGnC,IAAM;QACdoC,YAAY,EAAC,KAAK;QAClBC,UAAU,EAAC,OAAO;QAClBb,IAAI,EAAC,MAAM;QACXE,SAAS,EAAC,6BAA6B;QACvC7B,QAAQ,EAAKuB,QAAiB,IAAM;UACnCD,eAAe,CAAEC,QAAS,CAAC;QAC5B,CAAG;QACHkB,MAAM,EAAGA,CAAA,KAAM;UACd,IAAKtC,IAAI,KAAK,EAAE,EAAG;YAClBmB,eAAe,CAAEN,eAAe,CAACE,OAAQ,CAAC;UAC3C;QACD,CAAG;QACH,oBAAmBU;MAA0B,CAC7C,CAAC,eACF/B,KAAA;QAAKgC,SAAS,EAAC,4BAA4B;QAAAC,QAAA,gBAC1CnC,IAAA;UAAMkC,SAAS,EAAC,yCAAyC;UAAAC,QAAA,EACtDtC,EAAE,CAAE,YAAa;QAAC,CACf,CAAC,eACPK,KAAA,CAACtB,YAAY;UACZsD,SAAS,EAAC,iCAAiC;UAC3CG,IAAI,EAAGb,SAAW;UAAAW,QAAA,gBAElBnC,IAAA;YAAMkC,SAAS,EAAC,mCAAmC;YAAAC,QAAA,EAChDlB;UAAe,CACZ,CAAC,eACPjB,IAAA;YAAMkC,SAAS,EAAC,iCAAiC;YAAAC,QAAA,EAC9Cb;UAAa,CACV,CAAC,eACPtB,IAAA;YAAMkC,SAAS,EAAC,mCAAmC;YAAAC,QAAA,EAChDjB;UAAe,CACZ,CAAC;QAAA,CACM,CAAC;MAAA,CACX,CAAC;IAAA,CACC,CACR,EACC,CAAEC,UAAU,iBACbnB,IAAA,CAACpB,YAAY;MACZsD,SAAS,EAAC,4BAA4B;MACtCG,IAAI,EAAGb,SAAW;MAAAW,QAAA,EAEhBX;IAAS,CACE,CACd;EAAA,CACQ,CAAC;AAEb,CAAC;AAED,eAAerB,QAAQ","ignoreList":[]}