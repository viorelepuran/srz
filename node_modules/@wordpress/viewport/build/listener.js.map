{"version":3,"names":["_compose","require","_data","_store","addDimensionsEventListener","breakpoints","operators","setIsMatching","debounce","values","Object","fromEntries","queries","map","key","query","matches","dispatch","store","leading","operatorEntries","entries","flatMap","name","width","operator","condition","list","window","matchMedia","addEventListener","flush","_default","exports","default"],"sources":["@wordpress/viewport/src/listener.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { debounce } from '@wordpress/compose';\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store } from './store';\n\nconst addDimensionsEventListener = ( breakpoints, operators ) => {\n\t/**\n\t * Callback invoked when media query state should be updated. Is invoked a\n\t * maximum of one time per call stack.\n\t */\n\tconst setIsMatching = debounce(\n\t\t() => {\n\t\t\tconst values = Object.fromEntries(\n\t\t\t\tqueries.map( ( [ key, query ] ) => [ key, query.matches ] )\n\t\t\t);\n\t\t\tdispatch( store ).setIsMatching( values );\n\t\t},\n\t\t0,\n\t\t{ leading: true }\n\t);\n\n\t/**\n\t * Hash of breakpoint names with generated MediaQueryList for corresponding\n\t * media query.\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList\n\t *\n\t * @type {Object<string,MediaQueryList>}\n\t */\n\tconst operatorEntries = Object.entries( operators );\n\tconst queries = Object.entries( breakpoints ).flatMap(\n\t\t( [ name, width ] ) => {\n\t\t\treturn operatorEntries.map( ( [ operator, condition ] ) => {\n\t\t\t\tconst list = window.matchMedia(\n\t\t\t\t\t`(${ condition }: ${ width }px)`\n\t\t\t\t);\n\t\t\t\tlist.addEventListener( 'change', setIsMatching );\n\t\t\t\treturn [ `${ operator } ${ name }`, list ];\n\t\t\t} );\n\t\t}\n\t);\n\n\twindow.addEventListener( 'orientationchange', setIsMatching );\n\n\t// Set initial values.\n\tsetIsMatching();\n\tsetIsMatching.flush();\n};\n\nexport default addDimensionsEventListener;\n"],"mappings":";;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAKA,IAAAE,MAAA,GAAAF,OAAA;AATA;AACA;AACA;;AAIA;AACA;AACA;;AAGA,MAAMG,0BAA0B,GAAGA,CAAEC,WAAW,EAAEC,SAAS,KAAM;EAChE;AACD;AACA;AACA;EACC,MAAMC,aAAa,GAAG,IAAAC,iBAAQ,EAC7B,MAAM;IACL,MAAMC,MAAM,GAAGC,MAAM,CAACC,WAAW,CAChCC,OAAO,CAACC,GAAG,CAAE,CAAE,CAAEC,GAAG,EAAEC,KAAK,CAAE,KAAM,CAAED,GAAG,EAAEC,KAAK,CAACC,OAAO,CAAG,CAC3D,CAAC;IACD,IAAAC,cAAQ,EAAEC,YAAM,CAAC,CAACX,aAAa,CAAEE,MAAO,CAAC;EAC1C,CAAC,EACD,CAAC,EACD;IAAEU,OAAO,EAAE;EAAK,CACjB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,MAAMC,eAAe,GAAGV,MAAM,CAACW,OAAO,CAAEf,SAAU,CAAC;EACnD,MAAMM,OAAO,GAAGF,MAAM,CAACW,OAAO,CAAEhB,WAAY,CAAC,CAACiB,OAAO,CACpD,CAAE,CAAEC,IAAI,EAAEC,KAAK,CAAE,KAAM;IACtB,OAAOJ,eAAe,CAACP,GAAG,CAAE,CAAE,CAAEY,QAAQ,EAAEC,SAAS,CAAE,KAAM;MAC1D,MAAMC,IAAI,GAAGC,MAAM,CAACC,UAAU,CAC7B,IAAKH,SAAS,KAAOF,KAAK,KAC3B,CAAC;MACDG,IAAI,CAACG,gBAAgB,CAAE,QAAQ,EAAEvB,aAAc,CAAC;MAChD,OAAO,CAAE,GAAIkB,QAAQ,IAAMF,IAAI,EAAG,EAAEI,IAAI,CAAE;IAC3C,CAAE,CAAC;EACJ,CACD,CAAC;EAEDC,MAAM,CAACE,gBAAgB,CAAE,mBAAmB,EAAEvB,aAAc,CAAC;;EAE7D;EACAA,aAAa,CAAC,CAAC;EACfA,aAAa,CAACwB,KAAK,CAAC,CAAC;AACtB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEa9B,0BAA0B","ignoreList":[]}