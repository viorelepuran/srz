{"version":3,"names":["debounce","dispatch","store","addDimensionsEventListener","breakpoints","operators","setIsMatching","values","Object","fromEntries","queries","map","key","query","matches","leading","operatorEntries","entries","flatMap","name","width","operator","condition","list","window","matchMedia","addEventListener","flush"],"sources":["@wordpress/viewport/src/listener.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { debounce } from '@wordpress/compose';\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store } from './store';\n\nconst addDimensionsEventListener = ( breakpoints, operators ) => {\n\t/**\n\t * Callback invoked when media query state should be updated. Is invoked a\n\t * maximum of one time per call stack.\n\t */\n\tconst setIsMatching = debounce(\n\t\t() => {\n\t\t\tconst values = Object.fromEntries(\n\t\t\t\tqueries.map( ( [ key, query ] ) => [ key, query.matches ] )\n\t\t\t);\n\t\t\tdispatch( store ).setIsMatching( values );\n\t\t},\n\t\t0,\n\t\t{ leading: true }\n\t);\n\n\t/**\n\t * Hash of breakpoint names with generated MediaQueryList for corresponding\n\t * media query.\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList\n\t *\n\t * @type {Object<string,MediaQueryList>}\n\t */\n\tconst operatorEntries = Object.entries( operators );\n\tconst queries = Object.entries( breakpoints ).flatMap(\n\t\t( [ name, width ] ) => {\n\t\t\treturn operatorEntries.map( ( [ operator, condition ] ) => {\n\t\t\t\tconst list = window.matchMedia(\n\t\t\t\t\t`(${ condition }: ${ width }px)`\n\t\t\t\t);\n\t\t\t\tlist.addEventListener( 'change', setIsMatching );\n\t\t\t\treturn [ `${ operator } ${ name }`, list ];\n\t\t\t} );\n\t\t}\n\t);\n\n\twindow.addEventListener( 'orientationchange', setIsMatching );\n\n\t// Set initial values.\n\tsetIsMatching();\n\tsetIsMatching.flush();\n};\n\nexport default addDimensionsEventListener;\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,QAAQ,QAAQ,iBAAiB;;AAE1C;AACA;AACA;AACA,SAASC,KAAK,QAAQ,SAAS;AAE/B,MAAMC,0BAA0B,GAAGA,CAAEC,WAAW,EAAEC,SAAS,KAAM;EAChE;AACD;AACA;AACA;EACC,MAAMC,aAAa,GAAGN,QAAQ,CAC7B,MAAM;IACL,MAAMO,MAAM,GAAGC,MAAM,CAACC,WAAW,CAChCC,OAAO,CAACC,GAAG,CAAE,CAAE,CAAEC,GAAG,EAAEC,KAAK,CAAE,KAAM,CAAED,GAAG,EAAEC,KAAK,CAACC,OAAO,CAAG,CAC3D,CAAC;IACDb,QAAQ,CAAEC,KAAM,CAAC,CAACI,aAAa,CAAEC,MAAO,CAAC;EAC1C,CAAC,EACD,CAAC,EACD;IAAEQ,OAAO,EAAE;EAAK,CACjB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,MAAMC,eAAe,GAAGR,MAAM,CAACS,OAAO,CAAEZ,SAAU,CAAC;EACnD,MAAMK,OAAO,GAAGF,MAAM,CAACS,OAAO,CAAEb,WAAY,CAAC,CAACc,OAAO,CACpD,CAAE,CAAEC,IAAI,EAAEC,KAAK,CAAE,KAAM;IACtB,OAAOJ,eAAe,CAACL,GAAG,CAAE,CAAE,CAAEU,QAAQ,EAAEC,SAAS,CAAE,KAAM;MAC1D,MAAMC,IAAI,GAAGC,MAAM,CAACC,UAAU,CAC7B,IAAKH,SAAS,KAAOF,KAAK,KAC3B,CAAC;MACDG,IAAI,CAACG,gBAAgB,CAAE,QAAQ,EAAEpB,aAAc,CAAC;MAChD,OAAO,CAAE,GAAIe,QAAQ,IAAMF,IAAI,EAAG,EAAEI,IAAI,CAAE;IAC3C,CAAE,CAAC;EACJ,CACD,CAAC;EAEDC,MAAM,CAACE,gBAAgB,CAAE,mBAAmB,EAAEpB,aAAc,CAAC;;EAE7D;EACAA,aAAa,CAAC,CAAC;EACfA,aAAa,CAACqB,KAAK,CAAC,CAAC;AACtB,CAAC;AAED,eAAexB,0BAA0B","ignoreList":[]}